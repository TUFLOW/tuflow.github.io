<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Section 4 Simulation construction | TUFLOW CATCH User Manual</title>
  <meta name="description" content="Section 4 Simulation construction | TUFLOW CATCH User Manual" />
  <meta name="generator" content="bookdown 0.33 and GitBook 2.6.7" />

  <meta property="og:title" content="Section 4 Simulation construction | TUFLOW CATCH User Manual" />
  <meta property="og:type" content="book" />
  <meta property="og:image" content="https://docs.tuflow.com/catch/manual/2024.2/images/TUFLOW%20Catch-01-01.png" />
  <meta property="og:description" content="Section 4 Simulation construction | TUFLOW CATCH User Manual" />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Section 4 Simulation construction | TUFLOW CATCH User Manual" />
  
  <meta name="twitter:description" content="Section 4 Simulation construction | TUFLOW CATCH User Manual" />
  <meta name="twitter:image" content="https://docs.tuflow.com/catch/manual/2024.2/images/TUFLOW%20Catch-01-01.png" />

<meta name="author" content="" />



  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  <link rel="shortcut icon" href="images/TUFLOW.ico" type="image/x-icon" />
<link rel="prev" href="ProcessDescriptions-1.html"/>
<link rel="next" href="SimulationExecution-1.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>
<script src="libs/kePrint-0.0.1/kePrint.js"></script>
<link href="libs/lightable-0.0.1/lightable.css" rel="stylesheet" />
<link href="libs/bsTable-3.3.7/bootstrapTable.min.css" rel="stylesheet" />
<script src="libs/bsTable-3.3.7/bootstrapTable.js"></script>



<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<link rel="stylesheet" href="css/style.css" type="text/css" />
<link rel="stylesheet" href="css/toc.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="https://www.tuflow.com"><img src="images/1024in300px_Blue-01.svg" style="width:246px;height:68px;"></a></li>

<li class="divider"></li>
<li><a href="index.html#section" id="toc-section"></a></li>
<li class="chapter" data-level="" data-path="introduction.html"><a href="introduction.html"><i class="fa fa-check"></i>Introduction</a>
<ul>
<li class="chapter" data-level="" data-path="introduction.html"><a href="introduction.html#about-this-manual"><i class="fa fa-check"></i>About this manual</a></li>
<li class="chapter" data-level="" data-path="introduction.html"><a href="introduction.html#how-to-use-this-manual"><i class="fa fa-check"></i>How to use this manual</a>
<ul>
<li class="chapter" data-level="" data-path="introduction.html"><a href="introduction.html#navigation"><i class="fa fa-check"></i>Navigation</a></li>
<li class="chapter" data-level="" data-path="introduction.html"><a href="introduction.html#searching"><i class="fa fa-check"></i>Searching</a></li>
<li class="chapter" data-level="" data-path="introduction.html"><a href="introduction.html#tables"><i class="fa fa-check"></i>Tables</a></li>
<li class="chapter" data-level="" data-path="introduction.html"><a href="introduction.html#commands"><i class="fa fa-check"></i>Commands</a></li>
<li class="chapter" data-level="" data-path="introduction.html"><a href="introduction.html#parameter-notation"><i class="fa fa-check"></i>Parameter notation</a></li>
<li class="chapter" data-level="" data-path="introduction.html"><a href="introduction.html#feedback"><i class="fa fa-check"></i>Feedback</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="1" data-path="Overview-1.html"><a href="Overview-1.html"><i class="fa fa-check"></i><b>1</b> Overview</a>
<ul>
<li class="chapter" data-level="1.1" data-path="Overview-1.html"><a href="Overview-1.html#OverviewContext-2"><i class="fa fa-check"></i><b>1.1</b> Context</a></li>
<li class="chapter" data-level="1.2" data-path="Overview-1.html"><a href="Overview-1.html#Features-2"><i class="fa fa-check"></i><b>1.2</b> Features</a></li>
<li class="chapter" data-level="1.3" data-path="Overview-1.html"><a href="Overview-1.html#Configs-2"><i class="fa fa-check"></i><b>1.3</b> Configurations</a></li>
<li class="chapter" data-level="1.4" data-path="Overview-1.html"><a href="Overview-1.html#Science-2"><i class="fa fa-check"></i><b>1.4</b> Science</a></li>
<li class="chapter" data-level="1.5" data-path="Overview-1.html"><a href="Overview-1.html#Support-2"><i class="fa fa-check"></i><b>1.5</b> Support</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="Architecture-1.html"><a href="Architecture-1.html"><i class="fa fa-check"></i><b>2</b> Architecture</a>
<ul>
<li class="chapter" data-level="2.1" data-path="Architecture-1.html"><a href="Architecture-1.html#ArchitectureContext-2"><i class="fa fa-check"></i><b>2.1</b> Context</a></li>
<li class="chapter" data-level="2.2" data-path="Architecture-1.html"><a href="Architecture-1.html#CAIntent-2"><i class="fa fa-check"></i><b>2.2</b> Intention</a></li>
<li class="chapter" data-level="2.3" data-path="Architecture-1.html"><a href="Architecture-1.html#CA-2"><i class="fa fa-check"></i><b>2.3</b> Core architecture</a>
<ul>
<li class="chapter" data-level="2.3.1" data-path="Architecture-1.html"><a href="Architecture-1.html#ExCoord-3"><i class="fa fa-check"></i><b>2.3.1</b> Execution coordination</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="ProcessDescriptions-1.html"><a href="ProcessDescriptions-1.html"><i class="fa fa-check"></i><b>3</b> Process descriptions</a>
<ul>
<li class="chapter" data-level="3.1" data-path="ProcessDescriptions-1.html"><a href="ProcessDescriptions-1.html#ProcessDescriptionsGeo-2"><i class="fa fa-check"></i><b>3.1</b> Geolocation</a></li>
<li class="chapter" data-level="3.2" data-path="ProcessDescriptions-1.html"><a href="ProcessDescriptions-1.html#ProcessDescriptionsPollExp-2"><i class="fa fa-check"></i><b>3.2</b> Pollutant export</a>
<ul>
<li class="chapter" data-level="3.2.1" data-path="ProcessDescriptions-1.html"><a href="ProcessDescriptions-1.html#ProcessDescriptionsConst-3"><i class="fa fa-check"></i><b>3.2.1</b> Constant</a></li>
<li class="chapter" data-level="3.2.2" data-path="ProcessDescriptions-1.html"><a href="ProcessDescriptions-1.html#ProcessDescriptionsTS-3"><i class="fa fa-check"></i><b>3.2.2</b> Timeseries</a></li>
<li class="chapter" data-level="3.2.3" data-path="ProcessDescriptions-1.html"><a href="ProcessDescriptions-1.html#ProcessDescriptionsMats-3"><i class="fa fa-check"></i><b>3.2.3</b> Material based export</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="SimulationConstruction-1.html"><a href="SimulationConstruction-1.html"><i class="fa fa-check"></i><b>4</b> Simulation construction</a>
<ul>
<li class="chapter" data-level="4.1" data-path="SimulationConstruction-1.html"><a href="SimulationConstruction-1.html#SimulationConstructionContext-2"><i class="fa fa-check"></i><b>4.1</b> Context</a></li>
<li class="chapter" data-level="4.2" data-path="SimulationConstruction-1.html"><a href="SimulationConstruction-1.html#SCIntent-2"><i class="fa fa-check"></i><b>4.2</b> Usage intent</a></li>
<li class="chapter" data-level="4.3" data-path="SimulationConstruction-1.html"><a href="SimulationConstruction-1.html#SimulationConstructionInit-2"><i class="fa fa-check"></i><b>4.3</b> Initialisation</a></li>
<li class="chapter" data-level="4.4" data-path="SimulationConstruction-1.html"><a href="SimulationConstruction-1.html#SCGeneral-2"><i class="fa fa-check"></i><b>4.4</b> General arrangement</a>
<ul>
<li class="chapter" data-level="4.4.1" data-path="SimulationConstruction-1.html"><a href="SimulationConstruction-1.html#SCGeneralFS-3"><i class="fa fa-check"></i><b>4.4.1</b> Folder structure</a></li>
<li class="chapter" data-level="4.4.2" data-path="SimulationConstruction-1.html"><a href="SimulationConstruction-1.html#SCGeneralWF-3"><i class="fa fa-check"></i><b>4.4.2</b> Intended workflow</a></li>
</ul></li>
<li class="chapter" data-level="4.5" data-path="SimulationConstruction-1.html"><a href="SimulationConstruction-1.html#SCTCC-2"><i class="fa fa-check"></i><b>4.5</b> TUFLOW CATCH control file</a>
<ul>
<li class="chapter" data-level="4.5.1" data-path="SimulationConstruction-1.html"><a href="SimulationConstruction-1.html#SCTCCGlobal-3"><i class="fa fa-check"></i><b>4.5.1</b> Global commands</a></li>
<li class="chapter" data-level="4.5.2" data-path="SimulationConstruction-1.html"><a href="SimulationConstruction-1.html#SCTCCHPC-3"><i class="fa fa-check"></i><b>4.5.2</b> Catchment hydraulic model (TUFLOW HPC) commands</a></li>
<li class="chapter" data-level="4.5.3" data-path="SimulationConstruction-1.html"><a href="SimulationConstruction-1.html#SCTCCPollExp-3"><i class="fa fa-check"></i><b>4.5.3</b> Pollutant export model commands</a></li>
<li class="chapter" data-level="4.5.4" data-path="SimulationConstruction-1.html"><a href="SimulationConstruction-1.html#SCTCCFV-3"><i class="fa fa-check"></i><b>4.5.4</b> Receiving model (TUFLOW FV) commands</a></li>
</ul></li>
<li class="chapter" data-level="4.6" data-path="SimulationConstruction-1.html"><a href="SimulationConstruction-1.html#SCTCSum-3"><i class="fa fa-check"></i><b>4.6</b> Construction summary</a>
<ul>
<li class="chapter" data-level="4.6.1" data-path="SimulationConstruction-1.html"><a href="SimulationConstruction-1.html#SCTCSumSupCons-3"><i class="fa fa-check"></i><b>4.6.1</b> Supported configurations</a></li>
<li class="chapter" data-level="4.6.2" data-path="SimulationConstruction-1.html"><a href="SimulationConstruction-1.html#SCTCSumOthCons-3"><i class="fa fa-check"></i><b>4.6.2</b> Other configurations</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="5" data-path="SimulationExecution-1.html"><a href="SimulationExecution-1.html"><i class="fa fa-check"></i><b>5</b> Simulation execution</a>
<ul>
<li class="chapter" data-level="5.1" data-path="SimulationExecution-1.html"><a href="SimulationExecution-1.html#SimulationExecutionContext-2"><i class="fa fa-check"></i><b>5.1</b> Context</a></li>
<li class="chapter" data-level="5.2" data-path="SimulationExecution-1.html"><a href="SimulationExecution-1.html#SimulationExecutionEx-2"><i class="fa fa-check"></i><b>5.2</b> Execution</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="Outputs-1.html"><a href="Outputs-1.html"><i class="fa fa-check"></i><b>6</b> Outputs</a>
<ul>
<li class="chapter" data-level="6.1" data-path="Outputs-1.html"><a href="Outputs-1.html#OutputsContext-2"><i class="fa fa-check"></i><b>6.1</b> Context</a></li>
<li class="chapter" data-level="6.2" data-path="Outputs-1.html"><a href="Outputs-1.html#OutputsConfigs-2"><i class="fa fa-check"></i><b>6.2</b> Core supported configurations</a>
<ul>
<li class="chapter" data-level="6.2.1" data-path="Outputs-1.html"><a href="Outputs-1.html#OutputsHyd-3"><i class="fa fa-check"></i><b>6.2.1</b> Hydrology</a></li>
<li class="chapter" data-level="6.2.2" data-path="Outputs-1.html"><a href="Outputs-1.html#OutputsPEx-3"><i class="fa fa-check"></i><b>6.2.2</b> Pollutant export</a></li>
<li class="chapter" data-level="6.2.3" data-path="Outputs-1.html"><a href="Outputs-1.html#OutpitsInt-3"><i class="fa fa-check"></i><b>6.2.3</b> Integrated</a></li>
</ul></li>
<li class="chapter" data-level="6.3" data-path="Outputs-1.html"><a href="Outputs-1.html#OOutputsOther"><i class="fa fa-check"></i><b>6.3</b> Other outputs</a></li>
</ul></li>
<li class="appendix"><span><b>Appendix</b></span></li>
<li class="chapter" data-level="A" data-path="AppCommands.html"><a href="AppCommands.html"><i class="fa fa-check"></i><b>A</b> Commands</a>
<ul>
<li class="chapter" data-level="A.1" data-path="AppCommands.html"><a href="AppCommands.html#Appcmdsyn"><i class="fa fa-check"></i><b>A.1</b> Command syntax</a></li>
<li class="chapter" data-level="A.2" data-path="AppCommands.html"><a href="AppCommands.html#Appargmtsyn"><i class="fa fa-check"></i><b>A.2</b> Argument syntax</a></li>
<li class="chapter" data-level="A.3" data-path="AppCommands.html"><a href="AppCommands.html#Appcmds"><i class="fa fa-check"></i><b>A.3</b> Commands</a></li>
</ul></li>
<li class="chapter" data-level="B" data-path="AppParams.html"><a href="AppParams.html"><i class="fa fa-check"></i><b>B</b> Parameters</a></li>
<li class="chapter" data-level="C" data-path="AppOutputs.html"><a href="AppOutputs.html"><i class="fa fa-check"></i><b>C</b> Files and data fields</a>
<ul>
<li class="chapter" data-level="C.1" data-path="AppOutputs.html"><a href="AppOutputs.html#AppOutputsSurfConc"><i class="fa fa-check"></i><b>C.1</b> Surface water concentrations</a></li>
<li class="chapter" data-level="C.2" data-path="AppOutputs.html"><a href="AppOutputs.html#AppOutputsGWConc"><i class="fa fa-check"></i><b>C.2</b> Groundwater concentrations</a></li>
<li class="chapter" data-level="C.3" data-path="AppOutputs.html"><a href="AppOutputs.html#AppOutputsDryMass"><i class="fa fa-check"></i><b>C.3</b> Dry mass</a></li>
<li class="chapter" data-level="C.4" data-path="AppOutputs.html"><a href="AppOutputs.html#AppOutputsNetMass"><i class="fa fa-check"></i><b>C.4</b> Net mass</a></li>
<li class="chapter" data-level="C.5" data-path="AppOutputs.html"><a href="AppOutputs.html#AppOutputsOther"><i class="fa fa-check"></i><b>C.5</b> Other outputs</a>
<ul>
<li class="chapter" data-level="C.5.1" data-path="AppOutputs.html"><a href="AppOutputs.html#AppOutputsOtherMB"><i class="fa fa-check"></i><b>C.5.1</b> Mass balance</a></li>
<li class="chapter" data-level="C.5.2" data-path="AppOutputs.html"><a href="AppOutputs.html#AppOutputsOtherRP"><i class="fa fa-check"></i><b>C.5.2</b> Receiving polygon</a></li>
<li class="chapter" data-level="C.5.3" data-path="AppOutputs.html"><a href="AppOutputs.html#AppOutputsOtherFV"><i class="fa fa-check"></i><b>C.5.3</b> TUFLOW FV boundaries</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="D" data-path="AppDemoModel.html"><a href="AppDemoModel.html"><i class="fa fa-check"></i><b>D</b> Demonstration model</a>
<ul>
<li class="chapter" data-level="D.1" data-path="AppDemoModel.html"><a href="AppDemoModel.html#AppDemoModelContext-2"><i class="fa fa-check"></i><b>D.1</b> Context</a></li>
<li class="chapter" data-level="D.2" data-path="AppDemoModel.html"><a href="AppDemoModel.html#AppDemoModelDomain-2"><i class="fa fa-check"></i><b>D.2</b> Domain</a></li>
<li class="chapter" data-level="D.3" data-path="AppDemoModel.html"><a href="AppDemoModel.html#AppDemoModelModels-2"><i class="fa fa-check"></i><b>D.3</b> Numerical models</a>
<ul>
<li class="chapter" data-level="D.3.1" data-path="AppDemoModel.html"><a href="AppDemoModel.html#AppDemoModelModelsHPC-3"><i class="fa fa-check"></i><b>D.3.1</b> TUFLOW HPC</a></li>
<li class="chapter" data-level="D.3.2" data-path="AppDemoModel.html"><a href="AppDemoModel.html#AppDemoModelModelsPE-3"><i class="fa fa-check"></i><b>D.3.2</b> Pollutant export</a></li>
<li class="chapter" data-level="D.3.3" data-path="AppDemoModel.html"><a href="AppDemoModel.html#AppDemoModelModelsFV-3"><i class="fa fa-check"></i><b>D.3.3</b> TUFLOW FV</a></li>
</ul></li>
<li class="chapter" data-level="D.4" data-path="AppDemoModel.html"><a href="AppDemoModel.html#AppDemoModelSuite-2"><i class="fa fa-check"></i><b>D.4</b> Simulation suite</a></li>
<li class="chapter" data-level="D.5" data-path="AppDemoModel.html"><a href="AppDemoModel.html#AppDemoModelDLoad-2"><i class="fa fa-check"></i><b>D.5</b> Downloads</a>
<ul>
<li class="chapter" data-level="D.5.1" data-path="AppDemoModel.html"><a href="AppDemoModel.html#AppDemoModelBins-3"><i class="fa fa-check"></i><b>D.5.1</b> Binaries</a></li>
<li class="chapter" data-level="D.5.2" data-path="AppDemoModel.html"><a href="AppDemoModel.html#AppDemoModelFils-3"><i class="fa fa-check"></i><b>D.5.2</b> Simulation files</a></li>
</ul></li>
<li class="chapter" data-level="D.6" data-path="AppDemoModel.html"><a href="AppDemoModel.html#AppDemoModelExe-2"><i class="fa fa-check"></i><b>D.6</b> Execution</a></li>
<li class="chapter" data-level="D.7" data-path="AppDemoModel.html"><a href="AppDemoModel.html#AppDemoModelResInt-2"><i class="fa fa-check"></i><b>D.7</b> Results interrogation</a>
<ul>
<li class="chapter" data-level="D.7.1" data-path="AppDemoModel.html"><a href="AppDemoModel.html#AppDemoModelJSON-2"><i class="fa fa-check"></i><b>D.7.1</b> Example json file creation</a></li>
<li class="chapter" data-level="D.7.2" data-path="AppDemoModel.html"><a href="AppDemoModel.html#AppDemoModelres-2"><i class="fa fa-check"></i><b>D.7.2</b> Example results</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="E" data-path="AppDemoModelResCont-2.html"><a href="AppDemoModelResCont-2.html"><i class="fa fa-check"></i><b>E</b> Application under version control</a>
<ul>
<li class="chapter" data-level="E.1" data-path="AppDemoModelResCont-2.html"><a href="AppDemoModelResCont-2.html#AppDemoModelResContCtxt-3"><i class="fa fa-check"></i><b>E.1</b> Context</a></li>
<li class="chapter" data-level="E.2" data-path="AppDemoModelResCont-2.html"><a href="AppDemoModelResCont-2.html#AppDemoModelResContUC-3"><i class="fa fa-check"></i><b>E.2</b> Use case</a></li>
<li class="chapter" data-level="E.3" data-path="AppDemoModelResCont-2.html"><a href="AppDemoModelResCont-2.html#AppDemoModelResContWF-3"><i class="fa fa-check"></i><b>E.3</b> Possible workflow #1</a></li>
<li class="chapter" data-level="E.4" data-path="AppDemoModelResCont-2.html"><a href="AppDemoModelResCont-2.html#AppDemoModelResContWF2-3"><i class="fa fa-check"></i><b>E.4</b> Possible workflow #2</a></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://www.tuflow.com"><img src="images/1024in300px_Blue-01.svg" style="width:246px;height:68px;"></a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./"><h0 style="color:rgb(0,85,129);">TUFLOW CATCH User Manual</h0></a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="SimulationConstruction-1" class="section level1 hasAnchor" number="4">
<h1><span class="header-section-number">Section 4</span> Simulation construction<a href="SimulationConstruction-1.html#SimulationConstruction-1" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<div id="SimulationConstructionContext-2" class="section level2 hasAnchor" number="4.1">
<h2><span class="header-section-number">4.1</span> Context<a href="SimulationConstruction-1.html#SimulationConstructionContext-2" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Previous sections have presented the architecture and processes available within TUFLOW CATCH. This section describes the usage intent and construction of a TUFLOW CATCH simulation. This includes the use of the TUFLOW CATCH QGIS plugin, descriptions of all commands, with hyperlinks to the Appendices where commands and explanations are listed in a searchable and sortable table for ease of access.
<span class="math inline">\(\newcommand{\blockindent}{\hspace{0.5cm}}\)</span></p>
</div>
<div id="SCIntent-2" class="section level2 hasAnchor" number="4.2">
<h2><span class="header-section-number">4.2</span> Usage intent<a href="SimulationConstruction-1.html#SCIntent-2" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Depending on the chosen configuration, TUFLOW CATCH coordinates and executes TUFLOW HPC, and/or a pollutant export model and/or TUFLOW FV, all automatically and with no direct user input required to affect any of these linkages. This does not, however, mean that TUFLOW CATCH cannot be run until all models (TUFLOW HPC, pollutant export and TUFLOW FV) are fully constructed, even if the target configuration requires all these models eventually. To the contrary, the intention is that the single TUFLOW CATCH control file is used as the common control file for all model construction from project inception, even where this construction is undertaken in parallel by multiple users.</p>
<p>The reason for this approach is that, for example, the TUFLOW HPC block of the TUFLOW CATCH control file is nothing other than a standard TUFLOW HPC *.tcf control file, with a small number of additional TUFLOW CATCH commands. This is intentional, and means that an experienced (or beginner who refers to the TUFLOW user manual) TUFLOW HPC modeller can follow normal model set up processes and procedures to construct the TUFLOW HPC component of TUFLOW CATCH model, unhindered, but via the TUFLOW CATCH control file arrangement. The same logic applies to users constructing the TUFLOW FV sections of a TUFLOW CATCH model - the TUFLOW HPC sections of the TUFLOW CATCH control file can be turned off and TUFLOW FV model construction commenced as usual through the *.tcc rather than *.fvc control file. Users in teams that adopt this approach may want to consider using versioning control software to manage concurrent multiple user contributions.</p>
<p>It is understood that in some legacy cases, existing TUFLOW HPC or TUFLOW FV models (that were originally built outside TUFLOW CATCH) will need to be brought into a block of a TUFLOW CATCH control file. If this is the case, then the process is a matter of copying and pasting the original control files into the relevant TUFLOW CATCH control file block and populating the supporting folder structures with model data (see following sections). The key change that will be required on pasting into a *.tcc block will be to ensure file path references are correct (see following sections). This is only required from the *.tcc as it points to immediately called files, and no further down the folder tree.</p>
</div>
<div id="SimulationConstructionInit-2" class="section level2 hasAnchor" number="4.3">
<h2><span class="header-section-number">4.3</span> Initialisation<a href="SimulationConstruction-1.html#SimulationConstructionInit-2" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>TUFLOW CATCH requires construction of a suite of folder substructures to support simulations. These should be all co-located at the same folder level underneath a single directory that sits within an overall project directory. These substructures correspond to each of the three products potentially used in a TUFLOW CATCH simulation, and should be named as follows (with ‘TUFLOW’ referring to TUFLOW HPC):</p>
<ul>
<li>TUFLOW</li>
<li>TUFLOWCATCH</li>
<li>TUFLOWFV</li>
</ul>
<p>Each of these substructures has its own subfolder arrangement, consistent with those suggested for standalone TUFLOW HPC and TUFLOW FV modelling studies. For consistency, the suggested TUFLOWCATCH subfolder arrangement is also similar.</p>
<p>To assist with this set up, and indeed more broadly with the initialisation, execution and results interrogation of a TUFLOW CATCH simulation, a freely available TUFLOW CATCH QGIS plugin has been developed. TUFLOW eLearning resources (also free of charge) have been prepared to support deployment and use of this TUFLOW CATCH plugin, and as such the content of that resource is not repeated here. Users are however encouraged to access this resource before initialising their first TUFLOW CATCH simulation: using this plugin is seen as a core component of the set up of a TUFLOW CATCH simulation. Doing so manually is discouraged. The eLearning materials can be accessed by:</p>
<ol>
<li>Registering for TUFLOW eLearning <a href = "https://elearning.tuflow.com/login/index.php">here</a> if not already registered</li>
<li>Emailing <a href="mailto:support@tuflow.com" class="email">support@tuflow.com</a> noting the registered username and with a request access to the TUFLOW CATCH plugin eLearning course</li>
<li>Following instructions subsequently provided to access the course</li>
<li>Completing the course</li>
</ol>
<p>On completion of the course, users will be able to initialise a TUFLOW CATCH simulation in the desired geographical projection system, complete with automatically populated templates for all control files. The sections presented below assume that this QGIS initialisation process has occurred and describe the resulting general arrangements and subsequent construction of a TUFLOW CATCH simulation.</p>
</div>
<div id="SCGeneral-2" class="section level2 hasAnchor" number="4.4">
<h2><span class="header-section-number">4.4</span> General arrangement<a href="SimulationConstruction-1.html#SCGeneral-2" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="SCGeneralFS-3" class="section level3 hasAnchor" number="4.4.1">
<h3><span class="header-section-number">4.4.1</span> Folder structure<a href="SimulationConstruction-1.html#SCGeneralFS-3" class="anchor-section" aria-label="Anchor link to header"></a></h3>
The overarching TUFLOW CATCH folder structure created using the QGIS plugin will appear (at the first tier) as per Figure <a href="SimulationConstruction-1.html#fig:fig-fs">4.1</a> (with the top level folder named ‘Modelling’ selected by the user during initialisation).
<br>
<center>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:fig-fs"></span>
<img src="images/FS.png" alt="**TUFLOW CATCH folder structure**" width="25%" />
<p class="caption">
Figure 4.1: <strong>TUFLOW CATCH folder structure</strong>
</p>
</div>
</center>
The expansion of these folders to one level is as per Figure <a href="SimulationConstruction-1.html#fig:fig-fs2">4.2</a>. The commonality of folder structures should be evident.
<br>
<center>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:fig-fs2"></span>
<img src="images/FS2.png" alt="**TUFLOW CATCH folder structure, expanded**" width="25%" />
<p class="caption">
Figure 4.2: <strong>TUFLOW CATCH folder structure, expanded</strong>
</p>
</div>
</center>
<p>The three relevant executable suites (TUFLOW CATCH, TUFLOW HPC and TUFLOW FV) should be stored in separate subfolders, but within a general EXE folder for neatness, e.g. C:\EXE\TUFLOWCatch\2024.0.0\, C:\EXE\TUFLOW\2023-03-AF\ and C:\EXE\TUFLOWFV\2023.1.1\. The use of version names in the directory structure is important as the TUFLOW software suite allows multiple versions to coexist on the same computer, provided the executable (.exe extension) and libraries (.dll and .ptx extensions) for a specific version are contained within their own sub-folder. The user downloaded version may differ from the examples and the version sub-folder name/s should be amended to reflect the downloaded version/s.</p>
</div>
<div id="SCGeneralWF-3" class="section level3 hasAnchor" number="4.4.2">
<h3><span class="header-section-number">4.4.2</span> Intended workflow<a href="SimulationConstruction-1.html#SCGeneralWF-3" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>The above folder structure supports the overall intended TUFLOW CATCH simulation workflow, such that:</p>
<ul>
<li>The TUFLOWCATCH folder (and control file, see below) is the single point of contact for execution of TUFLOW CATCH simulations, regardless of the combination of TUFLOW HPC or TUFLOW FV models being called</li>
<li>All simulation results (again, regardless of what subsidiary TUFLOW products are called) are written to the TUFLOWCATCH/results subfolder: users should never need to navigate to TUFLOW HPC or TUFLOWFV output/results folders to examine results from TUFLOW CATCH simulations</li>
<li>Users do not need to (and
should not) set up their own *.tcf (TUFLOW HPC) or *.fvc (TUFLOW FV) top level control files in the respective TUFLOW and TUFLOWFV runs directories: TUFLOW CATCH does this automatically based on information provided in the overarching TUFLOW CATCH control file<br />
</li>
<li>Calls to subsidiary first level control files and/or folders from the overarching TUFLOW CATCH control file for both TUFLOW HPC and TUFLOW FV (such as *.tgc (file), bc_dbase (folder) etc. (TUFLOW HPC) or *.fvsed etc. (TUFLOW FV)) need to be provided as relative paths to locations that sit within the respective TUFLOW or TUFLOWFV subfolder arrangements, from the TUFLOW CATCH runs directory</li>
<li>All model data (e.g. grids, GIS, boundaries etc.) should be located within respective subfolder arrangements for TUFLOW and TUFLOW FV</li>
<li>These first level control files (that sit within the TUFLOW or TUFLOWFV directory structures) then should be constructed to make the usual relative calls to all other files and data within respective their subfolder arrangements</li>
<li>It is suggested that users exploit standard text editor capabilities of opening one text file (e.g. a *.tgc file) from from the currently open text file (i.e. the *.tcc) so as to not need to explicitly navigate between subfolder structures. This is most commonly achieved by right clicking on the relative path of the other file (e.g. *.tgc) as specified in the open text file (i.e. the *.tcc) and using the context menu to open the second file, as per Figure <a href="SimulationConstruction-1.html#fig:fig-rightclick">4.3</a> (where the relative path on line 48 was right clicked)</li>
</ul>
<br>
<center>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:fig-rightclick"></span>
<img src="images/rightclick.png" alt="**Opening one text file from the relative path in an already open text file**" width="90%" />
<p class="caption">
Figure 4.3: <strong>Opening one text file from the relative path in an already open text file</strong>
</p>
</div>
</center>
<p>In short, it is intended that the:</p>
<ul>
<li>TUFLOW CATCH control file is the primary point of construction and execution contact</li>
<li>TUFLOW and TUFLOWFV folder substructures contain respective input model data such as GIS layers, DEMs etc</li>
<li>TUFLOWCATCH folder substructure contains model results</li>
</ul>
<p>Subsequent sections describe the TUFLOW CATCH control file set up and model execution.</p>
</div>
</div>
<div id="SCTCC-2" class="section level2 hasAnchor" number="4.5">
<h2><span class="header-section-number">4.5</span> TUFLOW CATCH control file<a href="SimulationConstruction-1.html#SCTCC-2" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>A TUFLOW CATCH simulation is set up and executed by constructing a TUFLOW CATCH control file, extension *.tcc. This file should reside in the TUFLOWCATCH\runs directory set up with the TUFLOW CATCH QGIS plugin. The user is not required to (and should not) construct separate *.tcf or *.fvc control files. This TUFLOW CATCH control file has four separate but related blocks:</p>
<ol>
<li>Global commands</li>
<li>Catchment Hydraulic Model (TUFLOW HPC) commands</li>
<li>Catchment Pollutant Export Model</li>
<li>Receiving Model (TUFLOW FV) commands</li>
</ol>
<p>All blocks must be included in the above order, but the latter three can be optionally switched on and off with a single command (rather than extensive line commenting) to suit modelling needs. For example, a user working only on initial TUFLOW HPC model build and testing tasks can turn off the pollutant export and TUFLOW FV blocks (by specifying these block models to be the keyword ‘none’) and continue building a TUFLOW HPC model as per normal, without the need to always execute all components of TUFLOW CATCH (See <a href="AppCommands.html#TCCHMS">Catchment Hydraulic Model ==</a>, <a href="AppCommands.html#TCCPEMS">Pollutant Export Model ==</a> or <a href="AppCommands.html#TCRS">Receiving Model ==</a>).</p>
<p>Construction of each of the TUFLOW CATCH control file blocks is described in the following sections.</p>
<div id="SCTCCGlobal-3" class="section level3 hasAnchor" number="4.5.1">
<h3><span class="header-section-number">4.5.1</span> Global commands<a href="SimulationConstruction-1.html#SCTCCGlobal-3" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>This initial section of the TUFLOW CATCH control file contains information that is applied equally to both TUFLOW HPC and TUFLOW FV. It is not declared as a block. These global commands are presented following (as hyperlinks to Appendix <a href="AppCommands.html#AppCommands">A</a>), with command argument options also shown where appropriate. All commands are mandatory. Some commands can be overwritten if required within subsequent blocks (see Sections <a href="SimulationConstruction-1.html#SCTCCHPC-3">4.5.2</a> and <a href="SimulationConstruction-1.html#SCTCCFV-3">4.5.4</a>).</p>
<p>Set the hardware to be used, with command arguments as either CPU or GPU:</p>
<blockquote>
<p><a href="introduction.html#TCHardware">Hardware ==</a></p>
</blockquote>
<p>Set the GIS format to be used, with command arguments as either SHP (preferred) or GPKG:</p>
<blockquote>
<p><a href="introduction.html#TCGISFmt">GIS Format ==</a></p>
</blockquote>
<p>Set projection to be used, as a path to a shape file. This will have been prepared by the TUFLOW CATCH plugin:</p>
<blockquote>
<p><a href="introduction.html#TCSHPProj">SHP Projection ==</a></p>
</blockquote>
<p>If GPKG is specified as the format and TUFLOW FV is intended to be included in the TUFLOW CATCH simulation then this will need to be overwritten in the receiving model block (see Section <a href="SimulationConstruction-1.html#SCTCCFV-3">4.5.4</a>) because TUFLOW FV does not yet support geopackage based simulation. Similarly, if GPKG is set, then the projection must also be set as follows</p>
<blockquote>
<p><a href="AppCommands.html#TCGPKGProj">GPKG Projection ==</a></p>
</blockquote>
<p>Set the time format, with command arguments as either ISODATE (dd/mm/yyy hh:mm:ss) or hours (a single float). It is strongly recommended that ISODATE be used for longer simulations, where interpreting hour output timestamps can be difficult:</p>
<blockquote>
<p><a href="introduction.html#TCTimeFmt">Time Format ==</a></p>
</blockquote>
<p>Set the start and end times in the format declared above:</p>
<blockquote>
<p><a href="introduction.html#TCStrtDte">Start Time ==</a></p>
</blockquote>
<blockquote>
<p><a href="introduction.html#TCEndDte">End Time ==</a></p>
</blockquote>
<p>Set the directory for simulation outputs (e.g. xmdf and netcdf results files). This can be set to any location as either a full path (e.g. X:\Project\Results), or as a path relative to the location of the TUFLOW CATCH control file (e.g. ..\results):</p>
<blockquote>
<p><a href="AppCommands.html#TCOutDir">Output Directory ==</a></p>
</blockquote>
<p>Set the directory for writing simulation check files (e.g. .shp files). This can be set to any location as either a full path (e.g. X:\Project\check), or as a path relative to the location of the TUFLOW CATCH control file (e.g. ..\check):</p>
<blockquote>
<p><a href="AppCommands.html#TCChkDir">Write Check Files ==</a></p>
</blockquote>
<p>Set the directory for writing simulation log files. TUFLOW HPC and TUFLOW FV engine log files will be written to this location, as well as module log files (such as the water quality module of TUFLOW FV). This can be set to any location as either a full path (e.g. X:\Project\runs\log), or as a path relative to the location of the TUFLOW CATCH control file (e.g. log - which is the folder created by the TUFLOW CATCH plugin by default):</p>
<blockquote>
<p><a href="AppCommands.html#TCLogDir">Log Folder ==</a></p>
</blockquote>
<p>In order to collect all log files without name conflictions, TUFLOW CATCH renames the various log files before it writes them to the user nominated directory. The renaming convention is as follows:</p>
<ul>
<li>TUFLOW HPC related log files:
<ul>
<li>&lt;<em>TUFLOW CATCH tcc filename root</em>&gt;_catchment_hydraulic_***.t*f</li>
</ul></li>
<li>TUFLOW FV related log files:
<ul>
<li>&lt;<em>TUFLOW CATCH tcc filename root</em>&gt;_receiving_***.*log</li>
</ul></li>
</ul>
<p>where *** indicates a usual extension expected in a log file such as “messages” (for TUFLOW HPC) or “ext_cfl_dt” (for TUFLOW FV) etc. For example, for a TUFLOW CATCH control file called SysModel_001.tcc, the following log files might be produced (depending on simulation options)</p>
<ul>
<li>TUFLOW HPC related log files:
<ul>
<li>SysModel_001_catchment_hydraulic.hpc.tlf</li>
<li>SysModel_001_catchment_hydraulic.tlf</li>
<li>SysModel_001_catchment_hydraulic.tsf</li>
</ul></li>
<li>TUFLOW FV related log files:
<ul>
<li>SysModel_001_receiving_ext_cfl_dt.log</li>
<li>SysModel_001_receiving.log</li>
<li>SysModel_001_receiving.fvwqlog</li>
</ul></li>
</ul>
<p>Set the directory for writing the TUFLOW FV boundary condition files prepared by TUFLOW CATCH from TUFLOW HPC simulation, including boundary condition blocks and underlying data (timeseries) files. This command is required even if TUFLOW FV is not used in a TUFLOW CATCH simulation, in which case template TUFLOW FV files will be written to this location. TUFLOW CATCH also writes TUFLOW HPC diagnostic information to this location (regardless of whether TUFLOW FV is simulated), including timeseries files of predicted catchment-wide summed cumulative volumes and/or masses. These files can be useful for providing system understanding, even when TUFLOW FV is not activated. This directory should be always set as the bc_dbase folder within the TUFLOW CATCH folder substructure (as generated by the TUFLOW CATCH QGIS plugin), as a path relative to the location of the TUFLOW CATCH control file (i.e. ..\bc_dbase):</p>
<blockquote>
<p><a href="AppCommands.html#TCCatchDir">Catch BC Output Folder ==</a></p>
</blockquote>
<p>Set the timestep (in simulation time seconds) at which lines within a boundary condition file for TUFLOW FV (created from TUFLOW HPC predictions) are separated (required even if TUFLOW FV not used). TUFLOW CATCH offers the user the option to set this timestep differently for different types of TUFLOW FV boundaries: nodestrings (Q boundaries that deliver momentum to TUFLOW FV) and lateral inflows (QC boundaries that do not deliver momentum to TUFLOW FV). It would be typical that nodestring boundaries are written at a shorter timestep to lateral boundaries, but this is not mandated, and the user is able to decide how this timestep relates to simulation time and file size constraints:</p>
<blockquote>
<p><a href="AppCommands.html#TCNSOutDt">Catch BC Output Interval Nodestring ==</a><a href="AppParams.html#TCParNSOutDt"><span class="math inline">\(dT_{ns}\)</span></a></p>
</blockquote>
<blockquote>
<p><a href="AppCommands.html#TCLatOutDt">Catch BC Output Interval Lateral ==</a><a href="AppParams.html#TCParLatOutDt"><span class="math inline">\(dT_{lat}\)</span></a></p>
</blockquote>
<p>Set the frequency at which TUFLOW CATCH pauses to write out TUFLOW FV boundary condition files, in units of days (simulation time, required even if TUFLOW FV not used). Setting a value of 1 means that TUFLOW CATCH will hold all boundary information in memory for a day of simulation time, and then update TUFLOW FV boundary files (and summed flow and mass timeseries) with this held memory on a daily basis. For example, if outputs were set to be hourly via either of the above interval commands, then 24 lines would be added to each boundary file at time of writing:</p>
<blockquote>
<p><a href="AppCommands.html#TCCSVwrite">CSV Write Frequency Day ==</a><a href="AppParams.html#TCParCSVwrite"><span class="math inline">\(dT_{csv}\)</span></a></p>
</blockquote>
<p>An example block of these global commands that together configure a TUFLOW CATCH simulation (with clarifying section headers as comments) is:</p>
<pre><code>!________________________________________________________
! GLOBAL COMMANDS

! Hardware
Hardware == GPU

! GIS
GIS Format == SHP
SHP Projection == ..\..\TUFLOW\model\gis\projection.prj

! Simulation settings
Time Format == ISODATE
Start Time == 01/01/2021 00:00:00
End Time == 01/02/2021 00:00:00

! Output folders
Output Directory == X:\Project\Results
Write Check Files == ..\check
Log Folder == ..\log

! Boundary condition configuration
Catch BC Output Folder == ..\bc_dbase
Catch BC Output Interval Nodestring == 900
Catch BC Output Interval Lateral == 10800
CSV Write Frequency Day == 1
</code></pre>
</div>
<div id="SCTCCHPC-3" class="section level3 hasAnchor" number="4.5.2">
<h3><span class="header-section-number">4.5.2</span> Catchment hydraulic model (TUFLOW HPC) commands<a href="SimulationConstruction-1.html#SCTCCHPC-3" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>This block of the TUFLOW CATCH control file contains commands that construct a TUFLOW HPC simulation. These commands are almost entirely those that would be used in setting up a standalone TUFLOW HPC control file (*.tcf), with a small number of additional commands that relate to TUFLOW CATCH.</p>
<p>A number of commands issued in the Global commands section of the *.tcc can be overwritten here if needed. These are:</p>
<blockquote>
<p><a href="introduction.html#TCHardware">Hardware ==</a> <br></p>
</blockquote>
<blockquote>
<p><a href="introduction.html#TCGISFmt">GIS Format ==</a></p>
</blockquote>
<p>If GIS Format is overwritten, then a subsequent new projection file is most likely required to be specified</p>
<blockquote>
<p><a href="introduction.html#TCSHPProj">SHP Projection ==</a></p>
</blockquote>
<p>If GPKG is specified as the GIS format then the projection must also be set as follows</p>
<blockquote>
<p><a href="AppCommands.html#TCGPKGProj">GPKG Projection ==</a></p>
</blockquote>
<p>The catchment hydraulic model definition must be declared as a block that encloses all TUFLOW CATCH and TUFLOW HPC commands. This is different to the global commands section at the top of the TUFLOW CATCH control file, which does not need this encompassing structure.
Set the beginning of the block, with command arguments as either HPC or none, and the end of the block (with no command arguments):</p>
<blockquote>
<p><a href="AppCommands.html#TCCHMS">Catchment Hydraulic Model ==</a></p>
</blockquote>
<p><span class="math inline">\(\blockindent\)</span> …catchment hydraulic model commands… <br>
<span class="math inline">\(\blockindent\)</span> …catchment hydraulic model commands… <br>
<span class="math inline">\(\blockindent\)</span> …catchment hydraulic model commands… <br></p>
<blockquote>
<p><a href="AppCommands.html#TCCHME">End Catchment Hydraulic Model</a></p>
</blockquote>
<p>If the <a href="AppCommands.html#TCCHMS">Catchment Hydraulic Model</a> command is set to none, then catchment simulation is not executed, and TUFLOW FV will either:</p>
<ul>
<li>Read blank (interim) boundary condition files prepared by TUFLOW CATCH. This approach might be adopted for the initial stages of a TUFLOW FV model build, or dry period tidal / thermal stratification calibration of a receiving water, for example, or</li>
<li>Read a suite of TUFLOW FV boundary condition files previously created by TUFLOW HPC, under TUFLOW CATCH running in <strong>Hydrology</strong> or <strong>Integrated</strong> configurations</li>
</ul>
<p>The second approach above might be adopted when an initial <strong>Hydrology</strong> or <strong>Integrated</strong> simulation has been executed and a first pass corresponding suite of TUFLOW FV boundary condition files (that are not final, but at least sufficient for use in parallel preliminary TUFLOW FV calibration processes) has been produced. In this instance if:</p>
<ul>
<li>TUFLOW CATCH run Model_003.tcc (for example) produced initial TUFLOW FV boundary files</li>
<li>The corresponding ..\TUFLOWCatch\bc_dbase\Model_003_catchment_hydraulic.fvcatchbc file could be copied as ..\TUFLOWCatch\bc_dbase\Model_004_catchment_hydraulic.fvcatchbc and</li>
<li>Called automatically in Model_004.tcc by a TUFLOW CATCH simulation that has <a href="AppCommands.html#TCCHMS">Catchment Hydraulic Model ==</a> none</li>
</ul>
<p>This supports TUFLOW FV calibration tasks being executed, without relying on TUFLOW HPC. In order to avoid TUFLOW CATCH overwriting Model_003_catchment_hydraulic.fvcatchbc (which it would normally do if <a href="AppCommands.html#TCCHMS">Catchment Hydraulic Model ==</a> none), the following command is required in the Receiving Model block of Model_004.tcc (the default is OFF)</p>
<blockquote>
<p><a href="AppCommands.html#TCRMPCI">Preserve Catchment Inflows ==</a> ON</p>
</blockquote>
<p>This approach allows the TUFLOW HPC and TUFLOW modellers to progress independently for a time, gradually progressing their respectively calibrations without:</p>
<ul>
<li>Relying on each other to produce boundaries, and</li>
<li>The need to continually rerun TUFLOW HPC to re-produce (identical) TUFLOW FV boundaries</li>
</ul>
<p>This style of collaborative modelling is at the heart of TUFLOW CATCH’s architectural design intent and is a key use case.</p>
<p>The TUFLOW CATCH commands contained within this Catchment Hydraulic Model block are described following, and all are mandatory unless noted otherwise.</p>
<p>Set the directory from which TUFLOW CATCH controls TUFLOW HPC. Unless there is a need to the contrary, this should be set as a relative path to the TUFLOW\runs directory set up by the TUFLOW CATCH QGIS plugin, i.e. ..\..\TUFLOW\runs. Setting this to any other directory is not recommended:</p>
<blockquote>
<p><a href="AppCommands.html#TCRunDir">Runs Directory ==</a></p>
</blockquote>
<p>Set the full or relative path to the location of the the TUFLOW HPC executable (including the name of the executable itself, with .exe extension) to be called by TUFLOW CATCH:</p>
<blockquote>
<p><a href="AppCommands.html#TCHPCEXE">EXE ==</a></p>
</blockquote>
<p>Set the time format for output results. Given that the intention of TUFLOW CATCH is that it support longer term environmental investigations (i.e. not short term detailed ‘traditional’ flood studies), results written in hours format can be difficult to interpret in terms of seasonality, for example. As such, TUFLOW HPC can be instructed to write results in the time format adopted by TUFLOW FV. Doing so is strongly recommended, especially if TUFLOW FV is using the ISODATE format rather than hours:</p>
<blockquote>
<p><a href="AppCommands.html#TCHPCTF">Time Format ==</a> TUFLOWFV</p>
</blockquote>
<p>Set the relationship between hours and dates. TUFLOW HPC reads boundary condition files and executes its internal computations using an hours (rather than date) timestamp, although this is being upgraded in the mid term. In order to coordinate simulation with TUFLOW FV, and to output results in date format, TUFLOW CATCH requires specification of the date that corresponds to zero hours in TUFLOW HPC boundary (and other) files. This command specifies that date at which boundary and other files refer to zero hours. Note the date time format expected, and that the seconds field is excluded:</p>
<blockquote>
<p><a href="AppCommands.html#TCHPCZDate">Zero Date ==</a> &lt;dd/mm/yyyy hh:mm&gt;</p>
</blockquote>
<p>Set TUFLOW HPC to write TUFLOW CATCH related map outputs (e.g. pollutant and other hydraulic xmdf outputs, see Section <a href="Outputs-1.html#Outputs-1">6</a>). This catch command argument can be comma delimited with other outputs if required:</p>
<blockquote>
<p><a href="AppCommands.html#TCHPCMapOut">Output Map Data Types ==</a> catch</p>
</blockquote>
<p><strong>Not mandatory</strong>. If TUFLOW CATCH is to be deployed in the pollutant export configuration (i.e. with no immediate intention to deploy TUFLOW FV, see Section <a href="Overview-1.html#Configs-2">1.3</a>), then the following must be set:</p>
<ul>
<li>The use of TUFLOW FV as a receiving model must be switched off. This is achieved by setting the receiving model block command as follows (see Section <a href="SimulationConstruction-1.html#SCTCCFV-3">4.5.4</a>):</li>
</ul>
<blockquote>
<p><a href="AppCommands.html#TCRS">Receiving Model ==</a> none</p>
</blockquote>
<p>AND</p>
<ul>
<li>A single polygon (either as a standalone file or as part of a previously specified geopackage) that covers the downstream receiving waters must be specified within the Catchment Hydraulic Model block. This polygon does not need any specific attributes, and can be imported from the empties created by the TUFLOW CATCH QGIS plugin, as an rp polygon type. The TUFLOW HPC cells within this polygon will be removed from the TUFLOW HPC simulation. TUFLOW CATCH will not write any TUFLOW FV boundary condition blocks, but will write:
<ul>
<li>Summary timeseries files that describe total water and pollutant mass fluxes entering the defined polygon. These outputs can be useful for scenario to scenario comparisons, for example</li>
</ul></li>
</ul>
<blockquote>
<p><a href="AppCommands.html#TCRecPoly">Receiving Polygon ==</a> &lt;path to polygon or geopackage reference&gt;</p>
</blockquote>
<p>AND</p>
<ul>
<li>A list of comma separated pollutant names that are to be simulated by TUFLOW CATCH and the pollutant export model. Constant or timeseries pollutants are ignored - only pollutants that are specified within a material block (i.e. that wash off or erode) should be included in this list. These pollutants do not need to be TUFLOW FV keywords/names, and can be completely user defined. These names need to exactly match the names used within each material pollutant export block</li>
</ul>
<blockquote>
<p><a href="AppCommands.html#TCPolls">Pollutant ==</a> &lt;name1,name2,name3…&gt;</p>
</blockquote>
<p>TUFLOW CATCH will error if operating in the pollutant export configuration and either of the above commands are missing</p>
<p>Once specified, TUFLOW CATCH will check to ensure that all pollutants have been specified (no more, no less) across material blocks (see Section <a href="SimulationConstruction-1.html#SCTCCPollExpPE-4">4.5.3.3</a>), and error if not.</p>
<p>Following the issuing of these specific TUFLOW CATCH commands, a TUFLOW HPC model can be constructed in the same manner as a standalone model. In this regard:</p>
<ul>
<li>All TUFLOW HPC commands are recognised by TUFLOW CATCH and can be issued unchanged from the usage described in TUFLOW HPC’s manual and/or relevant release notes</li>
<li>TUFLOW HPC commands that reference other subsidiary control files (such as geometry control files, *.tgc etc.) need to use relative paths, and point to the locations with the TUFLOW directory created by the TUFLOW CATCH QGIS plugin, e.g.:</li>
</ul>
<blockquote>
<p>BC Database == ..\..\TUFLOW\bc_dbase\bc_dbase_001.csv</p>
</blockquote>
<ul>
<li>These subsidiary control files can then in turn use path references are per standalone TUFLOW HPC model construction (and point to locations within the same TUFLOW directory structure)</li>
<li>Variables can be set within the TUFLOW CATCH Catchment Hydraulic Model block for reference in any other subsidiary TUFLOW HPC files as per normal, e.g.:</li>
</ul>
<blockquote>
<p>Set Variable 2D_CELL_SIZE == 25</p>
</blockquote>
<ul>
<li>Scenarios and events can be set within the TUFLOW CATCH Catchment Hydraulic Model block for reference in any other subsidiary TUFLOW HPC file IF statements as per normal, e.g.:</li>
</ul>
<blockquote>
<p>Event == wet_year</p>
</blockquote>
<p>Current limitations of the TUFLOW CATCH with regard to setting up TUFLOW HPC simulations include:</p>
<ul>
<li>Whilst events and scenarios can be manually defined and referenced (see above), dynamic assignment of same (using tilda notation in filenames etc.) is not yet supported. Each event or scenario will need a new TUFLOW CATCH control file</li>
</ul>
<p>An example block of these Catchment Hydraulic Model block commands that together configure a TUFLOW HPC simulation within TUFLOW CATCH (with clarifying section headers as comments) is:</p>
<pre><code>!_________________________________________________________________
! CATCHMENT HYDRAULICS
Catchment Hydraulic Model == HPC

    ! Base runs directory and executable
    Runs Directory == ..\..\TUFLOW\runs
    EXE == C:\EXE\TUFLOW_iSP_w64.exe
    Time Format == TUFLOWFV
    Zero Date == 01/01/2021 00:00

    ! GIS
    GIS Format == GPKG
    GPKG Projection == ..\..\TUFLOW\model\gis\Projection.gpkg
    
    ! If operating in Pollutant export configuration
    ! Downstream polygon
    Receiving polygon == ..\..\TUFLOW\model\gis\2d_rp_Demonstration_001_R.shp
    Pollutant == salinity, temperature, Tailings, PFAS

    ! Solver
    HPC DP Check == OFF
    Solution scheme == HPC
    Timestep == 1                                    
    Timestep Maximum == 20     
    
    ! SGS Settings
    SGS == ON
    SGS Sample Target Distance == 1.    
    GRID Format == TIF
    
    ! Gridding
    Set Variable 2D_CELL_SIZE == 10
    
    ! Boundaries
    BC Database == ..\..\TUFLOW\bc_dbase\bc_dbase_001.csv
  
    ! Control files
    Geometry Control File == ..\..\TUFLOW\model\Demo.tgc
    BC Control File == ..\..\TUFLOW\model\Demo_001.tbc
    Read Materials File == ..\..\TUFLOW\model\materials.tmf 
    Read Soils File == ..\..\TUFLOW\model\Demo.tsoilf
    Soil Negative Rainfall Approach == FACTOR
    Set Variable HC == 10000
    Soil Negative Rainfall Factor == 0.2
    
    ! Ouput map configuration 
    Map Output Format == XMDF TIF 
    Map Output Data Types == catch h d V 
    Map Output Interval == 300    
    TIF Map Output Interval == 0       
    TIF Map Output Data Types == h d dt   
    Grid Output Cell Size == &lt;&lt;2D_CELL_SIZE&gt;&gt;

    SGS Map Extent Trim == All
    SGS Depth Output == Cell Average
    Map Cutoff Depth == 0.01

End Catchment Hydraulic Model</code></pre>
</div>
<div id="SCTCCPollExp-3" class="section level3 hasAnchor" number="4.5.3">
<h3><span class="header-section-number">4.5.3</span> Pollutant export model commands<a href="SimulationConstruction-1.html#SCTCCPollExp-3" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>This block of the TUFLOW CATCH control file contains commands that control pollutant export (and other constituent) simulation.</p>
<p>The pollutant model definition must be declared as a block that encloses all commands. This is analogous to the declaration of a catchment hydraulic model.</p>
<p>Set the beginning of the block, with command arguments as either mass accumulation release or none, and the end of the block (with no command arguments). The key phrase <em>mass accumulation release</em> activates all available pollutant export submodels. The keyword none turns off pollutant export simulation and would be used with the <strong>Hydrology</strong> configuration (see Section <a href="Overview-1.html#Configs-2">1.3</a>) or if only TUFLOW FV calibration is being undertaken, for example:</p>
<blockquote>
<p><a href="AppCommands.html#TCCPEMS">Pollutant Export Model ==</a></p>
</blockquote>
<p><span class="math inline">\(\blockindent\)</span> …pollutant export model commands… <br>
<span class="math inline">\(\blockindent\)</span> …pollutant export model commands… <br>
<span class="math inline">\(\blockindent\)</span> …pollutant export model commands… <br></p>
<blockquote>
<p><a href="AppCommands.html#TCCPEME">End Pollutant Export Model</a></p>
</blockquote>
<p>If pollutant export is simulated, then all pollutants (and constituents) declared in the catchment hydraulic model (TUFLOW HPC via Pollutant ==) or receiving model (TUFLOW FV, and including all called modules such as Sediment Transport and Water Quality) must be accounted for with the correct name in the pollutant export block. Each must be assigned either:</p>
<ul>
<li>A constant value/concentration for application to receiving model boundary condition, or</li>
<li>A timeseries value/concentration for application to receiving model boundary conditions, or</li>
<li>A pollutant export model, with supporting parameters, for TUFLOW CATCH pollutant export simulation for every material</li>
</ul>
<p>As such, not all the Pollutant Export Model block TUFLOW CATCH commands are mandatory, but, in combination, need to ensure that all pollutants are specified across the entire TUFLOW HPC domain.</p>
<div id="SCTCCPollExpConst-4" class="section level4 hasAnchor" number="4.5.3.1">
<h4><span class="header-section-number">4.5.3.1</span> Constant<a href="SimulationConstruction-1.html#SCTCCPollExpConst-4" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Constant value/concentrations can be assigned when dynamic simulation is not required, such as for salinity or dissolved oxygen, for example. This specification is applied globally.</p>
<p>Set a constant value/concentration that is applied to downstream receiving model boundary condition files by TUFLOW CATCH. In doing so:</p>
<ul>
<li>The name needs to exactly match that configured by the receiving model (in TUFLOW CATCH’s integrated configuration) or set by the user (in TUFLOW CATCH’s pollutant export configuration), and</li>
<li>The concentration needs to be in the same units produced by the receiving model (in TUFLOW CATCH’s integrated configuration) or expected by the user (in TUFLOW CATCH’s pollutant export configuration)</li>
</ul>
<blockquote>
<p><a href="AppCommands.html#TCPECons">Constant &lt;name&gt; ==</a> &lt;concentration to be applied&gt;</p>
</blockquote>
</div>
<div id="SCTCCPollExpTS-4" class="section level4 hasAnchor" number="4.5.3.2">
<h4><span class="header-section-number">4.5.3.2</span> Timeseries<a href="SimulationConstruction-1.html#SCTCCPollExpTS-4" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Timeseries values/concentrations can be assigned for which dynamic simulation is not required, but which values/concentrations likely vary in time. This might include water temperature specification, for example. This specification is applied globally.</p>
<p>Set a timeseries that is applied to downstream receiving model boundary condition files by TUFLOW CATCH. In doing so:</p>
<ul>
<li>The name needs to exactly match that of variable configured by the receiving model, and</li>
<li>The concentration needs to be in the same units produced by the receiving model</li>
</ul>
<blockquote>
<p><a href="AppCommands.html#TCPETS">Time-series &lt;name&gt; ==</a> &lt;bc name&gt;</p>
</blockquote>
<p>The &lt;bc name&gt; field refers to a name declared in the TUFLOW HPC boundary condition database. For example, ‘temperature_davg’, with the corresponding database entry being (in a database simplified for this example):</p>
<pre><code>Name,Source,Column 1,Column 2,Add Col 1,Mult Col 2,Add Col 2,Column 3,Column 4
temperature_davg,temperature_2021.csv,TUFLOW_Time,Airtemp,,,,,</code></pre>
</div>
<div id="SCTCCPollExpPE-4" class="section level4 hasAnchor" number="4.5.3.3">
<h4><span class="header-section-number">4.5.3.3</span> Pollutant export<a href="SimulationConstruction-1.html#SCTCCPollExpPE-4" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Pollutant export models can be configured within TUFLOW CATCH to simulate the release of pollutants from the ground surface across the TUFLOW HPC model domain. This export is a core intention and capability of TUFLOW CATCH and can be configured as uniform or spatially varied across the TUFLOW HPC domain. Any nonuniform spatial definition uses the material numbers (and corresponding spatial distributions) already configured in the TUFLOW HPC model (i.e. the catchment hydraulic model block described above) and affects this through specification of material blocks in this part of the TUFLOW CATCH control file. These blocks are similar to those deployed by TUFLOW FV.</p>
<p>Configure default (or spatially uniform) pollutant export:</p>
<blockquote>
<p><a href="AppCommands.html#TCCPEMatS">Material ==</a> all</p>
</blockquote>
<p><span class="math inline">\(\blockindent\)</span> …commands… <br>
<span class="math inline">\(\blockindent\)</span> …commands… <br>
<span class="math inline">\(\blockindent\)</span> …commands… <br></p>
<blockquote>
<p><a href="AppCommands.html#TCCPEMatE">End Material</a></p>
</blockquote>
<p>Once these uniform conditions have been set, progressive specifications of material by material pollutant behaviour can be set. These specifications overwrite previous settings on a spatial basis. This stamping-style approach is akin to the way in which digital elevation model inputs can be progressively updated within TUFLOW HPC and TUFLOW FV by specifying a suite of elevation data that overwite each other on a spatiasl basis. In the case of pollutant export properties, this stamping is affected by specifying subsequent material blocks that relate to individual or multiple materials. Up to ten comma separated materials can be specified in one material block:</p>
<blockquote>
<p><a href="AppCommands.html#TCCPEMatS">Material ==</a> MatID1, MatID2, MatID3…, MatID10</p>
</blockquote>
<p><span class="math inline">\(\blockindent\)</span> …commands… <br>
<span class="math inline">\(\blockindent\)</span> …commands… <br>
<span class="math inline">\(\blockindent\)</span> …commands… <br></p>
<blockquote>
<p><a href="AppCommands.html#TCCPEMatE">End Material</a></p>
</blockquote>
<p>Once all material specifications have been processed, TUFLOW CATCH will check that all pollutants have had all export properties specified for the entire TUFLOW HPC domain (i.e. every computational grid cell). This includes accounting for constant and timeseries specifications (which are global and do not need to be applied within material blocks). Using the ‘all’ command argument in the first material block specified and providing information for every pollutant required within that block (and then progressively spatially refining) ensures this will be true. Once the initial uniform material specification has been made, not every pollutant needs to be specified in every subsequent material block - only alterations to the uniform conditions need be made.</p>
<p>Each line within a material block contains a suite of arguments (in the form command==argument, command==argument… etc.), the first of which is always a keyword flagging the model to be used. Although there are some commonalities in subsequent inline commands, these differ according to the pollutant export model specified, as follows. Different pollutant export models can be specified for different pollutants within the same material block if required. The same pollutant export model should be applied to a given pollutant across all materials, albeit with different parameters.</p>
<div id="SCTCCPollExpAW-5" class="section level5 hasAnchor" number="4.5.3.3.1">
<h5><span class="header-section-number">4.5.3.3.1</span> Accumulation and washoff<a href="SimulationConstruction-1.html#SCTCCPollExpAW-5" class="anchor-section" aria-label="Anchor link to header"></a></h5>
<p>Set the model and parameters for the pollutant accumulation and washoff model (see Section <a href="ProcessDescriptions-1.html#ProcessDescriptionsAccWO-3">3.2.3.1</a>). All parameters are mandatory:</p>
<blockquote>
<p>&lt;name&gt;, <a href="introduction.html#TCMethod">Method==</a><a href="ProcessDescriptions-1.html#ProcessDescriptionsAccWO-3">Washoff1</a>, <a href="introduction.html#TCAccR">Rate==</a><a href="AppParams.html#TCParAccR"><span class="math inline">\(R_a\)</span></a>, <a href="introduction.html#TCLimit">Limit==</a><a href="AppParams.html#TCParLacc"><span class="math inline">\(L_{acc}\)</span></a>, <a href="introduction.html#TCTcon">Time Constant==</a><a href="AppParams.html#TCParTcon"><span class="math inline">\(T_c\)</span></a>, <a href="introduction.html#TCRnThrshd">Rain Threshold==</a><a href="AppParams.html#TCParRnThrshd"><span class="math inline">\(R_r\)</span></a>, <a href="introduction.html#TCdThresh">Depth Threshold==</a><a href="AppParams.html#TCPardThresh"><span class="math inline">\(d\)</span></a>, <a href="introduction.html#TCDeposVel">Deposition Velocity==</a><a href="AppParams.html#TCParDeposVel">w_s</a></p>
</blockquote>
<p>The &lt;name&gt; field must correspond to a name designated by TUFLOW FV. The parameters are:</p>
<ul>
<li>Method: keyword ‘Washoff1’ that activates the accumulation washoff model</li>
<li>Rate: the areal rate at which the pollutant accumulates (kg/ha/year)</li>
<li>Limit: the maximum areal mass that can accumulate in the dry store (kg/ha)</li>
<li>Time Constant: a time parameter controlling the pollutant dry store release rate, according to Equation <a href="ProcessDescriptions-1.html#eq:equ-wo">(3.1)</a> (s)</li>
<li>Rain Threshold: the minimum rain rate required to activate release from the dry store (mm/hr)</li>
<li>Depth Threshold: the minimum water depth in a cell required to activate release from the dry store (m)</li>
<li>Deposition Velocity: the velocity at which pollutant in the wet store settles. Used to calculate the mass of pollutant transferred back from the wet to dry store in a model timestep, according to Equation <a href="ProcessDescriptions-1.html#eq:equ-wo-sett">(3.2)</a> (m/day)</li>
</ul>
<p>An example for dissolved organic carbon might be:</p>
<pre><code>WQ_DOC_MG_L, Method==Washoff1, Rate==21.446, Limit==21.446, Time Constant==3600, Rain Threshold==1.0,  Depth Threshold==0.020, Deposition Velocity==0.0</code></pre>
</div>
<div id="SCTCCPollExpSS-5" class="section level5 hasAnchor" number="4.5.3.3.2">
<h5><span class="header-section-number">4.5.3.3.2</span> Shear stress<a href="SimulationConstruction-1.html#SCTCCPollExpSS-5" class="anchor-section" aria-label="Anchor link to header"></a></h5>
<p>Set the model and parameters for the shear stress model (see Section <a href="ProcessDescriptions-1.html#ProcessDescriptionsSS-3">3.2.3.2</a>). All parameters are mandatory:</p>
<blockquote>
<p>&lt;name&gt;, <a href="introduction.html#TCMethod">Method==</a><a href="ProcessDescriptions-1.html#ProcessDescriptionsSS-3">Shear1</a>, Rate==&lt;not used&gt;, <a href="introduction.html#TCLimit">Limit==</a><a href="AppParams.html#TCParLshr"><span class="math inline">\(L_{shr}\)</span></a>, <a href="introduction.html#TCDeposThresh">Deposition Stress==</a><a href="AppParams.html#TCParDeposThresh"><span class="math inline">\(\tau_{cd}\)</span></a>, <a href="introduction.html#TCErosThresh">Erosion Stress==</a><a href="AppParams.html#TCParErosThresh"><span class="math inline">\(\tau_{ce}\)</span></a>, <a href="introduction.html#TCdThresh">Depth Threshold==</a><a href="AppParams.html#TCPardThresh"><span class="math inline">\(d\)</span></a>, <a href="introduction.html#TCDeposVel">Deposition Velocity==</a><a href="AppParams.html#TCParDeposVel">w_s</a>, <a href="introduction.html#TCEr">Erosion Rate==</a><a href="AppParams.html#TCParEr"><span class="math inline">\(E_r\)</span></a></p>
</blockquote>
<p>The &lt;name&gt; field must correspond to a name designated by TUFLOW FV. The parameters are:</p>
<ul>
<li>Method: keyword ‘Shear1’ that activates the shear stress model</li>
<li>Rate: not used, but listed for consistency</li>
<li>Limit: the maximum erosion or deposition that can occur in a cell. Always a positive number (kg/ha)</li>
<li>Deposition Stress: the maximum shear stress for which deposition can occur. Shear stresses below this limit will allow for deposition to occur, according to Equation <a href="ProcessDescriptions-1.html#eq:equ-krone-dp">(3.4)</a>. Should always be less than the specified erosionStress (N/m<span class="math inline">\(^2\)</span>)</li>
<li>Erosion Stress: the minimum shear stress for which erosion can occur. Shear stresses above this limit will allow for erosion to occur, according to Equation <a href="ProcessDescriptions-1.html#eq:equ-mehta-er">(3.3)</a>. Should always be greater than the specified depositionStress (N/m<span class="math inline">\(^2\)</span>)</li>
<li>Depth Threshold: the minimum water depth in a cell required to activate release from the dry store (m)</li>
<li>Deposition Velocity: the velocity at which pollutant in the wet store settles. Used to calculate the mass of pollutant transferred back from the wet to dry store in a model timestep, according to Equation <a href="ProcessDescriptions-1.html#eq:equ-krone-dp">(3.4)</a> (m/day)</li>
<li>Erosion Rate: The maximum rate of erosion of pollutant from the dry store, if erosion conditions are met, according to Equation <a href="ProcessDescriptions-1.html#eq:equ-mehta-er">(3.3)</a> (N/m<span class="math inline">\(^2\)</span>)</li>
</ul>
<p>An example for suspended sediment might be:</p>
<pre><code>SED_TSS, Method==Shear1, Rate==0.0, Limit==1000.0, Depth Threshold==0.02, Deposition Stress==0.01, Erosion Stress==0.5, Deposition Velocity==1.0, Erosion Rate==0.002
</code></pre>
<p>An example for a complete material block might be:</p>
<pre><code>Material == 1,4
    SED_TSS, Method==Shear1, Rate==0.0, Limit==1000.0, Depth Threshold==0.02, Deposition Stress==0.01, Erosion Stress==0.5, Deposition Velocity==1.0, Erosion Rate==0.001
    WQ_DOC_MG_L, Method==Washoff1, Rate==21.446, Limit==21.446, Time Constant==3600, Rain Threshold==1.0,  Depth Threshold==0.020, Deposition Velocity==0.0
End Material</code></pre>
</div>
</div>
<div id="SCTCCPollExpPT-4" class="section level4 hasAnchor" number="4.5.3.4">
<h4><span class="header-section-number">4.5.3.4</span> Pollutant transport<a href="SimulationConstruction-1.html#SCTCCPollExpPT-4" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Once released, pollutants are transported in the surface using TUFLOW’s advection dispersion module. Pollutants are treated as passive tracers and do not undergo non-conservative transformation, other than that allowed by the pollutant export models described above. Pollutants are tracked in both 1D and 2D model components.</p>
<p>If soils have been included in the TUFLOW HPC simulation and infiltration of water occurs, then this water takes with it any previously released pollutants and continues to advect these in the subsurface as it does water. Similarly, if TUFLOW HPC predicts that water travelling in soil layers intersects the ground surface, then any included pollutants are returned to the surface wet store and advected and dispersed as normal. If a particular pollutant is not required to infiltrate from the surface to subsurface, then this infiltration can be turned off (default is on). This is intended to be set as off for particulate pollutants, although is user definable:</p>
<blockquote>
<p><a href="#TCHPCInfil">Infiltration &lt;name&gt; ==</a> off</p>
</blockquote>
<p>An example block of these Pollutant Export Model block commands within TUFLOW CATCH (with clarifying section headers as comments) is:</p>
<pre><code>! _________________________________________________________________
! POLLUTANT EXPORT
Catchment Pollutant Export Model == mass accumulation release

    ! Constant concentrations
    Constant Salinity == 0.0
    Constant WQ_DISS_OXYGEN_MG_L == 8.0
  
    ! Timeseries
    Time-series Temperature == temperature
  
    ! Prohibited infiltrations
    Infiltration SED_TSS == Off
    Infiltration WQ_POC_MG_L == Off
    Infiltration WQ_PON_MG_L == Off
    Infiltration WQ_POP_MG_L == Off
    
    Material == all  
        SED_TSS,          Method==Shear1, Rate==0.0,    Limit==1000.0,    Depth Threshold==0.02, Deposition Stress==0.01, Erosion Stress==0.5, Deposition Velocity==1.2, Erosion Rate==0.001
        WQ_AMMONIUM_MG_L, Method==Washoff1, Rate==0.273,  Limit==0.273,  Time Constant==3600, Rain Threshold==1.0,  Depth Threshold==0.020, Deposition Velocity==0.0
        WQ_NITRATE_MG_L,  Method==Washoff1, Rate==0.662,  Limit==0.662,  Time Constant==3600, Rain Threshold==1.0,  Depth Threshold==0.020, Deposition Velocity==0.0
        WQ_FRP_MG_L,      Method==Washoff1, Rate==0.010,  Limit==0.010,  Time Constant==3600, Rain Threshold==1.0,  Depth Threshold==0.020, Deposition Velocity==0.0
        WQ_DOC_MG_L,      Method==Washoff1, Rate==21.446, Limit==21.446, Time Constant==3600, Rain Threshold==1.0,  Depth Threshold==0.020, Deposition Velocity==0.0
        WQ_DON_MG_L,      Method==Washoff1, Rate==1.021,  Limit==1.021,  Time Constant==3600, Rain Threshold==1.0,  Depth Threshold==0.020, Deposition Velocity==0.0
        WQ_DOP_MG_L,      Method==Washoff1, Rate==0.005,  Limit==0.005,  Time Constant==3600, Rain Threshold==1.0,  Depth Threshold==0.020, Deposition Velocity==0.0
        WQ_POC_MG_L,      Method==Washoff1, Rate==12.154, Limit==12.154, Time Constant==3600, Rain Threshold==1.0,  Depth Threshold==0.020, Deposition Velocity==0.5
        WQ_PON_MG_L,      Method==Washoff1, Rate==1.044,  Limit==1.044,  Time Constant==3600, Rain Threshold==1.0,  Depth Threshold==0.020, Deposition Velocity==0.5
        WQ_POP_MG_L,      Method==Washoff1, Rate==0.061,  Limit==0.061,  Time Constant==3600, Rain Threshold==1.0,  Depth Threshold==0.020, Deposition Velocity==0.5
    End Material

    Material == 2       
        SED_TSS,          Method==Shear1, Rate==0.0,    Limit==2000.0,    Depth Threshold==0.002, Deposition Stress==0.001, Erosion Stress==0.05, Deposition Velocity==1.5, Erosion Rate==0.1
        WQ_AMMONIUM_MG_L, Method==Washoff1, Rate==2.0,  Limit==20.0,  Time Constant==30, Rain Threshold==0.1,  Depth Threshold==0.002, Deposition Velocity==0.0
        WQ_NITRATE_MG_L,  Method==Washoff1, Rate==5.0,  Limit==50.0,  Time Constant==60, Rain Threshold==0.1,  Depth Threshold==0.002, Deposition Velocity==0.0
    End Material

    Material == 3,5      
        WQ_DOP_MG_L,      Method==Washoff1, Rate==0.5,  Limit==0.5,  Time Constant==300, Rain Threshold==10.0,  Depth Threshold==0.120, Deposition Velocity==0.0
    End Material

End Catchment Pollutant Export Model
</code></pre>
</div>
</div>
<div id="SCTCCFV-3" class="section level3 hasAnchor" number="4.5.4">
<h3><span class="header-section-number">4.5.4</span> Receiving model (TUFLOW FV) commands<a href="SimulationConstruction-1.html#SCTCCFV-3" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>This block of the TUFLOW CATCH control file contains commands that construct a TUFLOW FV simulation. These commands are almost entirely those that would be used in setting up a standalone TUFLOW FV control file (*.fvc), with a small number of additional commands that relate to TUFLOW CATCH.</p>
<p>A small number of commands issued in the Global commands section of the *.tcc can be overwritten here if needed (for example if GPKG had been specified in the Global commands for the GIS format). These are:</p>
<blockquote>
<p><a href="introduction.html#TCHardware">Hardware ==</a></p>
</blockquote>
<blockquote>
<p><a href="introduction.html#TCGISFmt">GIS Format ==</a></p>
</blockquote>
<p>If GIS Format is overwritten (as SHP), then a subsequent new projection file is most likely required to be specified</p>
<blockquote>
<p><a href="introduction.html#TCSHPProj">SHP Projection ==</a></p>
</blockquote>
<p>The receiving model definition must be declared as a block that encloses all TUFLOW CATCH and TUFLOW FV commands.</p>
<p>Set the beginning of the block, with command arguments as either TUFLOWFV or none, and the end of the block (with no command arguments):</p>
<blockquote>
<p><a href="AppCommands.html#TCRS">Receiving Model ==</a></p>
</blockquote>
<p><span class="math inline">\(\blockindent\)</span> …receiving model commands… <br>
<span class="math inline">\(\blockindent\)</span> …receiving model commands… <br>
<span class="math inline">\(\blockindent\)</span> …receiving model commands… <br></p>
<blockquote>
<p><a href="AppCommands.html#TCRME">End Receiving Model</a></p>
</blockquote>
<p>If the <a href="#TCRMS">Receiving Model</a> command is set to none, then receiving simulation is not executed. This approach might be adopted for the initial stages of a TUFLOW HPC model build, for example. The TUFLOW CATCH commands contained within this Receiving Model block are described following, and all are mandatory unless noted.</p>
<p>Set the directory from which TUFLOW CATCH controls TUFLOW FV. Unless there is a need to the contrary, this should be set as a relative path to the TUFLOWFV\runs directory set up by the TUFLOW CATCH QGIS plugin, i.e. ..\..\TUFLOWFV\runs. Setting this to any other directory is not recommended:</p>
<blockquote>
<p><a href="AppCommands.html#TCFVRunDir">Runs Directory ==</a></p>
</blockquote>
<p>Set the full or relative path to the location of the the TUFLOW FV executable (including the name of the executable itself, with .exe extension) to be called by TUFLOW CATCH:</p>
<blockquote>
<p><a href="AppCommands.html#TCFVEXE">EXE ==</a></p>
</blockquote>
<p>All TUFLOW FV boundary condition files generated by TUFLOW CATCH are QC type (cell inflow, ‘lateral’, and do not transfer momentum to TUFLOW FV) unless specified otherwise as nodestring (Q type, and do transfer momentum to TUFLOW FV) inflows. All such nodestring inflows need to be drawn as line type objects in a single GIS file and this file declared in the receiving model block as:</p>
<blockquote>
<p><a href="#TCFVnstring">Catchment BC Nodestring ==</a> &lt;path to GIS nodestring file&gt;</p>
</blockquote>
<p>If TUFLOW FV is being executed alone using previous inflow boundaries created by TUFLOW HPC, then the following command will ensure that those previous boundaries are not overwritten. The name of the .fvcatchbc file produced by a previous TUFLOW HPC simulation needs to be renamed to match the name of the subsequent TUFLOW CATCH simulation calling only TUFLOW FV. In this instance if:</p>
<ul>
<li>TUFLOW CATCH run Model_003.tcc (for example) produced initial TUFLOW FV boundary files</li>
<li>The corresponding ..\TUFLOWCatch\bc_dbase\Model_003_catchment_hydraulic.fvcatchbc file could be copied as ..\TUFLOWCatch\bc_dbase\Model_004_catchment_hydraulic.fvcatchbc and</li>
<li>Called automatically in Model_004.tcc by a TUFLOW CATCH simulation that has <a href="AppCommands.html#TCCHMS">Catchment Hydraulic Model ==</a> none</li>
</ul>
<blockquote>
<p><a href="AppCommands.html#TCRMPCI">Preserve Catchment Inflows ==</a> ON</p>
</blockquote>
<p>Following the issuing of these specific TUFLOW CATCH commands, a TUFLOW FV model can be constructed in the same manner as a standalone model. In this regard:</p>
<ul>
<li>All TUFLOW FV commands are recognised by TUFLOW CATCH and can be issued unchanged from the usage described in TUFLOW FV’s manual and/or relevant release notes</li>
<li>TUFLOW FV commands that reference other subsidiary control files (such as geometry control files, *.tgc etc.) or GIS files need to use relative paths, and point to the locations with the TUFLOWFV directory created by the TUFLOW CATCH QGIS plugin, e.g.:</li>
</ul>
<blockquote>
<p>Sediment control file == ..\..\TUFLOWFV\stm\Demo.fvsed</p>
</blockquote>
<ul>
<li>These subsidiary control files can then in turn use path references are per standalone TUFLOW FV model construction (and point to locations within the same TUFLOWFV directory structure)</li>
<li>Include command calls are supported, as relative references to the TUFLOWFV folder should be used</li>
</ul>
<p>An example block of these Receiving Model block commands within TUFLOW CATCH (with clarifying section headers as comments) is:</p>
<pre><code>! _________________________________________________________________
! RECEIVING HYDRODYNAMICS AND WQ

! Start receiving model block
Receiving Model == tuflowfv ! none
    
    ! Base runs directory (to write fvc to)
    Runs Directory == ..\..\TUFLOWFV\runs
    EXE == C:\EXE\TUFLOWFV\2023.1.1\TUFLOWFV.exe
    Preserve Catchment Inflows == ON

    ! General parameters
    Bottom Drag Model == Manning
    Include Salinity == 1,1
    Include Temperature == 1,1
    Include Sediment == 1,0
    Include Heat == 1
    Spatial Order == 1,1
    
    ! Timestep commands
    CFL == 0.95
    Timestep Limits == 1.0,10.0
    Display dt == 900
    
    ! Model parameters
    Cell Wet/Dry Depths == 5.0e-03, 5.0e-02
    Stability Limits == 20.0, 10.0
    CFL == 0.95
    Momentum Mixing Model == Smagorinsky
    Global Horizontal Eddy Viscosity == 0.2
    Global Horizontal Eddy Viscosity Limits == 0.05, 99999.
    Scalar Mixing Model == Smagorinsky
    Global Horizontal Scalar Diffusivity == 0.2
    Global Horizontal Scalar Diffusivity Limits == 0.05, 99999.
    Vertical Mixing Model == External
    Turbulence Update dt == 1800
    Global Vertical Eddy Viscosity Limits == 1.0e-4, 1.0
    Global Vertical Scalar Diffusivity Limits == 0., 1.0
    
    ! Water quality
    Water Quality Model == tuflow
    Water Quality Control File == .\Demonstration_005.fvwq
    Water Quality Model Directory == ..\..\TUFLOWFV\wqm\
    Cell Water Quality Depth == 0.04
    
    ! Sediment transport
    Sediment Control File == ..\..\TUFLOWFV\stm\Demonstration_005.fvsed
    
    ! 2D Geometry
    Geometry 2D == ..\..\TUFLOWFV\model\geo\Demonstration_005.2dm
    Read Grid Zpts == ..\..\TUFLOWFV\model\geo\DEM.asc
    Read GIS Zline == ..\..\TUFLOWFV\model\gis\2d_zln_Demonstration_005_Outlet_R.shp
    
    ! 3D Geometry
    Vertical Mesh Type == z
    Layer Faces == ..\..\TUFLOWFV\model\geo\Demonstration_005_layers.csv
    Sigma Layers == 6
    Min Bottom Layer Thickness == 0.05
    Cell 3D Depth == 0.05
    
    ! Materials
    Global Bottom Roughness == 0.03
    Read GIS Mat == ..\..\TUFLOWFV\model\gis\2d_mat_Demonstration_005_R.shp
    ! Main lake
    Material == 1
        Bottom Roughness == 0.012 
    End Material
    ! Inflows
    Material == 2
        Bottom Roughness == 0.030 
    End Material
    ! Exit
    Material == 3
        Bottom Roughness == 0.012 
    End Material
    
    ! Initial conditions
    Initial Water Level == 4.0
    Initial Salinity == 0.0
    Initial Temperature == 17.0
    Initial Sediment Concentration == 1.0
    Initial WQ Concentration == 7.5,1.0,0.00005,0.00005,0.0031,0.0,0.1,0.0,0.056,0.0,0.0000031,0.0,5.0
    
    ! Large sewage plant
    Read GIS SA == ..\..\TUFLOWFV\model\gis\2d_sa_Demonstration_005_R.shp
    BC == QC_POLY, Sewage_large, ..\..\TUFLOWFV\bc_dbase\Demonstration_005_Sewage_large.csv
        BC Header == Date,Q,sal,temp,sed,DO,Si,Amm,Nit,FRP,FRP_ads,DOC,POC,DON,PON,DOP,POP,Phy
        BC Update dt == 3600.
        Vertical Coordinate Type == depth
        Vertical Distribution File ==  ..\..\TUFLOWFV\bc_dbase\Demonstration_005_Sewage_vert.csv 
    End BC 
    ! Small sewage plant
    BC == QC_POLY, Sewage_small, ..\..\TUFLOWFV\bc_dbase\Demonstration_005_Sewage_small.csv
        BC Header == Date,Q,sal,temp,sed,DO,Si,Amm,Nit,FRP,FRP_ads,DOC,POC,DON,PON,DOP,POP,Phy
        BC Update dt == 3600.
        Vertical Coordinate Type == depth
        Vertical Distribution File ==  ..\..\TUFLOWFV\bc_dbase\Demonstration_005_Sewage_vert.csv 
    End BC 
    ! Offtake
    BC == QC_POLY, Offtake, ..\..\TUFLOWFV\bc_dbase\Demonstration_005_Offtake.csv
        BC Header == Date,Q
        BC Update dt == 3600.
        Vertical Coordinate Type == height
        Vertical Distribution File ==  ..\..\TUFLOWFV\bc_dbase\Demonstration_005_Offtake_vert.csv 
        BC Scale == -1.0
    End BC 
      
    ! Overflow weir
    Read GIS Nodestring == ..\..\TUFLOWFV\model\gis\2d_ns_Demonstration_005_Weir_L.shp
    BC == QN, ovfl_weir, 0.001
    End BC 
     
    ! Catchment nodestrings to be used for linkage
    Catchment BC Nodestring == ..\..\TUFLOWFV\model\gis\2d_ns_Demonstration_005_Inflows_L.shp
        
    ! Meteorology
    BC == W10, ..\..\TUFLOWFV\bc_dbase\met\Demonstration_005_Met_data.csv
        BC Header == Date, u10, v10
        BC Update dt == 3600.
    End BC
    BC == LW_RAD, ..\..\TUFLOWFV\bc_dbase\met\Demonstration_005_Met_data.csv
        BC Header == Date, lw
        BC Update dt == 3600.
    End BC
    BC == SW_RAD, ..\..\TUFLOWFV\bc_dbase\met\Demonstration_005_Met_data.csv
        BC Header == Date, sw
        BC Update dt == 3600.
    End BC
    BC == AIR_TEMP, ..\..\TUFLOWFV\bc_dbase\met\Demonstration_005_Met_data.csv
        BC Header == Date, at
        BC Update dt == 3600.
    End BC
    BC == REL_HUM, ..\..\TUFLOWFV\bc_dbase\met\Demonstration_005_Met_data.csv
        BC Header == Date, rh
        BC Update dt == 3600.
    End BC
    BC == PRECIP, ..\..\TUFLOWFV\bc_dbase\met\Demonstration_005_Met_data.csv
        BC Header == Date, precip
        BC Update dt == 3600.
    End BC
    
    ! Outputs
    Output == netcdf
        Output Parameters == h,v,d,sal,temp,sed_1
        Output Interval == 900.0
        Suffix == HD
    End Output
      
    Output == netcdf
        Output Parameters == wq_all
        Output Interval == 7200
        Suffix == WQ
    End Output

    Output == mass
        Output Interval == 3600.
    End Output
    
    Write Restart dt == 24
    Restart Overwrite == 1

End Receiving Model</code></pre>
</div>
</div>
<div id="SCTCSum-3" class="section level2 hasAnchor" number="4.6">
<h2><span class="header-section-number">4.6</span> Construction summary<a href="SimulationConstruction-1.html#SCTCSum-3" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="SCTCSumSupCons-3" class="section level3 hasAnchor" number="4.6.1">
<h3><span class="header-section-number">4.6.1</span> Supported configurations<a href="SimulationConstruction-1.html#SCTCSumSupCons-3" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>The following presents a summary of the combinations of block level commands that will trigger the core supported TUFLOW CATCH configurations. Only block level commands have been included, unless specific internal commands are relevant.</p>
<div id="SCTCSumHyd-4" class="section level4 hasAnchor" number="4.6.1.1">
<h4><span class="header-section-number">4.6.1.1</span> Hydrology<a href="SimulationConstruction-1.html#SCTCSumHyd-4" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>For simulation of water only:</p>
<pre><code>!________________________________________________________
! GLOBAL SETTINGS

    ...

!_________________________________________________________________
! CATCHMENT HYDRAULICS
Catchment Hydraulic Model == HPC
    
    ...
    
End Catchment Hydraulic Model

! _________________________________________________________________
! POLLUTANT EXPORT
Catchment Pollutant Export Model == none
    
    ...
    
End Catchment Pollutant Export Model

! _________________________________________________________________
! RECEIVING MODEL
Receiving Model == tuflowfv
  
    ...
  
End Receiving Model</code></pre>
<p>If temperature and salinity (or either) are to be simulated:</p>
<pre><code>!________________________________________________________
! GLOBAL SETTINGS
    
    ...

!_________________________________________________________________
! CATCHMENT HYDRAULICS
Catchment Hydraulic Model == HPC
    
    ...
    
End Catchment Hydraulic Model

! _________________________________________________________________
! POLLUTANT EXPORT
Catchment Pollutant Export Model == none

    Constant Salinity == 0.0
    Time-series temperature == temperature

End Catchment Pollutant Export Model

! _________________________________________________________________
! RECEIVING MODEL
Receiving Model == tuflowfv

    ...
    
End Receiving Model</code></pre>
</div>
<div id="SCTCSumPE-4" class="section level4 hasAnchor" number="4.6.1.2">
<h4><span class="header-section-number">4.6.1.2</span> Pollutant export<a href="SimulationConstruction-1.html#SCTCSumPE-4" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<pre><code>!________________________________________________________
! GLOBAL SETTINGS

    ...

!_________________________________________________________________
! CATCHMENT HYDRAULICS
Catchment Hydraulic Model == HPC

    ! Downstream polygon
    Receiving polygon == ..\..\TUFLOW\model\gis\2d_rp_\&lt;name\&gt;_R.shp
    Pollutant == \&lt;name&gt;,\&lt;name&gt;,\&lt;name&gt;...
    ...
    
End Catchment Hydraulic Model

! _________________________________________________________________
! POLLUTANT EXPORT
Catchment Pollutant Export Model == mass accumulation release

    \&lt;names must match pollutant == above\&gt;
    ...
  
End Catchment Pollutant Export Model

! _________________________________________________________________
! RECEIVING MODEL
Receiving Model == none
    
    ...
    
End Receiving Model</code></pre>
</div>
<div id="SCTCSumInt-4" class="section level4 hasAnchor" number="4.6.1.3">
<h4><span class="header-section-number">4.6.1.3</span> Integrated<a href="SimulationConstruction-1.html#SCTCSumInt-4" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<pre><code>!________________________________________________________
! GLOBAL SETTINGS

    ...

!_________________________________________________________________
! CATCHMENT HYDRAULICS
Catchment Hydraulic Model == HPC
 
    ...
    
End Catchment Hydraulic Model

! _________________________________________________________________
! POLLUTANT EXPORT
Catchment Pollutant Export Model == mass accumulation release
  
    ...
  
End Catchment Pollutant Export Model

! _________________________________________________________________
! RECEIVING MODEL
Receiving Model == tuflowfv

    ...
    
End Receiving Model</code></pre>
</div>
</div>
<div id="SCTCSumOthCons-3" class="section level3 hasAnchor" number="4.6.2">
<h3><span class="header-section-number">4.6.2</span> Other configurations<a href="SimulationConstruction-1.html#SCTCSumOthCons-3" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>The following presents a summary of the combinations of block level commands that will trigger the alternative TUFLOW CATCH configurations that might be used during model construction and calibration. Only block level commands have been included, unless specific internal commands are relevant.</p>
<div id="SCTCSumHPC-4" class="section level4 hasAnchor" number="4.6.2.1">
<h4><span class="header-section-number">4.6.2.1</span> TUFLOW HPC calibration only<a href="SimulationConstruction-1.html#SCTCSumHPC-4" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<pre><code>!________________________________________________________
! GLOBAL SETTINGS

    ...

!_________________________________________________________________
! CATCHMENT HYDRAULICS
Catchment Hydraulic Model == HPC

    \&lt;may require a 2d_bc at downstream outlet to release water from domain\&gt;
    ...
    
End Catchment Hydraulic Model

! _________________________________________________________________
! POLLUTANT EXPORT
Catchment Pollutant Export Model == none
    
    ...
    
End Catchment Pollutant Export Model

! _________________________________________________________________
! RECEIVING MODEL
Receiving Model == none
    
    ...
    
End Receiving Model</code></pre>
<p>Alternatively, a TUFLOW CATCH simulation in <strong>Pollutant export</strong> configuration could be set up, with only a constant and zero salinity set. Because this constant is not simulated in the TUFLOW HPC domain, doing so will not adversely affect TUFLOW HPC run times. It will, however, allow for specification of a receiving polygon to let water out of the TUFLOW HPC domain at a location well downstream of calibration comparison gauges.</p>
<pre><code>!________________________________________________________
! GLOBAL SETTINGS
    
    ...

!_________________________________________________________________
! CATCHMENT HYDRAULICS
Catchment Hydraulic Model == HPC
  
    ! Downstream polygon
    Receiving polygon == ..\..\TUFLOW\model\gis\2d_rp_\&lt;name\&gt;_R.shp
    Pollutant == salinity
    ...
    
End Catchment Hydraulic Model

! _________________________________________________________________
! POLLUTANT EXPORT
Catchment Pollutant Export Model == mass accumulation release

    Constant Salinity == 0.0

End Catchment Pollutant Export Model

! _________________________________________________________________
! RECEIVING MODEL
Receiving Model == none

    ...
    
End Receiving Model</code></pre>
</div>
<div id="SCTCSumFV-4" class="section level4 hasAnchor" number="4.6.2.2">
<h4><span class="header-section-number">4.6.2.2</span> TUFLOW FV calibration only<a href="SimulationConstruction-1.html#SCTCSumFV-4" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<pre><code>!________________________________________________________
! GLOBAL SETTINGS

    ...

!_________________________________________________________________
! CATCHMENT HYDRAULICS
Catchment Hydraulic Model == none
    
    ...
    
End Catchment Hydraulic Model

! _________________________________________________________________
! POLLUTANT EXPORT
Catchment Pollutant Export Model == none
    
    ...
    
End Catchment Pollutant Export Model

! _________________________________________________________________
! RECEIVING MODEL
Receiving Model == tuflow fv
    
    ...
    
End Receiving Model</code></pre>
<p>The above will assign blank inflows to TUFLOW from the TUFLOW HPC domain. If TUFLOW FV is to use previously created inflow boundaries from TUFLOW HPC (via TUFLOW CATCH) then the following should be used, after copying the previously created .fvcatchbc file, for example:</p>
<ul>
<li>TUFLOW CATCH run Model_003.tcc (for example) produced initial TUFLOW FV boundary files</li>
<li>The corresponding ..\TUFLOWCatch\bc_dbase\Model_003_catchment_hydraulic.fvcatchbc file could be copied as ..\TUFLOWCatch\bc_dbase\Model_004_catchment_hydraulic.fvcatchbc and</li>
<li>Called automatically in Model_004.tcc</li>
</ul>
<pre><code>!________________________________________________________
! GLOBAL SETTINGS
    
    ...

!_________________________________________________________________
! CATCHMENT HYDRAULICS
Catchment Hydraulic Model == none
    
    ...
    
End Catchment Hydraulic Model

! _________________________________________________________________
! POLLUTANT EXPORT
Catchment Pollutant Export Model == none
    
    ...
    
End Catchment Pollutant Export Model

! _________________________________________________________________
! RECEIVING MODEL
Receiving Model == tuflow fv
  
    Preserve Catchment Inflows == ON
    ...
    
End Receiving Model</code></pre>
<p><img src="images/WQFooter.jpg" width="100%" /></p>

</div>
</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="ProcessDescriptions-1.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="SimulationExecution-1.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": true,
"facebook": true,
"twitter": true,
"linkedin": true,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": false
},
"fontsettings": false,
"edit": null,
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "section"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
