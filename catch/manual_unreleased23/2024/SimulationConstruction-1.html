<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Section 4 Simulation Construction | TUFLOW CATCH User Manual</title>
  <meta name="description" content="Section 4 Simulation Construction | TUFLOW CATCH User Manual" />
  <meta name="generator" content="bookdown 0.33 and GitBook 2.6.7" />

  <meta property="og:title" content="Section 4 Simulation Construction | TUFLOW CATCH User Manual" />
  <meta property="og:type" content="book" />
  <meta property="og:image" content="/images/1024in300px_Blue-01.svg" />
  <meta property="og:description" content="Section 4 Simulation Construction | TUFLOW CATCH User Manual" />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Section 4 Simulation Construction | TUFLOW CATCH User Manual" />
  
  <meta name="twitter:description" content="Section 4 Simulation Construction | TUFLOW CATCH User Manual" />
  <meta name="twitter:image" content="/images/1024in300px_Blue-01.svg" />

<meta name="author" content="" />



  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  <link rel="shortcut icon" href="images/TUFLOW.ico" type="image/x-icon" />
<link rel="prev" href="ProcessDescriptions-1.html"/>
<link rel="next" href="AppCommands.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>
<script src="libs/kePrint-0.0.1/kePrint.js"></script>
<link href="libs/lightable-0.0.1/lightable.css" rel="stylesheet" />
<link href="libs/bsTable-3.3.7/bootstrapTable.min.css" rel="stylesheet" />
<script src="libs/bsTable-3.3.7/bootstrapTable.js"></script>



<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<link rel="stylesheet" href="css/style.css" type="text/css" />
<link rel="stylesheet" href="css/toc.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="https://www.tuflow.com"><img src="images/1024in300px_Blue-01.svg" style="width:246px;height:68px;"></a></li>

<li class="divider"></li>
<li><a href="index.html#section" id="toc-section"></a></li>
<li class="chapter" data-level="" data-path="introduction.html"><a href="introduction.html"><i class="fa fa-check"></i>Introduction</a>
<ul>
<li class="chapter" data-level="" data-path="introduction.html"><a href="introduction.html#about-this-manual"><i class="fa fa-check"></i>About this manual</a></li>
<li class="chapter" data-level="" data-path="introduction.html"><a href="introduction.html#how-to-use-this-manual"><i class="fa fa-check"></i>How to use this manual</a>
<ul>
<li class="chapter" data-level="" data-path="introduction.html"><a href="introduction.html#navigation"><i class="fa fa-check"></i>Navigation</a></li>
<li class="chapter" data-level="" data-path="introduction.html"><a href="introduction.html#searching"><i class="fa fa-check"></i>Searching</a></li>
<li class="chapter" data-level="" data-path="introduction.html"><a href="introduction.html#tables"><i class="fa fa-check"></i>Tables</a></li>
<li class="chapter" data-level="" data-path="introduction.html"><a href="introduction.html#commands"><i class="fa fa-check"></i>Commands</a></li>
<li class="chapter" data-level="" data-path="introduction.html"><a href="introduction.html#parameter-notation"><i class="fa fa-check"></i>Parameter notation</a></li>
<li class="chapter" data-level="" data-path="introduction.html"><a href="introduction.html#feedback"><i class="fa fa-check"></i>Feedback</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="1" data-path="Overview-1.html"><a href="Overview-1.html"><i class="fa fa-check"></i><b>1</b> Overview</a>
<ul>
<li class="chapter" data-level="1.1" data-path="Overview-1.html"><a href="Overview-1.html#OverviewContext-2"><i class="fa fa-check"></i><b>1.1</b> Context</a></li>
<li class="chapter" data-level="1.2" data-path="Overview-1.html"><a href="Overview-1.html#Features-2"><i class="fa fa-check"></i><b>1.2</b> Features</a></li>
<li class="chapter" data-level="1.3" data-path="Overview-1.html"><a href="Overview-1.html#Configs-2"><i class="fa fa-check"></i><b>1.3</b> Configurations</a></li>
<li class="chapter" data-level="1.4" data-path="Overview-1.html"><a href="Overview-1.html#Science-2"><i class="fa fa-check"></i><b>1.4</b> Science</a></li>
<li class="chapter" data-level="1.5" data-path="Overview-1.html"><a href="Overview-1.html#Support-2"><i class="fa fa-check"></i><b>1.5</b> Support</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="Architecture-1.html"><a href="Architecture-1.html"><i class="fa fa-check"></i><b>2</b> Architecture</a>
<ul>
<li class="chapter" data-level="2.1" data-path="Architecture-1.html"><a href="Architecture-1.html#ArchitectureContext-2"><i class="fa fa-check"></i><b>2.1</b> Context</a></li>
<li class="chapter" data-level="2.2" data-path="Architecture-1.html"><a href="Architecture-1.html#CA-2"><i class="fa fa-check"></i><b>2.2</b> Core Architecture</a>
<ul>
<li class="chapter" data-level="2.2.1" data-path="Architecture-1.html"><a href="Architecture-1.html#ExCoord-3"><i class="fa fa-check"></i><b>2.2.1</b> Execution Coordination</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="ProcessDescriptions-1.html"><a href="ProcessDescriptions-1.html"><i class="fa fa-check"></i><b>3</b> Process Descriptions</a>
<ul>
<li class="chapter" data-level="3.1" data-path="ProcessDescriptions-1.html"><a href="ProcessDescriptions-1.html#ProcessDescriptionsGeo-2"><i class="fa fa-check"></i><b>3.1</b> Geolocation</a></li>
<li class="chapter" data-level="3.2" data-path="ProcessDescriptions-1.html"><a href="ProcessDescriptions-1.html#ProcessDescriptionsPollExp-2"><i class="fa fa-check"></i><b>3.2</b> Pollutant Export</a>
<ul>
<li class="chapter" data-level="3.2.1" data-path="ProcessDescriptions-1.html"><a href="ProcessDescriptions-1.html#ProcessDescriptionsConst-3"><i class="fa fa-check"></i><b>3.2.1</b> Constant</a></li>
<li class="chapter" data-level="3.2.2" data-path="ProcessDescriptions-1.html"><a href="ProcessDescriptions-1.html#ProcessDescriptionsTS-3"><i class="fa fa-check"></i><b>3.2.2</b> Timeseries</a></li>
<li class="chapter" data-level="3.2.3" data-path="ProcessDescriptions-1.html"><a href="ProcessDescriptions-1.html#ProcessDescriptionsAccWO-3"><i class="fa fa-check"></i><b>3.2.3</b> Accumulation and washoff</a></li>
<li class="chapter" data-level="3.2.4" data-path="ProcessDescriptions-1.html"><a href="ProcessDescriptions-1.html#ProcessDescriptionsSS-3"><i class="fa fa-check"></i><b>3.2.4</b> Shear Stress</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="SimulationConstruction-1.html"><a href="SimulationConstruction-1.html"><i class="fa fa-check"></i><b>4</b> Simulation Construction</a>
<ul>
<li class="chapter" data-level="4.1" data-path="SimulationConstruction-1.html"><a href="SimulationConstruction-1.html#SimulationConstructionContext-2"><i class="fa fa-check"></i><b>4.1</b> Context</a></li>
<li class="chapter" data-level="4.2" data-path="SimulationConstruction-1.html"><a href="SimulationConstruction-1.html#SCIntent-2"><i class="fa fa-check"></i><b>4.2</b> Usage intent</a></li>
<li class="chapter" data-level="4.3" data-path="SimulationConstruction-1.html"><a href="SimulationConstruction-1.html#SimulationConstructionInit-2"><i class="fa fa-check"></i><b>4.3</b> Initialisation</a></li>
<li class="chapter" data-level="4.4" data-path="SimulationConstruction-1.html"><a href="SimulationConstruction-1.html#SCGeneral-2"><i class="fa fa-check"></i><b>4.4</b> General arrangement</a>
<ul>
<li class="chapter" data-level="4.4.1" data-path="SimulationConstruction-1.html"><a href="SimulationConstruction-1.html#SCGeneralFS-3"><i class="fa fa-check"></i><b>4.4.1</b> Folder structure</a></li>
<li class="chapter" data-level="4.4.2" data-path="SimulationConstruction-1.html"><a href="SimulationConstruction-1.html#SCGeneralWF-3"><i class="fa fa-check"></i><b>4.4.2</b> Intended workflow</a></li>
</ul></li>
<li class="chapter" data-level="4.5" data-path="SimulationConstruction-1.html"><a href="SimulationConstruction-1.html#SCTCC-2"><i class="fa fa-check"></i><b>4.5</b> TUFLOW CATCH control file</a>
<ul>
<li class="chapter" data-level="4.5.1" data-path="SimulationConstruction-1.html"><a href="SimulationConstruction-1.html#SCTCCGlobal-3"><i class="fa fa-check"></i><b>4.5.1</b> Global commands</a></li>
<li class="chapter" data-level="4.5.2" data-path="SimulationConstruction-1.html"><a href="SimulationConstruction-1.html#SCTCCHPC-3"><i class="fa fa-check"></i><b>4.5.2</b> Catchment Hydraulic Model (TUFLOW HPC) commands</a></li>
<li class="chapter" data-level="4.5.3" data-path="SimulationConstruction-1.html"><a href="SimulationConstruction-1.html#SimSetSum-2"><i class="fa fa-check"></i><b>4.5.3</b> Summary</a></li>
</ul></li>
<li class="chapter" data-level="4.6" data-path="SimulationConstruction-1.html"><a href="SimulationConstruction-1.html#SimSetSimClDO-2"><i class="fa fa-check"></i><b>4.6</b> Simulation Class: DO</a>
<ul>
<li class="chapter" data-level="4.6.1" data-path="SimulationConstruction-1.html"><a href="SimulationConstruction-1.html#PrereqDO-3"><i class="fa fa-check"></i><b>4.6.1</b> Prerequisites</a></li>
<li class="chapter" data-level="4.6.2" data-path="SimulationConstruction-1.html"><a href="SimulationConstruction-1.html#SimCtrlsDO-3"><i class="fa fa-check"></i><b>4.6.2</b> Part 1: Simulation specification</a></li>
<li class="chapter" data-level="4.6.3" data-path="SimulationConstruction-1.html"><a href="SimulationConstruction-1.html#ConModSttngsDO-3"><i class="fa fa-check"></i><b>4.6.3</b> Part 2: Constituent model specification</a></li>
<li class="chapter" data-level="4.6.4" data-path="SimulationConstruction-1.html"><a href="SimulationConstruction-1.html#MatSpecsDO-3"><i class="fa fa-check"></i><b>4.6.4</b> Part 3: Material specification</a></li>
<li class="chapter" data-level="4.6.5" data-path="SimulationConstruction-1.html"><a href="SimulationConstruction-1.html#ConOrdDO-3"><i class="fa fa-check"></i><b>4.6.5</b> Constituent ordering</a></li>
<li class="chapter" data-level="4.6.6" data-path="SimulationConstruction-1.html"><a href="SimulationConstruction-1.html#ExampleDO"><i class="fa fa-check"></i><b>4.6.6</b> Example</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="5" data-path="AppCommands.html"><a href="AppCommands.html"><i class="fa fa-check"></i><b>5</b> Commands</a></li>
<li class="divider"></li>
<li><a href="https://www.tuflow.com"><img src="images/1024in300px_Blue-01.svg" style="width:246px;height:68px;"></a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./"><h0 style="color:rgb(0,85,129);">TUFLOW CATCH User Manual</h0></a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="SimulationConstruction-1" class="section level1 hasAnchor" number="4">
<h1><span class="header-section-number">Section 4</span> Simulation Construction<a href="SimulationConstruction-1.html#SimulationConstruction-1" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<div id="SimulationConstructionContext-2" class="section level2 hasAnchor" number="4.1">
<h2><span class="header-section-number">4.1</span> Context<a href="SimulationConstruction-1.html#SimulationConstructionContext-2" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Previous sections have presented the architecture and processes available within TUFLOW CATCH. This section describes the usage intent and construction of a TUFLOW CATCH simulation. This includes the use of the TUFLOW CATCH QGIS plugin, descriptions of all commands, with hyperlinks to the Appendices where commands and explanations are listed in a searchable and sortable table for ease of access.
<span class="math inline">\(\newcommand{\blockindent}{\hspace{0.5cm}}\)</span></p>
</div>
<div id="SCIntent-2" class="section level2 hasAnchor" number="4.2">
<h2><span class="header-section-number">4.2</span> Usage intent<a href="SimulationConstruction-1.html#SCIntent-2" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>TUFLOW CATCH coordinates and executes TUFLOW HPC, a pollutant export model and TUFLOW FV, all automatically and with no direct user input required to affect this linkage. This does not mean that TUFLOW CATCH cannot be run until all models (TUFLOW HPC, pollutant export and TUFLOW FV) are fully constructed. To the contrary, the intention is that for application to integrated catchment studies that will at some stage need to draw on the power of TUFLOW CATCH, the single TUFLOW CATCH control file is used as the common control file for all model construction from project inception, even where this construction is undertaken in parallel by multiple users.</p>
<p>The reason for this approach is that, for example, the TUFLOW HPC block of the TUFLOW CATCH control file is nothing other than a standard TUFLOW HPC *.tcf control file, with a small number of additional TUFLOW CATCH commands. This is intentional, and means that an experienced (or beginner) TUFLOW HPC modeller can follow normal model set up processes and procedures to construct the TUFLOW HPC component of TUFLOW CATCH model, unhindered, but via the TUFLOW CATCH control file arrangement. The same logic applies to users constructing the TUFLOW FV sections of a TUFLOW CATCH model - the TUFLOW HPC sections of the TUFLOW CATCH control file can be turned off and TUFLOW FV model construction commenced as usual through the *.tcc rather than *.fvc control file. Users in teams that adopt this approach may want to consider using versioning control software to manage concurrent multiple user contributions.</p>
<p>It is understood that in some legacy cases, existing TUFLOW HPC or TUFLOW FV models (that were originally built outside TUFLOW CATCH) will need to be brought into a block of a TUFLOW CATCH control file. If this is the case, then the process is a matter of copying and pasting the original control files into the relevant TUFLOW CATCH control file block and populating the supporting folder structures with model data (see following sections). The key change that will be required on pasting into a *.tcc block will be to ensure file path references are correct (see following sections). This is only required from the *.tcc as it points to immediately called files, and no further.</p>
</div>
<div id="SimulationConstructionInit-2" class="section level2 hasAnchor" number="4.3">
<h2><span class="header-section-number">4.3</span> Initialisation<a href="SimulationConstruction-1.html#SimulationConstructionInit-2" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>TUFLOW CATCH requires construction of a suite of folder substructures to support simulations. Ideally, these should be all co-located at the same folder level underneath a single directory that sits within an overall project directory. These substructures correspond to each of the three products potentially used in a TUFLOW CATCH simulation, and should be names as follows:</p>
<ul>
<li>TUFLOWCATCH</li>
<li>TUFLOW (TUFLOW HPC)</li>
<li>TUFLOWFV</li>
</ul>
<p>Each of these substructures has its own subfolder arrangement, consistent with those suggested for each for standalone TUFLOW HPC and TUFLOW FV modelling studies. For consistency, the suggested TUFLOWCATCH subfolder arrangement is also similar.</p>
<p>To assist with this set up, and indeed more broadly with the initialisation, execution and results interrogation of a TUFLOW CATCH simulation, a freely available TUFLOW CATCH QGIS plugin has been developed. TUFLOW eLearning resources (also free of charge) have been prepared to support deployment and use of this TUFLOW CATCH plugin, and as such the content of that resource is not repeated here. Users are however encouraged to access this resource before initialising their first TUFLOW CATCH simulation: using this plugin is seen as a core component of the set up of a TUFLOW CATCH simulation. Doing so manually is discouraged. The eLearning materials can be accessed by:</p>
<ul>
<li>Registering for TUFLOW eLearning <a href = "https://elearning.tuflow.com/login/index.php">here</a> if not already registered</li>
<li>Emailing <a href="mailto:support@tuflow.com" class="email">support@tuflow.com</a> noting the registered username and with a request access to the TUFLOW CATCH plugin eLearning course</li>
<li>Following instructions subsequently provided to access the course</li>
<li>Complete the course</li>
</ul>
<p>On completion of the course, users will be able to initialise a TUFLOW CATCH simulation in the desired geographical projection system, complete with automatically populated templates for all control files. The sections presented below assume that this QGIS initialisation process has occurred and describe the resulting general arrangements and subsequent construction of a TUFLOW CATCH simulation.</p>
</div>
<div id="SCGeneral-2" class="section level2 hasAnchor" number="4.4">
<h2><span class="header-section-number">4.4</span> General arrangement<a href="SimulationConstruction-1.html#SCGeneral-2" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="SCGeneralFS-3" class="section level3 hasAnchor" number="4.4.1">
<h3><span class="header-section-number">4.4.1</span> Folder structure<a href="SimulationConstruction-1.html#SCGeneralFS-3" class="anchor-section" aria-label="Anchor link to header"></a></h3>
The overarching TUFLOW CATCH folder structure created using the QGIS plugin will appear (at the first tier) as per Figure <a href="SimulationConstruction-1.html#fig:fig-fs">4.1</a> (with the top level folder named ‘Modelling’ selected by the user during initialisation).
<br>
<center>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:fig-fs"></span>
<img src="images/FS.png" alt="**TUFLOW CATCH folder structure**" width="25%" />
<p class="caption">
Figure 4.1: <strong>TUFLOW CATCH folder structure</strong>
</p>
</div>
</center>
</div>
<div id="SCGeneralWF-3" class="section level3 hasAnchor" number="4.4.2">
<h3><span class="header-section-number">4.4.2</span> Intended workflow<a href="SimulationConstruction-1.html#SCGeneralWF-3" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>The above folder structure supports the overall intended TUFLOW CATCH simulation workflow, such that:</p>
<ul>
<li>The TUFLOW CATCH folder (and control file, see below) is the single point of contact for execution of TUFLOW CATCH simulations, regardless of the combination of TUFLOW HPC or TUFLOW FV models being called</li>
<li>All simulation results (again, regardless of what subsidiary TUFLOW products are called) are written to the TUFLOWCATCH/output subfolder: users should never need to navigate to TUFLOW HPC or TUFLOWFV folder structures to examine results from TUFLOW CATCH simulations</li>
<li>Users do not need to (and should not) set up their own *.tcf (TUFLOW HPC) or *.(TUFLOW FV) top level control files in the respective TUFLOW and TUFLOWFV runs directories: TUFLOW CATCH does this automatically based on information provided in the overarching TUFLOW CATCH control file<br />
</li>
<li>Calls to subsidiary first level control files from the overarching TUFLOW CATCH control file for both TUFLOW HPC and TUFLOW FV (such as *.tgc, bc_dbase etc. (TUFLOW HPC) or *.fvsed etc. (TUFLOW FV)) need to be provided as relative paths to locations that sit within the respective TUFLOW or TUFLOWFV subfolder arrangements</li>
<li>These first level control files then should be constructed to make the usual calls to all other files and data with respective TUFLOW and/or TUFLOWFV subfolder arrangements</li>
<li>All model data (e.g. grids, GIS, boundaries etc.) should be located within respective subfolder arrangements for TUFLOW and TUFLOW FV</li>
</ul>
<p>In short, it is intended that the:</p>
<ul>
<li>TUFLOW CATCH control file is the primary point of construction and execution contact</li>
<li>TUFLOW and TUFLOWFV folder substructures contain input model data</li>
<li>TUFLOWCATCH folder substructure contains model outputs</li>
</ul>
<p>Subsequent sections describe the TUFLOW CATCH control file set up and model execution.</p>
</div>
</div>
<div id="SCTCC-2" class="section level2 hasAnchor" number="4.5">
<h2><span class="header-section-number">4.5</span> TUFLOW CATCH control file<a href="SimulationConstruction-1.html#SCTCC-2" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>A TUFLOW CATCH simulation is set up and executed by constructing a TUFLOW CATCH control file, extension *.tcc. THis file should reside in the TUFLOWCATCH\runs directory set up with the TUFLOW CATCH QGIS plugin. The user is not required to (and should not) construct separate *.tcf or *.fvc control files. This TUFLOW CATCH control file has four separate but linked blocks:</p>
<ol>
<li>Global commands</li>
<li>Catchment Hydraulic Model (TUFLOW HPC) commands</li>
<li>Catchment Pollutant Export Model</li>
<li>Receiving Model (TUFLOW FV) commands</li>
</ol>
<p>All blocks must be included in the above order, but can be optionally switched on and off with a single command (rather than extensive line commenting) to suit modelling needs. For example, a user working only on TUFLOW HPC model build tasks can turn off the pollutant export and TUFLOW FV sections and continue building a TUFLOW HPC model as per normal, without the need to always execute all components of TUFLOW CATCH.</p>
<p>Construction of each of the TUFLOW CATCH control file blocks is described in the following sections.</p>
<div id="SCTCCGlobal-3" class="section level3 hasAnchor" number="4.5.1">
<h3><span class="header-section-number">4.5.1</span> Global commands<a href="SimulationConstruction-1.html#SCTCCGlobal-3" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>This block of the TUFLOW CATCH control file contains information that is applied equally to both TUFLOW HPC and TUFLOW FV. It does not need to be declared as a block (as all subsequent blocks do). These global commands are presented following, with command argument options also shown. All commands are mandatory.</p>
<p>Set the hardware to be used, with command arguments as either CPU or GPU:</p>
<blockquote>
<p><a href="#TCHardware">Hardware ==</a></p>
</blockquote>
<p>Set the GIS format to be used, with command arguments as either SHP, GPKG or MI:</p>
<blockquote>
<p><a href="#TCGISFmt">GIS Format ==</a></p>
</blockquote>
<p>Set projection to be used, as a path to a shape file. This will have been prepared by the TUFLOW CATCH plugin:</p>
<blockquote>
<p><a href="#TCSHPProj">SHP Projection ==</a></p>
</blockquote>
<p>Set the date format, with command arguments as either ISODATE (dd/mm/yyy hh:mm:ss) or hours (a single float). It is strongly recommended that ISODATE be used for longer simulations, where interpreting hour output timestamps can be difficult:</p>
<blockquote>
<p><a href="#TCTimeFmt">Date Format ==</a></p>
</blockquote>
<p>Set the start and end dates in the format declared above:</p>
<blockquote>
<p><a href="#TCStrtDte">Start Date ==</a></p>
</blockquote>
<blockquote>
<p><a href="#TCEndDte">End Date ==</a></p>
</blockquote>
<p>Set the directory for simulation outputs (e.g. xmdf and netcdf results files). This can be set to any location as either a full path (e.g. X:), or as a path relative to the location of the TUFLOW CATCH control file (e.g. ..):</p>
<blockquote>
<p><a href="#TCOutDir">Output Directory ==</a></p>
</blockquote>
<p>Set the directory for writing simulation check files (e.g. .shp files). This can be set to any location as either a full path (e.g. X:), or as a path relative to the location of the TUFLOW CATCH control file (e.g. ..):</p>
<blockquote>
<p><a href="#TCChkDir">Write Check Files ==</a></p>
</blockquote>
<p>Set the directory for writing simulation log files. TUFLOW HPC and TUFLOW FV engine log files will be written to this location, as well as module log files (such as the water quality module of TUFLOW FV). This can be set to any location as either a full path (e.g. X:), or as a path relative to the location of the TUFLOW CATCH control file (e.g. ..):</p>
<blockquote>
<p><a href="#TCLogDir">Log Folder ==</a></p>
</blockquote>
<p>In order to collect all log files without name conflictions, TUFLOW CATCH renames the various log files before it writes them to the user nominated directory. The renaming convention is as follows:</p>
<ul>
<li>TUFLOW HPC related log files:
<ul>
<li>&lt;<em>TUFLOW CATCH tcc filename root</em>&gt;_catchment_hydraulic_***.t*f</li>
</ul></li>
<li>TUFLOW FV related log files:
<ul>
<li>&lt;<em>TUFLOW CATCH tcc filename root</em>&gt;_receiving_***.*log</li>
</ul></li>
</ul>
<p>where *** indicates a usual extension expected in a log file such as “messages” (for TUFLOW HPC) or “ext_cfl_dt” (for TUFLOW FV) etc. For example, for a TUFLOW CATCH control file called SysModel_001.tcc, the following log files might be produced (depending on simulation options)</p>
<ul>
<li>TUFLOW HPC related log files:
<ul>
<li>SysModel_001_catchment_hydraulic.hpc.tlf</li>
<li>SysModel_001_catchment_hydraulic.tlf</li>
<li>SysModel_001_catchment_hydraulic.tsf</li>
</ul></li>
<li>TUFLOW FV related log files:
<ul>
<li>SysModel_001_receiving_ext_cfl_dt.log</li>
<li>SysModel_001_receiving.log</li>
<li>SysModel_001_receiving.fvwqlog</li>
</ul></li>
</ul>
<p>Set the directory for writing the TUFLOW FV boundary condition files prepared by TUFLOW CATCH from TUFLOW HPC simulation, including boundary condition blocks and underlying data (timeseries) files. This command is required even if TUFLOW FV is not used in a TUFLOW CATCH simulation, in which case template TUFLOW FV files will be written to this location. TUFLOW CATCH also writes TUFLOW HPC diagnostic information to this location (regardless of whether TUFLOW FV is simulated), including timeseries files of predicted catchment-wide summed cumulative volumes and/or masses. These files can be useful for providing system understanding, even when TUFLOW FV is not activated. This directory should be always set as the bc_dbase folder within the TUFLOW CATCH folder substructure (as generated by the TUFLOW CATCH QGIS plugin), as a path relative to the location of the TUFLOW CATCH control file (i.e. ..\bc_dbase):</p>
<blockquote>
<p><a href="#TCChkDir">Catch Ouput Folder ==</a> ..\bc_dbase</p>
</blockquote>
<p>Set the timestep (in simulation time seconds) at which lines within a boundary condition file for TUFLOW FV (created from TUFLOW HPC predictions) are separated. TUFLOW CATCH offers the user the option to set this timestep differently for different types of TUFLOW FV boundaries: nodestrings (Q boundaries that deliver momentum to TUFLOW FV) and lateral inflows (QC boundaries that do not deliver momentum to TUFLOW FV). It would be typical that nodestring boundaries are written at a shorter timestep to lateral boundaries, but this is not mandated, and the user is able to decide how this timestep relates to simulation time and file size constraints:</p>
<blockquote>
<p><a href="#TCNSOutDt">Catch Output Interval Nodestring ==</a> <float in seconds></p>
</blockquote>
<blockquote>
<p><a href="#TCLatOutDt">Catch Output Interval Lateral ==</a> <float in seconds></p>
</blockquote>
<p>Set the frequency at which TUFLOW CATCH pauses to write out TUFLOW FV boundary condition files, in units of days (simulation time). Setting a value of 1 means that TUFLOW CATCH will hold all boundary information in memory for a day of simulation time, and then update TUFLOW FV boundary files with this held memory on a daily basis. For example, if outputs were set to be hourly via hourly via either of the above interval commands, then 24 lines would be added to each boundary file at time of writing:</p>
<blockquote>
<p><a href="#TCCSVwrite">CSV Write Frequency Day ==</a> <float in days></p>
</blockquote>
<p>An example block of these global commands that together configure a TUFLOW CATCH simulation (with clarifying section headers as comments) is:</p>
<pre><code>!________________________________________________________
! GLOBAL SETTINGS
Hardware == GPU
GIS Format == SHP
SHP Projection == ..\..\TUFLOW\model\gis\projection.prj

!________________________________________________________
! SIMULATION SETTINGS 
Date Format == ISODATE
Start Date == 01/01/2021 00:00:00
End Date == 01/02/2021 00:00:00

!________________________________________________________
! OUTPUT FOLDERS
Output Directory == X:\Project\Output
Write Check Files == ..\check
Log Folder == ..\log

!________________________________________________________
! BOUNDARY CONDITION CONFIGURATION
Catch Output Folder == ..\bc_dbase
Catch Output Interval Nodestring == 900
Catch Output Interval Lateral == 10800
CSV Write Frequency Day == 1
</code></pre>
</div>
<div id="SCTCCHPC-3" class="section level3 hasAnchor" number="4.5.2">
<h3><span class="header-section-number">4.5.2</span> Catchment Hydraulic Model (TUFLOW HPC) commands<a href="SimulationConstruction-1.html#SCTCCHPC-3" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>This block of the TUFLOW CATCH control file contains commands that construct a TUFLOW HPC simulation</p>
<p>information that is applied equally to both TUFLOW HPC and TUFLOW FV. It does not need to be declared as a block (as all subsequent blocks do). These global commands are presented following, with command argument options also shown. All commands are mandatory.</p>
</div>
<div id="SimSetSum-2" class="section level3 hasAnchor" number="4.5.3">
<h3><span class="header-section-number">4.5.3</span> Summary<a href="SimulationConstruction-1.html#SimSetSum-2" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>In order to set up and execute a water quality simulation using the WQ Module, the following steps are required:</p>
<ul>
<li>Modify the TUFLOW FV control file:
<ul>
<li>Add at least the following commands to TUFLOW FV control file (*.fvc):
<ul>
<li><a href="AppCommands.html#FVActivateWQM">water quality model ==</a> TUFLOW</li>
<li><a href="AppCommands.html#FVWQMCtrlFl">water quality control file ==</a> &lt;<em>water quality control file name</em>&gt;.fvwq</li>
</ul></li>
<li>Optionally add a folder path command to the TUFLOW FV control file (*.fvc) with a trailing backslash:
<ul>
<li><a href="AppCommands.html#FVWQMCtrlDr">water quality model dir ==</a> &lt;<em>relative path to *.fvwq file</em>&gt;<span class="math inline">\(\backslash\)</span></li>
</ul></li>
<li>Add appropriate initial conditions for all water quality constituents, observing <a href="#OrderIC-5">ordering rules</a> where required</li>
<li>Initially optionally add boundary conditions for all water quality constituents, observing <a href="#OrderBC-5">ordering rules</a> in <code>bc header ==</code> commands</li>
</ul></li>
<li>Create the water quality control file with the corresponding name and path</li>
<li>Modify the water quality control file
<ul>
<li>Optionally add to the water quality control file:
<ul>
<li>Part 1: A simulation controls section</li>
<li>Part 2: A constituent model setting section with one or more constituent model blocks with one or more parameter commands</li>
<li>Part 3: A material block specifications section</li>
</ul></li>
</ul></li>
</ul>
<p>Once initially constructed, boundary conditions can be added (if not already in place), and progressive refinement and parameterisation of constituent models and benthic fluxes can be affected. Details of these commands and their options within each specific simulation class are provided in subsequent sections. Subsections are separated into the above water quality control file parts for ease and consistency of reference. All commands are optional.</p>

</div>
</div>
<div id="SimSetSimClDO-2" class="section level2 hasAnchor" number="4.6">
<h2><span class="header-section-number">4.6</span> Simulation Class: DO<a href="SimulationConstruction-1.html#SimSetSimClDO-2" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>If no simulation class is specified then a simulation will be automatically constructed using this DO class, and populated with library defaults for all parameters. Computed variables will be:</p>
<ul>
<li>Dissolved oxygen</li>
<li>Pathogens (optional, potentially multiple)</li>
</ul>
<div id="PrereqDO-3" class="section level3 hasAnchor" number="4.6.1">
<h3><span class="header-section-number">4.6.1</span> Prerequisites<a href="SimulationConstruction-1.html#PrereqDO-3" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>The DO simulation class requires simulation of the following in TUFLOW FV:</p>
<ul>
<li>Hydrodynamics, in either two or three dimensions (including any internal one dimensional structures if present)</li>
<li>Salinity</li>
<li>Temperature</li>
<li>Heat module on (i.e. meteorological forcing is required)</li>
</ul>
<p>Simulation of suspended sediment (via TUFLOW FV’s sediment transport module) is optional, unless attached pathogens are simulated.</p>
</div>
<div id="SimCtrlsDO-3" class="section level3 hasAnchor" number="4.6.2">
<h3><span class="header-section-number">4.6.2</span> Part 1: Simulation specification<a href="SimulationConstruction-1.html#SimCtrlsDO-3" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>The DO simulation class is set via</p>
<blockquote>
<p><a href="AppCommands.html#WQSimulationClass">simulation class ==</a> DO</p>
</blockquote>
<p>The other commands in this part are not specific to this simulation class. See section <a href="#SimCtrls-3"><strong>??</strong></a>.</p>
</div>
<div id="ConModSttngsDO-3" class="section level3 hasAnchor" number="4.6.3">
<h3><span class="header-section-number">4.6.3</span> Part 2: Constituent model specification<a href="SimulationConstruction-1.html#ConModSttngsDO-3" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>As per Tables <a href="#tab:tab-ConClasses"><strong>??</strong></a> and <a href="#tab:tab-ConClassMods"><strong>??</strong></a>, oxygen is the only mandatory constituent model class available within the DO simulation class, and there is only one oxygen constituent model within that class, with code O2. Pathogens may be optionally simulated (in any simulation class).</p>
<div id="ConModClssOxy-4" class="section level4 hasAnchor" number="4.6.3.1">
<h4><span class="header-section-number">4.6.3.1</span> Model class: Oxygen<a href="SimulationConstruction-1.html#ConModClssOxy-4" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div id="ConModO2-5" class="section level5 hasAnchor" number="4.6.3.1.1">
<h5><span class="header-section-number">4.6.3.1.1</span> Constituent model: O2<a href="SimulationConstruction-1.html#ConModO2-5" class="anchor-section" aria-label="Anchor link to header"></a></h5>
<p>This constituent model is specified as:</p>
<blockquote>
<p><a href="AppCommands.html#WQOxyMod">oxygen model ==</a> O2</p>
</blockquote>
<p>Minimum and maximum concentrations are specified as:</p>
<blockquote>
<p><a href="AppCommands.html#WQOxyMinMax"><span class="math inline">\(\blockindent\)</span> oxygen min max ==</a> <a href="#WQParMinO2"><span class="math inline">\(\left[DO\right]_{min}^{O_2}\)</span></a>, <a href="#WQParMaxO2"><span class="math inline">\(\left[DO\right]_{max}^{O_2}\)</span></a></p>
</blockquote>
<p>Global benthic parameters (used in Equation <a href="#eq:equ-sed-do-flux">(<strong>??</strong>)</a>) are specified as:</p>
<blockquote>
<p><a href="AppCommands.html#WQOxyBenFlxPars"><span class="math inline">\(\blockindent\)</span> oxygen benthic ==</a> <a href="#WQParKsedO2"><span class="math inline">\(K_{sed-O_2}^{O_2}\)</span></a>, <a href="#WQParthetasedO2"><span class="math inline">\(\theta_{sed}^{O_2}\)</span></a></p>
</blockquote>
<p>The oxygen piston model to be used (in either Equation <a href="#eq:equ-atm-Pv1">(<strong>??</strong>)</a> or Equation <a href="#eq:equ-atm-Pv4">(<strong>??</strong>)</a>) is specified as:</p>
<blockquote>
<p><a href="AppCommands.html#WQOxyPistMod1"><span class="math inline">\(\blockindent\)</span> oxygen piston model ==</a> Wanninkhof92</p>
</blockquote>
<p>or</p>
<blockquote>
<p><a href="AppCommands.html#WQOxyPistMod4"><span class="math inline">\(\blockindent\)</span> oxygen piston model ==</a> Ho16</p>
</blockquote>
<p>The argument (either “Wanninkhof92” or “Ho16”) activates a different oxygen piston model (Equation <a href="#eq:equ-atm-Pv1">(<strong>??</strong>)</a> or Equation <a href="#eq:equ-atm-Pv4">(<strong>??</strong>)</a>, respectively).</p>
<p>Although not strictly necessary, the use of “oxygen” to prefix these block commands is deliberate so as to maintain consistency of command style with other constituent model blocks that include more than one computed variable, such as nitrogen, phosphorus and organics. Nonetheless, if the “oxygen” prefix is omitted within this constituent model block, the WQ Module will still interpret the above commands correctly.</p>
<p>This constituent model block must be terminated using the command:</p>
<blockquote>
<p><a href="AppCommands.html#WQOxyModEnd">end oxygen model</a></p>
</blockquote>
</div>
</div>
<div id="ConModClssPth-4" class="section level4 hasAnchor" number="4.6.3.2">
<h4><span class="header-section-number">4.6.3.2</span> Model class: Pathogens (optional)<a href="SimulationConstruction-1.html#ConModClssPth-4" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>This model class is optional.</p>
<div id="ConModFree-5" class="section level5 hasAnchor" number="4.6.3.2.1">
<h5><span class="header-section-number">4.6.3.2.1</span> Constituent model: Free<a href="SimulationConstruction-1.html#ConModFree-5" class="anchor-section" aria-label="Anchor link to header"></a></h5>
<p>This constituent model is specified as:</p>
<blockquote>
<p><a href="#WQPthMod">pathogen model ==</a> free, <em>pathname</em></p>
</blockquote>
<p><em>pathname</em> is any user specified pathogen group name that:</p>
<ul>
<li>Uses only alphanumeric characters</li>
<li>Has no spaces</li>
<li>Excludes the keyword ‘PATH’, and</li>
<li>Is not the same as any other group name</li>
</ul>
<p>Minimum and maximum concentrations are specified as:</p>
<blockquote>
<p><a href="AppCommands.html#WQPthMinMax"><span class="math inline">\(\blockindent\)</span> alive min max ==</a> <a href="#WQParMinPth"><span class="math inline">\(\left[PTH_a\right]_{min}^{pth}\)</span></a>, <a href="#WQParMaxPth"><span class="math inline">\(\left[PTH_a\right]_{max}^{pth}\)</span></a></p>
</blockquote>
<p>Mortality parameters are specified as:</p>
<blockquote>
<p><a href="AppCommands.html#WQPthMort"><span class="math inline">\(\blockindent\)</span> mortality ==</a> <a href="#WQParkdPath"><span class="math inline">\(k_{d}^{pth}\)</span></a>, <a href="#WQParCSMPath"><span class="math inline">\(C_{SM}^{pth}\)</span></a>, <a href="#WQParalphaPath"><span class="math inline">\(\alpha\)</span></a>, <a href="#WQParbetaPath"><span class="math inline">\(\beta\)</span></a>, <a href="#WQParthetamorPath"><span class="math inline">\(\theta_{mor}^{pth}\)</span></a></p>
</blockquote>
<p><span class="math inline">\(\beta\)</span> is not currently used but must be retained as a placeholder in this command for future use.</p>
<p>Light inactivation parameters are specified in three separate but related commands, with one command per light band (visible, UV-A and UV-B):</p>
<blockquote>
<p><a href="AppCommands.html#WQPthvisInvn"><span class="math inline">\(\blockindent\)</span> visible inactivation ==</a> <a href="#WQParkvisPath"><span class="math inline">\(k_{vis}\)</span></a>, <a href="#WQParcSvisPath"><span class="math inline">\(c_{S_{vis}}^{pth}\)</span></a>, <a href="#WQParKDOvisPath"><span class="math inline">\(K_{DO_{vis}}^{pth}\)</span></a></p>
</blockquote>
<blockquote>
<p><a href="AppCommands.html#WQPthuvaInvn"><span class="math inline">\(\blockindent\)</span> uva inactivation ==</a> <a href="#WQParkuvaPath"><span class="math inline">\(k_{uva}\)</span></a>, <a href="#WQParcSuvaPath"><span class="math inline">\(c_{S_{uva}}^{pth}\)</span></a>, <a href="#WQParKDOuvaPath"><span class="math inline">\(K_{DO_{uva}}^{pth}\)</span></a></p>
</blockquote>
<blockquote>
<p><a href="AppCommands.html#WQPthuvbInvn"><span class="math inline">\(\blockindent\)</span> uvb inactivation ==</a> <a href="#WQParkuvbPath"><span class="math inline">\(k_{uvb}\)</span></a>, <a href="#WQParcSuvbPath"><span class="math inline">\(c_{S_{uvb}}^{pth}\)</span></a>, <a href="#WQParKDOuvbPath"><span class="math inline">\(K_{DO_{uvb}}^{pth}\)</span></a></p>
</blockquote>
<p>Settling of non-attached pathogens is specified as follows, with a negative number being a downwards velocity:</p>
<blockquote>
<p><a href="AppCommands.html#WQPthSettleFree"><span class="math inline">\(\blockindent\)</span> settling ==</a> <a href="#WQParVPathAD"><span class="math inline">\(V_{settle}^{pth}\)</span></a></p>
</blockquote>
<p>This constituent model block must be terminated using the command:</p>
<blockquote>
<p><a href="#WQPathModEnd">end pathogen model</a></p>
</blockquote>
</div>
<div id="ConModAtt-5" class="section level5 hasAnchor" number="4.6.3.2.2">
<h5><span class="header-section-number">4.6.3.2.2</span> Constituent model: Attached<a href="SimulationConstruction-1.html#ConModAtt-5" class="anchor-section" aria-label="Anchor link to header"></a></h5>
<p>This constituent model must be accompanied by simulation of at least one sediment fraction within the TUFLOW FV sediment transport (ST) module, and is specified as:</p>
<blockquote>
<p><a href="#WQPthMod">pathogen model ==</a> attached, <em>pathname</em></p>
</blockquote>
<p><em>pathname</em> is any user specified pathogen group name that:</p>
<ul>
<li>Uses only alphanumeric characters</li>
<li>Has no spaces</li>
<li>Excludes the keyword ‘PATH’, and</li>
<li>Is not the same as any other group name</li>
</ul>
<p>The commands are the same as those specified within a free pathogen constituent model block (Section <a href="SimulationConstruction-1.html#ConModFree-5">4.6.3.2.1</a>), with the following modification or additions.</p>
<p>Settling is specified for both free and attached pathogens:</p>
<blockquote>
<p><a href="AppCommands.html#WQPthSettleAtt"><span class="math inline">\(\blockindent\)</span> settling ==</a> <a href="#WQParVPathAD"><span class="math inline">\(V_{settle}^{pth}\)</span></a>, <a href="#WQParVPathT"><span class="math inline">\(V_{settle}^{pth_t}\)</span></a></p>
</blockquote>
<p>The target attached pathogen fraction is specified as:</p>
<blockquote>
<p><a href="#WQPthTargAttFrac"><span class="math inline">\(\blockindent\)</span> target attached fraction ==</a> <a href="#WQParfattPth"><span class="math inline">\(f_{att}^{pth}\)</span></a></p>
</blockquote>
<p>This constituent model block must be terminated using the command:</p>
<blockquote>
<p><a href="#WQPathModEnd">end pathogen model</a></p>
</blockquote>
</div>
</div>
</div>
<div id="MatSpecsDO-3" class="section level3 hasAnchor" number="4.6.4">
<h3><span class="header-section-number">4.6.4</span> Part 3: Material specification<a href="SimulationConstruction-1.html#MatSpecsDO-3" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Oxygen benthic flux (used in Equation <a href="#eq:equ-sed-do-flux">(<strong>??</strong>)</a>) is specified within both default and numbered material blocks as:</p>
<blockquote>
<p><a href="AppCommands.html#WQOxyBenFlx"><span class="math inline">\(\blockindent\)</span> oxygen flux ==</a> <a href="#WQParFsedO2"><span class="math inline">\(F_{sed}^{O_2}\)</span></a></p>
</blockquote>
</div>
<div id="ConOrdDO-3" class="section level3 hasAnchor" number="4.6.5">
<h3><span class="header-section-number">4.6.5</span> Constituent ordering<a href="SimulationConstruction-1.html#ConOrdDO-3" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Dissolved oxygen is the only mandatory constituent simulated by the WQ Module for this simulation class, and therefore oxygen concentration is specified as the first variable (shown in symbolic form below):</p>
<blockquote>
<p>initial wq concentration == <span class="math inline">\(\left[ DO \right]\)</span></p>
</blockquote>
<p>Similarly, in a <code>bc header ==</code> command within a bc block, oxygen is expected to be the first and only mandatory water quality variable after hydrodynamic boundary conditions.</p>
<blockquote>
<p><span class="math inline">\(\blockindent\)</span>bc header == time, water_elev, sal, temp, clay, sand, DO_mgL</p>
</blockquote>
<p>DO_mgL is the header used to designate oxygen in the related boundary condition file, noting that the DO_mgL column in the boundary condition file can appear in any column in the boundary condition file, and that it does not need to be the seventh column. The header text “DO_mgL” is just an example, and it can be any header desired, as long as it matches the correct column header in the boundary condition file.</p>
<div id="ConOrdDOPath-4" class="section level4 hasAnchor" number="4.6.5.1">
<h4><span class="header-section-number">4.6.5.1</span> Pathogens (optional)<a href="SimulationConstruction-1.html#ConOrdDOPath-4" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>If pathogens are simulated, then their headers are required at the end of any lists, regardless of the other hydrodynamic and water quality constituents simulated. This therefore applies to all simulation classes from DO to organics. Alive and dead pathogens are always required to be specified, in that order, and if attached pathogens are simulated then that attached pathogens header is listed between those of alive and dead. This pattern is repeated for each specified pathogen group, in the order in which pathogen groups are defined via pathogen constituent model blocks in the water quality control file. For example, where two pathogen groups are simulated (called ECOLI and CRYPTO, and defined in that order in the corresponding water quality control file), with ECOLI including attachment, the above bc header would be extended to the following:</p>
<blockquote>
<p><span class="math inline">\(\blockindent\)</span>bc header == time, water_elev, sal, temp, clay, sand, DO_mgL, ECOLI_alive, ECOLI_att, ECOLI_dead, CRYPTO_al, CRYPTO_de</p>
</blockquote>
</div>
</div>
<div id="ExampleDO" class="section level3 hasAnchor" number="4.6.6">
<h3><span class="header-section-number">4.6.6</span> Example<a href="SimulationConstruction-1.html#ExampleDO" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Following is an example of all the available WQ Module <code>simulation class == DO</code> commands. A single material applied as zeros everywhere as the default, other than for materials 1 and 4 where the default flux is overwritten. One (optional) pathogen constituent model block has been included, but is not required.</p>
<pre><code>simulation class == DO
wq dt == 600
wq units == mgl

oxygen model == O2
    oxygen benthic == 4.0, 1.05
    oxygen min max == 0.0, 15.0
end oxygen model

!optional pathogen constituent model block:
pathogen model == free, crypto 
    alive min max == 0.0, 1e7
    mortality == 0.08, 2e-12, 6.1, 1.0, 1.11 
    visible inactivation == 0.082, 0.0067, 0.5 
    uva inactivation == 0.5, 0.0067, 0.5 
    uvb inactivation == 1.0, 0.0067, 0.5 
    settling == -0.03
end pathogen model

material == default
    oxygen flux == 0
end material

material == 1, 4
    oxygen flux == -137.0
end material</code></pre>

</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="ProcessDescriptions-1.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="AppCommands.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": true,
"facebook": true,
"twitter": true,
"linkedin": true,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": false
},
"fontsettings": false,
"edit": null,
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "section"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
