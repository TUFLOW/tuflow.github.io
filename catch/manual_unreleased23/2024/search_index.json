[["index.html", "TUFLOW CATCH User Manual ", " TUFLOW CATCH User Manual July 2024 "],["introduction.html", "Introduction About this manual How to use this manual", " Introduction About this manual This document is the user manual for TUFLOW CATCH. How to use this manual Instructions are provided below on how to use this manual, including aspects of navigation and table filtering. These instructions are not provided elsewhere. Navigation This manual is designed for digital use within any web browser and has the following features: Section headers, to level three, are directly navigable via the left hand pane’s table of contents. This table of contents pane can be toggled on and off from view via the “s” key if more or less page width is required The angled arrows that float at the left and right hand side midpoints of every page can be used to navigate sequentially back and forth to the commencement of preceding or subsequent top level sections Model commands, parameters and cross references for tables and figures are navigable through hyperlinks, where appropriate. This includes parameters within equations, which will also appear as blue hyperlinks when active The space bar can be used to scroll down within each page without skipping text. Shift + space bar will similarly scroll up Browser back and forward buttons (or their equivalent keyboard shortcuts alt + \\(\\langle\\)left arrow\\(\\rangle\\) and alt + \\(\\langle\\)right arrow\\(\\rangle\\), respectively) can be used to navigate through browsing history. Some browsers may not return to the scroll location in a page last visited, but to the last clicked section header. Hyperlinks have been built into the body of the manual, and these can be used in lieu of browser buttons if required It is recommended that this manual be viewed in a browser window that is maximised or operating in full screen mode, with the latter (although browser dependent) typically toggled via the F11 key. When following hyperlinks, the target (i.e. location linked to) is displayed at the top of the landing page. The exception to this occurs when a target is located near the bottom of the landing page’s content. In this case, it is not possible for a web browser to display the target at the top of a page because this would generate underlying white space, and as such, the target will appear in the main body of the landing page. Searching This entire manual content can be searched by using the search box at the top of the table of contents pane (i.e. screen top left near the TUFLOW logo). This search box can be toggled on and off by clicking the search icon (magnifying glass) at the top left of any page. The table of contents is dynamically filtered in response to entering text in the search box, and clicking on any remaining table of contents entry will navigate directly to the searched text. Searched text will be highlighted within a page for easy identification, and multiple instances within one page can be navigated through by using the up and down arrow keys. Clearing the search box will restore the table of contents. Tables Where appropriate, tables are searchable via use of the search box, which is located at the top right of any search enabled table. Not all tables are searchable. When text is entered into the search box, table rows are dynamically filtered to only show those that contain the search text. This allows on-the-fly condensing of large tables so that only relevant content is presented. Tables can be sorted alphabetically (or reverse alphabetically) with respect to any column by clicking column headers. Where appropriate, the number of rows displayed is selectable via the Show entries drop down. Undisplayed rows can be accessed by clicking Previous or Next or by using the numbered navigation boxes, all of which are located at the bottom of each table. Below is an example of a searchable table. Type “lateral” (with or without the inverted commas) into the search box to see the table behaviour, or change the number of rows displayed (given this demonstration table has seven rows, only selecting “5” will change the number of rows displayed) and use the navigation buttons at the bottom of the table to look through all the data. The right hand column has hyperlinked words that allow navigation between related commands, or different versions of the same command, for ease of access. All hyperlinks have been deliberately disabled in this demonstration table, but are active (and explained) in live tables elsewhere in this manual. Command Description Links Catch Output Folder == \\(\\langle\\)folder name\\(\\rangle\\) Used in a global setting block block to control the location to which receiving model boundary condition files are written. \\(\\text{ }\\) Catch Output Interval Nodestring == \\(\\langle\\)dt (s)\\(\\rangle\\) Used in a global setting block block to control the timestep of receiving model boundary condition files written for nodestring inflows. \\(\\text{ }\\) Catch Output Interval Lateral == \\(\\langle\\)dt (s)\\(\\rangle\\) Used in a global setting block block to control the timestep of receiving model boundary condition files written for lateral inflows. \\(\\text{ }\\) CSV Write Frequency Day == \\(\\langle\\)dt (days)\\(\\rangle\\) Used in a global setting block block to control the frequency at which receiving model boundary condition files are written from memory to csv. \\(\\text{ }\\) Date Format == ISODATE Used in a global setting block block to set the time format. \\(\\text{ }\\) Start Date == \\(\\langle\\)dd/mm/yyyy hh:mm:ss\\(\\rangle\\) Used in a global setting block block to set the simulation start date. \\(\\text{ }\\) End Date == \\(\\langle\\)dd/mm/yyyy hh:mm:ss\\(\\rangle\\) Used in a global setting block block to set the simulation end date. \\(\\text{ }\\) Colour coding is often used for distinguishing different tabulated data types. In the above example, TUFLOW CATCH commands are pink and the associated argument options for each command are blue and contained in angled parentheses. Colour coding applied to other table types is explained throughout this manual when required. Commands Where specific commands are described, they appear in highlighted text, and often as a clickable link to the corresponding command description in Appendix ??. That Appendix is a searchable table of all commands, as per the demonstration table presented in this introduction. The below is an example of a TUFLOW CATCH command (the hyperlink has been disabled for this example). \\(\\newcommand{\\blockindent}{\\hspace{0.5cm}}\\) Catch Output Folder == Where commands specify parameters (e.g. time steps etc.) then for consistency and brevity, these parameters are included directly in the command example using their notation (see following section that describes notation) rather than descriptive words. These notated parameters are also often a clickable link to descriptive explanations in Appendix ??. The link below is an example of a TUFLOW CATCH command with a parameter presented in notation form. Hyperlinks have been removed in this example. CSV Write Frequency Day == \\(dT_{csv-write}\\) Parameter notation The primary groups of parameters are listed below, with the letter or symbol used to denote each. Typical generalisations of units are parenthesised. Time steps, \\(dT\\) (time, seconds or days) Areal rates, \\(R_a\\) (mass per unit area per unit time) Limits, \\(L\\) (mass per unit area) Concentrations, \\(C\\) (mass per unit volume) Time constants, \\(T\\) (seconds) Rain rates, \\(R_r\\) (millimetres per hour) Rain depths, \\(R_d\\) (millimetres) Shear, \\(\\tau\\) (N per m^2) Typically (but not always) an instance of each of these groups will describe a simulated constituent and a process. Where appropriate, the simulated constituent and process are denoted as superscripts and subscripts, respectively. For example: The areal rate of accumulation of nitrate is notated as \\(R_{acc}^{NO_3}\\) The critical shear stress for erosion of sediment fraction 1 is notated as \\(\\tau_{ero}^{sed1}\\), The rain rate threshold for washoff of particulate organic carbon is notated as \\(R_{r}^{POC}\\) The rain depth threshold for washoff of free reactive phosphorus is notated as \\(R_{d}^{FRP}\\) Feedback Constructive suggestions to improve this manual are welcome, and can be emailed to support@tuflow.com. "],["Overview-1.html", "Section 1 Overview 1.1 Context 1.2 Features 1.3 Configurations 1.4 Science 1.5 Support", " Section 1 Overview 1.1 Context TUFLOW CATCH enables the seamless simulation of whole-of-catchment hydrologic, hydraulic, pollutant export and receiving waterway processes. It supports 1D, 2D and 3D simulation of these processes from top of catchment to receiving waterway outlet via solution of the relevant equations of motion and transport, and without recourse to lumped spatial or temporal assumptions. It draws on the power of GPU acceleration to explicitly simulate catchment water flow and pollutant processes in the surface and subsurface, and automatically reconfigures these predictions to drive downstream multidimensional receiving waterway hydrodynamic, sediment transport and water quality models. This modern framework, that draws on advanced compute capability, allows environmental modellers to holistically manage and understand catchments of interest and their receiving waters in an efficient, integrated and rigourous manner, without the need for manual model linking or reliance on top down average assumption modelling techniques. TUFLOW CATCH’s design is flexible so as to support tailoring of its setup to meet individual application demands and complexity, and allows for execution of multiannual studies such as (but not limited to): Assessment of the efficacy of proposed catchment management interventions (such as installation of constructed wetlands) on downstream receiving riverine or estuarine health Assessment of the interaction of catchment inflows with water supply offtakes or other sensitive receptors Quantitative Microbial Risk Assessments Sediment and other pollutant export catchment dynamics investigations \\(\\newcommand{\\blockindent}{\\hspace{0.5cm}}\\) 1.2 Features Several key features have been included in the design of TUFLOW CATCH to support its use. Some are listed below. Simulation engine. To affect whole-of-catchment simulation, TUFLOW CATCH links and augments the power and functionality of two existing TUFLOW engines. This means that the decades of development, expertise and rigour embedded in the TUFLOW suite of products is exploited by TUFLOW CATCH. These existing TUFLOW engines are: TUFLOW HPC: Fixed grid simulation of 2D Surface and subsurface catchment hydrology, hydraulics, pollutant export and transport TUFLOW FV: Flexible mesh simulation of 1D, 2D and 3D receiving waterway hydrodynamic, advection dispersion, heat, sediment transport, water quality and particle tracking. Conceptually, TUFLOW CATCH links and coordinates TUFLOW HPC and TUFLOW FV as Figure 1.1. TUFLOW HPC coverage is represented by the fixed grid icons, and TUFLOW FV shown to be contained within the region enclosed by a brown boundary line Figure 1.1: Conceptual arrangement of TUFLOW CATCH engines Pollutant export. TUFLOW CATCH adds pollutant accumulation and washoff functionality to TUFLOW HPC. Pollutants are able to be accumulated and washed off on a cell by cell basis and under a range of user-selectable algorithms (accumulation or shear stress based, for example), and then routed as surface and surface flows and loads, via solution of the equations of motion and transport (rather than using lumped top down averaging assumptions) Automatic linkage TUFLOW CATCH automatically links the bottom of catchment TUFLOW HPC predictions (for both flow and pollutant loads) to the upstream of TUFLOW FV’s model domain to present a single integrated modelling platform to the user, with no need for manual handling or other post/pre processing. To affect this, TUFLOW CATCH automatically Determines the spatial locations where surface and subsurface waters drain to the user defined TUFLOW FV mesh and designates these as inflow locations to TUFLOW FV, and then Writes the TUFLOW HPC predictions as fully formatted TUFLOW FV inflow boundary conditions files and blocks, either as nodestrings or elements Command syntax. TUFLOW CATCH uses familiar TUFLOW style command == argument(s) syntax that has a long established pedigree within all other TUFLOW products Flexibility of constituents. TUFLOW CATCH can simulate any constituents that are initialised in TUFLOW FV, across all its modules, including sediment transport and water quality Log file user feedback. TUFLOW CATCH simulations generate TUFLOW HPC and TUFLOW FV log files as per usual that report all simulation configuration details for review Results viewing. TUFLOW CATCH has its own freely available QGIS plugin to support viewing and interrogation of combined TUFLOW HPC and TUFLOW FV results, as a single data set, such as Figure 1.2 Figure 1.2: Example of QGIS plugin combined results visualisation 1.3 Configurations The primary configurations for which TUFLOW CATCH is intended to be executed are as follows: Hydrology. The most basic configuration of TUFLOW CATCH is to simulate only water movement through surface and subsurface catchment flows, and to automatically route these into a downstream receiving waterway model. Use cases might include investigation of velocity fields in receiving waterways under a range of separate or continuous catchment inflow regimes, or modification of these fields in response to changes in catchment conditions, such as urbanisation. In this instance, the computational engines would be configured as follows: TUFLOW HPC: Simulate surface and subsurface hydrology, and write inflow boundary condition files for TUFLOW FV TUFLOW FV: Simulate only 2D or 3D barotropic hydrodynamics (i.e. without salinity, temperature or water density simulation) Pollutant export. The next level of functionality offered by TUFLOW CATCH is the addition of pollutant export within the catchment simulation, without the explicit and subsequent simulation of the fate and transport fo these pollutants in a downstream waterway model. Use cases might include investigation of pollutant export properties of a catchment under differing rainfall conditions, or the variation of this export in response to the implementation of intervention measures or land use changes. In this instance, the computational engines would be configured as follows: TUFLOW HPC: Simulate surface and subsurface hydrology, with pollutant accumulation, washoff and transport, and write summary files of total pollutant export at catchment outlet. Inflow boundary condition files for TUFLOW FV would also be written but remain unused TUFLOW FV: No direct simulation, other than to inform TUFLOW HPC of the constituents to be simulated. This is affected through TUFLOW CATCH’s interrogation of the sediment transport and water quality configurations specified in the TUFLOW FV simulation. A dummy TUFLOW FV model mesh is automatically generated by TUFLOW CATCH to support this configuration Integrated. This level represents the full functionality offered by TUFLOW CATCH. It augments the Pollutant export configuration above by including the explicit 2D or 3D simulation of the fate and transport of all catchment derived flows and pollutants within the downstream waterway model. Use cases might include the investigation of the efficacy of catchment intervention works on downstream water quality over multiannual periods. In this instance, the computational engines would be configured as follows: TUFLOW HPC: Simulate surface and subsurface hydrology, with pollutant accumulation, washoff and transport, and write summary files of total pollutant export at catchment outlet, as well as inflow boundary condition files for TUFLOW FV TUFLOW FV: Direct simulation of 2D or 3D baroclinic hydrodynamics, with sediment transport and water quality (and optionally particle tracking) as specified by the user If only the simulation of surface and subsurface water flows are of interest with no linkage between TUFLOW HPC and TUFLOW FV (i.e. the Hydrology configuration above but with no linkage to TUFLOW FV), then TUFLOW HPC can be run in isolation without the need for TUFLOW CATCH. Simply setting up and running TUFLOW HPC with appropriate results outputs at bottom of catchment would suffice. If either linkage with TUFLOW FV or simulation of pollutant export is of interest, then TUFLOW CATCH is required. TUFLOW CATCH supports one-way linking of flows and concentrations from TUFLOW HPC to TUFLOW FV. 1.4 Science The science underpinning TUFLOW CATCH is that developed for TUFLOW HPC and TUFLOW FV (including their respective modules) and is described in those user and science manuals: TUFLOW HPC TUFLOW FV TUFLOW FV Sediment Transport module TUFLOW FV Water Quality module TUFLOW FV Particle Tracking module 1.5 Support BMT sells, distributes and supports TUFLOW CATCH. Contact support@tuflow.com or sales@tuflow.com for support and sales inquiries. Several supporting appendices have also been included in this manual. These contain content to assist users in understanding and applying TUFLOW CATCH. These Appendices are interlinked and hyperlinked with content from the body of the manual where appropriate, and are: Appendix ?? Description of command syntax and nomenclature Appendix ?? Listing of all commands, and their syntax, arguments, descriptions and cross references Appendix ?? includes a purpose built small TUFLOW CATCH demonstration model The user is directed to the respective manuals noted in Section 1.4 above for TUFLOW HPC and TUFLOW FV commands other than those specific to TUFLOW CATCH. "],["Architecture-1.html", "Section 2 Architecture 2.1 Context 2.2 Core Architecture", " Section 2 Architecture This section provides a description of TUFLOW CATCH’s core architecture. This description is intentionally introductory, and details required to set up and execute simulations that deploy TUFLOW CATCH are provided in Section 4. \\(\\newcommand{\\blockindent}{\\hspace{0.5cm}}\\) 2.1 Context As our understanding of the natural environment advances, the questions asked of environmental numerical models are rapidly increasing in breadth and complexity. Setting up, calibrating and executing defensible environmental models to assist in addressing these questions has therefore become an increasingly challenging proposition. This is particularly relevant with regard to whole-of-catchment studies where the linkage between catchment management intervention and associated receiving water quality changes is of increasing interest (and complexity) within the environmental management space. The architecture and functionality of TUFLOW CATCH has therefore been deliberately designed to assist environmental modellers in overcoming some of these challenges, and in doing so improve the efficiency and effectiveness with which numerical modelling can support environmental management at the catchment scale. Importantly, TUFLOW CATCH’s architecture provides a mechanism by which users can seamlessly simulate hydrologic, hydraulic, pollutant export and transformative receiving water quality processes within one unified, automated and internally consistent framework. This deliberate design choice has been motivated by the observation that historically, catchment and receiving waterway simulations have often been undertaken using disparate modelling platforms not designed or intended to be linked, and that (more often then not) operate under materially different assumptions and levels of internal scientific rigour. One example of such an instance might be where predictions from a catchment model that uses average (spatially and temporally lumped) hydrology and pollutant export assumptions are used to provide inflow boundary conditions to a fully three dimensional receiving water quality model that operates on a highly spatial and temporally resolved domain and makes limited average assumptions. TUFLOW CATCH exploits the latest compute power advances and scientific rigour to overcome such problematic disconnects. In short, TUFLOW CATCH has been designed to provide access to state of the art environmental modelling science at the integrated catchment scale. The core architecture that provides this easy access is described below. The associated execution commands are provided in Section 4, and the details of the methods deployed in supplementary processes such as geolocation are described in Sections 3.1 and 3.2. 2.2 Core Architecture TUFLOW CATCH provides three primary functions: Coordination of the execution of TUFLOW HPC and TUFLOW FV across a whole-of-catchment domain Automatic geolocation and writing of flow and concentration boundary conditions for TUFLOW FV (as the receiving water model), generated from TUFLOW HPC (as the catchment model) predictions Pollutant export and transport calculations within a catchment The first of these is its core architectural capability and so is described here in Section 2.2.1. The latter two are technical componentry of this acrchitecture and so are detailed in Sections 3.1 and 3.2, respectively. 2.2.1 Execution Coordination TUFLOW CATCH overarches both TUFLOW HPC and TUFLOW FV to coordinate their execution to affect integrated numerical simulation of water and pollutant flows (and transformations) across a catchment and its receiving waters. Whilst not undertaking the solution of equations itself, TUFLOW CATCH does coordinate these supporting TUFLOW products to do so in their respective domains, which are: TUFLOW HPC: 1D and 2D surface and subsurface catchment hydrology and hydraulics, with pollutant export and transport TUFLOW FV: 1D, 2D and 3D hydrodynamic, sediment transport, water quality and particle tracking (or module subsets thereof) receiving waterway modelling The order of execution of TUFLOW HPC and TUFLOW FV, coordinated automatically under TUFLOW CATCH is as follows: Execute TUFLOW FV, run in test mode, with the intention of Reading the TUFLOW FV model mesh (either as built by the user, or as a dummy mesh constructed by TUFLOW CATCH if no user mesh is specified) and writing the associated mesh check file for subsequent use by TUFLOW HPC in its automatic geolocation processes Reading the TUFLOW FV sediment transport and/or water quality log files to determine the suite of constituents to be simulated in the receiving waterway, and therefore those that require specification and simulation as catchment based pollutants in TUFLOW HPC. If no pollutants are to be simulated (i.e. TUFLOW CATCH is intended only for use in terms of water simulation) then these files will be absent and their interrogation skipped accordingly Execute TUFLOW HPC, with the intention of Reading the TUFLOW FV mesh check files to determine the receiving water model domain location and extent Comparing this mesh with the TUFLOW HPC grid to then determine which TUFLOW HPC cells are to be designated as transfer cells where boundary conditions for TUFLOW FV are to be written (see Section 3.1) from TUFLOW HPC predictions Checking the pollutants specified in the pollutant export model for consistency with those set in the TUFLOW FV simulation (if any) Executing the TUFLOW HPC catchment based hydrologic, hydraulic and/or pollutant export modelling (if requested) over the period specified Writing TUFLOW FV boundary conditions at designated transfer cells Reporting catchment based simulation results such as dynamic pollutant concentrations in the surface and/or subsurface domains, dry store evolutions and/or ersoion/deposition zones (see Section 3.2) Re-execute TUFLOW FV (optional, only if receiving waterway processes are to be investigated), with the intention of Executing 1D, 2D and 3D hydrodynamic, sediment transport, water quality and particle tracking (or subsets thereof) receiving waterway modelling, using the boundary conditions developed by TUFLOW HPC above Reporting receiving waterway simulation results such as pollutant concentrations and diagnostic mass fluxes The intention of the above execution coordination is that it provides a robust means to automatically unidirectionally link catchment and receiving waterway models to support integrated environmental assessment. It is noted that this architecture: Supports multiple users working on a project simultaneously by allowing (from the same TUFLOW CATCH control file): Simulation of TUFLOW HPC without needing to execute TUFLOW FV (other than in test mode), and/or Simulation of TUFLOW FV without needing to execute TUFLOW HPC. In this instance inflow boundaries are assumed to be zero flow, which is useful for model build stages such as mesh construction, checking, speed testing and dry weather tidal / thermal stratification calibration Aligns with the use of versioning control platforms (such as GitHub or GitLab, for example), to support multi-user co-development. Such use under versioning platforms was intended as part of TUFLOW CATCH’s architectural development, and it means that the same TUFLOW CATCH control file can be used by multiple users to drive respective TUFLOW HPC and TUFLOW FV model builds - the model development process is then unified under one control file’s umbrella, and the need to build disparate TUFLOW HPC and TUFLOW FV models, and then somehow recast these into a TUFLOW CATCH control file framework, is avoided. "],["ProcessDescriptions-1.html", "Section 3 Process Descriptions 3.1 Geolocation 3.2 Pollutant Export", " Section 3 Process Descriptions Previous chapters have presented an overview of the architecture and capabilities of TUFLOW CATCH. This chapter presents the details of the processes that TUFLOW CATCH executes. It does not present the processes executed by either TUFLOW HPC or TUFLOW FV: these are detailed in the respective model manuals and should be referred to as such. TUFLOW CATCH provides three primary functions: Coordination of the execution of TUFLOW HPC and TUFLOW FV across an entire catchment and receiving water domain Automatic geolocation and writing of flow and concentration boundary conditions for TUFLOW FV, generated from TUFLOW HPC predictions Pollutant export and transport calculations within a catchment The first of these is its core architectural capability and so is described in Section 2.2.1. The latter two are technical componentry of this acrchitecture and so are detailed here in Sections 3.1 and 3.2, respectively. 3.1 Geolocation Manually linking catchment and receiving water models can potentially be a time-consuming and error prone process. TUFLOW CATCH undertakes this task automatically via a process of geolocation, whereby TUFLOW HPC cells that spatially coincide with either (user nominated, see Section XXXX) TUFLOW FV nodestring inflows or TUFLOW FV mesh cells are identified. These TUFLOW HPC cells are called transfer cells. Once identified, these transfer cells track the local surface and groundwater flow volumes and constituent masses predicted by TUFLOW HPC, and each transfer cell’s outflows are converted into timeseries of flow rates and concentrations and exported into the comma delimited (.csv) format expected by TUFLOW FV. It is noted that: Where the user has nominated a nodestring/s as transfer locations from TUFLOW HPC to TUFLOW FV, TUFLOW CATCH will write the corresponding TUFLOW FV boundary condition files as ‘Q’ types that include the transfer of momentum from TUFLOW HPC to TUFLOW FV. As such, these boundaries (and specifying the corresponding TUFLOW FV nodestrings) should be considered where channelised riverine inflows and the like are to be matched, i.e. where inflow momentum is important in controlling receiving water hydrodynamics Where TUFLOW CATCH automatically geolocates non-nodestring transfer locations from TUFLOW HPC to TUFLOW FV, TUFLOW CATCH will write the corresponding TUFLOW FV boundary condition files as ‘QC’ types that exclude the transfer of momentum from TUFLOW HPC to TUFLOW FV. As such, these boundaries should typify non-channelised ‘lateral’ inflows where momentum transfer is less important in controlling receiving water hydrodynamics Boundary data for TUFLOW FV is written with date (dd/mm/yyyy hh:mm:ss) format. This automated selection of linkage cells is sufficiently robust to handle differences in mesh/grid resolution between TUFLOW HPC and TUFLOW FV, including cases where the TUFLOW HPC model is higher resolution than the (local) TUFLOW FV model mesh, and vice-versa. Some typical cases are presented in Figure 3.1. Figure 3.1: Examples of linkages under varying TUFLOW HPC and TUFLOW FV cell resolutions If a TUFLOW FV mesh element does not contain one or more TUFLOW HPC cell centres, then the TUFLOW HPC cell that contains the TUFLOW FV element centroid is selected. Finally, after all mesh elements and boundary nodestrings are processed, any cells entirely within the TUFLOW FV mesh are deactivated entirely from TUFLOW HPC computations - these locations within the overall model domain are simulated by TUFLOW FV. The locations of the TUFLOW HPC transfer cells automatically geolocated by TUFLOW CATCH are reported in the TUFLOW HPC ‘hpc_transfer’ check file for review. The corresponding TUFLOW FV boundary condition locations are also reported in the TUFLOW FV ‘bc_check_P’ check files. An example of both is presented in Figure 3.2, with TUFLOW HPC and TUFLOW FV check file outputs on the left (brown squares) and right (red dots), respectively. Figure 3.2: HPC transfer cell (left) and TUFLOW FV boundary cell (right) check file examples The above geolocation process does not exclude or prevent the TUFLOW FV user from manually specifying additional boundaries to a TUFLOW FV model. For example, tidal or wastewater discharge (or other) boundaries can be specified by the user within the TUFLOW CATCH control file as per a normal TUFLOW FV model set up by specify ‘bc’ blocks as required. TUFLOW CATCH will collect these manual (user defined) boundaries and all automatically geolocated boundaries and apply them to the execution of TUFLOW FV under TUFLOW CATCH. An example of how this geolocation method supports transfer of water, concentrations and momentum is provided in Figure 3.3. The animation presents a catchment derived TUFLOW HPC flow originating from left of screen (and from the fixed grid domain) being transferred automatically into the (flexible mesh) TUFLOW FV domain, and then advected downstream to the right. Constituent concentrations vary from low (blue) to red (high). Figure 3.3: Example of transferral of an inflow (from left to right) from TUFLOW HPC to TUFLOW FV 3.2 Pollutant Export TUFLOW CATCH supports the simulation of pollutant generation and transport. It does so on a spatially varying basis via use of materials so that, in a manner analogous to hydraulic roughness calculations (that also use materials), pollutant export simulation is ultimately affected on a computational cell by computational cell basis. This obviates the need to make lumped hydrologic or pollutant export related assumptions, and facilitates the solution of the equations of motion and constituents on a spatially and temporally resolved basis. \\(\\newcommand{\\blockindent}{\\hspace{0.5cm}}\\) In general terms, pollutant export simulation within TUFLOW CATCH allows for either: Specification of a constant concentration (to be written to TUFLOW FV boundary conditions without numerical simulation. Examples include water quality constituents that are not meaningfully conceptualised as being liberated from a ground surface, such as dissolved oxygen, or Specification of a time varying concentration (again to be written to TUFLOW FV boundary conditions without numerical simulation). Examples include water temperature Specification of the following on a material by material basis, for a given pollutant: The computational pollutant export method to be used The parameters associated with the selected computational pollutant export method, or Different pollutant export methods across the above options for different pollutants can be used within a single TUFLOW CATCH simulation. Commands are provided in detail in Section 4, however an example of such a specification is provided following, with incomplete (…) parameter lists for brevity. Constant POLLUTANT_C == 8.0 Time-series POLLUTANT_D == temptre Material == 1,4 \\(\\blockindent\\)POLLUTANT_A,method==sed4,param1==43.0… \\(\\blockindent\\)POLLUTANT_B,method==rate,param1==12.0… \\(\\blockindent\\)POLLUTANT_X,method==sed1,param1==0.37… \\(\\blockindent\\)POLLUTANT_Y,method==sed2,param1==5.23… \\(\\blockindent\\)… End Material Multiple constant and time-series pollutants can be specified, and material blocks can be specified to apply to more than one material (the above example applies to materials 1 and 4, for example). Different computational pollutant export methods can be assigned to different pollutants within a single material block. The above pollutant export models are described following. 3.2.1 Constant The constant pollutant export method is the simplest of all available methods. It does not involve any calculations within TUFLOW CATCH. Rather, it has TUFLOW CATCH assign the specified constant value to the relevant column in all TUFLOW FV boundary condition files produced, for all times. It is suitable for pollutants that are conceptually inconsistent with generation from a ground surface, such as dissolved oxygen or phytoplankton. 3.2.2 Timeseries The constant pollutant export method does not involve any calculations within TUFLOW CATCH. Rather, it has TUFLOW CATCH assign an interpolated timeseries value to the relevant column in all TUFLOW FV boundary condition files produced. Interpolation is based on matching the specified timeseries timestamp with the output frequency of TUFLOW FV boundary condition files. It is suitable for pollutants that are conceptually inconsistent with generation from a ground surface and also likely to vary temporally, such as water temperature. One timeseries per pollutant can be specified and it is applied across the entire model domain. 3.2.3 Accumulation and washoff Accumulation/washoff methods are common in urban water modelling and are conceptually distinct from event mean concentration / dry weather concentration (EMC/DWC) methods. The former have been the subject of considerable research and development since at least the 1970s. In short, the accumulation washoff method conceptualises pollutant accumulation during no-flow or low-flow conditions and washoff during higher-flow conditions. Typically, a proportion of the accumulated pollutant runs off if a threshold flow or flow depth is reached (i.e. enough energy is available for liberation of mass). This mechanism is generally based on a non-linear function for the runoff, if runoff is not explicitly simulated (e.g. in models that make lumped average assumptions). TUFLOW CATCH’s implementation of this method (that explicitly simulates hydrology so does not resort to such lumped assumptions) is described following. 3.2.3.1 Accumulation TUFLOW CATCH allows for the specification of accumulation rates (kg/ha/yr) for each pollutant simulated, on a spatially varying (material by material) basis. These rates are linearly applied in time until a user specified maximum areal mass (also kg/ha/yr) is reached. Even though these rates and maximums are specified per material, they are used to undertake accumulation calculations on a cell by cell basis at the beginning of every timestep. For example, if a user has specified a 5 metre TUFLOW HPC grid size, then pollutant accumulation calculations will be undertaken at this same spatial resolution. As each pollutant accumulates, it is added to TUFLOW CATCH’s dry store mass, which is also tracked on a cell by cell basis. It is this dry store mass that is then depleted (washed off) when user specified hydrologic conditions are met (see Section 3.2.3.2). Each pollutant’s and each cell’s dry store mass is temporally incremented at the specified rate, up to a user specified limiting areal mass (kg/ha). One advantage of the pollutant accumulation method is that the user has full control over the spatial distribution of the associated rates, through the use of materials. Specifically, each material is assigned these rates, and materials are (typically) specified as polygons that cover regions with similar pollutant properties (analogous to roughness materials). Although it may seem natural to equate this spatial distribution of pollutant properties with land uses (as is often the case in lumped hydrology/pollutant export models), this is not a requirement of TUFLOW CATCH. Indeed, the user has full discretion with regard to how pollutant properties are set, and whilst perhaps making initial use of land use data, it is possible that different material polygons that represent the same land use are given different pollutant properties. For example, an ‘urban’ land use might be tagged to two separate housing estates in a generic land use GIS vector layer, but the user may also know that one estate has stormwater treatment devices in place and the other does not. In such an instance, different pollutant accumulation (and washoff) parameters can be applied through TUFLOW CATCH. In short, TUFLOW CATCH has been deliberately designed to allow users to insert their local knowledge of the systems being modelled into the model build process directly, down to a cell by cell spatial resolution if required, without being limited by lumping assumptions. Akin to the flexibility offered in spatial resolution, TUFLOW CATCH allows full control over the specification of pollutant accumulation rates, and in doing so allows the user to inform the modelling process with local knowledge and expertise. Users are therefore encouraged to undertake their own reviews and specifications of pollutant accumulation rates, and assocaited material configurations. Notwithstanding this, some indicative pollutant accumulation rates are provided in Table 3.1. These are indicative and are not intended to be seen as endorsed or recommended. Table 3.1: Indicative pollutant accumulation rates Pollutant Lower estimate (kg/ha/yr) Upper estimate (kg/ha/yr) Ammonium 0.20 2e+00 Nitrate 0.50 3e+00 Filterable reactive phosphorus 0.01 3e-02 Dissolved organic nitrogen 1.00 2e+00 Particulate organic nitrogen 1.00 3e+00 Dissolved organic phosphorus 0.01 5e-03 Particulate organic phosphorus 0.06 6e-01 Dissolved organic carbon 20.00 7e+01 Particulate organic carbon 12.00 4e+01 The relevant TUFLOW CATCH commands are described in Section XXXX. 3.2.3.2 Washoff TUFLOW CATCH allows for the specification of the manner in which the accumulated dry store mass described in Section 3.2.3.1 is washed off in response to local hydrologic conditions. This specification occurs in the same command line as accumulation rates (for a given pollutant), which is therefore also on a material by material basis: for a given material and pollutant, the accumulation and washoff parameters are co-specified, and therefore related. The TUFLOW CATCH washoff method is presented conceptually in Figure 3.4. Under wet weather conditions, a mass \\(\\Delta\\) is dissolved from the dry store mass (\\(\\alpha_{dry}\\)) into the wet store (\\(\\alpha_{wet}\\)) (i.e. to add to a water concentration) at a rate given by a user defined time constant (also referred to as a time of concentration), T\\(_c\\), such that over a timestep \\(dt\\): \\[\\begin{equation} \\Delta = dt\\frac{\\alpha_{dry}}{T_c} \\tag{3.1} \\end{equation}\\] This dissolution only occurs once user-specified minimum rain rates, \\(RR_{min}\\), and surface water depths \\(d_{min}\\) have both been exceeded. Otherwise, the dry store masses described in Section 3.2.3.1 are accumulated at the rates specified. Figure 3.4: Washoff method If a pollutant is released into its wet store, it is transported according to the progression of hydraulic flows (and associated advection and dispersion), which is completed as a separate calculation step to the generation update. Settling velocities can be optionally assigned to individual pollutants. Any settling returns pollutants from the wet store to the dry store. This is not recommended for dissolved pollutants. If soils and subsurface flow (interflow) is not simulated in TUFLOW HPC, then this transport is purely surficial. If soils are included then released pollutants will be transported in both the surface and subsurface in accordance with water flows. TUFLOW CATCH allows for the optional prevention of infiltration of a given pollutant into the subsurface flow if soils are included in the TUFLOW HPC simulation. This is relevant for particulate pollutants such as sediment or particulate organic material. A conceptualisation of TUUFLOW CATCH’s pollutant generation and transport methods is presented in Figure 3.5. Figure 3.5: TUFLOW CATCH pollutant generation method The relevant TUFLOW CATCH commands are described in Section XXXX. 3.2.4 Shear Stress Shear stress generation methods are common in natural waterway (e.g. estuaries and coastal oceans) modelling studies, particularly with regard to the simulation of sediment transport. In short, these methods conceptualise sediment release from the bed as a function of overlying hydrodynamic shear stress: once a specified minimum shear stress is exceeded, sediment is released to the water column. Similarly, these methods also allow for deposition of previously suspended sediment back to the bed, and this is typically allowed to occur once hydrodynamic shear stress drops below a specified maximum depositional shear stress. More advanced methods allow for construction of intermediary bed roughness models that translate raw hydrodynamic shear stress to the corresponding shear stress that is actually felt by the bed and can therefore cause erosion (or allow deposition). These methods therefore allow for the ongoing erosion and deposition of particulate materials as hydrodynamic conditions evolve in time and space.TUFLOW CATCH’s implementation of this method is described following. 3.2.4.1 Erosion TUFLOW CATCH allows for the specification of erosion behavior of any pollutant, on a spatially varying (material by material) basis. Even though this behaviour is specified per material, it used to undertake erosion calculations on a cell by cell basis at the beginning of every timestep. For example, if a user has specified a 5 metre TUFLOW HPC grid size, then erosion calculations will be undertaken at this same spatial resolution. As each pollutant erodes from its dry store mass, it is transferred to its wet store and advected/dispersed accordingly. This removal is tracked and reported at the end of a simulation as a loss to each cell’s dry store mass (kg/ha). TUFLOW CATCH adopts the Mehta erosion model on a cell by cell basis, such that the erosive flux \\(F_e\\) (g/m\\(^2\\)/s) is given by Equation (3.2) \\[\\begin{equation} F_e = E_r\\left(\\frac{\\tau}{\\tau_{ce}}-1\\right)^{\\alpha} \\tag{3.2} \\end{equation}\\] \\(E_r\\) is the erosion rate constant (g/m\\(^2\\)/s), \\(\\tau\\) is the hydrodynamic shear stress (N/m\\(^2\\)), \\(\\tau_{ce}\\) is the user specified critical shear stress for erosion (N/m\\(^2\\)), \\(\\alpha\\) is set to 1.0 and \\(\\tau &gt; \\tau_{ce}\\). TUFLOW CATCH does not deploy a bed roughness model so \\(\\tau\\) is the pure hydrodynamic shear stress calculated from cell velocity. Once computed, \\(F_e\\) is multiplied by cell area and timestep to compute eroded mass flux. This eroded mass is tracked so that at simulation end, TUFLOW CATCH produces a map of eroded areas that allows for identification, fro example, of ‘hotspot’ erosion locations. Users can specify a limit to the mass of pollutant that is eroded within each material to simulate, for example, the attainment of bedrock. The cell water depth below which no erosion occurs is also user specifiable. The relevant TUFLOW CATCH commands are described in Section XXXX. 3.2.4.2 Deposition TUFLOW CATCH allows for the specification of depositional behavior of any pollutant, on a spatially varying (material by material) basis. Even though this behaviour is specified per material, it used to undertake deposition calculations on a cell by cell basis at the beginning of every timestep. As each pollutant deposits from its wet store mass, it is transferred to its dry store mass. This deposition is tracked and reported at the end of a simulation as a gain to each cell’s dry store mass (kg/ha). TUFLOW CATCH adopts the Krone deposition model on a cell by cell basis, such that the depositional flux \\(F_d\\) (g/m\\(^2\\)/s) is given by Equation (3.3) \\[\\begin{equation} F_d = \\left(1-\\frac{\\tau}{\\tau_{cd}}\\right)w_sC \\tag{3.3} \\end{equation}\\] \\(\\tau\\) is the raw hydrodynamic shear stress (N/m\\(^2\\)), \\(\\tau_{cd}\\) is the user specified critical shear stress for deposition (N/m\\(^2\\)), w\\(_s\\) is the user specified settling velocity, \\(C\\) is the wet store cell concentration of pollutant and \\(\\tau &lt; \\tau_{cd}\\). The relevant TUFLOW CATCH commands are described in Section XXXX. "],["SimulationConstruction-1.html", "Section 4 Simulation Construction 4.1 Context 4.2 Usage intent 4.3 Initialisation 4.4 General arrangement 4.5 TUFLOW CATCH control file", " Section 4 Simulation Construction 4.1 Context Previous sections have presented the architecture and processes available within TUFLOW CATCH. This section describes the usage intent and construction of a TUFLOW CATCH simulation. This includes the use of the TUFLOW CATCH QGIS plugin, descriptions of all commands, with hyperlinks to the Appendices where commands and explanations are listed in a searchable and sortable table for ease of access. \\(\\newcommand{\\blockindent}{\\hspace{0.5cm}}\\) 4.2 Usage intent TUFLOW CATCH coordinates and executes TUFLOW HPC, a pollutant export model and TUFLOW FV, all automatically and with no direct user input required to affect this linkage. This does not mean that TUFLOW CATCH cannot be run until all models (TUFLOW HPC, pollutant export and TUFLOW FV) are fully constructed. To the contrary, the intention is that for application to integrated catchment studies that will at some stage need to draw on the power of TUFLOW CATCH, the single TUFLOW CATCH control file is used as the common control file for all model construction from project inception, even where this construction is undertaken in parallel by multiple users. The reason for this approach is that, for example, the TUFLOW HPC block of the TUFLOW CATCH control file is nothing other than a standard TUFLOW HPC *.tcf control file, with a small number of additional TUFLOW CATCH commands. This is intentional, and means that an experienced (or beginner) TUFLOW HPC modeller can follow normal model set up processes and procedures to construct the TUFLOW HPC component of TUFLOW CATCH model, unhindered, but via the TUFLOW CATCH control file arrangement. The same logic applies to users constructing the TUFLOW FV sections of a TUFLOW CATCH model - the TUFLOW HPC sections of the TUFLOW CATCH control file can be turned off and TUFLOW FV model construction commenced as usual through the *.tcc rather than *.fvc control file. Users in teams that adopt this approach may want to consider using versioning control software to manage concurrent multiple user contributions. It is understood that in some legacy cases, existing TUFLOW HPC or TUFLOW FV models (that were originally built outside TUFLOW CATCH) will need to be brought into a block of a TUFLOW CATCH control file. If this is the case, then the process is a matter of copying and pasting the original control files into the relevant TUFLOW CATCH control file block and populating the supporting folder structures with model data (see following sections). The key change that will be required on pasting into a *.tcc block will be to ensure file path references are correct (see following sections). This is only required from the *.tcc as it points to immediately called files, and no further. 4.3 Initialisation TUFLOW CATCH requires construction of a suite of folder substructures to support simulations. Ideally, these should be all co-located at the same folder level underneath a single directory that sits within an overall project directory. These substructures correspond to each of the three products potentially used in a TUFLOW CATCH simulation, and should be names as follows: TUFLOWCATCH TUFLOW (TUFLOW HPC) TUFLOWFV Each of these substructures has its own subfolder arrangement, consistent with those suggested for each for standalone TUFLOW HPC and TUFLOW FV modelling studies. For consistency, the suggested TUFLOWCATCH subfolder arrangement is also similar. To assist with this set up, and indeed more broadly with the initialisation, execution and results interrogation of a TUFLOW CATCH simulation, a freely available TUFLOW CATCH QGIS plugin has been developed. TUFLOW eLearning resources (also free of charge) have been prepared to support deployment and use of this TUFLOW CATCH plugin, and as such the content of that resource is not repeated here. Users are however encouraged to access this resource before initialising their first TUFLOW CATCH simulation: using this plugin is seen as a core component of the set up of a TUFLOW CATCH simulation. Doing so manually is discouraged. The eLearning materials can be accessed by: Registering for TUFLOW eLearning here if not already registered Emailing support@tuflow.com noting the registered username and with a request access to the TUFLOW CATCH plugin eLearning course Following instructions subsequently provided to access the course Complete the course On completion of the course, users will be able to initialise a TUFLOW CATCH simulation in the desired geographical projection system, complete with automatically populated templates for all control files. The sections presented below assume that this QGIS initialisation process has occurred and describe the resulting general arrangements and subsequent construction of a TUFLOW CATCH simulation. 4.4 General arrangement 4.4.1 Folder structure The overarching TUFLOW CATCH folder structure created using the QGIS plugin will appear (at the first tier) as per Figure 4.1 (with the top level folder named ‘Modelling’ selected by the user during initialisation). Figure 4.1: TUFLOW CATCH folder structure 4.4.2 Intended workflow The above folder structure supports the overall intended TUFLOW CATCH simulation workflow, such that: The TUFLOW CATCH folder (and control file, see below) is the single point of contact for execution of TUFLOW CATCH simulations, regardless of the combination of TUFLOW HPC or TUFLOW FV models being called All simulation results (again, regardless of what subsidiary TUFLOW products are called) are written to the TUFLOWCATCH/output subfolder: users should never need to navigate to TUFLOW HPC or TUFLOWFV folder structures to examine results from TUFLOW CATCH simulations Users do not need to (and should not) set up their own *.tcf (TUFLOW HPC) or *.(TUFLOW FV) top level control files in the respective TUFLOW and TUFLOWFV runs directories: TUFLOW CATCH does this automatically based on information provided in the overarching TUFLOW CATCH control file Calls to subsidiary first level control files from the overarching TUFLOW CATCH control file for both TUFLOW HPC and TUFLOW FV (such as *.tgc, bc_dbase etc. (TUFLOW HPC) or *.fvsed etc. (TUFLOW FV)) need to be provided as relative paths to locations that sit within the respective TUFLOW or TUFLOWFV subfolder arrangements These first level control files then should be constructed to make the usual calls to all other files and data with respective TUFLOW and/or TUFLOWFV subfolder arrangements All model data (e.g. grids, GIS, boundaries etc.) should be located within respective subfolder arrangements for TUFLOW and TUFLOW FV In short, it is intended that the: TUFLOW CATCH control file is the primary point of construction and execution contact TUFLOW and TUFLOWFV folder substructures contain input model data TUFLOWCATCH folder substructure contains model outputs Subsequent sections describe the TUFLOW CATCH control file set up and model execution. 4.5 TUFLOW CATCH control file A TUFLOW CATCH simulation is set up and executed by constructing a TUFLOW CATCH control file, extension *.tcc. THis file should reside in the TUFLOWCATCH\\runs directory set up with the TUFLOW CATCH QGIS plugin. The user is not required to (and should not) construct separate *.tcf or *.fvc control files. This TUFLOW CATCH control file has four separate but linked blocks: Global commands Catchment Hydraulic Model (TUFLOW HPC) commands Catchment Pollutant Export Model Receiving Model (TUFLOW FV) commands All blocks must be included in the above order, but can be optionally switched on and off with a single command (rather than extensive line commenting) to suit modelling needs. For example, a user working only on TUFLOW HPC model build tasks can turn off the pollutant export and TUFLOW FV sections and continue building a TUFLOW HPC model as per normal, without the need to always execute all components of TUFLOW CATCH. Construction of each of the TUFLOW CATCH control file blocks is described in the following sections. 4.5.1 Global commands This block of the TUFLOW CATCH control file contains information that is applied equally to both TUFLOW HPC and TUFLOW FV. It does not need to be declared as a block (as all subsequent blocks do). These global commands are presented following, with command argument options also shown. All commands are mandatory. Set the hardware to be used, with command arguments as either CPU or GPU: Hardware == Set the GIS format to be used, with command arguments as either SHP, GPKG or MI: GIS Format == Set projection to be used, as a path to a shape file. This will have been prepared by the TUFLOW CATCH plugin: SHP Projection == Set the date format, with command arguments as either ISODATE (dd/mm/yyy hh:mm:ss) or hours (a single float). It is strongly recommended that ISODATE be used for longer simulations, where interpreting hour output timestamps can be difficult: Date Format == Set the start and end dates in the format declared above: Start Date == End Date == Set the directory for simulation outputs (e.g. xmdf and netcdf results files). This can be set to any location as either a full path (e.g. X:), or as a path relative to the location of the TUFLOW CATCH control file (e.g. ..): Output Directory == Set the directory for writing simulation check files (e.g. .shp files). This can be set to any location as either a full path (e.g. X:), or as a path relative to the location of the TUFLOW CATCH control file (e.g. ..): Write Check Files == Set the directory for writing simulation log files. TUFLOW HPC and TUFLOW FV engine log files will be written to this location, as well as module log files (such as the water quality module of TUFLOW FV). This can be set to any location as either a full path (e.g. X:), or as a path relative to the location of the TUFLOW CATCH control file (e.g. ..): Log Folder == In order to collect all log files without name conflictions, TUFLOW CATCH renames the various log files before it writes them to the user nominated directory. The renaming convention is as follows: TUFLOW HPC related log files: &lt;TUFLOW CATCH tcc filename root&gt;_catchment_hydraulic_***.t*f TUFLOW FV related log files: &lt;TUFLOW CATCH tcc filename root&gt;_receiving_***.*log where *** indicates a usual extension expected in a log file such as “messages” (for TUFLOW HPC) or “ext_cfl_dt” (for TUFLOW FV) etc. For example, for a TUFLOW CATCH control file called SysModel_001.tcc, the following log files might be produced (depending on simulation options) TUFLOW HPC related log files: SysModel_001_catchment_hydraulic.hpc.tlf SysModel_001_catchment_hydraulic.tlf SysModel_001_catchment_hydraulic.tsf TUFLOW FV related log files: SysModel_001_receiving_ext_cfl_dt.log SysModel_001_receiving.log SysModel_001_receiving.fvwqlog Set the directory for writing the TUFLOW FV boundary condition files prepared by TUFLOW CATCH from TUFLOW HPC simulation, including boundary condition blocks and underlying data (timeseries) files. This command is required even if TUFLOW FV is not used in a TUFLOW CATCH simulation, in which case template TUFLOW FV files will be written to this location. TUFLOW CATCH also writes TUFLOW HPC diagnostic information to this location (regardless of whether TUFLOW FV is simulated), including timeseries files of predicted catchment-wide summed cumulative volumes and/or masses. These files can be useful for providing system understanding, even when TUFLOW FV is not activated. This directory should be always set as the bc_dbase folder within the TUFLOW CATCH folder substructure (as generated by the TUFLOW CATCH QGIS plugin), as a path relative to the location of the TUFLOW CATCH control file (i.e. ..\\bc_dbase): Catch Ouput Folder == ..\\bc_dbase Set the timestep (in simulation time seconds) at which lines within a boundary condition file for TUFLOW FV (created from TUFLOW HPC predictions) are separated. TUFLOW CATCH offers the user the option to set this timestep differently for different types of TUFLOW FV boundaries: nodestrings (Q boundaries that deliver momentum to TUFLOW FV) and lateral inflows (QC boundaries that do not deliver momentum to TUFLOW FV). It would be typical that nodestring boundaries are written at a shorter timestep to lateral boundaries, but this is not mandated, and the user is able to decide how this timestep relates to simulation time and file size constraints: Catch Output Interval Nodestring == &lt;float in seconds&gt; Catch Output Interval Lateral == &lt;float in seconds&gt; Set the frequency at which TUFLOW CATCH pauses to write out TUFLOW FV boundary condition files, in units of days (simulation time). Setting a value of 1 means that TUFLOW CATCH will hold all boundary information in memory for a day of simulation time, and then update TUFLOW FV boundary files with this held memory on a daily basis. For example, if outputs were set to be hourly via hourly via either of the above interval commands, then 24 lines would be added to each boundary file at time of writing: CSV Write Frequency Day == &lt;float in days&gt; An example block of these global commands that together configure a TUFLOW CATCH simulation (with clarifying section headers as comments) is: !________________________________________________________ ! GLOBAL COMMANDS ! Hardware Hardware == GPU ! GIS GIS Format == SHP SHP Projection == ..\\..\\TUFLOW\\model\\gis\\projection.prj ! Simulation settings Date Format == ISODATE Start Date == 01/01/2021 00:00:00 End Date == 01/02/2021 00:00:00 ! Output folders Output Directory == X:\\Project\\Output Write Check Files == ..\\check Log Folder == ..\\log ! Boundary condition configuration Catch Output Folder == ..\\bc_dbase Catch Output Interval Nodestring == 900 Catch Output Interval Lateral == 10800 CSV Write Frequency Day == 1 4.5.2 Catchment hydraulic model (TUFLOW HPC) commands This block of the TUFLOW CATCH control file contains commands that construct a TUFLOW HPC simulation. These commands are almost entirely those that would be used in setting up a standalone TUFLOW HPC control file (*.tcf), with a small number of additional commands that relate to TUFLOW CATCH. The catchment hydraulic model definition must be declared as a block that encloses all TUFLOW CATCH and TUFLOW HPC commands. This is different to the global commands section at the top of the TUFLOW CATCH control file, which does not need this encompassing structure. Set the beginning of the block, with command arguments as either HPC or none, and the end of the block (with no command arguments): Catchment Hydraulic Model == \\(\\blockindent\\) …catchment hydraulic model commands… \\(\\blockindent\\) …catchment hydraulic model commands… \\(\\blockindent\\) …catchment hydraulic model commands… End Catchment Hydraulic Model If the Catchment Hydraulic Model command is set to none, then catchment simulation is not executed, and TUFLOW FV will read blank (interim) boundary condition files prepared by TUFLOW CATCH. This approach might be adopted for the initial stages of a TUFLOW FV model build, or dry period tidal / thermal stratification calibration of a receiving water, for example. The TUFLOW CATCH commands contained within this Catchment Hydraulic Model block are described following, and all are mandatory. Set the directory from which TUFLOW CATCH controls TUFLOW HPC. Unless there is a need to the contrary, this should be set as a relative path to the TUFLOWdirectory set up by the TUFLOW CATCH QGIS plugin, i.e. ..\\..\\TUFLOW\\runs. Setting this to any other directory is not recommended: Runs Directory == Set the full or relative path to the location of the the TUFLOW HPC executable (including the name of the executable itself, with .exe extension) to be called by TUFLOW CATCH: EXE == Set the time format for output results. Given that the intention of TUFLOW CATCH is that it support addressing of longer term environmental investigations (i.e. not short term detailed ‘traditional’ flood studies), results written in hours format can be difficult to interpret in terms of seasonality, for example. As such, TUFLOW HPC can be instructed to write results in the date format adopted by TUFLOW FV. Doing so is strongly recommended, especially if TUFLOW FV is using the ISODATE format rather than hours: Time Format == TUFLOWFV Set the relationship between hours and dates. TUFLOW HPC reads boundary condition files and executes its internal computations using an hours (rather than date) timestamp, although this is being upgraded in the mid term. In order to coordinate simulation with TUFLOW FV, and to output results in date format, TUFLOW CATCH requires specification of the date that corresponds to zero hours in TUFLOW HPC boundary (and other) files. This command specifies that date at which boundary and other files refer to zero hours. Note the date time format expected, and that seconds is not a required field: Zero Date == &lt;dd/mm/yyyy hh:mm&gt; Set TUFLOW HPC to write TUFLOW CATCH related map outputs (e.g. pollutant and other hydraulic xmdf outputs, see Section XXXX). This catch command argument can be comma delimited with other outputs if required: Output Map Data Types == catch Following the issuing of these specific TUFLOW CATCH commands, a TUFLOW HPC model can be constructed in the same manner as a standalone model. In this regard: All TUFLOW HPC commands are recognised by TUFLOW CATCH and can be issued unchanged from the usage described in TUFLOW HPC’s manual and/or relevant release notes TUFLOW HPC commands that reference other subsidiary control files (such as geometry control files, *.tgc etc.) need to use relative paths, and point to the locations with the TUFLOW directory created by the TUFLOW CATCH QGIS plugin, e.g.: BC Database == ..\\..\\TUFLOW\\bc_dbase\\bc_dbase_001.csv These subsidiary control files can then in turn use path references are per standalone TUFLOW HPC model construction (and point to locations within the same TUFLOW directory structure) Variables can be set within the TUFLOW CATCH Catchment Hydraulic Model block for reference in any other subsidiary TUFLOW HPC files as per normal, e.g.: Set Variable 2D_CELL_SIZE == 25 Scenarios and events can be set within the TUFLOW CATCH Catchment Hydraulic Model block for reference in any other subsidiary TUFLOW HPC file IF statements as per normal, e.g.: Event == wet_year Some commands issued in the Global Commands section of the TUFLOW CATCH control file can be overwritten in the Catchment Hydraulic Model block to tailor the TUFLOW HPC simulation, including: GIS Format == GPKG ! Use geopackage format for TUFLOW HPC but not TUFLOW FV GPKG Projection == ..\\..\\TUFLOW\\model\\gis\\Projection.gpkg ! Use a projection geopackage within the TUFLOW folder structure Current limitations of the TUFLOW CATCH with regard to setting up TUFLOW HPC simulations include: Whilst events and scenarios can be manually defined and referenced (see above), dynamic assignment of same (using tilda notation in filenames etc.) is not yet supported. Each event or scenario will need a new TUFLOW CATCH control file An example block of these Catchment Hydraulic Model block commands that together configure a TUFLOW HPC simulation within TUFLOW CATCH (with clarifying section headers as comments) is: !_________________________________________________________________ ! CATCHMENT HYDRAULICS Catchment Hydraulic Model == HPC ! Base runs directory and executable Runs Directory == ..\\..\\TUFLOW\\runs EXE == C:\\EXE\\TUFLOW_iSP_w64.exe Time Format == TUFLOWFV Zero Date == 01/01/2021 00:00 ! GIS GIS Format == GPKG GPKG Projection == ..\\..\\TUFLOW\\model\\gis\\Projection.gpkg ! Solver HPC DP Check == OFF Solution scheme == HPC Timestep == 1 Timestep Maximum == 20 ! SGS Settings SGS == ON SGS Sample Target Distance == 1. GRID Format == TIF ! Gridding Set Variable 2D_CELL_SIZE == 10 ! Boundaries BC Database == ..\\..\\TUFLOW\\bc_dbase\\bc_dbase_001.csv ! Control files Geometry Control File == ..\\..\\TUFLOW\\model\\Demo.tgc BC Control File == ..\\..\\TUFLOW\\model\\Demo_001.tbc Read Materials File == ..\\..\\TUFLOW\\model\\materials.tmf Read Soils File == ..\\..\\TUFLOW\\model\\Demo.tsoilf Soil Negative Rainfall Approach == FACTOR Set Variable HC == 10000 Soil Negative Rainfall Factor == 0.2 ! Ouput map configuration Map Output Format == XMDF TIF Map Output Data Types == catch Map Output Interval == 300 TIF Map Output Interval == 0 TIF Map Output Data Types == h d dt Grid Output Cell Size == &lt;&lt;2D_CELL_SIZE&gt;&gt; SGS Map Extent Trim == All SGS Depth Output == Cell Average Map Cutoff Depth == 0.01 End Catchment Hydraulic Model 4.5.3 Pollutant export model commands This block of the TUFLOW CATCH control file contains commands that control pollutant export (and other constituent) simulation. The pollutant model definition must be declared as a block that encloses all commands. This is analogous to the declaration of a catchment hydraulic model. Set the beginning of the block, with command arguments as either mass accumulation release or none, and the end of the block (with no command arguments). The key phrase mass accumulation release activates all available pollutant export submodels. The keyword none turns off pollutant export simulation: Pollutant Export Model == \\(\\blockindent\\) …pollutant export model commands… \\(\\blockindent\\) …pollutant export model commands… \\(\\blockindent\\) …pollutant export model commands… End Pollutant Export Model If pollutant export is simulated, then all pollutants (and constituents) declared in the receiving model (TUFLOW FV, and including all called modules such as Sediment Transport and Water Quality) must be accounted for with the correct name in the pollutant export block. Each must be assigned either: A constant value/concentration for application to receiving model boundary condition, or A timeseries value/concentration for application to receiving model boundary conditions, or A pollutant export model, with supporting parameters, for TUFLOW CATCH pollutant export simulation 4.5.3.1 Constant Constant value/concentrations can be assigned when dynamic simulation is not required, such as for salinity or dissolved oxygen, for example. This specification is applied globally. Set a constant value/concentration that is applied to downstream receiving model boundary condition files by TUFLOW CATCH. In doing so: The name needs to exactly match that configured by the receiving model, and The concentration needs to be in the same units produced by the receiving model Constant &lt;name&gt; == &lt;concentration to be applied&gt; 4.5.3.2 Timeseries Timeseries values/concentrations can be assigned for which dynamic simulation is not required, but which values/concentrations likely vary in time. This might include water temperature specification, for example. This specification is applied globally. Set a timeseries that is applied to downstream receiving model boundary condition files by TUFLOW CATCH. In doing so: The name needs to exactly match that of variable configured by the receiving model, and The concentration needs to be in the same units produced by the receiving model Time-series &lt;name&gt; == &lt;bc name&gt; The &lt;bc name&gt; field refers to a name declared in the TUFLOW HPC boundary condition database. For example, ‘temperature_davg’, with the corresponding database entry being (in a database simplified for this example): Name,Source,Column 1,Column 2,Add Col 1,Mult Col 2,Add Col 2,Column 3,Column 4 temperature_davg,temperature_2021.csv,TUFLOW_Time,Airtemp,,,,, 4.5.3.3 Pollutant export Pollutant export models can be configured within TUFLOW CATCH to simulate the release of pollutants from the ground surface across the TUFLOW HPC model domain. This export is a core intention and capability of TUFLOW CATCH and can be configured as uniform or spatially varied across the TUFLOW HPC domain. Any nonuniform spatial definition uses the material numbers (and corresponding spatial distributions) already configured in the TUFLOW HPC model (i.e. the catchment hydraulic model block described above) and affects this through specification of material blocks in this part of the TUFLOW CATCH control file. These blocks are similar to those deployed by TUFLOW FV. Configure default (or spatially uniform) pollutant export: Material == all \\(\\blockindent\\) …commands… \\(\\blockindent\\) …commands… \\(\\blockindent\\) …commands… End Material Once these uniform conditions have been set, progressive specifications of material by material pollutant behaviour can be set. These specifications overwrite previous settings on a spatial basis. This stamping-style approach is akin to the way in which digital elevation model inputs can be progressively updated within TUFLOW HPC and TUFLOW FV by specifying a suite of elevation data that overwite each other on a sptail basis. In the case of pollutant export properties, this stamping is affected by specifying subsequent material blocks that relate to individual or multiple materials. Up to ten comma separated materials can be specified in one material block: Material == MatID1, MatID2, MatID3…, MatID10 \\(\\blockindent\\) …commands… \\(\\blockindent\\) …commands… \\(\\blockindent\\) …commands… End Material Once all material specifications have been processed, TUFLOW CATCH will check that all pollutants have had all export properties specified for the entire TUFLOW HPC domain (i.e. every computational grid cell). This includes accounting for constant and timeseries specifications (which are global and do not need to be applied within material blocks). Using the ‘all’ command argument in the first material block specified and providing information for every pollutant required within that block (and then progressively spatially refining) ensures this will be true. Once the initial uniform material specification has been made, not every pollutant needs to be specified in every subsequent material block - only alterations to the uniform conditions need be made. Each line within a material block contains a suite of arguments. Although there are some common commands, these generally differ according to the pollutant export model specified, as follows. 4.5.3.3.1 Accumulation and washoff TBC 4.5.3.3.2 Shear Stress TBC Once released, pollutants are transported in the surface using TUFLOW’s advection dispersion module. If soils have been included in the TUFLOW HPC simulation and infiltration of water occurs, then this water takes with it any previously released pollutants and continues to track these in the subsurface as it does water. Similarly, if TUFLOW HPC predicts that water travelling in soil layers intersects the ground surface, then any included pollutants are returned to the surface and advected and dispersed. If a particular pollutant is not required to infiltrate from the surface to subsurface, then this infiltration can be turned off (default is on): Infiltration &lt;name&gt; == off 4.5.4 Receiving model (TUFLOW FV) commands TBC "],["404.html", "Page not found", " Page not found The page you requested cannot be found (perhaps it was moved or renamed). You may want to try searching to find the page's new location, or use the table of contents to find the page you are looking for. "]]
