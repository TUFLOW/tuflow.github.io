{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"Welcome to the TUFLOW Viewer Documentation!","text":"<p>Warning</p> <p>This documentation is for the <code>2026.0.0-beta</code> release of the TUFLOW plugin which contains the beta release of the TUFLOW Viewer V2 tool. The documentation is under construction and parts of it, especially within the User Guide, are incomplete. This documentation, and the TUFLOW Viewer V2 tool, is also subject to change during the beta period without notice.</p> <p>It is recommended to visit the Getting Started page first as it is currently the most complete and will help you get started with using the TUFLOW Viewer V2 tool.</p> <p>This documentation explains the updated TUFLOW Viewer tool that is part of the TUFLOW plugin in QGIS in the <code>2026.0.0</code> TUFLOW plugin release in QGIS. </p> <p>The following pages show how to get started, use features such as opening and plotting TUFLOW results, and outline the road map for future developments.</p> <p>Getting Started User Guide Roadmap</p>"},{"location":"general-plot-display-options/","title":"General Plot Display Options","text":""},{"location":"general-plot-display-options/#summary-of-plotting-toolbar-icons","title":"Summary of plotting toolbar icons","text":"<p> - Used to select features in GIS results layers to extract data from for plotting.   - Used to digitise lines and points in QGIS canvas from which to extract map output data for plotting.   - Used to activate and deactivate loaded results files.   - Used to select chosen result type to plot from list of available result types for loaded results files and plot window type. </p>"},{"location":"general-plot-display-options/#using-a-date-axis","title":"Using a date axis","text":"<p>It is possible to change the a-axis of the Time Series plot window from time (hrs) to date by right clicking anywhere within the plot window and ticking on the 'Use datetime' checkbox. </p> <p></p>"},{"location":"general-plot-display-options/#displaying-the-current-time","title":"Displaying the Current Time","text":"<p>Showing the current time in the Time Series plot window can be done by right clicking anywhere in the plot window and ticking on the 'Show Current Time' checkbox. </p> <p></p>"},{"location":"general-plot-display-options/#customing-plot-axes","title":"Customing plot axes","text":"<p>The display and limits of the x and y axes within the plot window can be adjusted by right clicking anywhere in the plot window, and hovering the cursor over the X axis and Y axis widgets. The axes limits can be manually defined via user-defined values, or percentages here. The axes limits can be truncated by ticking the Visible Data only checkbox. By default the axes limits and displayed values are controlled by the movements of the user's mouse. The central button of the mouse can used to zoom in and out of the plot window, whilst panning from right to left can be controlled via the right click button of the mouse. Control of the axes display and limits via the mouse can be turned off by unticking the Mouse enabled checkbox. </p>"},{"location":"general-plot-display-options/#plot-line-grid-display","title":"Plot line grid display","text":"<p>The plot grid lines can be toggled on/off by right-clicking anywhere within the plot window and then navigating to Plot Options \u2192 Grid. You can then tick or untick the checkboxes to toggle the X and Y axes grid lines on and off, and move the thumb on the slider to control the opacity of the grid lines. </p> <p></p>"},{"location":"general-plot-display-options/#customising-plot-background-colour","title":"Customising plot background colour","text":"<p>The backgrond plot colour can be changed by navigating to Plugins \u2192 TUFLOW \u2192 TUFLOW Viewer V2 \u2192 TUFLOW Viewer Settings \u2192 General and then using the Plot theme dropdown to select the chosen colour option. </p> <p></p>"},{"location":"general-plot-display-options/#exporting-and-copying-data","title":"Exporting and copying data","text":"<p>It is possible to export or copy the current plot window as either raw data or an image. Exporting the plot will save the data or image as a file, while copying the plot will copy the data or image to the clipboard. The export and plot options can be accessed by right clicking anywhere on the plot window and then hovering the cursor over the Copy... and Export... options. </p>"},{"location":"getting-started/","title":"Getting Started with TUFLOW Viewer","text":"<p>This page describes how to get started with the new TUFLOW Viewer V2 which is currently in beta release as part of the <code>2026.0.0-beta</code> version of the TUFLOW Plugin for QGIS. </p> <p>This page will interchangeably refer to the new viewer as either TUFLOW Viewer V2 or simply TUFLOW Viewer. They should be taken to mean the same thing (i.e. the new version of the viewer). The current (or old) version of the viewer will be referred to as the legacy TUFLOW Viewer.</p>"},{"location":"getting-started/#qgis","title":"QGIS","text":"<p>TUFLOW Viewer operates within QGIS and relies on a range of QGIS and Python dependencies, most of which are satisfied by using the latest QGIS version. The following section describes these requirements in more detail.</p>"},{"location":"getting-started/#supported-qgis-versions","title":"Supported QGIS Versions","text":"<p>There isn't a definitive answer to the minimum version of QGIS required to use the TUFLOW Viewer as it depends on how QGIS was installed and what operating system is being used. As a general guideline, it is recommended to use at least QGIS 3.38, or QGIS 3.34.13 LTR if using long term release builds.</p> <p>The limiting factor is typically the Python environment that is bundled with QGIS. See the Python Environment section below for more details.</p> <p>Users can download QGIS from the official QGIS website. It is also possible to install QGIS via the OSGeo4W installer, however it is important to ensure that the required Python libraries are checked on during the installation steps as they are off by default in this method.</p> <p>Note, the TUFLOW Viewer V2 is supported in both the current stable QGIS builds and in the experimental Qt6 builds. It will also be available in QGIS 4.x when released. Even once QGIS 4.x is release, it will continue to support QGIS 3.x versions for the foreseeable future.</p>"},{"location":"getting-started/#python-environment","title":"Python Environment","text":"<p>QGIS includes its own embedded Python environment with a number of external dependencies already installed. However, there are some minimum Python requirements which are required to use the TUFLOW Viewer that are mostly affected by the QGIS version or how QGIS was installed.</p> <p>The TUFLOW Viewer requires Python 3.9 or later and the pandas library to be available (the latter is typically the limiting factor) and it is also recommended to have the netCDF4 library installed. It is possible to install pandas on older QGIS versions using the OSGeo4W Shell command window by running the <code>setup</code> utility (search \"osgeo4w shell\" under the start menu, enter \"setup\" in the shell and press return, then follow similar steps as this guide starting at Step 3: QGIS_Installation_with_OSGeo4W). However, upgrading to the latest version of QGIS or the latest QGIS LTR is the easiest method and recommended. </p> <p>It is possible to check what version of Python is installed and if pandas and other recommended Python libraries are available by using the TUFLOW Plugin About dialogue:</p>"},{"location":"getting-started/#installing-and-switching-to-tuflow-viewer-v2","title":"Installing and Switching to TUFLOW Viewer V2","text":""},{"location":"getting-started/#installation","title":"Installation","text":"<p>The TUFLOW Plugin is currently in a beta release and is not yet available via the QGIS Plugin Manager. Instead, the beta release replaces the development version and users can download the beta release following the steps below or by following wiki page on how to install the latest development version of the TUFLOW Plugin.</p> <ol> <li>You must have an existing installation of the TUFLOW Plugin, otherwise please follow the steps in the wiki page linked above.</li> <li>Download the latest development version from within QGIS via the TUFLOW Plugin menu </li> <li>Once the download is complete, click the Copy Path to Clipboard button to copy the path to the downloaded file to your clipboard</li> <li>Open the QGIS Plugin Manager via Plugins \u2192 Manage and Install Plugins</li> <li>Select the Install from ZIP tab on the left-hand side</li> <li>Paste the copied link into the Zip file field and click Install Plugin</li> </ol>"},{"location":"getting-started/#switching-to-tuflow-viewer-v2","title":"Switching to TUFLOW Viewer V2","text":"<p>TUFLOW Viewer V2 is currently an opt-in feature and is not enabled by default. It is also mutually exclusive with the legacy TUFLOW Viewer (i.e. only one viewer can be active at a time). To switch to the new viewer, please follow the steps below.</p> <ol> <li>Under the TUFLOW plugin menu, check on the TUFLOW Viewer V2 option to enable the new viewer </li> <li>To confirm if the new viewer has been activated (and the legacy viewer deactivated), check for the legacy TUFLOW Viewer icon  in the TUFLOW toolbar which will be replaced with the time-series icon  for the new TUFLOW Viewer</li> </ol> TUFLOW Toolbar with the legacy TUFLOW Viewer TUFLOW Toolbar with the new TUFLOW Viewer <p>Note, any open results loaded with the legacy TUFLOW Viewer will need to be closed and re-opened with the new viewer.</p>"},{"location":"getting-started/#quick-start-guide","title":"Quick Start Guide","text":""},{"location":"getting-started/#opening-an-xmdf","title":"Opening an XMDF","text":"<p>The new TUFLOW Viewer tries to integrate itself with QGIS a lot more closely than the legacy viewer, using native QGIS controls where possible and extending QGIS functionality behind the scenes where needed. It does this without adding any new widgets or user interfaces (excepting the plot widget) which has the benefit making it feel less like a separate tool and more like a patch to the core QGIS functionality. </p> <p>To this end, loading an XMDF result file is as simple as dragging the <code>.xmdf</code> file from Windows File Explorer into QGIS. Once opened, the QGIS temporal controller is automatically opened and configured and can be used to adjust the output timestep. The active data type can be changed by using the layer properties. It is highly recommended to use the Styling Panel (rather than the properties dialogue) which can be toggled on and off by pressing <code>F7</code> or <code>Ctrl+3</code> on the keyboard.</p> Loading an XMDF"},{"location":"getting-started/#plotting","title":"Plotting","text":""},{"location":"getting-started/#xmdf-time-series-plotting","title":"XMDF Time-Series Plotting","text":"<p>The legacy TUFLOW Viewer button  was replaced when switching to the new viewer with the time-series button  which is used to open the plot widget in the new TUFLOW Viewer. </p> <p>Once opened, the Data Types menu  can be used to select the desired data type to plot, and the Draw Tool  can be used to select the location on the map to plot from.</p> Plotting Timeseries from an XMDF"},{"location":"getting-started/#xmdf-section-plotting","title":"XMDF Section Plotting","text":"<p>The starting plot type is a time-series plot, but this can be changed by right-clicking the plot tab and selecting the desired plot type from the context menu. Alternatively, a new plot tab can be opened by clicking the <code>+</code> button in the tab strip and selecting the desired plot type from the context menu. </p> <p>Note, it is important to ensure that the workspace and results are in the correct projection and not incorrectly using a default CRS such as <code>WGS84</code>. The new TUFLOW Viewer will convert spherical distances to metres using the ellipsoidal method if a spherical system is being used. This will cause issues (most likely a blank plot) if the source data is already in a cartesian projection and does not require conversion.</p> Plotting Sections from an XMDF"},{"location":"getting-started/#tpc-time-series-plotting","title":"TPC Time-Series Plotting","text":"<p>Similar to XMDF results, TPC results can be loaded by dragging the <code>.tpc</code> file from Windows File Explorer into QGIS. This will automatically load the PLOT GIS layers into QGIS and results can now be plotted from. Instead of the Draw Tool, the Selection Tool  should be used and must be active before selecting any 1D elements on the map to plot from.</p> Plotting Timeseries from a TPC"},{"location":"getting-started/#tpc-section-plotting","title":"TPC Section Plotting","text":"Plotting Sections from a TPC"},{"location":"getting-started/#more-information","title":"More Information","text":"<p>The new TUFLOW Viewer supports all the formats the legacy TUFLOW Viewer supported plus a few more. For more information on how to load in other result formats, check files, plotting options, and any other available functionality, please refer to the User Guide section of the documentation.</p> <p>Although most of the core functionality is available, not all features and tools from the legacy TUFLOW Viewer has been ported across to the new TUFLOW Viewer yet. A list of planned features and improvements can be found in the TUFLOW Viewer V2 Roadmap.</p>"},{"location":"getting-started/#tuflow-viewer-v2-vs-legacy-tuflow-viewer","title":"TUFLOW Viewer V2 vs Legacy TUFLOW Viewer","text":"<p>The first, and main, difference between the legacy TUFLOW Viewer and the new TUFLOW Viewer V2 is the removal of the docking widget interface. The new viewer has no interface and instead relies on native functionality within QGIS to provide a more integrated experience. This means there is no longer a dedicated time slider provided by TUFLOW Viewer and the user should use the QGIS temporal controller to adjust the output timestep.</p> QGIS Temporal Controller <p>Likewise, when selecting the active result types, the QGIS layer properties should be used to adjust which data type is active for mesh based results. It is recommended to use the Styling Panel rather than the properties dialogue, as this can be toggled quickly with the <code>F7</code> or <code>Ctrl+3</code> keyboard shortcuts and does not lock the interface with a modal dialogue.</p> QGIS Styling Panel <p>Note, the new TUFLOW Viewer removes the interface, but is still working in the background to provide a better experience when working with TUFLOW results in QGIS. As an example, the TUFLOW Viewer enables XMDF files to be opened in QGIS by dragging and dropping them directly from Windows File Explorer, and allows results to be dragged from one QGIS instance to another.</p>"},{"location":"getting-started/#high-level-differences","title":"High Level Differences","text":"<ol> <li>Removal of the docking widget interface as mentioned above.</li> <li>The new viewer is built on top of the PyTUFLOW Python library which provides a more robust and efficient method for reading TUFLOW results. Users should notice an improved performance all round, especially when loading and plotting from large ESTRY result files. Large XMDF files are limited, as they were in the legacy TUFLOW Viewer, by the performance of the underlying QGIS library. Although PyTUFLOW will perform better caching of data in the background, so users should still notice an improvement here too when replotting previously plotted locations (e.g. when scrubbing through times on a section plot).</li> <li>Each loaded result is tied directly to a specific GIS layer, or set of GIS layers. For example, an XMDF is linked to the mesh layer, and the TPC result is tied to the _PLOT_ layers that are loaded when the TPC file is opened. Once those layers are removed from QGIS, the results are also unloaded, this means that they will no longer be available for plotting. The biggest affect that this might have is when loading multiple TPC results which will load in multiple sets of _PLOT_ layers. The plot layers may be identical (e.g. when loading in results from different events), however the user must keep all the layers in QGIS to keep the results available for plotting. It is still possible to plot the different results by selecting a channel from a single _PLOT_ layer, as long as the ID is present in the other TPC results.</li> </ol>"},{"location":"getting-started/#specific-differences","title":"Specific Differences","text":"<p>This section is designed to give a brief overview of some of the more specific differences between the legacy and new viewer for users who are familiar with the legacy TUFLOW Viewer. It is not an exhaustive list, but covers some of the more notable changes so users can get started quickly without reading through the entire user guide.</p>"},{"location":"getting-started/#plotting_1","title":"Plotting","text":"<ol> <li>Map output - plot \"from map multi\": In the legacy TUFLOW Viewer, there was a specific plotting option to add multiple points, or multiple lines, to a single-plot. This is now inherently supported by the Draw Tool  without any special options required. Each time the user clicks on the map, a new point is added to the plot (or a similar experience with lines when plotting sections). These locations can be redrawn by holding down <code>Ctrl</code> and clicking on the map again. Locations can also be individually toggled or removed via the Draw Tool menu.</li> <li>Map output - plot from \"layer selection\": In the legacy TUFLOW Viewer, there was a specific plotting option to plot from points defined in a vector layer. This option can be found under the Selection Tool  menu as Extract from map outputs.</li> </ol> <ol> <li>Time-series - selecting channels: The Selection Tool  must be active before selecting any times-series features to plot from. This has the benefit being able to be toggled off and then the QGIS selection tool can be used for other tasks without interfering what is being plotted.</li> <li>Time-series plot - show current time: This option can be found under the time-series plot context menu. The vertical time indicator line is also interactable and can be dragged to change the current time.</li> </ol> <ol> <li>Time-series plot - use datetime: This option can be found under the time-series plot context menu.</li> <li>Secondary axis: Plot items can be moved to the secondary axis by right-clicking the item in on the plot and selecting Move to secondary axis. They can be moved back to the primary axis in the same way. This works a little differently from the legacy behaviour where the entire result type was moved to the secondary axis. It is now done by specific plot item, so velocity from one location can be on the primary axis, while velocity from another location can be on the secondary axis.</li> </ol> <ol> <li>Plot navigation: Plot navigation (pan and zoom) is always active in the new TUFLOW Viewer. Use the left mouse button (or middle mouse button) to pan the plot, use the right mouse button to scale the plot, and use the mouse wheel to zoom. For secondary axes, hold down <code>Shift</code> or <code>Ctrl</code> to pan/zoom the secondary axis. Alternatively for secondary axes, the user can interact with the axis ticks directly to pan/zoom the secondary axis (e.g. left click and drag on the axis ticks on the right-hand side to pan the secondary axis up and down).</li> <li>Freezing the axis limits: If the plot axes are changed by the user (e.g. panning or zooming), the axes will remain fixed to those limits. The auto limit behaviour can be restored by clicking auto button  in the bottom left of the plot window. Plot limits can also be manually set by right-clicking the plot window and looking under the X axis or Y axis sub-menus (not available for the secondary axis yet).</li> <li>Exporting data: The export and copy data options are now found under the plot context menu.</li> </ol>"},{"location":"getting-started/#styling","title":"Styling","text":"<ol> <li>Mesh - saving default style: In the legacy TUFLOW Viewer, it was possible to save the current style to be the default style for the given result type. This is still possible and can be found by right-clicking the mesh layer in the QGIS Layers Panel and selecting the TUFLOW Viewer submenu. The style is cached into a local folder and unlike the legacy viewer, will survive plugin updates.</li> </ol>"},{"location":"loading-results/","title":"Loading Results","text":"<p>Warning</p> <p>The user guide is currently under construction and incomplete. It will be updated over time during the beta period. For now, it is recommended to visit the Getting Started page first as it is currently the most complete and will help you get started with using the TUFLOW Viewer V2 tool.</p>"},{"location":"loading-results/#loading-results","title":"Loading Results","text":"<p>This section explains how to open TUFLOW (or supported external) model results using TUFLOW Viewer V2 in QGIS. It covers the tools used to load results, supported formats, required layers and troubleshooting guidance.</p>"},{"location":"loading-results/#supported-file-formats","title":"Supported File Formats","text":"<p>TUFLOW Viewer V2 supports a wide range of results formats used across the TUFLOW software suite, and by external modelling software. These results formats can be enabled or disabled via the Formats tab in the TUFLOW Viewer Settings window. The supported formats include:</p> <ul> <li>BC Tables Check</li> <li>TUFLOW CATCH JSON</li> <li>Flood Modeller ZZN/CSV</li> <li>Flood Modeller DAT </li> <li>Hydraulic Tables Check</li> <li>NetCDF Grid </li> <li>NetCDF Mesh</li> <li>SMS DAT</li> <li>SWMM GPKG Time Series </li> <li>TPC</li> <li>TUFLOW Cross Sections</li> <li>XMDF </li> <li>FV BC Tide</li> </ul>"},{"location":"loading-results/#methods-for-loading-results-in-qgis","title":"Methods for loading results in QGIS","text":""},{"location":"loading-results/#method-1-drag-and-drop","title":"Method 1: Drag and Drop","text":"<p>The simplest method for loading results is via the Drag and Drop method. The results formats for which the Drag and Drop method is available, are documented in the Load Method column of TUFLOW Viewer Settings window.</p> <ol> <li>Locate your TUFLOW result file in Windows Explorer.</li> <li>Drag the file directly into the QGIS map window.</li> <li>The Viewer automatically detects the format and loads the relevant layers. The Temporal Controller panel will also be loaded automatically. </li> </ol> <p>This is the quickest method for most file types such as XMDF,TPC, NetCDF and SMS DAT.</p>"},{"location":"loading-results/#method-2-on-opened-via-plot-window","title":"Method 2: On Opened via Plot Window","text":"<p>Some users may prefer to open results through the Plot Window tool on the TUFLOW Toolbar. This is also the only available method for loading certain results formats such as TUFLOW Cross Sections. </p> <ol> <li>Select the TUFLOW Viewer Plot Window button.</li> <li>The plot panel will appear at the bottom or side of QGIS.</li> <li>Make sure the the results file is selected from the Result Names dropdown. </li> </ol>"},{"location":"loading-results/#method-3-qgis-browser-panel","title":"Method 3: QGIS Browser Panel","text":"<p>Advaced users may choose to load TUFLOW results using the QGIS Browser Panel. This method is helpful when managing large or multi-file result directories.</p> <p>1.Open the Browser panel in QGIS. 2.Navigate to your model results directory. 3.Right click supported files and choose Add Layer.</p>"},{"location":"loading-results/#required-layers","title":"Required Layers","text":"<p>Depending on the TUFLOW model type, the Viewer may load several layers:</p>"},{"location":"loading-results/#for-2d-results","title":"For 2D Results","text":"<ul> <li>2D water level  </li> <li>2D depth  </li> <li>2D velocity  </li> <li>Hazard and other derived grids  </li> <li>Optional mesh or vector layers  </li> </ul>"},{"location":"loading-results/#for-1d-results","title":"For 1D Results","text":"<ul> <li>1D nodes  </li> <li>1D links  </li> <li>1D hydrographs (viewed through the Plot Window)</li> </ul>"},{"location":"loading-results/#troubleshooting","title":"Troubleshooting","text":""},{"location":"loading-results/#no-layers-appear-when-loading-a-file","title":"No layers appear when loading a file","text":"<p>Check:  </p> <ul> <li>The file format has been enabled under TUFLOW View Settings \u2192 Formats </li> <li>The file type is supported by the Viewer  </li> <li>The file is not locked by another program  </li> <li>The file path does not contain restricted characters  </li> </ul>"},{"location":"loading-results/#wrong-layer-type-loads","title":"Wrong layer type loads","text":"<p>This may occur if:  </p> <ul> <li>File names do not follow expected TUFLOW conventions  </li> <li>Multiple files share similar names  </li> <li>Temporary or older versions of files remain in the folder  </li> </ul> <p>Try renaming files or using a clean working directory.</p>"},{"location":"loading-results/#plot-window-opens-but-no-data-appears","title":"Plot Window opens but no data appears","text":"<ul> <li>Ensure the selected feature has time series values  </li> <li>Confirm the correct layer is active  </li> <li>If working with 1D results, ensure node or link layers are visible  </li> </ul>"},{"location":"loading-results/#results-load-slowly","title":"Results load slowly","text":"<ul> <li>Network drives can affect performance  </li> <li>Large XMDF and NetCDF datasets may require more memory  </li> <li>Copy results locally where possible</li> </ul>"},{"location":"loading-results/#layers-dont-appear-when-i-load-results","title":"Layers don't appear when I load results","text":"<p>This may occur if: </p> <ul> <li>Results filenames for the same run are different, or have missing suffixes.</li> <li>The results files are empty. </li> </ul>"},{"location":"loading-results/#loading-results-whilst-tuflow-is-running","title":"Loading results whilst TUFLOW is running","text":"<p>Since QGIS 3.30 (on Windows), it is no longer possible to have the same XMDF open in QGIS that TUFLOW is actively writing results to (i.e. loading an XMDF into QGIS while TUFLOW is running). To get around this limitation, TUFLOW Viewer has the option to automatically copy the XMDF (or DAT, NC) mesh results to a temporary location before loading.</p>"},{"location":"loading-results/#how-to-turn-on","title":"How to Turn On","text":"<p>The option to turn on the copy results functionality can be found by opening the General tab in the TUFLOW Viewer Settings window. Open the dropdown menu for Output Loading and click on the Yes radio button for the option Copy hdf5 files before loading:. By default the copied results are saved to the following location on the user's local machine: C:\\Users\\Username.tuflow_plugin\\tuflow_viewer\\copied_results.</p>"},{"location":"plotting-1d-cross-sections/","title":"Plotting 1D ESTRY Cross Sections","text":"<p>Drag and drop the chosen the 1d_xs GIS layer into the Layers Panel and open the TUFLOW Viewer window from the TUFLOW Toolbar. Open a 'Section Plot' window by clicking on the '+' button on the tab strip and selecting 'Section Plot' as the type, or right click on the 'Time Series' tab and change the tab type to 'Section'. You can hold the shift key to select multiple 'xz' lines. </p>"},{"location":"plotting-2d-and-1d-bc-tables/","title":"Plotting 2D and 1D BC tables","text":"<p>The boundary conditions tables (automatically generated by TUFLOW or specified as inputs within the bc_dbase folder) applied to a simulation as 1d_BC or 2D_BC inputs can be viewed within the new TUFLOW Viewer window. To do this, drag and drop the relevant '1d_bc' and 'bcc_check' into the Layers Panel. </p> <p>Open the TUFLOW Viewer window from the TUFLOW toolbar. Ensure that the associated '1d_bc_check' or 'bcc_check' file has been selected in the Results Type icon and then select your chosen boundary type via the Data Types icon. The Selection icon in the TUFLOW Viewer window must then be activated. Once this is activated, the desired boundary points or regions in the '1d_bc_check' and 'bcc_check' files can then be selected in the QGIS Canvas. You can hold the shift key to select multiple 1D elements.</p>"},{"location":"plotting-hydraulic-properties/","title":"Plotting TUFLOW 1D Hydraulic Tables","text":"<p>The hydraulic properties for each link line in a 1D ESTRY network, including hydraulic radius, wetted perimeter, conveyance etc, can be plotted in the Section Plot window of the new TUFLOW Viewer. To do this, drag and drop the 'hydroprop_check_L' file for a simulation into the Layers Panel. </p> <p>Open the TUFLOW Viewer window from the TUFLOW toolbar. Ensure that the associated '1d_ta_tables_check' file has been selected in the Results Type icon and then select your chosen result type via the Data Types icon. The Selection icon in the TUFLOW Viewer window must then be activated. Once this is activated, the desired 1D link lines in the 'hydroprop_check_L' file can then be selected in the QGIS Canvas. You can hold the shift key to select multiple 1D elements.</p>"},{"location":"plotting-map-outputs/","title":"Plotting Map Outputs","text":"<p>Map Outputs are the time varying 2D mesh outputs from TUFLOW and the 3D mesh outputs from TUFLOW FV. The display, plotting, and styling options for the 2D and 3D mesh outputs in TUFLOW Viewer V2 are described in this section. </p>"},{"location":"plotting-map-outputs/#change-results-type-selection","title":"Change Results Type Selection","text":"<p>The displayed scalar result type can be changed by right clicking the mesh layer in the Layers Panel then selecting Properties (alternatively by left clicking the mesh layer in the Layers Panel, or by pressing F7 to open the Properties window) and navigating to Symbology \u2192 Datasets. The Symbology tab is located on the left-hand side of the Properties window. The desired scalar result type can then be selected by clicking on one of the palette buttons on the right hand side of the window.</p> <p>Example </p> <p></p>"},{"location":"plotting-map-outputs/#display-vectors","title":"Display Vectors","text":"<p>Vectors can be displayed for vector result types by right clicking the mesh layer in the Layers Panel then selecting Properties (alternatively by left clicking the mesh layer in the Layers Panel, or by pressing F7 to open the Properties window) and navigating to Symbology \u2192 Datasets. The Symbology tab is located on the left-hand side of the Properties window.</p> <p>On the far right hand side of the window the vectors for the chosen vector result type can then be toggled on by clicking on the arrow to the right of the relevant palette button. The vectors can be displayed alone, or overlaid on the scalar outputs by selecting both the arrow and the palette buttons. </p> <p>Example </p> <p></p>"},{"location":"plotting-map-outputs/#style-scalar-map-outputs","title":"Style Scalar Map Outputs","text":"<p>Scalar map output types can be styled in a very similar way as raster layers in QGIS. This can be done via right clicking the mesh layer in the Layers Panel, then selecting Properties (alternatively by left clicking the mesh layer in the Layers Panel, or by pressing F7 to open the Properties window) and navigating to Symbology \u2192 Contours. </p> <p>The following options are available for defining the styling of the scalar results:</p> <ol> <li>A custom, or pre-defined colour ramp can be chosen by clicking on the dropdown arrow for Color Ramp. There is also option to invert by selecting the Invert Color Ramp option. </li> <li>The opacity value can be manually entered, or set using the slider at the top of the window. </li> <li>The min/max values from all timesteps for a scalar output can be extracted by clicking on the \"Load\" button. Alternatively, users can manually define the min/max values. Values outside of this range can be removed from the display by ensuring that the 'Clip out of range' values option is ticked. </li> </ol> <p>Example </p> <p></p>"},{"location":"plotting-map-outputs/#style-vector-map-outputs","title":"Style Vector Map Outputs","text":"<p>Vector result types can be styled as arrows, streamlines, traces, or wind barbs. The most common way (and the default style) is as vector arrows. The size of the arrow can be scaled several different ways and there are also options to change things such as the line width, colour, arrow head size etc.</p> <p>The styling options can be accessed by right clicking the mesh layer in the Layers Panel then selecting Properties (alternatively by left clicking the mesh layer in the Layers Panel, or by pressing F7 to open the Properties window) and navigating to Symbology \u2192 Vectors. </p> <p>The following options are available for defining the styling of the vectors: </p> <ol> <li>The Symbology dropdown can be used to switch between arrows, streamlines, traces, and wire barbs. </li> <li>Values can be entered in the Line Width box to adjust the thickness of the vector lines. </li> <li>The Coloring Method dropdown can be used to switch between the Single Color (default) and Color Ramp Shader options. The Color Ramp Shader option allows the user to render the vectors thematically. </li> <li>The sizing of the arrow heads can be controlled by manually entering % values in the Width and Length boxes. </li> </ol>"},{"location":"plotting-map-outputs/#arrow-scaling-options","title":"Arrow Scaling Options","text":"<p>Arrows can be scaled several different ways:</p> <ul> <li>Fixed - arrow lengths are fixed and the only thing that varies is the direction</li> <li>Defined by Min and Max - Arrow lengths are adjusted so that the minimum vector magnitude is sized to the minimum arrow length and vice versa for the maximum and everything in-between is sized accordingly. User will specify min and max arrow size for this option.</li> <li>Scaled to Magnitude - Arrow lengths are scaled solely based on vector magnitude. User will specify a scale factor for this option.</li> </ul> <p>Example </p> <p></p>"},{"location":"plotting-map-outputs/#display-the-mesh","title":"Display the Mesh","text":"<p>The model mesh can be displayed by right clicking the mesh layer in the Layers Panel then selecting Properties (alternatively by left clicking the mesh layer in the Layers Panel, or by pressing F7 to open the Properties window) and navigating to Symbology \u2192 Rendering. The mesh can then be displayed by ensuring that the Native Mesh Rendering option is ticked (or the Triangular Mesh Rendering is ticked if the results have been generated using a TUFLOW FV triangular mesh). The Rendering window contains options for changing the line thickness and colour of the mesh.</p> <p>Example </p> <p></p>"},{"location":"plotting-map-outputs/#3d-to-2d-depth-averaging","title":"3D to 2D Depth Averaging","text":"<p>The 2D depth averaged value for 3D map outputs can modified directly via the TUFLOW Viewer V2 window or via the layer Properties window.</p> <ol> <li>Drag and drop TUFLOW FV 3D results into the Layers Panel in QGIS.</li> <li>Open the TUFLOW Viewer window from the toolbar and click on the Data Types icon. </li> <li>Hover over Depth Averaging widget at bottom of Data Types menu to open the list of available methods. </li> <li>Hover over the widget for the desired method(s) and then enter the result type and input values that you require. You can use the Add additional button to select another layer, range or result type.  </li> </ol> <p>The primary benefit of doing this directly from the TUFLOW Viewer window is the comparative ease with which plots using multiple methods, result types, layers, and ranges can be configured and displayed. </p> <p>There are a range of 3D to 2D Depth Averaging methods available: </p> <ul> <li>Single Vertical Level (from top): Displays the value from the specified vertical layer indexed from the water surface. </li> <li>Single Vertical Level (from bottom): Displays the value from the specified vertical layer indexed from the bed. </li> <li>Multi Vertical Level (from top): Displays the value averaged from the specified range of vertical layers indexed from the water surface. </li> <li>Multi Vertical Level (from bottom): Displays the value averaged from the specified range of vertical layers indexed from the bed.</li> <li>Sigma: Displays values averaged across a specified fraction of the water column. Values can range from 0 (bed) to 1 (water surface).</li> <li>Depth (relative to surface): Displays values averaged across depth range defined relative to water surface. </li> <li>Height (relative to bed level): Displays values averaged across height range defined relative to bed level. </li> <li>Elevation (absolute elevation value to model datum): Displays values averaged across specified range of elevation values. </li> </ul> <p>Alternatively the 3D to 2D depth averaging method can be specified by navigating to Properties \u2192 Symbology \u2192 Stacked Mesh Averaging Method. The 3D to 2D Depth Averaging method can then be changed via the Method dropdown. </p>"},{"location":"plotting-map-outputs/#changing-reference-time","title":"Changing Reference Time","text":"<p>For TUFLOW Classic and HPC map outputs the reference time typically defaults to '1990-01-01 00:00:00', which will determine the isodate values shown for the 'Animation Range' in the Temporal Controller window. If you want to change this you can go to Properties \u2192 Temporal and then manually enter the desired start time in isodate format for the results in the Reference Time text box. </p> <p>TUFLOW FV map outputs have isodate time ranges specified in the .fvc and therefore typically have correct reference time in the Properties and Temporal Controller windows on loading into QGIS. </p> <p>Example </p> <p></p>"},{"location":"plotting-map-outputs/#plotting-time-series","title":"Plotting Time Series","text":"<p>To plot time series of 2D mesh based outputs, open the TUFLOW Viewer window from the TUFLOW Toolbar. A Time Series plot window should open on loading TUFLOW Viewer by default. Additional Time Series plot windows can be added by clicking on the '+' button on the tab strip and selecting Time Series Plot as the type. </p> <p>To start plotting data in the Time Series plot window , select the desired result type(s) via the Data Types icon, and then activate the Draw icon. Once the Draw icon is activated, the locations at which to extract the map outputs can then be selected by clicking on the QGIS Canvas. By default, the new TUFLOW Viewer can extract outputs at multiple locations in the QGIS Canvas. The plots for these locations can be toggled on and off via the Draw icon dropdown.  </p> <p>Example </p> <p></p>"},{"location":"plotting-map-outputs/#plotting-longitudinal-and-cross-section-profiles","title":"Plotting longitudinal and cross-section profiles","text":"<p>To plot cross-sections from 2D mesh based outputs, open the TUFLOW Viewer window from the TUFLOW Toolbar. Open a Section Plot window by clicking on the '+' button on the tab strip and selecting Section Plot as the type, or right click on the Time Series tab and change the tab type to Section. </p> <p>To begin plotting data in the Section plot window, select the desired result type via the Data Types icon and then activate the Draw icon. The cross section lines along which the map outputs should be extracted can then be digitised in the QGIS Canvas. Right click to complete the digitisation of each cross-section line in the QGIS Canvas. As the cursor is moved in the Section Plot window the location of the plotted data points over which the cursor is located will be dynamically indicated by a white circle on the digitised cross section line. </p> <p>By default the new TUFLOW Viewer can extract outputs for multiple cross section lines in the QGIS Canvas. The plots for these cross-section lines can be toggled on or off via the Draw icon dropdown. The time slider in the Temporal Controller window can then be used to iterate through the results at different timesteps. </p> <p>Example </p> <p></p>"},{"location":"plotting-map-outputs/#3d-curtain-plots","title":"3D Curtain Plots","text":"<p>To generate curtain plots for TUFLOW FV 3D outputs, open the TUFLOW Viewer window from the TUFLOW Toolbar. Open a Curtain Plot window by clicking on the '+' button on the tab strip and selecting Curtain Plot as the type, or right click on the Time Series tab and change the tab type to Curtain. </p> <p>To begin plotting data in the Curtain plot window, select the desired result type via the Data Types icon and then activate the Draw icon. The  lines along which the map outputs should be extracted for the curtain plot can then be digitised in the QGIS Canvas. Right click to complete the digitisation of each line in the QGIS Canvas. Results can be extracted across multiple lines simultaneously in the QGIS Canvas and can be toggled on and off in the Curtain plot window via the Draw icon dropdown. The time slider in the Temporal Controller window can then be used to iterate through the results at different timesteps. </p> <p>The thickness of the grid lines on the Curtain Plot window can be controlled by right clicking anywhere within the plot window and hovering over the Curtain grid line thickness widget. You can then adjust the thickness of the grid lines by moving the adjusting of the position of the thumb on the slider.</p> <p>Example </p> <p></p>"},{"location":"plotting-map-outputs/#3d-vertical-profiles","title":"3D Vertical Profiles","text":"<p>To generate 3D vertical profile plots for TUFLOW FV 3D outputs, open the TUFLOW Viewer window from the TUFLOW Toolbar. Open a Profile Plot window by clicking on the '+' button on the tab strip and selecting Profile Plot as the type, or right click on the Time Series tab and change the tab type to Profile. </p> <p>To begin plotting data in the Profile plot window, select the desired result type via the Data Types icon and then activate the Draw icon. The locations at which the outputs should be extracted can then be selected by clicking on the QGIS Canvas.</p> <p>By default, the new TUFLOW Viewer can extract outputs at multiple locations in the QGIS Canvas. The plots for these locations can be toggled on and off via the Draw icon dropdown.  The time slider in the Temporal Controller window can then be used to iterate through the results at different timesteps.  </p> <p>The boundaries between vertical layers within the water column can be turned on (or off) within the Profile Plot window by right clicking anywhere within the plot window and then ticking the box for Show vertical level boundaries. </p> <p>Interpolation of the values between the vertical profiles can be turned on (or off) by clicking anywhere within the plot window and then ticking the box for Linear interpolation between levels. </p> <p>Example </p> <p></p>"},{"location":"plotting-time-series-outputs/","title":"Plotting Time Series Outputs","text":"<p>Time series outputs are typically 1D result outputs or 2D time series results (plot outputs or reporting locations). Time series results consist of two elements, the result datasets and GIS layers that the user can interact with to customise the plot selection in TUFLOW Viewer.</p>"},{"location":"plotting-time-series-outputs/#plotting-time-series-for-1d-tpc-results","title":"Plotting Time Series for 1D .tpc results","text":"<p>To plot time series of 1D .tpc results, open the TUFLOW Viewer window from the TUFLOW Toolbar. A Time Series plot window should open on loading TUFLOW Viewer by default. Additional Time Series plot windows can be added by clicking on the '+' button on the tab strip and selecting 'Time Series Plot' as the type. </p> <p>To start plotting data in the Time Series plot window , select the desired result type(s) via the Data Types icon. The Selection icon in the TUFLOW Viewer window must then be activated. Once this is activated, the desired 1D elements (link lines or nodes) can then be selected in the QGIS Canvas. You can hold the shift key to select multiple 1D elements. Ensure that the relevant .tpc GIS layer has been selected within the Layers Panel. </p> <p>Example </p> <p></p>"},{"location":"plotting-time-series-outputs/#plotting-longitudinal-profiles-for-1d-tpc-results","title":"Plotting longitudinal profiles for 1D .tpc results","text":"<p>To plot longitudinal profiles for 1D .tpc outputs, open the TUFLOW Viewer window from the TUFLOW Toolbar. Open a Section Plot window by clicking on the '+' button on the tab strip and selecting Section Plot as the type, or right click on the Time Series tab and change the tab type to Section. </p> <p>To begin plotting data in the Section plot window, select the desired result type via the Data Types icon and then activate the Selection icon. If you a select a single link line in the QGIS Canvas a longitudinal profile will be plotted between this link line, and the link line at the downstream end of the same channel (a channel here denotes a series of connected link lines). If you hold the shift key and select more than two link lines, every possible longitudinal profile between the selected elements will be plotted, each of which is referred to as a 'batch'. For example, selecting six lines will result in the generation of five longitudinal profiles, or 'batches' being plotted. You can toggle the different 'batches' on or off via the Batch Selector icon which will appear once more than two link lines have been selected.</p> <p>The time slider in the Temporal Controller window can then be used to iterate through the results at different timesteps. </p> <p>Example </p> <p></p>"},{"location":"plotting-time-series-outputs/#changing-reference-date","title":"Changing reference date","text":"<p>It is not currently possible to change the reference time for .tpc outputs upon loading into QGIS. To set the reference time for the .tpc results, this must be done prior to loading them into QGIS by opening the .tpc file in a text editor of your choice and adding the following line: </p> <p>Reference Time == YYYY-MM-DD hh:mm:ss</p>"},{"location":"plotting-time-series-outputs/#plotting-flood-modeller-time-series","title":"Plotting Flood Modeller Time Series","text":"<p>To plot time series of 1D Flood Modeller Pro results, drag and drop the relevant Flood Modeller Pro .gxy file into the Layers Panel. This will trigger the Import Flood Modeller Results window to appear. Point the text boxes to the location of the relevant Flood Modeller Pro newtork (.DAT) and results (.ZZN or .CSV) files. The .CSV file must have been exported from the Flood Modeller Pro GUI's Tabular CSV result extractor in the format of one column per node.</p> <p>After loading, open the TUFLOW Viewer window from the TUFLOW Toolbar. A Time Series plot window should open on loading TUFLOW Viewer by default. Additional Time Series plot windows can be added by clicking on the '+' button on the tab strip and selecting Time Series Plot as the type. </p> <p>To start plotting data in the Time Series plot window , select the desired result type(s) via the Data Types icon. The Selection icon in the TUFLOW Viewer window must then be activated. Once this is activated, the desired 1D nodes (all results types are only available for nodes) can then be selected in the QGIS Canvas. You can hold the shift key to select multiple 1D elements. Ensure that points GIS layer is selected in the Layers Panel.</p> <p>Example</p> <p></p>"},{"location":"plotting-time-series-outputs/#plotting-swmm-gpkg-time-series","title":"Plotting SWMM GPKG Time Series","text":"<p>To plot SWMM GPKG time series results, drag and drop the relevant swmm_ts.gpkg file into the Layers Panel. After loading, open the TUFLOW Viewer window from the TUFLOW Toolbar. A Time Series plot window should open on loading TUFLOW Viewer by default. Additional Time Series plot windows can be added by clicking on the '+' button on the tab strip and selecting Time Series Plot as the type. </p> <p>To start plotting data in the Time Series plot window , select the desired result type(s) via the Data Types icon. The Selection icon in the TUFLOW Viewer window must then be activated. Once this is activated, the desired 1D nodes (nodes or link lines) can then be selected in the QGIS Canvas. You can hold the shift key to select multiple 1D elements. Ensure that the relevan GIS layer is selected in the Layers Panel.</p> <p>The GPKG format is different from the TPC format as it supports temporal styling in QGIS. The line colour and width can be varied at each timestep based on the value of a specific result type such as flow. The format is fully compatible with the QGIS Temporal Controller and reacts dynamically as the Temporal Controller is updated. This results in a dynamic, and intuitive, method of showing the user the flood progression in the 1D system</p> <p></p>"},{"location":"roadmap/","title":"TUFLOW Viewer Roadmap","text":"<p>Although TUFLOW Viewer V2 already has many of the core functionalities implemented, there are still several features and tools from the legacy TUFLOW Viewer that have not been ported across yet. The following roadmap outlines the planned features and improvements for future releases of the TUFLOW Viewer V2 tool. This roadmap is focussed on the features that are currently missing compared to the legacy TUFLOW Viewer and does not include all potential new features. This roadmap is subject to change and may be updated as development progresses.</p> <p>The order of the features listed below is loosely based on priority, with higher priority features listed first. However, the actual implementation order may vary based on development considerations.</p>"},{"location":"roadmap/#export-animation-tool","title":"Export Animation Tool","text":"<p>This is probably the highest priority feature missing from TUFLOW Viewer V2 as it is a commonly used tool in the legacy viewer and an important part of a deliverable workflow.</p> <p>In the meantime, if you don't require plots on your animation, it is possible to export an animation in the main map window using the QGIS temporal controller. In the linked video, a GIF is created, however if you prefer a <code>.mp4</code> or other video format, FFmpeg can be used convert image sequences to video files. Indeed, this is how the legacy TUFLOW Viewer created animations. FFmpeg is similar to a TUFLOW utility and can be executed via a batch file. An example batch file command is provided for you to modify:</p> <pre><code>ffmpeg.exe -framerate 10 -i animation_export_%04d.png -c:v libx264 -pix_fmt yuv420p -movflags +faststart output.mp4\n</code></pre> <p>Some of the customisable or important parts of the command are explained below:</p> <ul> <li><code>-framerate 10</code> specifies the frame rate of the output video (10 frames per second in this case).</li> <li><code>-i animation_export_%04d.png</code> specifies the input image sequence, where <code>%04d</code> is a placeholder for a four-digit frame number (e.g., <code>0001</code>, <code>0002</code>, etc.). Make sure this matches your exported image filenames as shown below in the Template field:</li> </ul> <ul> <li><code>output.mp4</code> is the name of the output video file.</li> <li>Another important aspect is to make sure the image width and height are divisible by 2, otherwise FFmpeg may throw an error. These settings can be adjusted in the export animation dialogue in QGIS (you can see these fields in the above image).</li> </ul>"},{"location":"roadmap/#flux-tool","title":"Flux Tool","text":"<p>TUFLOW Viewer V2 uses PyTUFLOW to read and extract data from results, and currently this is not supported in PyTUFLOW. It is planned to add this support in both PyTUFLOW and TUFLOW Viewer V2. It is most likely going to be calculated slightly differently where it will use the <code>q</code> map output data type rather than the <code>d</code> and <code>v</code> data types as done in the legacy viewer. The depth and velocity data work OK for flat cells, and is almost guaranteed to be present in most results (which is why it was originally chosen), however as sub-grid sampling has been introduced in TUFLOW, this becomes less accurate. So if you want to use the flux tool in the future, it is recommended to start adding the <code>q</code> map output data type to your models!</p>"},{"location":"roadmap/#plot-customisation","title":"Plot Customisation","text":"<p>Currently, there is very little support for plot customisation i.e. legends, axis labels, titles, custom colours etc. Plot customisation can be quite complex to implement for an interactive and dynamic plotting tool, as settings need to survive plot redraws and updates. It is planned to add some basic customisation options in future releases, with more advanced options to be added later on. </p> <p>It is also planned to add the ability to access a given plot via the Python console so that users can customise the plot using pyqtgraph directly which will allow the maximum amount of customisation, albeit with some Python knowledge required.</p>"},{"location":"roadmap/#user-plot-data","title":"User Plot Data","text":"<p>This will most likely be implemented in a similar way to the legacy viewer with a few tweaks to make it more in keeping with how the new viewer works. It is also planned to be setup in a way that allows different plot types in the future e.g. bar charts for representing rainfall hyetographs.</p>"},{"location":"roadmap/#plot-statistics","title":"Plot Statistics","text":"<p>This is predominately in relation to extracting median and mean plot data for Australian Rainfall &amp; Runoff (ARR) design storms. It is also planned to set this up such that other statistics can be extracted from the plot in the future as well.</p>"},{"location":"user-guide/","title":"User Guide","text":"<p>Warning</p> <p>The user guide is currently under construction and incomplete. It will be updated over time during the beta period. For now, it is recommended to visit the Getting Started page first as it is currently the most complete and will help you get started with using the TUFLOW Viewer V2 tool.</p> <p>This section showcases the plotting tools available in TUFLOW Viewer V2, and provides instructions on how to load and plot different TUFLOW and supported external result types. </p> <p>Loading Results Plotting Map Outputs Plotting Time Series Outputs Plotting 1D Cross Sections Plotting Hydraulic Properties Plotting Boundary Conditions Tables General Plot Display Options</p>"}]}