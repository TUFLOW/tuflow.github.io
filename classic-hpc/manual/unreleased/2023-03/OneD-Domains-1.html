<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Section 5 1D Network Domains - ESTRY | TUFLOW Classic/HPC User Manual</title>
  <meta name="description" content="TUFLOW User Manual" />
  <meta name="generator" content="bookdown 0.39 and GitBook 2.6.7" />

  <meta property="og:title" content="Section 5 1D Network Domains - ESTRY | TUFLOW Classic/HPC User Manual" />
  <meta property="og:type" content="book" />
  <meta property="og:image" content="/images/TUFLOW.jpg" />
  <meta property="og:description" content="TUFLOW User Manual" />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Section 5 1D Network Domains - ESTRY | TUFLOW Classic/HPC User Manual" />
  
  <meta name="twitter:description" content="TUFLOW User Manual" />
  <meta name="twitter:image" content="/images/TUFLOW.jpg" />

<meta name="author" content="2023-03-AF Release" />



  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  <link rel="shortcut icon" href="images/TUFLOW.ico" type="image/x-icon" />
<link rel="prev" href="ControlFiles-and-Inputs-1.html"/>
<link rel="next" href="OneD-SWMM-1.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>
<script src="libs/kePrint-0.0.1/kePrint.js"></script>
<link href="libs/lightable-0.0.1/lightable.css" rel="stylesheet" />
<link href="libs/htmltools-fill-0.5.8.1/fill.css" rel="stylesheet" />
<script src="libs/htmlwidgets-1.6.4/htmlwidgets.js"></script>
<script src="libs/plotly-binding-4.10.4/plotly.js"></script>
<script src="libs/typedarray-0.1/typedarray.min.js"></script>
<link href="libs/crosstalk-1.2.1/css/crosstalk.min.css" rel="stylesheet" />
<script src="libs/crosstalk-1.2.1/js/crosstalk.min.js"></script>
<link href="libs/plotly-htmlwidgets-css-2.11.1/plotly-htmlwidgets.css" rel="stylesheet" />
<script src="libs/plotly-main-2.11.1/plotly-latest.min.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
  
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
</style>
<style type="text/css">
/* Used with Pandoc 2.11+ new --citeproc when CSL is used */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
  margin-bottom: 1em;
}
.hanging div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}
</style>

<link rel="stylesheet" href="css\style.css" type="text/css" />
<link rel="stylesheet" href="css\toc.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="https://docs.tuflow.com/classic-hpc/manual/unreleased/2023-03/"><img src="images/TUFLOW_Manual_23.png" style="width:270px" ></a></li>

<li class="divider"></li>
<li><a href="index.html#section" id="toc-section"></a></li>
<li class="chapter" data-level="" data-path="overview.html"><a href="overview.html"><i class="fa fa-check"></i>Overview</a>
<ul>
<li class="chapter" data-level="" data-path="overview.html"><a href="overview.html#how-to-use-this-manual"><i class="fa fa-check"></i>How to use this Manual</a>
<ul>
<li class="chapter" data-level="" data-path="overview.html"><a href="overview.html#navigation"><i class="fa fa-check"></i>Navigation</a></li>
<li class="chapter" data-level="" data-path="overview.html"><a href="overview.html#searching"><i class="fa fa-check"></i>Searching</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="overview.html"><a href="overview.html#about-this-manual"><i class="fa fa-check"></i>About this Manual</a></li>
<li class="chapter" data-level="" data-path="overview.html"><a href="overview.html#glossary-and-notation"><i class="fa fa-check"></i>Glossary and Notation</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="contents.html"><a href="contents.html"><i class="fa fa-check"></i>Contents</a>
<ul>
<li class="chapter" data-level="" data-path="contents.html"><a href="contents.html#list-of-figures"><i class="fa fa-check"></i>List of Figures</a></li>
<li class="chapter" data-level="" data-path="contents.html"><a href="contents.html#list-of-tables"><i class="fa fa-check"></i>List of Tables</a></li>
</ul></li>
<li class="chapter" data-level="1" data-path="Introduction-1.html"><a href="Introduction-1.html"><i class="fa fa-check"></i><b>1</b> Introduction</a>
<ul>
<li class="chapter" data-level="1.1" data-path="Introduction-1.html"><a href="Introduction-1.html#TUFLOWProducts-2"><i class="fa fa-check"></i><b>1.1</b> TUFLOW Products</a>
<ul>
<li class="chapter" data-level="1.1.1" data-path="Introduction-1.html"><a href="Introduction-1.html#TUFLOW-CLA-3"><i class="fa fa-check"></i><b>1.1.1</b> TUFLOW Classic – 2D Semi-Implicit Solver</a></li>
<li class="chapter" data-level="1.1.2" data-path="Introduction-1.html"><a href="Introduction-1.html#TUFLOW-HPC-3"><i class="fa fa-check"></i><b>1.1.2</b> TUFLOW HPC – 2D GPU Accelerated Solver</a></li>
<li class="chapter" data-level="1.1.3" data-path="Introduction-1.html"><a href="Introduction-1.html#TUFLOW1D-3"><i class="fa fa-check"></i><b>1.1.3</b> TUFLOW 1D (ESTRY) – 1D Solver</a></li>
<li class="chapter" data-level="1.1.4" data-path="Introduction-1.html"><a href="Introduction-1.html#SWMM1D-3"><i class="fa fa-check"></i><b>1.1.4</b> EPA SWMM – 1D Solver</a></li>
<li class="chapter" data-level="1.1.5" data-path="Introduction-1.html"><a href="Introduction-1.html#AddonModules-3"><i class="fa fa-check"></i><b>1.1.5</b> Add-on Modules</a></li>
</ul></li>
<li class="chapter" data-level="1.2" data-path="Introduction-1.html"><a href="Introduction-1.html#TUFLOWWebinars-2"><i class="fa fa-check"></i><b>1.2</b> TUFLOW Webinars</a></li>
<li class="chapter" data-level="1.3" data-path="Introduction-1.html"><a href="Introduction-1.html#ModellingEnvironment-2"><i class="fa fa-check"></i><b>1.3</b> Modelling Environment</a></li>
<li class="chapter" data-level="1.4" data-path="Introduction-1.html"><a href="Introduction-1.html#LimitationsandRecommendations-2"><i class="fa fa-check"></i><b>1.4</b> Limitations and Recommendations</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="GettingStarted-1.html"><a href="GettingStarted-1.html"><i class="fa fa-check"></i><b>2</b> Getting Started</a>
<ul>
<li class="chapter" data-level="2.1" data-path="GettingStarted-1.html"><a href="GettingStarted-1.html#HowtoBuildYourFirstModel-2"><i class="fa fa-check"></i><b>2.1</b> How to Build Your First Model</a>
<ul>
<li class="chapter" data-level="2.1.1" data-path="GettingStarted-1.html"><a href="GettingStarted-1.html#TutorialModels-3"><i class="fa fa-check"></i><b>2.1.1</b> Tutorial Models</a></li>
<li class="chapter" data-level="2.1.2" data-path="GettingStarted-1.html"><a href="GettingStarted-1.html#ExampleModels-3"><i class="fa fa-check"></i><b>2.1.2</b> Example Models</a></li>
<li class="chapter" data-level="2.1.3" data-path="GettingStarted-1.html"><a href="GettingStarted-1.html#DemonstrationModels-3"><i class="fa fa-check"></i><b>2.1.3</b> Demonstration Models</a></li>
<li class="chapter" data-level="2.1.4" data-path="GettingStarted-1.html"><a href="GettingStarted-1.html#LicenceFreeDemoMode-3"><i class="fa fa-check"></i><b>2.1.4</b> Licence Free Demo Mode</a></li>
<li class="chapter" data-level="2.1.5" data-path="GettingStarted-1.html"><a href="GettingStarted-1.html#eLearningModules-3"><i class="fa fa-check"></i><b>2.1.5</b> eLearning Modules</a></li>
<li class="chapter" data-level="2.1.6" data-path="GettingStarted-1.html"><a href="GettingStarted-1.html#InstructorLedTUFLOWTrainingCourses-3"><i class="fa fa-check"></i><b>2.1.6</b> Instructor Led TUFLOW Training Courses</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="GettingStarted-1.html"><a href="GettingStarted-1.html#TheTUFLOWModellingConcept-2"><i class="fa fa-check"></i><b>2.2</b> The TUFLOW Modelling Concept</a>
<ul>
<li class="chapter" data-level="2.2.1" data-path="GettingStarted-1.html"><a href="GettingStarted-1.html#Notepad-3"><i class="fa fa-check"></i><b>2.2.1</b> Notepad++</a></li>
<li class="chapter" data-level="2.2.2" data-path="GettingStarted-1.html"><a href="GettingStarted-1.html#QGISTUFLOWViewer-3"><i class="fa fa-check"></i><b>2.2.2</b> QGIS / TUFLOW Viewer</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="GettingStarted-1.html"><a href="GettingStarted-1.html#InstallingandRunningTUFLOW-2"><i class="fa fa-check"></i><b>2.3</b> Installing and Running TUFLOW</a>
<ul>
<li class="chapter" data-level="2.3.1" data-path="GettingStarted-1.html"><a href="GettingStarted-1.html#TUFLOWDownloadsandInstallation-3"><i class="fa fa-check"></i><b>2.3.1</b> TUFLOW Downloads and Installation</a></li>
<li class="chapter" data-level="2.3.2" data-path="GettingStarted-1.html"><a href="GettingStarted-1.html#Licencing-3"><i class="fa fa-check"></i><b>2.3.2</b> Licencing</a></li>
<li class="chapter" data-level="2.3.3" data-path="GettingStarted-1.html"><a href="GettingStarted-1.html#PerformingSimulations-3"><i class="fa fa-check"></i><b>2.3.3</b> Performing Simulations</a></li>
</ul></li>
<li class="chapter" data-level="2.4" data-path="GettingStarted-1.html"><a href="GettingStarted-1.html#FoldersFileTypesandFileNaming-2"><i class="fa fa-check"></i><b>2.4</b> Folders, File Types and File Naming</a>
<ul>
<li class="chapter" data-level="2.4.1" data-path="GettingStarted-1.html"><a href="GettingStarted-1.html#FolderStructure-3"><i class="fa fa-check"></i><b>2.4.1</b> Folder Structure</a></li>
<li class="chapter" data-level="2.4.2" data-path="GettingStarted-1.html"><a href="GettingStarted-1.html#FileTypes-3"><i class="fa fa-check"></i><b>2.4.2</b> File Types</a></li>
<li class="chapter" data-level="2.4.3" data-path="GettingStarted-1.html"><a href="GettingStarted-1.html#NamingConventions-3"><i class="fa fa-check"></i><b>2.4.3</b> Naming Conventions</a></li>
</ul></li>
<li class="chapter" data-level="2.5" data-path="GettingStarted-1.html"><a href="GettingStarted-1.html#TipsandTricks-2"><i class="fa fa-check"></i><b>2.5</b> Tips and Tricks</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="Fundamentals-1.html"><a href="Fundamentals-1.html"><i class="fa fa-check"></i><b>3</b> Hydraulic Modelling Fundamentals</a>
<ul>
<li class="chapter" data-level="3.1" data-path="Fundamentals-1.html"><a href="Fundamentals-1.html#Fundaments-Introduction-2"><i class="fa fa-check"></i><b>3.1</b> Introduction</a></li>
<li class="chapter" data-level="3.2" data-path="Fundamentals-1.html"><a href="Fundamentals-1.html#Schematisation-2"><i class="fa fa-check"></i><b>3.2</b> Schematisation</a>
<ul>
<li class="chapter" data-level="3.2.1" data-path="Fundamentals-1.html"><a href="Fundamentals-1.html#GeneralGuidance-3"><i class="fa fa-check"></i><b>3.2.1</b> General Guidance</a></li>
<li class="chapter" data-level="3.2.2" data-path="Fundamentals-1.html"><a href="Fundamentals-1.html#id_1D2Dor3D-3"><i class="fa fa-check"></i><b>3.2.2</b> Model Dimensions: 1D, 2D or 3D?</a></li>
<li class="chapter" data-level="3.2.3" data-path="Fundamentals-1.html"><a href="Fundamentals-1.html#Coupled1D2D-3"><i class="fa fa-check"></i><b>3.2.3</b> Coupled 1D-2D</a></li>
<li class="chapter" data-level="3.2.4" data-path="Fundamentals-1.html"><a href="Fundamentals-1.html#FixedGridorQuadtreeGrid-3"><i class="fa fa-check"></i><b>3.2.4</b> Quadtree Grid</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="Fundamentals-1.html"><a href="Fundamentals-1.html#ModelResolutionDiscretisation-2"><i class="fa fa-check"></i><b>3.3</b> Model Resolution (Discretisation)</a>
<ul>
<li class="chapter" data-level="3.3.1" data-path="Fundamentals-1.html"><a href="Fundamentals-1.html#id_1DNetworks-3"><i class="fa fa-check"></i><b>3.3.1</b> 1D Networks</a></li>
<li class="chapter" data-level="3.3.2" data-path="Fundamentals-1.html"><a href="Fundamentals-1.html#CellSizes-3"><i class="fa fa-check"></i><b>3.3.2</b> 2D Cell Sizes</a></li>
<li class="chapter" data-level="3.3.3" data-path="Fundamentals-1.html"><a href="Fundamentals-1.html#SubGridSamplingSGS-3"><i class="fa fa-check"></i><b>3.3.3</b> Sub-Grid Sampling (SGS)</a></li>
<li class="chapter" data-level="3.3.4" data-path="Fundamentals-1.html"><a href="Fundamentals-1.html#CellSizeResultsConvergence-3"><i class="fa fa-check"></i><b>3.3.4</b> Cell Size Results Convergence</a></li>
</ul></li>
<li class="chapter" data-level="3.4" data-path="Fundamentals-1.html"><a href="Fundamentals-1.html#SolutionAccuracy-2"><i class="fa fa-check"></i><b>3.4</b> Solution Accuracy</a>
<ul>
<li class="chapter" data-level="3.4.1" data-path="Fundamentals-1.html"><a href="Fundamentals-1.html#FluidFlowPhysicalTerms-3"><i class="fa fa-check"></i><b>3.4.1</b> Fluid Flow Physical Terms</a></li>
<li class="chapter" data-level="3.4.2" data-path="Fundamentals-1.html"><a href="Fundamentals-1.html#FormsoftheEquations-3"><i class="fa fa-check"></i><b>3.4.2</b> Forms of the Equations</a></li>
<li class="chapter" data-level="3.4.3" data-path="Fundamentals-1.html"><a href="Fundamentals-1.html#NumericalAccuracy-3"><i class="fa fa-check"></i><b>3.4.3</b> Numerical Accuracy</a></li>
</ul></li>
<li class="chapter" data-level="3.5" data-path="Fundamentals-1.html"><a href="Fundamentals-1.html#TimestepBackground-2"><i class="fa fa-check"></i><b>3.5</b> Timestep</a>
<ul>
<li class="chapter" data-level="3.5.1" data-path="Fundamentals-1.html"><a href="Fundamentals-1.html#FixedVersusAdaptiveTimestepping-3"><i class="fa fa-check"></i><b>3.5.1</b> Fixed versus Adaptive Timestepping</a></li>
<li class="chapter" data-level="3.5.2" data-path="Fundamentals-1.html"><a href="Fundamentals-1.html#OneDDomainsTimestep-3"><i class="fa fa-check"></i><b>3.5.2</b> TUFLOW 1D (ESTRY) and EPA SWMM</a></li>
<li class="chapter" data-level="3.5.3" data-path="Fundamentals-1.html"><a href="Fundamentals-1.html#TUFLOWClassicTimestep-3"><i class="fa fa-check"></i><b>3.5.3</b> TUFLOW Classic 2D</a></li>
<li class="chapter" data-level="3.5.4" data-path="Fundamentals-1.html"><a href="Fundamentals-1.html#TUFLOWHPCTimestep-3"><i class="fa fa-check"></i><b>3.5.4</b> TUFLOW HPC 2D</a></li>
</ul></li>
<li class="chapter" data-level="3.6" data-path="Fundamentals-1.html"><a href="Fundamentals-1.html#SimulationTimes-2"><i class="fa fa-check"></i><b>3.6</b> Simulation Times</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="ControlFiles-and-Inputs-1.html"><a href="ControlFiles-and-Inputs-1.html"><i class="fa fa-check"></i><b>4</b> Control Files and Input Layers</a>
<ul>
<li class="chapter" data-level="4.1" data-path="ControlFiles-and-Inputs-1.html"><a href="ControlFiles-and-Inputs-1.html#introduction"><i class="fa fa-check"></i><b>4.1</b> Introduction</a></li>
<li class="chapter" data-level="4.2" data-path="ControlFiles-and-Inputs-1.html"><a href="ControlFiles-and-Inputs-1.html#control-files"><i class="fa fa-check"></i><b>4.2</b> Control Files</a>
<ul>
<li class="chapter" data-level="4.2.1" data-path="ControlFiles-and-Inputs-1.html"><a href="ControlFiles-and-Inputs-1.html#Notation-3"><i class="fa fa-check"></i><b>4.2.1</b> Rules and Notation</a></li>
<li class="chapter" data-level="4.2.2" data-path="ControlFiles-and-Inputs-1.html"><a href="ControlFiles-and-Inputs-1.html#FilePath-3"><i class="fa fa-check"></i><b>4.2.2</b> File Paths</a></li>
<li class="chapter" data-level="4.2.3" data-path="ControlFiles-and-Inputs-1.html"><a href="ControlFiles-and-Inputs-1.html#Units-3"><i class="fa fa-check"></i><b>4.2.3</b> Units</a></li>
<li class="chapter" data-level="4.2.4" data-path="ControlFiles-and-Inputs-1.html"><a href="ControlFiles-and-Inputs-1.html#TCF-3"><i class="fa fa-check"></i><b>4.2.4</b> TCF</a></li>
<li class="chapter" data-level="4.2.5" data-path="ControlFiles-and-Inputs-1.html"><a href="ControlFiles-and-Inputs-1.html#ECF-3"><i class="fa fa-check"></i><b>4.2.5</b> ECF</a></li>
<li class="chapter" data-level="4.2.6" data-path="ControlFiles-and-Inputs-1.html"><a href="ControlFiles-and-Inputs-1.html#TBC-3"><i class="fa fa-check"></i><b>4.2.6</b> TBC</a></li>
<li class="chapter" data-level="4.2.7" data-path="ControlFiles-and-Inputs-1.html"><a href="ControlFiles-and-Inputs-1.html#TGC-3"><i class="fa fa-check"></i><b>4.2.7</b> TGC</a></li>
<li class="chapter" data-level="4.2.8" data-path="ControlFiles-and-Inputs-1.html"><a href="ControlFiles-and-Inputs-1.html#QCF-3"><i class="fa fa-check"></i><b>4.2.8</b> QCF</a></li>
<li class="chapter" data-level="4.2.9" data-path="ControlFiles-and-Inputs-1.html"><a href="ControlFiles-and-Inputs-1.html#TEF-3"><i class="fa fa-check"></i><b>4.2.9</b> TEF</a></li>
<li class="chapter" data-level="4.2.10" data-path="ControlFiles-and-Inputs-1.html"><a href="ControlFiles-and-Inputs-1.html#TOC-3"><i class="fa fa-check"></i><b>4.2.10</b> TOC</a></li>
<li class="chapter" data-level="4.2.11" data-path="ControlFiles-and-Inputs-1.html"><a href="ControlFiles-and-Inputs-1.html#TRFC-3"><i class="fa fa-check"></i><b>4.2.11</b> TRFC</a></li>
<li class="chapter" data-level="4.2.12" data-path="ControlFiles-and-Inputs-1.html"><a href="ControlFiles-and-Inputs-1.html#TESF-3"><i class="fa fa-check"></i><b>4.2.12</b> TESF</a></li>
<li class="chapter" data-level="4.2.13" data-path="ControlFiles-and-Inputs-1.html"><a href="ControlFiles-and-Inputs-1.html#ADCF-3"><i class="fa fa-check"></i><b>4.2.13</b> ADCF</a></li>
<li class="chapter" data-level="4.2.14" data-path="ControlFiles-and-Inputs-1.html"><a href="ControlFiles-and-Inputs-1.html#TSCF-3"><i class="fa fa-check"></i><b>4.2.14</b> TSCF</a></li>
<li class="chapter" data-level="4.2.15" data-path="ControlFiles-and-Inputs-1.html"><a href="ControlFiles-and-Inputs-1.html#ReadFile-3"><i class="fa fa-check"></i><b>4.2.15</b> Read File</a></li>
<li class="chapter" data-level="4.2.16" data-path="ControlFiles-and-Inputs-1.html"><a href="ControlFiles-and-Inputs-1.html#Override-3"><i class="fa fa-check"></i><b>4.2.16</b> Override Files</a></li>
</ul></li>
<li class="chapter" data-level="4.3" data-path="ControlFiles-and-Inputs-1.html"><a href="ControlFiles-and-Inputs-1.html#Databases-2"><i class="fa fa-check"></i><b>4.3</b> Databases</a></li>
<li class="chapter" data-level="4.4" data-path="ControlFiles-and-Inputs-1.html"><a href="ControlFiles-and-Inputs-1.html#GISLayers-2"><i class="fa fa-check"></i><b>4.4</b> Input Layers</a>
<ul>
<li class="chapter" data-level="4.4.1" data-path="ControlFiles-and-Inputs-1.html"><a href="ControlFiles-and-Inputs-1.html#GISFormats-3"><i class="fa fa-check"></i><b>4.4.1</b> Input Formats</a></li>
<li class="chapter" data-level="4.4.2" data-path="ControlFiles-and-Inputs-1.html"><a href="ControlFiles-and-Inputs-1.html#GISCommands-3"><i class="fa fa-check"></i><b>4.4.2</b> GIS Commands</a></li>
<li class="chapter" data-level="4.4.3" data-path="ControlFiles-and-Inputs-1.html"><a href="ControlFiles-and-Inputs-1.html#GPKG-3"><i class="fa fa-check"></i><b>4.4.3</b> GeoPackage Commands</a></li>
<li class="chapter" data-level="4.4.4" data-path="ControlFiles-and-Inputs-1.html"><a href="ControlFiles-and-Inputs-1.html#GRID-3"><i class="fa fa-check"></i><b>4.4.4</b> Grid Commands</a></li>
<li class="chapter" data-level="4.4.5" data-path="ControlFiles-and-Inputs-1.html"><a href="ControlFiles-and-Inputs-1.html#TIN-3"><i class="fa fa-check"></i><b>4.4.5</b> TIN Commands</a></li>
<li class="chapter" data-level="4.4.6" data-path="ControlFiles-and-Inputs-1.html"><a href="ControlFiles-and-Inputs-1.html#RowCol-3"><i class="fa fa-check"></i><b>4.4.6</b> RowCol Commands (Legacy)</a></li>
</ul></li>
<li class="chapter" data-level="4.5" data-path="ControlFiles-and-Inputs-1.html"><a href="ControlFiles-and-Inputs-1.html#LayeringData-2"><i class="fa fa-check"></i><b>4.5</b> Layering Data</a></li>
<li class="chapter" data-level="4.6" data-path="ControlFiles-and-Inputs-1.html"><a href="ControlFiles-and-Inputs-1.html#XF-Files-2"><i class="fa fa-check"></i><b>4.6</b> XF Files</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="OneD-Domains-1.html"><a href="OneD-Domains-1.html"><i class="fa fa-check"></i><b>5</b> 1D Network Domains - ESTRY</a>
<ul>
<li class="chapter" data-level="5.1" data-path="OneD-Domains-1.html"><a href="OneD-Domains-1.html#OneD-Introduction-2"><i class="fa fa-check"></i><b>5.1</b> Introduction</a></li>
<li class="chapter" data-level="5.2" data-path="OneD-Domains-1.html"><a href="OneD-Domains-1.html#Scheme-2"><i class="fa fa-check"></i><b>5.2</b> Schematisation</a></li>
<li class="chapter" data-level="5.3" data-path="OneD-Domains-1.html"><a href="OneD-Domains-1.html#SolutionScheme-2"><i class="fa fa-check"></i><b>5.3</b> Solution Scheme</a></li>
<li class="chapter" data-level="5.4" data-path="OneD-Domains-1.html"><a href="OneD-Domains-1.html#OneD-nwk-2"><i class="fa fa-check"></i><b>5.4</b> 1d_nwk Attributes</a></li>
<li class="chapter" data-level="5.5" data-path="OneD-Domains-1.html"><a href="OneD-Domains-1.html#Channel-Intro-2"><i class="fa fa-check"></i><b>5.5</b> Channels Overview</a></li>
<li class="chapter" data-level="5.6" data-path="OneD-Domains-1.html"><a href="OneD-Domains-1.html#Open-Channel-2"><i class="fa fa-check"></i><b>5.6</b> Open Channels</a>
<ul>
<li class="chapter" data-level="5.6.1" data-path="OneD-Domains-1.html"><a href="OneD-Domains-1.html#I-channels-3"><i class="fa fa-check"></i><b>5.6.1</b> Inertial Channels</a></li>
<li class="chapter" data-level="5.6.2" data-path="OneD-Domains-1.html"><a href="OneD-Domains-1.html#NI-channels-3"><i class="fa fa-check"></i><b>5.6.2</b> Non-Inertial Channels</a></li>
</ul></li>
<li class="chapter" data-level="5.7" data-path="OneD-Domains-1.html"><a href="OneD-Domains-1.html#XS-2"><i class="fa fa-check"></i><b>5.7</b> Cross-Sections</a>
<ul>
<li class="chapter" data-level="5.7.1" data-path="OneD-Domains-1.html"><a href="OneD-Domains-1.html#XS-flags-3"><i class="fa fa-check"></i><b>5.7.1</b> Type “XZ” Optional Flags</a></li>
<li class="chapter" data-level="5.7.2" data-path="OneD-Domains-1.html"><a href="OneD-Domains-1.html#HW-flags-3"><i class="fa fa-check"></i><b>5.7.2</b> Type “HW” Optional Flags</a></li>
<li class="chapter" data-level="5.7.3" data-path="OneD-Domains-1.html"><a href="OneD-Domains-1.html#Parallel-Channel-3"><i class="fa fa-check"></i><b>5.7.3</b> Parallel Channel Analysis</a></li>
<li class="chapter" data-level="5.7.4" data-path="OneD-Domains-1.html"><a href="OneD-Domains-1.html#Eff-vs-Total-3"><i class="fa fa-check"></i><b>5.7.4</b> Effective Area versus Total Area</a></li>
<li class="chapter" data-level="5.7.5" data-path="OneD-Domains-1.html"><a href="OneD-Domains-1.html#XS-Mid-3"><i class="fa fa-check"></i><b>5.7.5</b> Mid Cross-Sections</a></li>
<li class="chapter" data-level="5.7.6" data-path="OneD-Domains-1.html"><a href="OneD-Domains-1.html#XS-End-3"><i class="fa fa-check"></i><b>5.7.6</b> End Cross-Sections</a></li>
<li class="chapter" data-level="5.7.7" data-path="OneD-Domains-1.html"><a href="OneD-Domains-1.html#Interpolate-XS-3"><i class="fa fa-check"></i><b>5.7.7</b> Interpolated Cross-Section Protocols</a></li>
</ul></li>
<li class="chapter" data-level="5.8" data-path="OneD-Domains-1.html"><a href="OneD-Domains-1.html#Structures-2"><i class="fa fa-check"></i><b>5.8</b> Structures</a>
<ul>
<li class="chapter" data-level="5.8.1" data-path="OneD-Domains-1.html"><a href="OneD-Domains-1.html#culverts-pipes-3"><i class="fa fa-check"></i><b>5.8.1</b> Culverts and Pipes</a></li>
<li class="chapter" data-level="5.8.2" data-path="OneD-Domains-1.html"><a href="OneD-Domains-1.html#Bridges-3"><i class="fa fa-check"></i><b>5.8.2</b> Bridges</a></li>
<li class="chapter" data-level="5.8.3" data-path="OneD-Domains-1.html"><a href="OneD-Domains-1.html#BArch-3"><i class="fa fa-check"></i><b>5.8.3</b> Arch Bridge</a></li>
<li class="chapter" data-level="5.8.4" data-path="OneD-Domains-1.html"><a href="OneD-Domains-1.html#Weir-3"><i class="fa fa-check"></i><b>5.8.4</b> Weirs</a></li>
<li class="chapter" data-level="5.8.5" data-path="OneD-Domains-1.html"><a href="OneD-Domains-1.html#SP-3"><i class="fa fa-check"></i><b>5.8.5</b> Spillways (SP)</a></li>
<li class="chapter" data-level="5.8.6" data-path="OneD-Domains-1.html"><a href="OneD-Domains-1.html#SG-3"><i class="fa fa-check"></i><b>5.8.6</b> Sluice Gates (SG)</a></li>
<li class="chapter" data-level="5.8.7" data-path="OneD-Domains-1.html"><a href="OneD-Domains-1.html#LossAdjustment-3"><i class="fa fa-check"></i><b>5.8.7</b> Adjustment of Contraction and Expansion Losses</a></li>
</ul></li>
<li class="chapter" data-level="5.9" data-path="OneD-Domains-1.html"><a href="OneD-Domains-1.html#Special-Channels-2"><i class="fa fa-check"></i><b>5.9</b> Special Channels</a>
<ul>
<li class="chapter" data-level="5.9.1" data-path="OneD-Domains-1.html"><a href="OneD-Domains-1.html#M-Channel-3"><i class="fa fa-check"></i><b>5.9.1</b> M Channels (User Defined Flow Matrix)</a></li>
<li class="chapter" data-level="5.9.2" data-path="OneD-Domains-1.html"><a href="OneD-Domains-1.html#Q-Channels-3"><i class="fa fa-check"></i><b>5.9.2</b> Q Channels (Upstream Depth-Discharge Relationship)</a></li>
<li class="chapter" data-level="5.9.3" data-path="OneD-Domains-1.html"><a href="OneD-Domains-1.html#XConnect-3"><i class="fa fa-check"></i><b>5.9.3</b> X Connectors</a></li>
<li class="chapter" data-level="5.9.4" data-path="OneD-Domains-1.html"><a href="OneD-Domains-1.html#Legacy-Channel-3"><i class="fa fa-check"></i><b>5.9.4</b> Legacy Channels</a></li>
<li class="chapter" data-level="5.9.5" data-path="OneD-Domains-1.html"><a href="OneD-Domains-1.html#OneD-nwk-3"><i class="fa fa-check"></i><b>5.9.5</b> 1d_nwk Attributes (M, P, Q, SG, SP Channels)</a></li>
</ul></li>
<li class="chapter" data-level="5.10" data-path="OneD-Domains-1.html"><a href="OneD-Domains-1.html#OperationalChannels-2"><i class="fa fa-check"></i><b>5.10</b> Operational Channels</a>
<ul>
<li class="chapter" data-level="5.10.1" data-path="OneD-Domains-1.html"><a href="OneD-Domains-1.html#TOC-Logic-3"><i class="fa fa-check"></i><b>5.10.1</b> .toc File Commands and Logic</a></li>
<li class="chapter" data-level="5.10.2" data-path="OneD-Domains-1.html"><a href="OneD-Domains-1.html#Pumps-3"><i class="fa fa-check"></i><b>5.10.2</b> Pumps (P and PO)</a></li>
<li class="chapter" data-level="5.10.3" data-path="OneD-Domains-1.html"><a href="OneD-Domains-1.html#QO-3"><i class="fa fa-check"></i><b>5.10.3</b> QO Channels</a></li>
<li class="chapter" data-level="5.10.4" data-path="OneD-Domains-1.html"><a href="OneD-Domains-1.html#RO-3"><i class="fa fa-check"></i><b>5.10.4</b> Gated Drowned Rectangular Culverts (RO)</a></li>
<li class="chapter" data-level="5.10.5" data-path="OneD-Domains-1.html"><a href="OneD-Domains-1.html#SG-SGO-3"><i class="fa fa-check"></i><b>5.10.5</b> Sluice Gates (SG and SGO)</a></li>
<li class="chapter" data-level="5.10.6" data-path="OneD-Domains-1.html"><a href="OneD-Domains-1.html#SPO-3"><i class="fa fa-check"></i><b>5.10.6</b> Spillways with Gates (SPO)</a></li>
<li class="chapter" data-level="5.10.7" data-path="OneD-Domains-1.html"><a href="OneD-Domains-1.html#Weirs-Operational-3"><i class="fa fa-check"></i><b>5.10.7</b> Weirs (WBO, WCO, WDO, WOO, WRO, WTO)</a></li>
<li class="chapter" data-level="5.10.8" data-path="OneD-Domains-1.html"><a href="OneD-Domains-1.html#PFDF-3"><i class="fa fa-check"></i><b>5.10.8</b> Piping and Dam Failure</a></li>
</ul></li>
<li class="chapter" data-level="5.11" data-path="OneD-Domains-1.html"><a href="OneD-Domains-1.html#Pipes-2"><i class="fa fa-check"></i><b>5.11</b> Pipe Networks</a>
<ul>
<li class="chapter" data-level="5.11.1" data-path="OneD-Domains-1.html"><a href="OneD-Domains-1.html#Pipes-3"><i class="fa fa-check"></i><b>5.11.1</b> Pipes</a></li>
<li class="chapter" data-level="5.11.2" data-path="OneD-Domains-1.html"><a href="OneD-Domains-1.html#Pits-3"><i class="fa fa-check"></i><b>5.11.2</b> Pits</a></li>
<li class="chapter" data-level="5.11.3" data-path="OneD-Domains-1.html"><a href="OneD-Domains-1.html#DD-Database-3"><i class="fa fa-check"></i><b>5.11.3</b> Pit Inlet and Depth/Stage vs Discharge Databases</a></li>
<li class="chapter" data-level="5.11.4" data-path="OneD-Domains-1.html"><a href="OneD-Domains-1.html#Manholes-3"><i class="fa fa-check"></i><b>5.11.4</b> Manholes</a></li>
</ul></li>
<li class="chapter" data-level="5.12" data-path="OneD-Domains-1.html"><a href="OneD-Domains-1.html#Virtual-Pipes-2"><i class="fa fa-check"></i><b>5.12</b> Virtual Pipes</a></li>
<li class="chapter" data-level="5.13" data-path="OneD-Domains-1.html"><a href="OneD-Domains-1.html#Nodes-2"><i class="fa fa-check"></i><b>5.13</b> Nodes</a>
<ul>
<li class="chapter" data-level="5.13.1" data-path="OneD-Domains-1.html"><a href="OneD-Domains-1.html#Auto-Node-3"><i class="fa fa-check"></i><b>5.13.1</b> Automatically Defined Nodes</a></li>
<li class="chapter" data-level="5.13.2" data-path="OneD-Domains-1.html"><a href="OneD-Domains-1.html#Manual-Node-3"><i class="fa fa-check"></i><b>5.13.2</b> Manually Defined Nodes</a></li>
<li class="chapter" data-level="5.13.3" data-path="OneD-Domains-1.html"><a href="OneD-Domains-1.html#Obvert-3"><i class="fa fa-check"></i><b>5.13.3</b> Storage Above Top of Channels</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="6" data-path="OneD-SWMM-1.html"><a href="OneD-SWMM-1.html"><i class="fa fa-check"></i><b>6</b> 1D Network Domains - EPA SWMM</a>
<ul>
<li class="chapter" data-level="6.1" data-path="OneD-SWMM-1.html"><a href="OneD-SWMM-1.html#SWMM-Introduction-2"><i class="fa fa-check"></i><b>6.1</b> Introduction</a>
<ul>
<li class="chapter" data-level="6.1.1" data-path="OneD-SWMM-1.html"><a href="OneD-SWMM-1.html#TUFLOW-SWMM-Capabilities-3"><i class="fa fa-check"></i><b>6.1.1</b> TUFLOW-SWMM Capabilities</a></li>
<li class="chapter" data-level="6.1.2" data-path="OneD-SWMM-1.html"><a href="OneD-SWMM-1.html#SWMM-UserResources-3"><i class="fa fa-check"></i><b>6.1.2</b> Additional SWMM User Resources</a></li>
</ul></li>
<li class="chapter" data-level="6.2" data-path="OneD-SWMM-1.html"><a href="OneD-SWMM-1.html#ModelSetup-2"><i class="fa fa-check"></i><b>6.2</b> Model Setup</a>
<ul>
<li class="chapter" data-level="6.2.1" data-path="OneD-SWMM-1.html"><a href="OneD-SWMM-1.html#SwmmModel-3"><i class="fa fa-check"></i><b>6.2.1</b> SWMM Model</a></li>
<li class="chapter" data-level="6.2.2" data-path="OneD-SWMM-1.html"><a href="OneD-SWMM-1.html#TUFLOW-SWMM_Simulations-4"><i class="fa fa-check"></i><b>6.2.2</b> TUFLOW-SWMM Model Simulation</a></li>
<li class="chapter" data-level="6.2.3" data-path="OneD-SWMM-1.html"><a href="OneD-SWMM-1.html#SWMM_ESTRY_Linking-3"><i class="fa fa-check"></i><b>6.2.3</b> Linking SWMM to TUFLOW 2D and ESTRY</a></li>
<li class="chapter" data-level="6.2.4" data-path="OneD-SWMM-1.html"><a href="OneD-SWMM-1.html#SWMMSettings-3"><i class="fa fa-check"></i><b>6.2.4</b> SWMM Simulation Option Settings</a></li>
<li class="chapter" data-level="6.2.5" data-path="OneD-SWMM-1.html"><a href="OneD-SWMM-1.html#SWMM-BCDB-3"><i class="fa fa-check"></i><b>6.2.5</b> Using the TUFLOW BC Database in SWMM</a></li>
</ul></li>
<li class="chapter" data-level="6.3" data-path="OneD-SWMM-1.html"><a href="OneD-SWMM-1.html#SWMMGISTools-2"><i class="fa fa-check"></i><b>6.3</b> SWMM GIS Tools</a>
<ul>
<li class="chapter" data-level="6.3.1" data-path="OneD-SWMM-1.html"><a href="OneD-SWMM-1.html#SWMMGPKGFormat-3"><i class="fa fa-check"></i><b>6.3.1</b> GeoPackage File Format</a></li>
</ul></li>
<li class="chapter" data-level="6.4" data-path="OneD-SWMM-1.html"><a href="OneD-SWMM-1.html#SWMMOutputs-2"><i class="fa fa-check"></i><b>6.4</b> SWMM Outputs</a></li>
<li class="chapter" data-level="6.5" data-path="OneD-SWMM-1.html"><a href="OneD-SWMM-1.html#SWMMInclusionTUFLOW-2"><i class="fa fa-check"></i><b>6.5</b> SWMM Inclusion in TUFLOW</a>
<ul>
<li class="chapter" data-level="6.5.1" data-path="OneD-SWMM-1.html"><a href="OneD-SWMM-1.html#SWMMLibraryVersion-3"><i class="fa fa-check"></i><b>6.5.1</b> SWMM Library Version</a></li>
<li class="chapter" data-level="6.5.2" data-path="OneD-SWMM-1.html"><a href="OneD-SWMM-1.html#SWMMCode-in-TUFLOW-3"><i class="fa fa-check"></i><b>6.5.2</b> Embedded SWMM Code in TUFLOW</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="7" data-path="TwoD-Domains-1.html"><a href="TwoD-Domains-1.html"><i class="fa fa-check"></i><b>7</b> 2D Domains</a>
<ul>
<li class="chapter" data-level="7.1" data-path="TwoD-Domains-1.html"><a href="TwoD-Domains-1.html#introduction-1"><i class="fa fa-check"></i><b>7.1</b> Introduction</a></li>
<li class="chapter" data-level="7.2" data-path="TwoD-Domains-1.html"><a href="TwoD-Domains-1.html#Solvers-2"><i class="fa fa-check"></i><b>7.2</b> Solvers</a>
<ul>
<li class="chapter" data-level="7.2.1" data-path="TwoD-Domains-1.html"><a href="TwoD-Domains-1.html#tuflow-hpc-2d-solver"><i class="fa fa-check"></i><b>7.2.1</b> TUFLOW HPC 2D Solver</a></li>
<li class="chapter" data-level="7.2.2" data-path="TwoD-Domains-1.html"><a href="TwoD-Domains-1.html#tuflow-classic-2d-solver"><i class="fa fa-check"></i><b>7.2.2</b> TUFLOW Classic 2D Solver</a></li>
<li class="chapter" data-level="7.2.3" data-path="TwoD-Domains-1.html"><a href="TwoD-Domains-1.html#Schematisation-3"><i class="fa fa-check"></i><b>7.2.3</b> Cell Schematisation</a></li>
<li class="chapter" data-level="7.2.4" data-path="TwoD-Domains-1.html"><a href="TwoD-Domains-1.html#turbulence-overview"><i class="fa fa-check"></i><b>7.2.4</b> Turbulence</a></li>
</ul></li>
<li class="chapter" data-level="7.3" data-path="TwoD-Domains-1.html"><a href="TwoD-Domains-1.html#Common-2"><i class="fa fa-check"></i><b>7.3</b> Common Functionality</a>
<ul>
<li class="chapter" data-level="7.3.1" data-path="TwoD-Domains-1.html"><a href="TwoD-Domains-1.html#Domain-3"><i class="fa fa-check"></i><b>7.3.1</b> Defining the Domain</a></li>
<li class="chapter" data-level="7.3.2" data-path="TwoD-Domains-1.html"><a href="TwoD-Domains-1.html#CellCodes-3"><i class="fa fa-check"></i><b>7.3.2</b> Active / Inactive Cells</a></li>
<li class="chapter" data-level="7.3.3" data-path="TwoD-Domains-1.html"><a href="TwoD-Domains-1.html#layering-3"><i class="fa fa-check"></i><b>7.3.3</b> Data Layering</a></li>
<li class="chapter" data-level="7.3.4" data-path="TwoD-Domains-1.html"><a href="TwoD-Domains-1.html#sampling-of-data-sets"><i class="fa fa-check"></i><b>7.3.4</b> Sampling of Data Sets</a></li>
<li class="chapter" data-level="7.3.5" data-path="TwoD-Domains-1.html"><a href="TwoD-Domains-1.html#elevations-3"><i class="fa fa-check"></i><b>7.3.5</b> Elevations</a></li>
<li class="chapter" data-level="7.3.6" data-path="TwoD-Domains-1.html"><a href="TwoD-Domains-1.html#Materials-2"><i class="fa fa-check"></i><b>7.3.6</b> Land Use (Materials)</a></li>
<li class="chapter" data-level="7.3.7" data-path="TwoD-Domains-1.html"><a href="TwoD-Domains-1.html#Infiltration-2"><i class="fa fa-check"></i><b>7.3.7</b> Infiltration</a></li>
<li class="chapter" data-level="7.3.8" data-path="TwoD-Domains-1.html"><a href="TwoD-Domains-1.html#HydraulicStructures-3"><i class="fa fa-check"></i><b>7.3.8</b> Hydraulic Structures</a></li>
<li class="chapter" data-level="7.3.9" data-path="TwoD-Domains-1.html"><a href="TwoD-Domains-1.html#cell-mods-3"><i class="fa fa-check"></i><b>7.3.9</b> Cell Modification</a></li>
<li class="chapter" data-level="7.3.10" data-path="TwoD-Domains-1.html"><a href="TwoD-Domains-1.html#urban-areas-3"><i class="fa fa-check"></i><b>7.3.10</b> Modelling Urban Areas</a></li>
</ul></li>
<li class="chapter" data-level="7.4" data-path="TwoD-Domains-1.html"><a href="TwoD-Domains-1.html#HPC-specific-2"><i class="fa fa-check"></i><b>7.4</b> TUFLOW HPC Specific</a>
<ul>
<li class="chapter" data-level="7.4.1" data-path="TwoD-Domains-1.html"><a href="TwoD-Domains-1.html#Quadtree-3"><i class="fa fa-check"></i><b>7.4.1</b> Quadtree</a></li>
<li class="chapter" data-level="7.4.2" data-path="TwoD-Domains-1.html"><a href="TwoD-Domains-1.html#HPC-Turbulence-3"><i class="fa fa-check"></i><b>7.4.2</b> HPC Turbulence</a></li>
<li class="chapter" data-level="7.4.3" data-path="TwoD-Domains-1.html"><a href="TwoD-Domains-1.html#SGS-3"><i class="fa fa-check"></i><b>7.4.3</b> Sub-Grid Sampling (SGS)</a></li>
<li class="chapter" data-level="7.4.4" data-path="TwoD-Domains-1.html"><a href="TwoD-Domains-1.html#HPC-US-Controlled-3"><i class="fa fa-check"></i><b>7.4.4</b> 2D Upstream Controlled Flow (Weirs and Supercritical Flow)</a></li>
<li class="chapter" data-level="7.4.5" data-path="TwoD-Domains-1.html"><a href="TwoD-Domains-1.html#HPC-Groundwater-3"><i class="fa fa-check"></i><b>7.4.5</b> Groundwater Flow</a></li>
<li class="chapter" data-level="7.4.6" data-path="TwoD-Domains-1.html"><a href="TwoD-Domains-1.html#NN-3"><i class="fa fa-check"></i><b>7.4.6</b> Non-Newtonian Flow</a></li>
<li class="chapter" data-level="7.4.7" data-path="TwoD-Domains-1.html"><a href="TwoD-Domains-1.html#HPC-Unsupported-3"><i class="fa fa-check"></i><b>7.4.7</b> Unsupported Features in TUFLOW HPC</a></li>
</ul></li>
<li class="chapter" data-level="7.5" data-path="TwoD-Domains-1.html"><a href="TwoD-Domains-1.html#tuflow-classic-specific"><i class="fa fa-check"></i><b>7.5</b> TUFLOW Classic Specific</a>
<ul>
<li class="chapter" data-level="7.5.1" data-path="TwoD-Domains-1.html"><a href="TwoD-Domains-1.html#CLA-Turbulence-3"><i class="fa fa-check"></i><b>7.5.1</b> Classic Turbulence</a></li>
<li class="chapter" data-level="7.5.2" data-path="TwoD-Domains-1.html"><a href="TwoD-Domains-1.html#CLA-US-Controlled-3"><i class="fa fa-check"></i><b>7.5.2</b> 2D Upstream Controlled Flow (Weirs and Supercritical Flow)</a></li>
<li class="chapter" data-level="7.5.3" data-path="TwoD-Domains-1.html"><a href="TwoD-Domains-1.html#CLA-mat-3"><i class="fa fa-check"></i><b>7.5.3</b> Land Use (Materials)</a></li>
<li class="chapter" data-level="7.5.4" data-path="TwoD-Domains-1.html"><a href="TwoD-Domains-1.html#CLA-2D2D-3"><i class="fa fa-check"></i><b>7.5.4</b> Multiple 2D Domain</a></li>
<li class="chapter" data-level="7.5.5" data-path="TwoD-Domains-1.html"><a href="TwoD-Domains-1.html#CLA-Coriolis-3"><i class="fa fa-check"></i><b>7.5.5</b> Coriolis Term</a></li>
<li class="chapter" data-level="7.5.6" data-path="TwoD-Domains-1.html"><a href="TwoD-Domains-1.html#legacy-structures"><i class="fa fa-check"></i><b>7.5.6</b> Legacy Structures</a></li>
<li class="chapter" data-level="7.5.7" data-path="TwoD-Domains-1.html"><a href="TwoD-Domains-1.html#CLA-Unsupported-3"><i class="fa fa-check"></i><b>7.5.7</b> Unsupported Features in TUFLOW Classic</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="8" data-path="Boundaries-InitialConditions-1.html"><a href="Boundaries-InitialConditions-1.html"><i class="fa fa-check"></i><b>8</b> Boundaries and Initial Conditions</a>
<ul>
<li class="chapter" data-level="8.1" data-path="Boundaries-InitialConditions-1.html"><a href="Boundaries-InitialConditions-1.html#BC-Intro-2"><i class="fa fa-check"></i><b>8.1</b> Introduction</a></li>
<li class="chapter" data-level="8.2" data-path="Boundaries-InitialConditions-1.html"><a href="Boundaries-InitialConditions-1.html#BCArrangements-2"><i class="fa fa-check"></i><b>8.2</b> Recommended BC Arrangements</a></li>
<li class="chapter" data-level="8.3" data-path="Boundaries-InitialConditions-1.html"><a href="Boundaries-InitialConditions-1.html#BC-Solver-2"><i class="fa fa-check"></i><b>8.3</b> Solver Specific Considerations</a>
<ul>
<li class="chapter" data-level="8.3.1" data-path="Boundaries-InitialConditions-1.html"><a href="Boundaries-InitialConditions-1.html#ClassicBC-3"><i class="fa fa-check"></i><b>8.3.1</b> Classic Specific Boundaries / Options</a></li>
<li class="chapter" data-level="8.3.2" data-path="Boundaries-InitialConditions-1.html"><a href="Boundaries-InitialConditions-1.html#ClassicHPC-3"><i class="fa fa-check"></i><b>8.3.2</b> HPC Specific Boundaries / Options</a></li>
</ul></li>
<li class="chapter" data-level="8.4" data-path="Boundaries-InitialConditions-1.html"><a href="Boundaries-InitialConditions-1.html#OneDBoundaries-2"><i class="fa fa-check"></i><b>8.4</b> 1D Boundaries (1d_bc Layers)</a></li>
<li class="chapter" data-level="8.5" data-path="Boundaries-InitialConditions-1.html"><a href="Boundaries-InitialConditions-1.html#TwoDBoundaries-2"><i class="fa fa-check"></i><b>8.5</b> 2D Boundaries (2d_bc, 2d_sa and 2d_rf Layers)</a>
<ul>
<li class="chapter" data-level="8.5.1" data-path="Boundaries-InitialConditions-1.html"><a href="Boundaries-InitialConditions-1.html#BC-Layers-3"><i class="fa fa-check"></i><b>8.5.1</b> Boundary Conditions (2d_bc)</a></li>
<li class="chapter" data-level="8.5.2" data-path="Boundaries-InitialConditions-1.html"><a href="Boundaries-InitialConditions-1.html#SA-Layers-3"><i class="fa fa-check"></i><b>8.5.2</b> Source Area Boundaries</a></li>
<li class="chapter" data-level="8.5.3" data-path="Boundaries-InitialConditions-1.html"><a href="Boundaries-InitialConditions-1.html#Rainfall-3"><i class="fa fa-check"></i><b>8.5.3</b> Rainfall Boundaries</a></li>
</ul></li>
<li class="chapter" data-level="8.6" data-path="Boundaries-InitialConditions-1.html"><a href="Boundaries-InitialConditions-1.html#bcdbase-2"><i class="fa fa-check"></i><b>8.6</b> Boundary Condition (BC) Database</a>
<ul>
<li class="chapter" data-level="8.6.1" data-path="Boundaries-InitialConditions-1.html"><a href="Boundaries-InitialConditions-1.html#bcdbase-Example-3"><i class="fa fa-check"></i><b>8.6.1</b> BC Database Example</a></li>
<li class="chapter" data-level="8.6.2" data-path="Boundaries-InitialConditions-1.html"><a href="Boundaries-InitialConditions-1.html#BCEventName-3"><i class="fa fa-check"></i><b>8.6.2</b> BC Event Name Command</a></li>
<li class="chapter" data-level="8.6.3" data-path="Boundaries-InitialConditions-1.html"><a href="Boundaries-InitialConditions-1.html#BoundaryGenerators-3"><i class="fa fa-check"></i><b>8.6.3</b> TUFLOW Boundary Generators</a></li>
<li class="chapter" data-level="8.6.4" data-path="Boundaries-InitialConditions-1.html"><a href="Boundaries-InitialConditions-1.html#DelftFEWSBoundary-3"><i class="fa fa-check"></i><b>8.6.4</b> Delft FEWS Boundaries</a></li>
<li class="chapter" data-level="8.6.5" data-path="Boundaries-InitialConditions-1.html"><a href="Boundaries-InitialConditions-1.html#HECDSS-3"><i class="fa fa-check"></i><b>8.6.5</b> HEC-DSS Boundaries</a></li>
</ul></li>
<li class="chapter" data-level="8.7" data-path="Boundaries-InitialConditions-1.html"><a href="Boundaries-InitialConditions-1.html#Cyclones-2"><i class="fa fa-check"></i><b>8.7</b> Cyclones / Hurricanes / Typhoons</a></li>
<li class="chapter" data-level="8.8" data-path="Boundaries-InitialConditions-1.html"><a href="Boundaries-InitialConditions-1.html#ExternalStress-2"><i class="fa fa-check"></i><b>8.8</b> External Stress Boundaries</a></li>
<li class="chapter" data-level="8.9" data-path="Boundaries-InitialConditions-1.html"><a href="Boundaries-InitialConditions-1.html#InitialConditions-2"><i class="fa fa-check"></i><b>8.9</b> Initial Conditions</a>
<ul>
<li class="chapter" data-level="8.9.1" data-path="Boundaries-InitialConditions-1.html"><a href="Boundaries-InitialConditions-1.html#IWL-3"><i class="fa fa-check"></i><b>8.9.1</b> Initial Water Levels (IWL)</a></li>
<li class="chapter" data-level="8.9.2" data-path="Boundaries-InitialConditions-1.html"><a href="Boundaries-InitialConditions-1.html#IGW-3"><i class="fa fa-check"></i><b>8.9.2</b> Initial Groundwater Levels</a></li>
<li class="chapter" data-level="8.9.3" data-path="Boundaries-InitialConditions-1.html"><a href="Boundaries-InitialConditions-1.html#RestartFiles-3"><i class="fa fa-check"></i><b>8.9.3</b> Restart Files</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="9" data-path="AD-1.html"><a href="AD-1.html"><i class="fa fa-check"></i><b>9</b> Advection Dispersion</a>
<ul>
<li class="chapter" data-level="9.1" data-path="AD-1.html"><a href="AD-1.html#AD-Overview-2"><i class="fa fa-check"></i><b>9.1</b> Overview</a>
<ul>
<li class="chapter" data-level="9.1.1" data-path="AD-1.html"><a href="AD-1.html#AD-Solution-3"><i class="fa fa-check"></i><b>9.1.1</b> 2D Depth Averaged Equation of Motion</a></li>
<li class="chapter" data-level="9.1.2" data-path="AD-1.html"><a href="AD-1.html#AD-Solution-2"><i class="fa fa-check"></i><b>9.1.2</b> Solution Method (TUFLOW Classic)</a></li>
<li class="chapter" data-level="9.1.3" data-path="AD-1.html"><a href="AD-1.html#AD-Solution-HPC-3"><i class="fa fa-check"></i><b>9.1.3</b> Solution Method (TUFLOW HPC)</a></li>
<li class="chapter" data-level="9.1.4" data-path="AD-1.html"><a href="AD-1.html#local-constituent-transformation"><i class="fa fa-check"></i><b>9.1.4</b> Local Constituent Transformation</a></li>
<li class="chapter" data-level="9.1.5" data-path="AD-1.html"><a href="AD-1.html#groundwater"><i class="fa fa-check"></i><b>9.1.5</b> Groundwater</a></li>
<li class="chapter" data-level="9.1.6" data-path="AD-1.html"><a href="AD-1.html#limitations-and-recommendations"><i class="fa fa-check"></i><b>9.1.6</b> Limitations and Recommendations</a></li>
</ul></li>
<li class="chapter" data-level="9.2" data-path="AD-1.html"><a href="AD-1.html#the-modelling-process"><i class="fa fa-check"></i><b>9.2</b> The Modelling Process</a>
<ul>
<li class="chapter" data-level="9.2.1" data-path="AD-1.html"><a href="AD-1.html#data-input-requirements"><i class="fa fa-check"></i><b>9.2.1</b> Data Input Requirements</a></li>
<li class="chapter" data-level="9.2.2" data-path="AD-1.html"><a href="AD-1.html#calibration-and-sensitivity"><i class="fa fa-check"></i><b>9.2.2</b> Calibration and Sensitivity</a></li>
<li class="chapter" data-level="9.2.3" data-path="AD-1.html"><a href="AD-1.html#model-resolution"><i class="fa fa-check"></i><b>9.2.3</b> Model Resolution</a></li>
<li class="chapter" data-level="9.2.4" data-path="AD-1.html"><a href="AD-1.html#AD-Computational-Timestep-3"><i class="fa fa-check"></i><b>9.2.4</b> Computational Timestep</a></li>
<li class="chapter" data-level="9.2.5" data-path="AD-1.html"><a href="AD-1.html#example-ad-models"><i class="fa fa-check"></i><b>9.2.5</b> Example AD Models</a></li>
</ul></li>
<li class="chapter" data-level="9.3" data-path="AD-1.html"><a href="AD-1.html#data-input"><i class="fa fa-check"></i><b>9.3</b> Data Input</a>
<ul>
<li class="chapter" data-level="9.3.1" data-path="AD-1.html"><a href="AD-1.html#simulation-control-file"><i class="fa fa-check"></i><b>9.3.1</b> Simulation Control File</a></li>
<li class="chapter" data-level="9.3.2" data-path="AD-1.html"><a href="AD-1.html#d-geometries"><i class="fa fa-check"></i><b>9.3.2</b> 1D Geometries</a></li>
<li class="chapter" data-level="9.3.3" data-path="AD-1.html"><a href="AD-1.html#ADConstituentProp-3"><i class="fa fa-check"></i><b>9.3.3</b> Specification of Constituent Properties</a></li>
<li class="chapter" data-level="9.3.4" data-path="AD-1.html"><a href="AD-1.html#ADBoundaryConditions-3"><i class="fa fa-check"></i><b>9.3.4</b> Boundary Conditions</a></li>
<li class="chapter" data-level="9.3.5" data-path="AD-1.html"><a href="AD-1.html#initial-conditions"><i class="fa fa-check"></i><b>9.3.5</b> Initial Conditions</a></li>
<li class="chapter" data-level="9.3.6" data-path="AD-1.html"><a href="AD-1.html#GW-initial-conditions"><i class="fa fa-check"></i><b>9.3.6</b> Groundwater Initial Conditions</a></li>
<li class="chapter" data-level="9.3.7" data-path="AD-1.html"><a href="AD-1.html#minimum-dispersion-coefficient"><i class="fa fa-check"></i><b>9.3.7</b> Minimum Dispersion Coefficient</a></li>
</ul></li>
<li class="chapter" data-level="9.4" data-path="AD-1.html"><a href="AD-1.html#data-output"><i class="fa fa-check"></i><b>9.4</b> Data Output</a>
<ul>
<li class="chapter" data-level="9.4.1" data-path="AD-1.html"><a href="AD-1.html#tuflow-ad-log-files"><i class="fa fa-check"></i><b>9.4.1</b> TUFLOW AD Log Files</a></li>
<li class="chapter" data-level="9.4.2" data-path="AD-1.html"><a href="AD-1.html#check-files"><i class="fa fa-check"></i><b>9.4.2</b> Check Files</a></li>
<li class="chapter" data-level="9.4.3" data-path="AD-1.html"><a href="AD-1.html#result-files"><i class="fa fa-check"></i><b>9.4.3</b> Result Files</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="10" data-path="DomainLinking-1.html"><a href="DomainLinking-1.html"><i class="fa fa-check"></i><b>10</b> Combining Domains and Solvers</a>
<ul>
<li class="chapter" data-level="10.1" data-path="DomainLinking-1.html"><a href="DomainLinking-1.html#Linked-1D2D-Models-Intro-2"><i class="fa fa-check"></i><b>10.1</b> Introduction</a></li>
<li class="chapter" data-level="10.2" data-path="DomainLinking-1.html"><a href="DomainLinking-1.html#OneD2dLinking-2"><i class="fa fa-check"></i><b>10.2</b> 1D and 2D Domain Linking Theory</a>
<ul>
<li class="chapter" data-level="10.2.1" data-path="DomainLinking-1.html"><a href="DomainLinking-1.html#HXBoundary-3"><i class="fa fa-check"></i><b>10.2.1</b> HX 2D Head Boundary</a></li>
<li class="chapter" data-level="10.2.2" data-path="DomainLinking-1.html"><a href="DomainLinking-1.html#SXBoundary-3"><i class="fa fa-check"></i><b>10.2.2</b> SX 2D Flow Boundary</a></li>
</ul></li>
<li class="chapter" data-level="10.3" data-path="DomainLinking-1.html"><a href="DomainLinking-1.html#OneD2DLinking-Estry-2"><i class="fa fa-check"></i><b>10.3</b> TUFLOW 1D (ESTRY) to TUFLOW 2D Linking</a>
<ul>
<li class="chapter" data-level="10.3.1" data-path="DomainLinking-1.html"><a href="DomainLinking-1.html#OneD2DESTRYChannel-3"><i class="fa fa-check"></i><b>10.3.1</b> 1D Open Channel and 2D Domain Linking</a></li>
<li class="chapter" data-level="10.3.2" data-path="DomainLinking-1.html"><a href="DomainLinking-1.html#OneD2DESTRYCulverts-3"><i class="fa fa-check"></i><b>10.3.2</b> 1D Structures Embedded within 2D Domains</a></li>
<li class="chapter" data-level="10.3.3" data-path="DomainLinking-1.html"><a href="DomainLinking-1.html#OneD2DESTRYPipeNetwork-3"><i class="fa fa-check"></i><b>10.3.3</b> 1D Pipe Network Pits linked to 2D Domains</a></li>
<li class="chapter" data-level="10.3.4" data-path="DomainLinking-1.html"><a href="DomainLinking-1.html#id_2DVirtualPits-3"><i class="fa fa-check"></i><b>10.3.4</b> Virtual Pits linked to 2D Domains</a></li>
</ul></li>
<li class="chapter" data-level="10.4" data-path="DomainLinking-1.html"><a href="DomainLinking-1.html#OneD2DLinkingSWMM-2"><i class="fa fa-check"></i><b>10.4</b> SWMM to TUFLOW Linking</a>
<ul>
<li class="chapter" data-level="10.4.1" data-path="DomainLinking-1.html"><a href="DomainLinking-1.html#OneD2DSWMMCulverts-5"><i class="fa fa-check"></i><b>10.4.1</b> 1D Culvert Connections to 2D Domains</a></li>
<li class="chapter" data-level="10.4.2" data-path="DomainLinking-1.html"><a href="DomainLinking-1.html#OneD2DSWMMPipeNetwork-3"><i class="fa fa-check"></i><b>10.4.2</b> 1D Pipe Network Connections to 2D Domains</a></li>
<li class="chapter" data-level="10.4.3" data-path="DomainLinking-1.html"><a href="DomainLinking-1.html#OneD2DLinkingSWMM1D-3"><i class="fa fa-check"></i><b>10.4.3</b> SWMM to TUFLOW 1D (ESTRY) Linking</a></li>
</ul></li>
<li class="chapter" data-level="10.5" data-path="DomainLinking-1.html"><a href="DomainLinking-1.html#OneD2DLinkingFM-2"><i class="fa fa-check"></i><b>10.5</b> Flood Modeller to TUFLOW Linking</a>
<ul>
<li class="chapter" data-level="10.5.1" data-path="DomainLinking-1.html"><a href="DomainLinking-1.html#oneD2DFMLinking2D-3"><i class="fa fa-check"></i><b>10.5.1</b> Flood Modeller 1D to TUFLOW 2D Linking</a></li>
<li class="chapter" data-level="10.5.2" data-path="DomainLinking-1.html"><a href="DomainLinking-1.html#oneD2DFMLinking1D-3"><i class="fa fa-check"></i><b>10.5.2</b> Flood Modeller 1D to TUFLOW 1D (ESTRY) Linking</a></li>
</ul></li>
<li class="chapter" data-level="10.6" data-path="DomainLinking-1.html"><a href="DomainLinking-1.html#oneD2D12D-2"><i class="fa fa-check"></i><b>10.6</b> 12D-DDA to TUFLOW Linking</a></li>
<li class="chapter" data-level="10.7" data-path="DomainLinking-1.html"><a href="DomainLinking-1.html#TwoD2DLinking-2"><i class="fa fa-check"></i><b>10.7</b> Multiple 2D Domains</a>
<ul>
<li class="chapter" data-level="10.7.1" data-path="DomainLinking-1.html"><a href="DomainLinking-1.html#TwoD2DLinkingQDT-3"><i class="fa fa-check"></i><b>10.7.1</b> Classic’s M2D Feature versus HPC Quadtree</a></li>
<li class="chapter" data-level="10.7.2" data-path="DomainLinking-1.html"><a href="DomainLinking-1.html#TwoD2DLinkingM2D-3"><i class="fa fa-check"></i><b>10.7.2</b> TUFLOW Classic’s Multiple 2D Domains</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="11" data-path="Outputs-1.html"><a href="Outputs-1.html"><i class="fa fa-check"></i><b>11</b> Outputs</a>
<ul>
<li class="chapter" data-level="11.1" data-path="Outputs-1.html"><a href="Outputs-1.html#Location-2"><i class="fa fa-check"></i><b>11.1</b> Output Location</a></li>
<li class="chapter" data-level="11.2" data-path="Outputs-1.html"><a href="Outputs-1.html#Map-2"><i class="fa fa-check"></i><b>11.2</b> Map Outputs</a>
<ul>
<li class="chapter" data-level="11.2.1" data-path="Outputs-1.html"><a href="Outputs-1.html#TimeControl-3"><i class="fa fa-check"></i><b>11.2.1</b> Output Time Controls</a></li>
<li class="chapter" data-level="11.2.2" data-path="Outputs-1.html"><a href="Outputs-1.html#Format-3"><i class="fa fa-check"></i><b>11.2.2</b> Map Output Formats</a></li>
<li class="chapter" data-level="11.2.3" data-path="Outputs-1.html"><a href="Outputs-1.html#DataTypes-3"><i class="fa fa-check"></i><b>11.2.3</b> Map Output Data Types</a></li>
<li class="chapter" data-level="11.2.4" data-path="Outputs-1.html"><a href="Outputs-1.html#OneDMap-3"><i class="fa fa-check"></i><b>11.2.4</b> 1D Map Outputs</a></li>
<li class="chapter" data-level="11.2.5" data-path="Outputs-1.html"><a href="Outputs-1.html#OutputZones-3"><i class="fa fa-check"></i><b>11.2.5</b> Output Zones</a></li>
<li class="chapter" data-level="11.2.6" data-path="Outputs-1.html"><a href="Outputs-1.html#GaugeLevel-3"><i class="fa fa-check"></i><b>11.2.6</b> Gauge Level Output</a></li>
</ul></li>
<li class="chapter" data-level="11.3" data-path="Outputs-1.html"><a href="Outputs-1.html#TimeSeries-2"><i class="fa fa-check"></i><b>11.3</b> Time-Series Outputs</a>
<ul>
<li class="chapter" data-level="11.3.1" data-path="Outputs-1.html"><a href="Outputs-1.html#OneDTS-3"><i class="fa fa-check"></i><b>11.3.1</b> 1D Time-Series Output</a></li>
<li class="chapter" data-level="11.3.2" data-path="Outputs-1.html"><a href="Outputs-1.html#TwoDTS-3"><i class="fa fa-check"></i><b>11.3.2</b> 2D Time-Series Output</a></li>
<li class="chapter" data-level="11.3.3" data-path="Outputs-1.html"><a href="Outputs-1.html#ReportingLocation-3"><i class="fa fa-check"></i><b>11.3.3</b> Reporting Locations</a></li>
<li class="chapter" data-level="11.3.4" data-path="Outputs-1.html"><a href="Outputs-1.html#Structure-3"><i class="fa fa-check"></i><b>11.3.4</b> Structure Output</a></li>
</ul></li>
<li class="chapter" data-level="11.4" data-path="Outputs-1.html"><a href="Outputs-1.html#Specialised-2"><i class="fa fa-check"></i><b>11.4</b> Specialised Outputs</a>
<ul>
<li class="chapter" data-level="11.4.1" data-path="Outputs-1.html"><a href="Outputs-1.html#Receptors-3"><i class="fa fa-check"></i><b>11.4.1</b> Receptors</a></li>
<li class="chapter" data-level="11.4.2" data-path="Outputs-1.html"><a href="Outputs-1.html#EvaculationRoutes-3"><i class="fa fa-check"></i><b>11.4.2</b> Evacuation Routes</a></li>
</ul></li>
<li class="chapter" data-level="11.5" data-path="Outputs-1.html"><a href="Outputs-1.html#ChecksLogs-2"><i class="fa fa-check"></i><b>11.5</b> Check and Log Files</a></li>
<li class="chapter" data-level="11.6" data-path="Outputs-1.html"><a href="Outputs-1.html#Commands-2"><i class="fa fa-check"></i><b>11.6</b> Output Control Commands</a></li>
</ul></li>
<li class="chapter" data-level="12" data-path="Hardware-1.html"><a href="Hardware-1.html"><i class="fa fa-check"></i><b>12</b> Hardware and Operating System</a>
<ul>
<li class="chapter" data-level="12.1" data-path="Hardware-1.html"><a href="Hardware-1.html#HardwareIntro-2"><i class="fa fa-check"></i><b>12.1</b> Introduction</a></li>
<li class="chapter" data-level="12.2" data-path="Hardware-1.html"><a href="Hardware-1.html#OperatingSystems-2"><i class="fa fa-check"></i><b>12.2</b> Operating Systems</a></li>
<li class="chapter" data-level="12.3" data-path="Hardware-1.html"><a href="Hardware-1.html#TUFLOWClassic-2"><i class="fa fa-check"></i><b>12.3</b> TUFLOW Classic</a></li>
<li class="chapter" data-level="12.4" data-path="Hardware-1.html"><a href="Hardware-1.html#TUFLOWHPC-2"><i class="fa fa-check"></i><b>12.4</b> TUFLOW HPC (Including Quadtree)</a>
<ul>
<li class="chapter" data-level="12.4.1" data-path="Hardware-1.html"><a href="Hardware-1.html#HPC-CPU-3"><i class="fa fa-check"></i><b>12.4.1</b> TUFLOW HPC Solver on CPU</a></li>
<li class="chapter" data-level="12.4.2" data-path="Hardware-1.html"><a href="Hardware-1.html#HPC-GPU-3"><i class="fa fa-check"></i><b>12.4.2</b> TUFLOW HPC Solver on GPU</a></li>
<li class="chapter" data-level="12.4.3" data-path="Hardware-1.html"><a href="Hardware-1.html#GPUTypes-3"><i class="fa fa-check"></i><b>12.4.3</b> Types of GPU</a></li>
<li class="chapter" data-level="12.4.4" data-path="Hardware-1.html"><a href="Hardware-1.html#MultipleGPUs-3"><i class="fa fa-check"></i><b>12.4.4</b> Utilising Multiple GPUs for One Model</a></li>
<li class="chapter" data-level="12.4.5" data-path="Hardware-1.html"><a href="Hardware-1.html#MultipleModelsoneGPU-3"><i class="fa fa-check"></i><b>12.4.5</b> Running Multiple Models on a Single GPU</a></li>
<li class="chapter" data-level="12.4.6" data-path="Hardware-1.html"><a href="Hardware-1.html#differences-in-results-between-cpu-and-gpu"><i class="fa fa-check"></i><b>12.4.6</b> Differences in results between CPU and GPU</a></li>
<li class="chapter" data-level="12.4.7" data-path="Hardware-1.html"><a href="Hardware-1.html#HPCRAM-3"><i class="fa fa-check"></i><b>12.4.7</b> RAM</a></li>
</ul></li>
<li class="chapter" data-level="12.5" data-path="Hardware-1.html"><a href="Hardware-1.html#ProxiesforCPUandGPU-2"><i class="fa fa-check"></i><b>12.5</b> Proxies for CPU and GPU performance</a></li>
<li class="chapter" data-level="12.6" data-path="Hardware-1.html"><a href="Hardware-1.html#Virtualisation-2"><i class="fa fa-check"></i><b>12.6</b> Virtualisation</a></li>
<li class="chapter" data-level="12.7" data-path="Hardware-1.html"><a href="Hardware-1.html#CloudCompute-2"><i class="fa fa-check"></i><b>12.7</b> Cloud Compute</a></li>
<li class="chapter" data-level="12.8" data-path="Hardware-1.html"><a href="Hardware-1.html#HardwareCommands-2"><i class="fa fa-check"></i><b>12.8</b> Commands</a></li>
</ul></li>
<li class="chapter" data-level="13" data-path="Running-Simulations-1.html"><a href="Running-Simulations-1.html"><i class="fa fa-check"></i><b>13</b> Managing and Starting Simulations</a>
<ul>
<li class="chapter" data-level="13.1" data-path="Running-Simulations-1.html"><a href="Running-Simulations-1.html#RunningSimulationsIntro-2"><i class="fa fa-check"></i><b>13.1</b> Introduction</a></li>
<li class="chapter" data-level="13.2" data-path="Running-Simulations-1.html"><a href="Running-Simulations-1.html#FileNaming-2"><i class="fa fa-check"></i><b>13.2</b> File Naming</a></li>
<li class="chapter" data-level="13.3" data-path="Running-Simulations-1.html"><a href="Running-Simulations-1.html#SimulationManagement-2"><i class="fa fa-check"></i><b>13.3</b> Simulation Management</a>
<ul>
<li class="chapter" data-level="13.3.1" data-path="Running-Simulations-1.html"><a href="Running-Simulations-1.html#Events-3"><i class="fa fa-check"></i><b>13.3.1</b> Events</a></li>
<li class="chapter" data-level="13.3.2" data-path="Running-Simulations-1.html"><a href="Running-Simulations-1.html#Scenarios-3"><i class="fa fa-check"></i><b>13.3.2</b> Scenarios</a></li>
<li class="chapter" data-level="13.3.3" data-path="Running-Simulations-1.html"><a href="Running-Simulations-1.html#Variables-3"><i class="fa fa-check"></i><b>13.3.3</b> Variables</a></li>
</ul></li>
<li class="chapter" data-level="13.4" data-path="Running-Simulations-1.html"><a href="Running-Simulations-1.html#TUFLOWExecDownload-2"><i class="fa fa-check"></i><b>13.4</b> TUFLOW Executable Download</a>
<ul>
<li class="chapter" data-level="13.4.1" data-path="Running-Simulations-1.html"><a href="Running-Simulations-1.html#InstallOverview-3"><i class="fa fa-check"></i><b>13.4.1</b> Overview and Where to Install</a></li>
<li class="chapter" data-level="13.4.2" data-path="Running-Simulations-1.html"><a href="Running-Simulations-1.html#iSPdSP-3"><i class="fa fa-check"></i><b>13.4.2</b> Single and Double Precision</a></li>
<li class="chapter" data-level="13.4.3" data-path="Running-Simulations-1.html"><a href="Running-Simulations-1.html#CustomingTUFLOW-3"><i class="fa fa-check"></i><b>13.4.3</b> Customising TUFLOW using TUFLOW_USER_DEFINED.dll</a></li>
</ul></li>
<li class="chapter" data-level="13.5" data-path="Running-Simulations-1.html"><a href="Running-Simulations-1.html#RunningSims-2"><i class="fa fa-check"></i><b>13.5</b> Running Simulations</a>
<ul>
<li class="chapter" data-level="13.5.1" data-path="Running-Simulations-1.html"><a href="Running-Simulations-1.html#DongleTypesandSetup-3"><i class="fa fa-check"></i><b>13.5.1</b> Dongle Types and Setup</a></li>
<li class="chapter" data-level="13.5.2" data-path="Running-Simulations-1.html"><a href="Running-Simulations-1.html#StartingaSim-3"><i class="fa fa-check"></i><b>13.5.2</b> Starting a Simulation</a></li>
<li class="chapter" data-level="13.5.3" data-path="Running-Simulations-1.html"><a href="Running-Simulations-1.html#RunningHPC-3"><i class="fa fa-check"></i><b>13.5.3</b> Running TUFLOW HPC</a></li>
<li class="chapter" data-level="13.5.4" data-path="Running-Simulations-1.html"><a href="Running-Simulations-1.html#Running1D-3"><i class="fa fa-check"></i><b>13.5.4</b> Running TUFLOW 1D Only Simulations</a></li>
</ul></li>
<li class="chapter" data-level="13.6" data-path="Running-Simulations-1.html"><a href="Running-Simulations-1.html#TUFLOWExternalSchemes-2"><i class="fa fa-check"></i><b>13.6</b> Using TUFLOW with Flood Modeller, SWMM, XP-SWMM, 12D or from SMS</a>
<ul>
<li class="chapter" data-level="13.6.1" data-path="Running-Simulations-1.html"><a href="Running-Simulations-1.html#SWMMSimulations-3"><i class="fa fa-check"></i><b>13.6.1</b> Using TUFLOW with EPA SWMM</a></li>
<li class="chapter" data-level="13.6.2" data-path="Running-Simulations-1.html"><a href="Running-Simulations-1.html#FMSimulations-3"><i class="fa fa-check"></i><b>13.6.2</b> Using TUFLOW with Flood Modeller</a></li>
<li class="chapter" data-level="13.6.3" data-path="Running-Simulations-1.html"><a href="Running-Simulations-1.html#TwelveDSimulations-3"><i class="fa fa-check"></i><b>13.6.3</b> Using TUFLOW with 12D</a></li>
<li class="chapter" data-level="13.6.4" data-path="Running-Simulations-1.html"><a href="Running-Simulations-1.html#XPSWMMSimulations-3"><i class="fa fa-check"></i><b>13.6.4</b> Using TUFLOW with XP-SWMM</a></li>
<li class="chapter" data-level="13.6.5" data-path="Running-Simulations-1.html"><a href="Running-Simulations-1.html#SMSSimulations-3"><i class="fa fa-check"></i><b>13.6.5</b> Using TUFLOW with SMS</a></li>
<li class="chapter" data-level="13.6.6" data-path="Running-Simulations-1.html"><a href="Running-Simulations-1.html#OptimisingSims-3"><i class="fa fa-check"></i><b>13.6.6</b> Optimising Startup and Run Times</a></li>
<li class="chapter" data-level="13.6.7" data-path="Running-Simulations-1.html"><a href="Running-Simulations-1.html#AutoTerminateOptions-3"><i class="fa fa-check"></i><b>13.6.7</b> Auto Terminate (Simulation End) Options</a></li>
</ul></li>
<li class="chapter" data-level="13.7" data-path="Running-Simulations-1.html"><a href="Running-Simulations-1.html#ResultsReplication-3"><i class="fa fa-check"></i><b>13.7</b> Reproducibility of Results</a>
<ul>
<li class="chapter" data-level="13.7.1" data-path="Running-Simulations-1.html"><a href="Running-Simulations-1.html#ResultsReplicationClassic-3"><i class="fa fa-check"></i><b>13.7.1</b> TUFLOW Classic (CPU only)</a></li>
<li class="chapter" data-level="13.7.2" data-path="Running-Simulations-1.html"><a href="Running-Simulations-1.html#ResultsReplicationHPCCPU-3"><i class="fa fa-check"></i><b>13.7.2</b> TUFLOW HPC (incl. Quadtree) on CPU</a></li>
<li class="chapter" data-level="13.7.3" data-path="Running-Simulations-1.html"><a href="Running-Simulations-1.html#ResultsReplicationHPCGPU-3"><i class="fa fa-check"></i><b>13.7.3</b> TUFLOW HPC (incl. Quadtree) on GPU</a></li>
<li class="chapter" data-level="13.7.4" data-path="Running-Simulations-1.html"><a href="Running-Simulations-1.html#ResultsReplicationHPCMultiThread-3"><i class="fa fa-check"></i><b>13.7.4</b> TUFLOW HPC (incl. Quadtree) on multiple GPUs / CPU threads</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="14" data-path="Checks-and-Logs-1.html"><a href="Checks-and-Logs-1.html"><i class="fa fa-check"></i><b>14</b> Checks and Log Files</a>
<ul>
<li class="chapter" data-level="14.1" data-path="Checks-and-Logs-1.html"><a href="Checks-and-Logs-1.html#Log-Introduction-1"><i class="fa fa-check"></i><b>14.1</b> Introduction</a></li>
<li class="chapter" data-level="14.2" data-path="Checks-and-Logs-1.html"><a href="Checks-and-Logs-1.html#ConsoleDisplay-2"><i class="fa fa-check"></i><b>14.2</b> Console (DOS) Window Display</a>
<ul>
<li class="chapter" data-level="14.2.1" data-path="Checks-and-Logs-1.html"><a href="Checks-and-Logs-1.html#Classic-3"><i class="fa fa-check"></i><b>14.2.1</b> TUFLOW Classic</a></li>
<li class="chapter" data-level="14.2.2" data-path="Checks-and-Logs-1.html"><a href="Checks-and-Logs-1.html#HPC-3"><i class="fa fa-check"></i><b>14.2.2</b> TUFLOW HPC</a></li>
<li class="chapter" data-level="14.2.3" data-path="Checks-and-Logs-1.html"><a href="Checks-and-Logs-1.html#ConsoleDisappear-3"><i class="fa fa-check"></i><b>14.2.3</b> The Console (DOS) Window Does Not Appear</a></li>
<li class="chapter" data-level="14.2.4" data-path="Checks-and-Logs-1.html"><a href="Checks-and-Logs-1.html#QuickEdit-3"><i class="fa fa-check"></i><b>14.2.4</b> Unexpected Simulation Pause (DOS Quick Edit Mode)</a></li>
<li class="chapter" data-level="14.2.5" data-path="Checks-and-Logs-1.html"><a href="Checks-and-Logs-1.html#ConsoleShortcut-3"><i class="fa fa-check"></i><b>14.2.5</b> Stopping the Console Window</a></li>
<li class="chapter" data-level="14.2.6" data-path="Checks-and-Logs-1.html"><a href="Checks-and-Logs-1.html#ConsoleCustomisation-3"><i class="fa fa-check"></i><b>14.2.6</b> Customisation of Console Window</a></li>
<li class="chapter" data-level="14.2.7" data-path="Checks-and-Logs-1.html"><a href="Checks-and-Logs-1.html#ErrorLevel-3"><i class="fa fa-check"></i><b>14.2.7</b> TUFLOW Windows ERROR LEVEL Reporting</a></li>
</ul></li>
<li class="chapter" data-level="14.3" data-path="Checks-and-Logs-1.html"><a href="Checks-and-Logs-1.html#MessageBox-2"><i class="fa fa-check"></i><b>14.3</b> Message Boxes</a></li>
<li class="chapter" data-level="14.4" data-path="Checks-and-Logs-1.html"><a href="Checks-and-Logs-1.html#SimLog-2"><i class="fa fa-check"></i><b>14.4</b> Simulations .log</a>
<ul>
<li class="chapter" data-level="14.4.1" data-path="Checks-and-Logs-1.html"><a href="Checks-and-Logs-1.html#LocalLog-3"><i class="fa fa-check"></i><b>14.4.1</b> Local .log File</a></li>
<li class="chapter" data-level="14.4.2" data-path="Checks-and-Logs-1.html"><a href="Checks-and-Logs-1.html#GlobalLog-3"><i class="fa fa-check"></i><b>14.4.2</b> Global .log File</a></li>
</ul></li>
<li class="chapter" data-level="14.5" data-path="Checks-and-Logs-1.html"><a href="Checks-and-Logs-1.html#SimLogFiles-2"><i class="fa fa-check"></i><b>14.5</b> Simulation Log Files</a>
<ul>
<li class="chapter" data-level="14.5.1" data-path="Checks-and-Logs-1.html"><a href="Checks-and-Logs-1.html#TLF-3"><i class="fa fa-check"></i><b>14.5.1</b> TLF</a></li>
<li class="chapter" data-level="14.5.2" data-path="Checks-and-Logs-1.html"><a href="Checks-and-Logs-1.html#TSF-3"><i class="fa fa-check"></i><b>14.5.2</b> TSF</a></li>
<li class="chapter" data-level="14.5.3" data-path="Checks-and-Logs-1.html"><a href="Checks-and-Logs-1.html#start-stats-3"><i class="fa fa-check"></i><b>14.5.3</b> Start Stats</a></li>
<li class="chapter" data-level="14.5.4" data-path="Checks-and-Logs-1.html"><a href="Checks-and-Logs-1.html#run-stats-3"><i class="fa fa-check"></i><b>14.5.4</b> Run Stats</a></li>
<li class="chapter" data-level="14.5.5" data-path="Checks-and-Logs-1.html"><a href="Checks-and-Logs-1.html#Messages-3"><i class="fa fa-check"></i><b>14.5.5</b> Messages</a></li>
<li class="chapter" data-level="14.5.6" data-path="Checks-and-Logs-1.html"><a href="Checks-and-Logs-1.html#Workspaces-2"><i class="fa fa-check"></i><b>14.5.6</b> GIS Workspaces</a></li>
</ul></li>
<li class="chapter" data-level="14.6" data-path="Checks-and-Logs-1.html"><a href="Checks-and-Logs-1.html#EOF-2"><i class="fa fa-check"></i><b>14.6</b> 1D Output File</a></li>
<li class="chapter" data-level="14.7" data-path="Checks-and-Logs-1.html"><a href="Checks-and-Logs-1.html#CheckLayers-2"><i class="fa fa-check"></i><b>14.7</b> Check Files</a></li>
<li class="chapter" data-level="14.8" data-path="Checks-and-Logs-1.html"><a href="Checks-and-Logs-1.html#MB-2"><i class="fa fa-check"></i><b>14.8</b> Mass Balance Output</a>
<ul>
<li class="chapter" data-level="14.8.1" data-path="Checks-and-Logs-1.html"><a href="Checks-and-Logs-1.html#OneD-MB-3"><i class="fa fa-check"></i><b>14.8.1</b> TUFLOW 1D Mass Balance</a></li>
<li class="chapter" data-level="14.8.2" data-path="Checks-and-Logs-1.html"><a href="Checks-and-Logs-1.html#MB-CLA-3"><i class="fa fa-check"></i><b>14.8.2</b> TUFLOW Classic Mass Balance</a></li>
<li class="chapter" data-level="14.8.3" data-path="Checks-and-Logs-1.html"><a href="Checks-and-Logs-1.html#MB-HPC-3"><i class="fa fa-check"></i><b>14.8.3</b> TUFLOW HPC Mass Balance</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="15" data-path="Viewing-Output-1.html"><a href="Viewing-Output-1.html"><i class="fa fa-check"></i><b>15</b> Viewing Outputs</a>
<ul>
<li class="chapter" data-level="15.1" data-path="Viewing-Output-1.html"><a href="Viewing-Output-1.html#Introduction-Viewing-2"><i class="fa fa-check"></i><b>15.1</b> Introduction</a></li>
<li class="chapter" data-level="15.2" data-path="Viewing-Output-1.html"><a href="Viewing-Output-1.html#Output-Folder-2"><i class="fa fa-check"></i><b>15.2</b> Folder Structure</a></li>
<li class="chapter" data-level="15.3" data-path="Viewing-Output-1.html"><a href="Viewing-Output-1.html#view-1D-2"><i class="fa fa-check"></i><b>15.3</b> 1D Output</a>
<ul>
<li class="chapter" data-level="15.3.1" data-path="Viewing-Output-1.html"><a href="Viewing-Output-1.html#view-tpc-3"><i class="fa fa-check"></i><b>15.3.1</b> TUFLOW Plot Control file (TPC)</a></li>
<li class="chapter" data-level="15.3.2" data-path="Viewing-Output-1.html"><a href="Viewing-Output-1.html#mm-4"><i class="fa fa-check"></i><b>15.3.2</b> Maximum and Minimum Output</a></li>
<li class="chapter" data-level="15.3.3" data-path="Viewing-Output-1.html"><a href="Viewing-Output-1.html#ccA-4"><i class="fa fa-check"></i><b>15.3.3</b> ccA GIS Layer</a></li>
<li class="chapter" data-level="15.3.4" data-path="Viewing-Output-1.html"><a href="Viewing-Output-1.html#TS-GIS-3"><i class="fa fa-check"></i><b>15.3.4</b> _TS GIS Layer</a></li>
<li class="chapter" data-level="15.3.5" data-path="Viewing-Output-1.html"><a href="Viewing-Output-1.html#Viewing-WLL-4"><i class="fa fa-check"></i><b>15.3.5</b> 1D Water Level Lines (WLL)</a></li>
</ul></li>
<li class="chapter" data-level="15.4" data-path="Viewing-Output-1.html"><a href="Viewing-Output-1.html#view-2D-2"><i class="fa fa-check"></i><b>15.4</b> 2D Output</a>
<ul>
<li class="chapter" data-level="15.4.1" data-path="Viewing-Output-1.html"><a href="Viewing-Output-1.html#view-mesh-3"><i class="fa fa-check"></i><b>15.4.1</b> Mesh Output</a></li>
<li class="chapter" data-level="15.4.2" data-path="Viewing-Output-1.html"><a href="Viewing-Output-1.html#view-raster-3"><i class="fa fa-check"></i><b>15.4.2</b> Raster Output</a></li>
<li class="chapter" data-level="15.4.3" data-path="Viewing-Output-1.html"><a href="Viewing-Output-1.html#View-PO-3"><i class="fa fa-check"></i><b>15.4.3</b> Plot Output</a></li>
</ul></li>
<li class="chapter" data-level="15.5" data-path="Viewing-Output-1.html"><a href="Viewing-Output-1.html#Post-Process-2"><i class="fa fa-check"></i><b>15.5</b> Post Processing</a></li>
<li class="chapter" data-level="15.6" data-path="Viewing-Output-1.html"><a href="Viewing-Output-1.html#Impact-Map-2"><i class="fa fa-check"></i><b>15.6</b> Impact Mapping</a></li>
<li class="chapter" data-level="15.7" data-path="Viewing-Output-1.html"><a href="Viewing-Output-1.html#Animations-2"><i class="fa fa-check"></i><b>15.7</b> Animations</a></li>
</ul></li>
<li class="chapter" data-level="16" data-path="QualityControl-and-Troubleshooting-1.html"><a href="QualityControl-and-Troubleshooting-1.html"><i class="fa fa-check"></i><b>16</b> Quality Control and Troubleshooting</a>
<ul>
<li class="chapter" data-level="16.1" data-path="QualityControl-and-Troubleshooting-1.html"><a href="QualityControl-and-Troubleshooting-1.html#QAIntroduction-2"><i class="fa fa-check"></i><b>16.1</b> Introduction</a></li>
<li class="chapter" data-level="16.2" data-path="QualityControl-and-Troubleshooting-1.html"><a href="QualityControl-and-Troubleshooting-1.html#ModelHealth-2"><i class="fa fa-check"></i><b>16.2</b> Model Health</a>
<ul>
<li class="chapter" data-level="16.2.1" data-path="QualityControl-and-Troubleshooting-1.html"><a href="QualityControl-and-Troubleshooting-1.html#TUFLOWClassicModelHealth-3"><i class="fa fa-check"></i><b>16.2.1</b> TUFLOW Classic</a></li>
<li class="chapter" data-level="16.2.2" data-path="QualityControl-and-Troubleshooting-1.html"><a href="QualityControl-and-Troubleshooting-1.html#TUFLOWHPCModelHealth-3"><i class="fa fa-check"></i><b>16.2.2</b> TUFLOW HPC</a></li>
<li class="chapter" data-level="16.2.3" data-path="QualityControl-and-Troubleshooting-1.html"><a href="QualityControl-and-Troubleshooting-1.html#TUFLOWQAIndicators-3"><i class="fa fa-check"></i><b>16.2.3</b> Healthy Model Indicators</a></li>
</ul></li>
<li class="chapter" data-level="16.3" data-path="QualityControl-and-Troubleshooting-1.html"><a href="QualityControl-and-Troubleshooting-1.html#QATroubleshooting-2"><i class="fa fa-check"></i><b>16.3</b> Troubleshooting</a>
<ul>
<li class="chapter" data-level="16.3.1" data-path="QualityControl-and-Troubleshooting-1.html"><a href="QualityControl-and-Troubleshooting-1.html#QAGeneralComments-3"><i class="fa fa-check"></i><b>16.3.1</b> General Comments</a></li>
<li class="chapter" data-level="16.3.2" data-path="QualityControl-and-Troubleshooting-1.html"><a href="QualityControl-and-Troubleshooting-1.html#tuflowinstability-3"><i class="fa fa-check"></i><b>16.3.2</b> Instability Identification</a></li>
</ul></li>
<li class="chapter" data-level="16.4" data-path="QualityControl-and-Troubleshooting-1.html"><a href="QualityControl-and-Troubleshooting-1.html#QAchecklist-2"><i class="fa fa-check"></i><b>16.4</b> QA Check List and Simulation Logging</a></li>
<li class="chapter" data-level="16.5" data-path="QualityControl-and-Troubleshooting-1.html"><a href="QualityControl-and-Troubleshooting-1.html#ExceedingRAM-2"><i class="fa fa-check"></i><b>16.5</b> Models Exceeding Hardware RAM</a>
<ul>
<li class="chapter" data-level="16.5.1" data-path="QualityControl-and-Troubleshooting-1.html"><a href="QualityControl-and-Troubleshooting-1.html#ComputerRAM-3"><i class="fa fa-check"></i><b>16.5.1</b> Computer RAM</a></li>
<li class="chapter" data-level="16.5.2" data-path="QualityControl-and-Troubleshooting-1.html"><a href="QualityControl-and-Troubleshooting-1.html#TUFLOWVersion-3"><i class="fa fa-check"></i><b>16.5.2</b> TUFLOW Version</a></li>
<li class="chapter" data-level="16.5.3" data-path="QualityControl-and-Troubleshooting-1.html"><a href="QualityControl-and-Troubleshooting-1.html#QAmodeldesign-3"><i class="fa fa-check"></i><b>16.5.3</b> Model Design</a></li>
<li class="chapter" data-level="16.5.4" data-path="QualityControl-and-Troubleshooting-1.html"><a href="QualityControl-and-Troubleshooting-1.html#memoryusage-3"><i class="fa fa-check"></i><b>16.5.4</b> Memory Usage Reporting</a></li>
<li class="chapter" data-level="16.5.5" data-path="QualityControl-and-Troubleshooting-1.html"><a href="QualityControl-and-Troubleshooting-1.html#tempmemoryusage-3"><i class="fa fa-check"></i><b>16.5.5</b> Temporary Memory Usage</a></li>
<li class="chapter" data-level="16.5.6" data-path="QualityControl-and-Troubleshooting-1.html"><a href="QualityControl-and-Troubleshooting-1.html#GPURAM-3"><i class="fa fa-check"></i><b>16.5.6</b> TUFLOW HPC GPU Module and RAM requirements</a></li>
</ul></li>
<li class="chapter" data-level="16.6" data-path="QualityControl-and-Troubleshooting-1.html"><a href="QualityControl-and-Troubleshooting-1.html#backwardcompatibility-2"><i class="fa fa-check"></i><b>16.6</b> Past Release Version Backward Compatibility</a></li>
</ul></li>
<li class="chapter" data-level="17" data-path="Utilities-1.html"><a href="Utilities-1.html"><i class="fa fa-check"></i><b>17</b> Utilities</a>
<ul>
<li class="chapter" data-level="17.1" data-path="Utilities-1.html"><a href="Utilities-1.html#Util-Introduction-2"><i class="fa fa-check"></i><b>17.1</b> Introduction</a></li>
<li class="chapter" data-level="17.2" data-path="Utilities-1.html"><a href="Utilities-1.html#GIS-Utilities-2"><i class="fa fa-check"></i><b>17.2</b> GIS Based Utilities</a>
<ul>
<li class="chapter" data-level="17.2.1" data-path="Utilities-1.html"><a href="Utilities-1.html#QGIS-Plugin-3"><i class="fa fa-check"></i><b>17.2.1</b> QGIS TUFLOW Plugin</a></li>
<li class="chapter" data-level="17.2.2" data-path="Utilities-1.html"><a href="Utilities-1.html#ArcGIS-Toolbar-3"><i class="fa fa-check"></i><b>17.2.2</b> ArcGIS Pro Toolbar</a></li>
<li class="chapter" data-level="17.2.3" data-path="Utilities-1.html"><a href="Utilities-1.html#ArcMap-Toolbox-3"><i class="fa fa-check"></i><b>17.2.3</b> ArcMap Toolbox</a></li>
<li class="chapter" data-level="17.2.4" data-path="Utilities-1.html"><a href="Utilities-1.html#MiTools-3"><i class="fa fa-check"></i><b>17.2.4</b> MiTools</a></li>
</ul></li>
<li class="chapter" data-level="17.3" data-path="Utilities-1.html"><a href="Utilities-1.html#Console-2"><i class="fa fa-check"></i><b>17.3</b> Console Utilities</a>
<ul>
<li class="chapter" data-level="17.3.1" data-path="Utilities-1.html"><a href="Utilities-1.html#Processing-Utilites-3"><i class="fa fa-check"></i><b>17.3.1</b> Pre and Post Processing</a></li>
<li class="chapter" data-level="17.3.2" data-path="Utilities-1.html"><a href="Utilities-1.html#Convert-Utilties-3"><i class="fa fa-check"></i><b>17.3.2</b> Convert to TUFLOW</a></li>
<li class="chapter" data-level="17.3.3" data-path="Utilities-1.html"><a href="Utilities-1.html#Syntax-Highlighting-3"><i class="fa fa-check"></i><b>17.3.3</b> Textfile Syntax Highlighting</a></li>
<li class="chapter" data-level="17.3.4" data-path="Utilities-1.html"><a href="Utilities-1.html#PyTUFLOW-3"><i class="fa fa-check"></i><b>17.3.4</b> PyTUFLOW</a></li>
<li class="chapter" data-level="17.3.5" data-path="Utilities-1.html"><a href="Utilities-1.html#Excel-3"><i class="fa fa-check"></i><b>17.3.5</b> Excel Macros</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="18" data-path="Features-and-Changes-1.html"><a href="Features-and-Changes-1.html"><i class="fa fa-check"></i><b>18</b> Default Changes</a>
<ul>
<li class="chapter" data-level="18.1" data-path="Features-and-Changes-1.html"><a href="Features-and-Changes-1.html#changes-post-2018"><i class="fa fa-check"></i><b>18.1</b> Post 2018-03 Release</a>
<ul>
<li class="chapter" data-level="18.1.1" data-path="Features-and-Changes-1.html"><a href="Features-and-Changes-1.html#changes-from-2020-10"><i class="fa fa-check"></i><b>18.1.1</b> 2023-03 Release to 2020-10 Release</a></li>
<li class="chapter" data-level="18.1.2" data-path="Features-and-Changes-1.html"><a href="Features-and-Changes-1.html#changes-from-2020-01"><i class="fa fa-check"></i><b>18.1.2</b> 2020-10 Release to 2020-01 Release</a></li>
<li class="chapter" data-level="18.1.3" data-path="Features-and-Changes-1.html"><a href="Features-and-Changes-1.html#changes-from-2018-03"><i class="fa fa-check"></i><b>18.1.3</b> 2020-01 Release to 2018-03 Release</a></li>
</ul></li>
<li class="chapter" data-level="18.2" data-path="Features-and-Changes-1.html"><a href="Features-and-Changes-1.html#changes-pre-2018"><i class="fa fa-check"></i><b>18.2</b> Pre 2018-03 Release</a></li>
</ul></li>
<li class="appendix"><span><b>Appendix</b></span></li>
<li class="chapter" data-level="A" data-path="TCFCommands-1.html"><a href="TCFCommands-1.html"><i class="fa fa-check"></i><b>A</b> TCF Commands</a></li>
<li class="chapter" data-level="B" data-path="ECFCommands-1.html"><a href="ECFCommands-1.html"><i class="fa fa-check"></i><b>B</b> ECF Commands</a></li>
<li class="chapter" data-level="C" data-path="TGCCommands-1.html"><a href="TGCCommands-1.html"><i class="fa fa-check"></i><b>C</b> TGC Commands</a></li>
<li class="chapter" data-level="D" data-path="TBCCommands-1.html"><a href="TBCCommands-1.html"><i class="fa fa-check"></i><b>D</b> TBC Commands</a></li>
<li class="chapter" data-level="E" data-path="TOCCommands-1.html"><a href="TOCCommands-1.html"><i class="fa fa-check"></i><b>E</b> TOC Commands</a></li>
<li class="chapter" data-level="F" data-path="TRFCCommands-1.html"><a href="TRFCCommands-1.html"><i class="fa fa-check"></i><b>F</b> TRFC Commands</a></li>
<li class="chapter" data-level="G" data-path="TESFCommands-1.html"><a href="TESFCommands-1.html"><i class="fa fa-check"></i><b>G</b> TESF Commands</a></li>
<li class="chapter" data-level="H" data-path="QCFCommands-1.html"><a href="QCFCommands-1.html"><i class="fa fa-check"></i><b>H</b> QCF Commands</a></li>
<li class="chapter" data-level="I" data-path="TSCFCommands-1.html"><a href="TSCFCommands-1.html"><i class="fa fa-check"></i><b>I</b> TSCF Commands</a></li>
<li class="chapter" data-level="J" data-path="ADCFCommands-1.html"><a href="ADCFCommands-1.html"><i class="fa fa-check"></i><b>J</b> ADCF Commands</a></li>
<li class="chapter" data-level="K" data-path="TEFCommands-1.html"><a href="TEFCommands-1.html"><i class="fa fa-check"></i><b>K</b> TEF Commands</a></li>
<li class="chapter" data-level="L" data-path="SWMMGeopackage-1.html"><a href="SWMMGeopackage-1.html"><i class="fa fa-check"></i><b>L</b> SWMM GeoPackage Format</a>
<ul>
<li class="chapter" data-level="L.1" data-path="SWMMGeopackage-1.html"><a href="SWMMGeopackage-1.html#swmm-geopackage-layer-list"><i class="fa fa-check"></i><b>L.1</b> SWMM GeoPackage Layer List</a></li>
<li class="chapter" data-level="L.2" data-path="SWMMGeopackage-1.html"><a href="SWMMGeopackage-1.html#swmm-geopackage-layer-descriptions"><i class="fa fa-check"></i><b>L.2</b> SWMM GeoPackage Layer Descriptions</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
<li class="divider"></li>
<li><a href="https://docs.tuflow.com/classic-hpc/manual/unreleased/2023-03/"><img src="images/WQFooter.jpg" style="width:246px;height:10px;"></a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./"><h0 style="color:rgb(0,85,129);">TUFLOW Classic/HPC User Manual</h0></a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="OneD-Domains-1" class="section level1 hasAnchor" number="5">
<h1><span class="header-section-number">Section 5</span> 1D Network Domains - ESTRY<a href="OneD-Domains-1.html#OneD-Domains-1" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<div id="OneD-Introduction-2" class="section level2 hasAnchor" number="5.1">
<h2><span class="header-section-number">5.1</span> Introduction<a href="OneD-Domains-1.html#OneD-Introduction-2" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>This chapter of the Manual discusses features specifically related to the construction of 1D domains or networks. 2D domain features are discussed separately in Chapter <a href="TwoD-Domains-1.html#TwoD-Domains-1">7</a> and 1D/2D linking is discussed in Chapter <a href="DomainLinking-1.html#DomainLinking-1">10</a>. Customising output from 1D domains is discussed in Section <a href="Outputs-1.html#Outputs-1">11</a> and viewing 1D output is discussed in Chapter <a href="Viewing-Output-1.html#Viewing-Output-1">15</a>.</p>
</div>
<div id="Scheme-2" class="section level2 hasAnchor" number="5.2">
<h2><span class="header-section-number">5.2</span> Schematisation<a href="OneD-Domains-1.html#Scheme-2" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>1D domains are made up of a network of channels and nodes, shown in Figure <a href="OneD-Domains-1.html#fig:fig-Channels-Structures-Nodes">5.1</a>, where:</p>
<ul>
<li>Channels represent the conveyance of the flow paths. The channels are flow and velocity computation points in the 1D model. Channels could refer to 1D open channels, where the flow and velocity are calculated based on the 1D unsteady St Venant fluid flow equations (see Section <a href="OneD-Domains-1.html#Open-Channel-2">5.6</a>); and 1D structures (such as pipes, culverts, bridges, weirs, gates, etc.), where the flow and velocity are computed based on empirical flow equations (see Section <a href="OneD-Domains-1.html#Structures-2">5.8</a>).<br />
</li>
<li>Nodes represent the junctions of channels and the storage capacity of the network (see Section <a href="OneD-Domains-1.html#Nodes-2">5.13</a>). These are water level computation points in the 1D solution.</li>
</ul>
<center>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:fig-Channels-Structures-Nodes"></span>
<img src="images/1d_channels_structures_nodes.png" alt="**1D Channels, Structures and Nodes**" width="60%" />
<p class="caption">
Figure 5.1: <strong>1D Channels, Structures and Nodes</strong>
</p>
</div>
</center>
<p>Both channels and nodes are created using one or more GIS layers (primarily using the generic 1d_nwk layer, but other speciality layers can be used such as 1d_pit for inlets and 1d_mh for manholes).
There are no constraints on the complexity of the network with any
number of channels being able to connect to a single node. Each channel
is connected to two nodes; one at the channel’s upstream end the other
at its downstream end. <strong>The digitising of nodes is <u>optional</u>.</strong>
In most models these are automatically created.</p>
<p>Multiple GIS layers can be specified. Subsequent layers
are used to modify the network at individual objects. For example, if a
culvert is to be upgraded in size, rather than making a copy of the
whole 1d_nwk layer, select the culvert channel, save the culvert as another
1d_nwk layer and modify the channel to represent the upgraded culvert.
Use <a href="ECFCommands-1.html#ecfReadGISNetwork">Read GIS Network</a> twice to
first read in the base 1d_nwk layer, then the 1d_nwk layer with the
single channel representing the upgraded culvert. Provided the channel
has the same ID and is snapped to the same nodes, it will override the
original culvert channel. Using this approach minimises data duplication
and, if executed logically and in a well-documented manner, is a very
effective approach to modelling.</p>
<p>The attributes required in the 1d_nwk layer depend on the channel or
node type. Table <a href="OneD-Domains-1.html#tab:tab-LineTypes">5.1</a> and Table <a href="OneD-Domains-1.html#tab:tab-PointObjectTypes">5.29</a> present the available channel and node types respectively. Section <a href="OneD-Domains-1.html#OneD-nwk-2">5.4</a> presents links to all tables of attributes within the
1d_nwk layer for all channel and node types.</p>
<p>If using more than 100,000 channels see <a href="TCFCommands-1.html#tcfMaximum1DChannels">Maximum 1D
Channels</a>.</p>
</div>
<div id="SolutionScheme-2" class="section level2 hasAnchor" number="5.3">
<h2><span class="header-section-number">5.3</span> Solution Scheme<a href="OneD-Domains-1.html#SolutionScheme-2" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>The scheme for modelling 1D open channels is based on a numerical solution of the 1D unsteady St Venant
fluid flow equations (momentum and continuity) including the inertia
terms. The 1D solution uses an explicit finite difference, second-order,
Runge-Kutta solution technique <span class="citation">(<a href="#ref-MorrisonSmith1978">Morrison &amp; Smith, 1978</a>)</span> for the 1D SWE
of continuity and momentum as given by the equations below. The
equations contain the essential terms for modelling periodic long waves
in estuaries and rivers, that is: wave propagation; advection of
momentum (inertia terms) and bed friction (Manning’s equation).</p>
<p>1D Continuity:</p>
<p><span class="math display" id="eq:equ-1DContinuity-1">\[\begin{equation}
w \frac{\partial h}{\partial t} + \frac{\partial (A u)}{\partial x} = S
\tag{5.1}
\end{equation}\]</span></p>
<p>1D Momentum:</p>
<p><span class="math display" id="eq:equ-1DMomentum-1">\[\begin{equation}
\frac{\partial u}{\partial t}
+ \frac{1}{A} \frac{\partial (Auu)}{\partial x}
+ g \frac{\partial (z+h)}{\partial x}
+ g \frac{n^2|u|}{R^\frac{4}{3}}u
= S_u - \frac{1}{2}k|u|u
\tag{5.2}
\end{equation}\]</span></p>
<p>Where</p>
<ul>
<li><span class="math inline">\(w\)</span> is the channel width at the water surface</li>
<li><span class="math inline">\(h\)</span> is the water depth in the channel</li>
<li><span class="math inline">\(x\)</span> and <span class="math inline">\(t\)</span> are channel flow dimension and time respectively</li>
<li><span class="math inline">\(z\)</span> is the channel bed elevation</li>
<li><span class="math inline">\(A\)</span> is the cross-sectional flow area (up to the water surface)</li>
<li><span class="math inline">\(u\)</span> is the cross-sectional flow area averaged water velocity</li>
<li><span class="math inline">\(n\)</span> is the Manning coefficient for bed friction (units time per cube-root(unit length))</li>
<li><span class="math inline">\(R\)</span> is the hydraulic radius</li>
<li><span class="math inline">\(S\)</span> is the lineal water source term (volume per unit time per unit length), usually lateral inflow/outflow</li>
<li><span class="math inline">\(S_u\)</span> is the lineal momentum source term (force per unit volume per unit fluid density)</li>
<li><span class="math inline">\(k\)</span> is an energy loss coefficient, used for local energy losses</li>
</ul>
<p>Note: For 1D structures, velocities are computed based on empirical equations instead of using the 1D momentum equation (see Section <a href="OneD-Domains-1.html#Structures-2">5.8</a> for more details). Also note that as bed-friction and energy losses are explicitly stated, the additional momemtum source <span class="math inline">\(S_u\)</span> is typically not used.</p>
</div>
<div id="OneD-nwk-2" class="section level2 hasAnchor" number="5.4">
<h2><span class="header-section-number">5.4</span> 1d_nwk Attributes<a href="OneD-Domains-1.html#OneD-nwk-2" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>The 1d_nwk tables have been provided as individual tables for each type of channel and node. Links
to these tables are provided below.</p>
<p><a href="OneD-Domains-1.html#tab:tab-AttributeDescriptions">Open Channels (S, G, Blank) 1d_nwk Attributes</a></p>
<p><a href="OneD-Domains-1.html#tab:tab-CulvertsAttributeDescriptions">Culverts and Pipes (C, I, R) 1d_nwk Attributes</a></p>
<p><a href="OneD-Domains-1.html#tab:tab-BridgesAttributeDescriptions">Bridges (B, BB) 1d_nwk Attributes</a></p>
<p><a href="OneD-Domains-1.html#tab:tab-ArchBridgesAttributeDescriptions">Arch Bridges (BArch) 1d_nwk Attributes</a></p>
<p><a href="OneD-Domains-1.html#tab:tab-WeirsAttributeDescriptions">Weirs (W, W*) 1d_nwk Attributes</a></p>
<p><a href="OneD-Domains-1.html#tab:tab-SpecialAttributeDescriptions">Special Channels (M, P, Q, SG, SP) 1d_nwk Attributes</a></p>
<p><a href="OneD-Domains-1.html#tab:tab-FailureAttributeDescriptions">Dam Failure and Piping Channels (DF, PF) 1d_nwk Attributes</a></p>
<p><a href="OneD-Domains-1.html#tab:tab-NodesAttributeDescriptions">Nodes 1d_nwk Attributes</a></p>
<p><a href="OneD-Domains-1.html#tab:tab-PitsModelNetwork">Pits 1d_nwk Attributes</a></p>
<p><a href="OneD-Domains-1.html#tab:tab-OptionalAttributeDescriptions">1d_nwke (Extended 1d_nwk) Attributes</a></p>
<p>The names of 1d_nwk attributes may have changed from previous
TUFLOW releases to reflect new features and changes. The name of the
attribute is irrelevant as far as TUFLOW is concerned, as TUFLOW only
requires that attributes (of any layer) are in the correct order and of
the correct type (i.e. Character, Float, Integer, etc.). In all TUFLOW
layers, the attributes can be named as the modeller wishes, so older
layers that do not have the same attribute names as documented in this
manual will still work correctly.</p>
</div>
<div id="Channel-Intro-2" class="section level2 hasAnchor" number="5.5">
<h2><span class="header-section-number">5.5</span> Channels Overview<a href="OneD-Domains-1.html#Channel-Intro-2" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>1d_nwk channels can represent open channels, hydraulic structures such
as bridges, culverts/pipes, weirs, and operational structures (e.g.
pumps and gates), and other flow controls such as a user defined flow
matrix.</p>
<p>A channel is digitised as a line. To connect channels the
ends of the channels must be snapped. Channel flow direction is positive
in the direction the line is digitised. This is best visualised
in the GIS using a line style that has arrows or other symbolism
indicating the line direction.</p>
<p>A channel is defined by a length, a Manning’s n value, a table of
hydraulic properties (wetted perimeter, flow area, hydraulic radius)
versus elevation and other parameters depending on the type of channel. Table <a href="OneD-Domains-1.html#tab:tab-LineTypes">5.1</a> below lists the available channel types and Table <a href="OneD-Domains-1.html#tab:tab-LineTypesOptionalFlags">5.2</a> lists the additional options that may be appended to selected channel types.</p>
<p>The hydraulic properties table for channels can be defined at a cross
section positioned midway along the channel (for some structures and
open channels) or can be derived from cross-sections located at the
channel ends (for open channels only). The exceptions are:</p>
<ul>
<li>For culverts (C and R types) the attribute information supplied within
a 1d_nwk layer (i.e. diameter, width, etc.) is sufficient to define
the hydraulic properties (i.e. no cross-section properties table is
required).<br />
</li>
<li>For weirs (W), if no cross-section or hydraulic properties table is
specified, and a Diameter_or_Width attribute value greater than 0.01
is specified, the weir is defined as being a rectangular section 10
metres high based on the invert and width values.</li>
</ul>
<p>Tables of cross-section profiles, cross-section hydraulic properties and
bridge loss coefficients are accessed using links within 1d_xs and 1d_bg
GIS layers. Tables can also be used to define nodal surface areas (refer
to Section <a href="OneD-Domains-1.html#NA-Table-4">5.13.2.1</a>). This allows these data to be entered in a
comma delimited format using .csv files that can be managed and edited
in spreadsheet software such as Microsoft Excel.</p>
<p>Modellers often keep the different data sets separate as numerous .csv
files are often needed. Separate folders underneath the model folder
(same level as the gis folder) are often used to store all the .csv
files and the GIS layer. For example:</p>
<ul>
<li>1d_xs for XZ cross-section profiles in a model\xs folder<br />
</li>
<li>1d_bg for bridge loss coefficient tables in a model\bg folder</li>
</ul>
<p>The <a href="ECFCommands-1.html#ecfReadGISTableLinks">Read GIS Table Links</a> command is used for
linking tabular data to channels. The method for linking cross-sectional
and bridge losses is as follows:</p>
<ul>
<li>Lines are linked to channels. The method depends on
whether the object has two or more vertices. The logic is:
<ul>
<li>For lines with two points (the start and end – no intermediate
vertices) the line only needs to cross a channel – it does not have
to snap to a vertex on the channel line. If the two-point line
crosses more than one channel, the channel that is closest to the
mid-point of the line is selected.<br />
</li>
<li>Lines with three or more vertices must have one of the vertices snap
to a vertice on the channel line. If both types are specified, the
snapped sections are given preference over any two-point line that
crosses the channel line.<br />
</li>
</ul></li>
<li>Other objects (regions and points) are not used.</li>
</ul>
<p>The attributes and the method for determining the data to extract from the source file is outlined in Table <a href="OneD-Domains-1.html#tab:tab-CrossAttributeDescriptions">5.4</a> for 1d_xs and Table <a href="OneD-Domains-1.html#tab:tab-LinkAttributeDescriptions">5.11</a> for 1d_bg. Using the Column_1 attribute, several tables can be located in the one source file if desired.</p>
<table>
<caption>
<span id="tab:tab-LineTypes">Table 5.1: </span><strong>1D Channel (Line) Types</strong>
</caption>
<thead>
<tr>
<th style="text-align:left;font-weight: bold;color: WHITE !important;background-color: rgba(26, 189, 201, 255) !important;">
Channel/Node
</th>
<th style="text-align:left;font-weight: bold;color: WHITE !important;background-color: rgba(26, 189, 201, 255) !important;">
Type
</th>
<th style="text-align:left;font-weight: bold;color: WHITE !important;background-color: rgba(26, 189, 201, 255) !important;">
Description
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;font-weight: bold;color: WHITE !important;background-color: rgba(26, 189, 201, 255) !important;">
Open Channels
</td>
<td style="text-align:left;font-weight: bold;color: WHITE !important;background-color: rgba(26, 189, 201, 255) !important;">
</td>
<td style="text-align:left;font-weight: bold;color: WHITE !important;background-color: rgba(26, 189, 201, 255) !important;">
</td>
</tr>
<tr>
<td style="text-align:left;">
Open Channel
</td>
<td style="text-align:left;">
<b>S</b>
</td>
<td style="text-align:left;">
<p>Open channel that incorporates all flow regimes. Supercedes Normal (Blank) and Gradient (G) channels, as S channels switch into upstream controlled, friction only mode (i.e. no inertia terms) for higher Froude numbers (see Froude Check). This allows steep flow regimes such as super-critical flow to be represented. See also Froude Depth Adjustment.</p>
<p>This is the preferred open channel type as it incorporates all flow regimes, therefore, use this channel in preference to Normal (Blank) and G channels.</p>
Upstream and downstream bed invert attributes must be specified to define the slope of the channel, or the inverts can be taken from the channel’s cross-sections by specifying -99999 for the inverts.
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;color: WHITE !important;background-color: rgba(26, 189, 201, 255) !important;">
Structures
</td>
<td style="text-align:left;font-weight: bold;color: WHITE !important;background-color: rgba(26, 189, 201, 255) !important;">
</td>
<td style="text-align:left;font-weight: bold;color: WHITE !important;background-color: rgba(26, 189, 201, 255) !important;">
</td>
</tr>
<tr>
<td style="text-align:left;">
Bridge<br />
Section <a href="OneD-Domains-1.html#Bridges-3">5.8.2</a>.
</td>
<td style="text-align:left;">
<b> B</b>
</td>
<td style="text-align:left;">
Bridge structure – energy loss coefficients supplied by the user.
</td>
</tr>
<tr>
<td style="text-align:left;">
<file> </file>
</td>
<td style="text-align:left;">
<b>BB</b>
</td>
<td style="text-align:left;">
Bridge structure (introduced for Build 2016-03-AA) – only pier loss and submerged deck loss coefficients required (all other losses automatically calculated). In the future BB bridges will also recognise bridge definition inputs in a similar manner to BArch bridges to automatically generate loss coefficients.
</td>
</tr>
<tr>
<td style="text-align:left;">
Arch Bridge<br />
Section <a href="OneD-Domains-1.html#BArch-3">5.8.3</a>
</td>
<td style="text-align:left;">
<b>BArch</b>
</td>
<td style="text-align:left;">
Arch Bridge structure (Build 2023-03-AA and onwards). Allows users to specify a .csv defining the properties of the arch bridge.
</td>
</tr>
<tr>
<td style="text-align:left;">
Culverts<br />
Section <a href="OneD-Domains-1.html#culverts-pipes-3">5.8.1</a>.
</td>
<td style="text-align:left;">
<b> C</b>
</td>
<td style="text-align:left;">
Pipe or Circular culvert.
</td>
</tr>
<tr>
<td style="text-align:left;">
<file> </file>
</td>
<td style="text-align:left;">
<b>I</b>
</td>
<td style="text-align:left;">
Irregular shaped culvert.
</td>
</tr>
<tr>
<td style="text-align:left;">
<file> </file>
</td>
<td style="text-align:left;">
<b> R</b>
</td>
<td style="text-align:left;">
Box or Rectangular culvert.
</td>
</tr>
<tr>
<td style="text-align:left;">
Gates<br />
Section <a href="OneD-Domains-1.html#SG-3">5.8.6</a>
</td>
<td style="text-align:left;">
<b> SG</b>
</td>
<td style="text-align:left;">
Sluice Gate.
</td>
</tr>
<tr>
<td style="text-align:left;">
Pump<br />
Section <a href="OneD-Domains-1.html#Pumps-3">5.10.2</a>.
</td>
<td style="text-align:left;">
<b> P</b>
</td>
<td style="text-align:left;">
Pump.
</td>
</tr>
<tr>
<td style="text-align:left;">
Spillways<br />
Section <a href="OneD-Domains-1.html#SP-3">5.8.5</a> and <a href="OneD-Domains-1.html#SPO-3">5.10.6</a>
</td>
<td style="text-align:left;">
<b> SP</b>
</td>
<td style="text-align:left;">
Gated or ungated spillways.
</td>
</tr>
<tr>
<td style="text-align:left;">
Weirs<br />
Section <a href="OneD-Domains-1.html#Weir-3">5.8.4</a>
</td>
<td style="text-align:left;">
<b> W</b>
</td>
<td style="text-align:left;">
Weir structure (original weir channel).
</td>
</tr>
<tr>
<td style="text-align:left;">
<file> </file>
</td>
<td style="text-align:left;">
<b> WB</b>
</td>
<td style="text-align:left;">
Broad-crested weir.
</td>
</tr>
<tr>
<td style="text-align:left;">
<file> </file>
</td>
<td style="text-align:left;">
<b>WC</b>
</td>
<td style="text-align:left;">
Crump weir
</td>
</tr>
<tr>
<td style="text-align:left;">
<file> </file>
</td>
<td style="text-align:left;">
<b>WD</b>
</td>
<td style="text-align:left;">
User-defined weir.
</td>
</tr>
<tr>
<td style="text-align:left;">
<file> </file>
</td>
<td style="text-align:left;">
<b>WO</b>
</td>
<td style="text-align:left;">
Ogee-crested weir.
</td>
</tr>
<tr>
<td style="text-align:left;">
<file> </file>
</td>
<td style="text-align:left;">
<b>WR</b>
</td>
<td style="text-align:left;">
Rectangular weir (sharp-crested).
</td>
</tr>
<tr>
<td style="text-align:left;">
<file> </file>
</td>
<td style="text-align:left;">
<b>WT</b>
</td>
<td style="text-align:left;">
Trapezoidal / Cippoletti weir.
</td>
</tr>
<tr>
<td style="text-align:left;">
<file> </file>
</td>
<td style="text-align:left;">
<b>WV</b>
</td>
<td style="text-align:left;">
V-notch weir
</td>
</tr>
<tr>
<td style="text-align:left;">
<file> </file>
</td>
<td style="text-align:left;">
<b>WW</b>
</td>
<td style="text-align:left;">
Similar to the original W weir channel, but with more user options.
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;color: WHITE !important;background-color: rgba(26, 189, 201, 255) !important;">
Special Channels
</td>
<td style="text-align:left;font-weight: bold;color: WHITE !important;background-color: rgba(26, 189, 201, 255) !important;">
</td>
<td style="text-align:left;font-weight: bold;color: WHITE !important;background-color: rgba(26, 189, 201, 255) !important;">
</td>
</tr>
<tr>
<td style="text-align:left;">
Normal
</td>
<td style="text-align:left;">
(leave blank)
</td>
<td style="text-align:left;">
<p>Normal flow channel defined by its length, bed resistance and hydraulic properties. The channel can wet and dry, however, for overbank areas (e.g. tidal flats or floodplains) gradient (G) or S channels should be used. For steep channels that may experience supercritical flow, use S channels.</p>
<b>Note: For all open channels it is recommended to use the S Type.</b>
</td>
</tr>
<tr>
<td style="text-align:left;">
Gradient
</td>
<td style="text-align:left;">
<b>G</b>
</td>
<td style="text-align:left;">
<p>Similar to a Normal channel, except when the water level at one end of the channel falls below the channel bed, the channel invokes a free-overfall algorithm that keeps water flowing without using negative depths. The algorithm takes into account both the channel’s bed resistance and upstream controlled weir flow at the downstream end.</p>
<p>Gradient channels are designed for overbank areas such as tidal flats and floodplains. The upstream and downstream bed invert attributes must be specified to define the slope of the channel.</p>
<b>Note: For all open channels it is recommended to use the S Type.</b>
</td>
</tr>
<tr>
<td style="text-align:left;">
Matrix Flow Channel
</td>
<td style="text-align:left;">
<b>M</b>
</td>
<td style="text-align:left;">
User defined flow channel using a flow matrix. The flow through the structure is dependent on the water levels upstream and downstream.
</td>
</tr>
<tr>
<td style="text-align:left;">
Depth-Discharge Channel
</td>
<td style="text-align:left;">
<b>Q</b>
</td>
<td style="text-align:left;">
User-defined stage discharge channel. The flow through the structure is only dependent on the upstream conditions, such as user defined spillways. If downstream levels are influential then an M channel (see above) may be required.
</td>
</tr>
<tr>
<td style="text-align:left;">
Connector
</td>
<td style="text-align:left;">
<b>X</b>
</td>
<td style="text-align:left;">
<p>Connects the end of one channel to another. This is particularly useful for connecting a side tributary or pipe into the main flow path. It also allows a different end cross-section or WLL to be specified for the side channel, rather than using the end cross-section on the main channel. The direction of the connector line is important.</p>
<p><b>Note: The line must start at the side channel and end at the main channel.</b></p>
If two or more connectors are used at the same location (i.e. to connect two or more side channels to a main channel) their ends must all snap to the same main channel.
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;color: WHITE !important;background-color: rgba(26, 189, 201, 255) !important;">
Operational Channels
</td>
<td style="text-align:left;font-weight: bold;color: WHITE !important;background-color: rgba(26, 189, 201, 255) !important;">
</td>
<td style="text-align:left;font-weight: bold;color: WHITE !important;background-color: rgba(26, 189, 201, 255) !important;">
</td>
</tr>
<tr>
<td style="text-align:left;">
Piping Failure
</td>
<td style="text-align:left;">
<b>PF</b>
</td>
<td style="text-align:left;">
Operational channel to model the “pipe failure” process (when water seepages through an embankment forming a small flow path), see Section <a href="OneD-Domains-1.html#PFDF-3">5.10.8</a>. Introduced in the 2020-10-AA build.
</td>
</tr>
<tr>
<td style="text-align:left;">
Dam Failure
</td>
<td style="text-align:left;">
<b>DF</b>
</td>
<td style="text-align:left;">
Operational channel to model a “dam failure” process (when a dam/levee breaks), see Section <a href="OneD-Domains-1.html#PFDF-3">5.10.8</a>. Introduced in the 2020-10-AA build.
</td>
</tr>
</tbody>
</table>
<table>
<caption>
<span id="tab:tab-LineTypesOptionalFlags">Table 5.2: </span><strong>1D Channel (Line) Types - Additional/Optional Channel Flags</strong>
</caption>
<thead>
<tr>
<th style="text-align:left;font-weight: bold;color: WHITE !important;background-color: rgba(26, 189, 201, 255) !important;">
Options
</th>
<th style="text-align:left;font-weight: bold;color: WHITE !important;background-color: rgba(26, 189, 201, 255) !important;">
Flag
</th>
<th style="text-align:left;font-weight: bold;color: WHITE !important;background-color: rgba(26, 189, 201, 255) !important;">
Description
</th>
<th style="text-align:left;font-weight: bold;color: WHITE !important;background-color: rgba(26, 189, 201, 255) !important;">
Applicable Channel Types
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
Adjust Structure Losses
</td>
<td style="text-align:left;">
<b>A</b>
</td>
<td style="text-align:left;">
Forces the adjust losses approach using the equations and methodology in Section <a href="OneD-Domains-1.html#LossAdjustment-3">5.8.7</a> to adjust the inlet and outlet losses of a culvert or bridge channel according to the approach and departure velocities. This flag overrides Structure Losses if set to FIX. For example, to adjust the losses for a rectangular culvert specify a Type attribute of “RA”.
</td>
<td style="text-align:left;">
Culverts (R, C, I)
</td>
</tr>
<tr>
<td style="text-align:left;">
Fix Structure Losses
</td>
<td style="text-align:left;">
<b>F</b>
</td>
<td style="text-align:left;">
<p>Forces the fix losses approach so as not to adjust the inlet and outlet losses of a culvert or bridge channel according to the approach and departure velocities. This flag overrides the Structure Losses setting if set to ADJUST (the default). See Section <a href="OneD-Domains-1.html#LossAdjustment-3">5.8.7</a>.</p>
For example, to fix the losses for a circular culvert specify a Type attribute of “CF”.
</td>
<td style="text-align:left;">
Culverts (R, C, I)
</td>
</tr>
<tr>
<td style="text-align:left;">
Downstream Controlled
</td>
<td style="text-align:left;">
<b>D</b>
</td>
<td style="text-align:left;">
For culverts, limits the flow regimes to the downstream controlled ones (see Table <a href="OneD-Domains-1.html#tab:tab-FlowRegimes">5.6</a>), unless it is a zero length channel (i.e. channel length less than 0.01m).
</td>
<td style="text-align:left;">
Culverts (R, C, I)
</td>
</tr>
<tr>
<td style="text-align:left;">
Weir over the Top
</td>
<td style="text-align:left;">
<b>W</b>
</td>
<td style="text-align:left;">
If a “W” is specified in conjunction with a B, C or R channel (e.g. BW, CW or RW), a weir channel is automatically inserted to represent the flow overtopping the structure. This saves having to digitise the weir separately. To use this option requires adding the 10 optional attributes to the 1d_nwk layer as detailed in Table <a href="OneD-Domains-1.html#tab:tab-OptionalAttributeDescriptions">5.17</a>. Some of these attributes are used to specify the weir parameters.
</td>
<td style="text-align:left;">
Culverts (R, C) and Bridges (B)
</td>
</tr>
<tr>
<td style="text-align:left;">
Energy
</td>
<td style="text-align:left;">
<b>E</b>
</td>
<td style="text-align:left;">
For structures specifies the use of energy level for the flow calculations. The default is to use energy (E), unless the global .ecf command <tcmd><a href="ECFCommands-1.html#ecfStructureFlowLevels">Structure Flow Levels</a></tcmd><teq> == </teq><tblk>WATER</tblk> is used, in which case the default is to use water level (H). See H below.
</td>
<td style="text-align:left;">
All Weirs except for ‘W’ type, Spillways (SP), Gates (SG) and Dam Failure Channels (DF).
</td>
</tr>
<tr>
<td style="text-align:left;">
Energy Upstream
</td>
<td style="text-align:left;">
<b>EH</b>
</td>
<td style="text-align:left;">
Introduced in the 2023-03-AC build, uses the energy level at the upstream node and water level at the downstream node of 1D structures for flux calculation. This option can also be applied globally using the .ecf command <tcmd><a href="ECFCommands-1.html#ecfStructureFlowLevels">Structure Flow Levels</a></tcmd><teq> == </teq><tblk>ENERGY UPSTREAM</tblk>.
</td>
<td style="text-align:left;">
All Weirs except for ‘W’ type, Spillways (SP), Gates (SG) and Dam Failure Channels (DF).
</td>
</tr>
<tr>
<td style="text-align:left;">
Water Surface
</td>
<td style="text-align:left;">
<b>H</b>
</td>
<td style="text-align:left;">
<p>For structures specifies use of water level for the flow calculations. The default is to use energy level unless <tcmd><a href="ECFCommands-1.html#ecfStructureFlowLevels">Structure Flow Levels</a></tcmd><teq> == </teq>WATER has been specified.</p>
For example, if a broad-crested weir is to use water surface levels rather than energy levels, specify WBH (a space can be used so “WB H” may be preferred for clarity).
</td>
<td style="text-align:left;">
All Weirs except for ‘W’ type, Spillways (SP), Gates (SG) and Dam Failure Channels (DF).
</td>
</tr>
<tr>
<td style="text-align:left;">
Non-inertial channel
</td>
<td style="text-align:left;">
<b>N</b>
</td>
<td style="text-align:left;">
Open Channel (S), Normal (blank) Gradient (G) and channels can be specified as non-inertial by including an “N” in the Type attribute. A non-inertial channel has the inertia term suppressed from the momentum equation.
</td>
<td style="text-align:left;">
Open Channel (S, G ,blank)
</td>
</tr>
<tr>
<td style="text-align:left;">
Variable Geometry
</td>
<td style="text-align:left;">
<b>V</b>
</td>
<td style="text-align:left;">
<p>Normal and gradient channel cross-sections can vary over time by using a variable channel definition. Include a “V” in the Type attribute and see Section <a href="OneD-Domains-1.html#VW-Channel-4">5.8.4.6</a> for more details.</p>
Note that prior to the 2013-12 release, a variable weir channel was specified as a WV channel type. As of the 2013-12 release, WV channels are processed as a V-notch weir. Variable weir channels must be specified as type “VW”.
</td>
<td style="text-align:left;">
Open Channel (S, G ,blank) and W type Weir
</td>
</tr>
<tr>
<td style="text-align:left;">
Operational Control
</td>
<td style="text-align:left;">
<b>O</b>
</td>
<td style="text-align:left;">
“O” flag is required for structures that are to be operated using an operating control definition (see Section <a href="OneD-Domains-1.html#Special-Channels-2">5.9</a>). For example, an operated pump would have a Type attribute of “PO” (or “OP”)
</td>
<td style="text-align:left;">
see Section <a href="OneD-Domains-1.html#Special-Channels-2">5.9</a>
</td>
</tr>
<tr>
<td style="text-align:left;">
Uni-directional (all channels)
</td>
<td style="text-align:left;">
<b>U</b>
</td>
<td style="text-align:left;">
Any channel can be defined as uni-directional by including a “U” in the Type attribute. Water will only flow in the positive direction of the channel (from upstream to downstream). For example a “RU” channel could be used to represent a flap gated rectangular culvert.
</td>
<td style="text-align:left;">
All channel types
</td>
</tr>
</tbody>
</table>
</div>
<div id="Open-Channel-2" class="section level2 hasAnchor" number="5.6">
<h2><span class="header-section-number">5.6</span> Open Channels<a href="OneD-Domains-1.html#Open-Channel-2" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="I-channels-3" class="section level3 hasAnchor" number="5.6.1">
<h3><span class="header-section-number">5.6.1</span> Inertial Channels<a href="OneD-Domains-1.html#I-channels-3" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>An open channel that includes the inertia term is specified as a series
of lines in one or more 1d_nwk GIS layers with an attribute
type of ‘S’, S signifying a sloping channel that can handle steep,
super-critical flows. S channels are typically all natural channels and
artificial channels such as concrete lined open drains. They
automatically test for the occurrence of upstream controlled flow and
automatically switch between the two regimes, and is the preferred type
for all open channels. Other open channel types, Normal (type “blank”)
and Gradient (type “G”) are kept for backward compatibility and
discussed in Section <a href="OneD-Domains-1.html#Legacy-Channel-3">5.9.4</a>. Table <a href="OneD-Domains-1.html#tab:tab-AttributeDescriptions">5.3</a> lists the 1d_nwk attributes that are
required for open channels.</p>
<p>The hydraulic properties table for open channels is typically provided
in the form of cross-sectional data referenced within a 1d_xs GIS layer
and using the command <a href="ECFCommands-1.html#ecfReadGISTableLinks">Read GIS Table Links</a> but
can also specified from external sources (see Section <a href="OneD-Domains-1.html#XS-2">5.7</a>).</p>
<p>Lines within the 1d_xs GIS layer may be digitised midway
along the channel or snapped to the channel ends. The treatment of the
cross-sectional data is different depending on the digitisation. It is
also possible to automatically create interpolated cross-sections. The
attributes of the 1d_xs GIS layer is described in Table <a href="OneD-Domains-1.html#tab:tab-CrossAttributeDescriptions">5.4</a> and further
information on cross-sections is provided in Section <a href="OneD-Domains-1.html#XS-2">5.7</a>.</p>
</div>
<div id="NI-channels-3" class="section level3 hasAnchor" number="5.6.2">
<h3><span class="header-section-number">5.6.2</span> Non-Inertial Channels<a href="OneD-Domains-1.html#NI-channels-3" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>To bypass the Courant stability condition, a special channel flag (N) is
included, known as non-inertial channel or a friction-controlled
channel. This is valid for the S (open channel) and the superseded blank
and G gradient channels. To apply this to an S type channel the channel
type is SN.</p>
<p>For a non-inertial channel, the inertia terms are ignored
(eliminating inertial effects) and the stability control procedure is
automatically applied. Although rarely required, the suppression of the
inertia terms can be useful for stabilising very short S channels with
high velocities.</p>
<table>
<caption>
<span id="tab:tab-AttributeDescriptions">Table 5.3: </span><strong>Open Channels: 1D
Model Network (1d_nwk) Attribute Descriptions</strong>
</caption>
<thead>
<tr>
<th style="text-align:right;font-weight: bold;color: WHITE !important;background-color: rgba(26, 189, 201, 255) !important;">
No. 
</th>
<th style="text-align:left;font-weight: bold;color: WHITE !important;background-color: rgba(26, 189, 201, 255) !important;">
Default GIS Attribute Name
</th>
<th style="text-align:left;font-weight: bold;color: WHITE !important;background-color: rgba(26, 189, 201, 255) !important;">
Description
</th>
<th style="text-align:left;font-weight: bold;color: WHITE !important;background-color: rgba(26, 189, 201, 255) !important;">
Type
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right;">
1
</td>
<td style="text-align:left;">
ID
</td>
<td style="text-align:left;">
Unique identifier up to 12 characters in length. It may contain any character except for quotes and commas, and cannot be blank. As a general rule, spaces and special characters (e.g. “\”) should be avoided, although they are accepted. The same ID can be used for a channel and a node, but no two nodes and no two channels can have the same ID.
</td>
<td style="text-align:left;">
Char(12)
</td>
</tr>
<tr>
<td style="text-align:right;">
2
</td>
<td style="text-align:left;">
Type
</td>
<td style="text-align:left;">
<p>As described in Table <a href="OneD-Domains-1.html#tab:tab-LineTypes">5.1</a>.</p>
<b>S:</b> Steep Channel<br />
<b>G:</b> Gradient Channel<br />
<b>Blank:</b> Normal Channel
</td>
<td style="text-align:left;">
Char(4)
</td>
</tr>
<tr>
<td style="text-align:right;">
3
</td>
<td style="text-align:left;">
Ignore
</td>
<td style="text-align:left;">
If a “T”, “t”, “Y” or “y” is specified, the object will be ignored (T for True and Y for Yes). Any other entry, including a blank field, will treat the object as active.
</td>
<td style="text-align:left;">
Char(1)
</td>
</tr>
<tr>
<td style="text-align:right;">
4
</td>
<td style="text-align:left;">
UCS<br />
(Use Channel Storage at nodes).
</td>
<td style="text-align:left;">
If left blank or set to Yes (“Y” or “y”) or True (“T” or “t”), the storage based on the width of the channel over half the channel length is assigned to the upstream and downstream nodes connected to the channel. If set to No (“N” or “n”) or False (“F” or “f”), the channel width and length does not contribute to the node’s storage. See Section <a href="OneD-Domains-1.html#AutoStorageWidths-4">5.13.1.1</a> for further discussion.
</td>
<td style="text-align:left;">
Char(1)
</td>
</tr>
<tr>
<td style="text-align:right;">
5
</td>
<td style="text-align:left;">
Len_or_ANA
</td>
<td style="text-align:left;">
<p>If greater than zero, sets the length of the channel in metres. If the length is less than zero, except for the special values below, the length of the line is used.</p>
Note, not used to specify the length of a pit channel (which is assumed to have zero length).
</td>
<td style="text-align:left;">
Float
</td>
</tr>
<tr>
<td style="text-align:right;">
6
</td>
<td style="text-align:left;">
n_nF_Cd
</td>
<td style="text-align:left;">
<p>The Manning’s n or Manning’s n multiplier for the channel.</p>
<p>If not using materials or Manning’s values in the cross-section the Manning’s n value is specified using this attribute.</p>
If using materials or Manning’s n to define the bed resistance from XZ tables (see Sections <a href="OneD-Domains-1.html#RR-M-5">5.7.1.1.2</a> and Section <a href="OneD-Domains-1.html#RR-N-5">5.7.1.1.3</a>), n_nF_Cd is a multiplier and is typically set to one (1) as it becomes a multiplication factor of the materials’ Manning’s n values. It may be adjusted as part of the calibration process.
</td>
<td style="text-align:left;">
Float
</td>
</tr>
<tr>
<td style="text-align:right;">
7
</td>
<td style="text-align:left;">
US_Invert
</td>
<td style="text-align:left;">
<p><b>G, S Channel Type: </b><br />
The upstream bed or invert elevation of the channel in metres. The bed of the channel cross-section is used if -99999 is specified for G and S channels.<br />
If a manually created node exists at the upstream end of the channel, and -99999 is specified, the upstream invert is set to the DS_Invert value of the node (or pit), provided this value is greater than -99999 – for example, see Table <a href="OneD-Domains-1.html#tab:tab-NodesAttributeDescriptions">5.30</a>.</p>
<b>Blank Channel Type: </b><br />
Sets the upstream and downstream inverts. Note that the invert is taken as the maximum of the US_Invert and the DS_Invert attributes. Use -99999 to use the bed of the cross-section as the invert.
</td>
<td style="text-align:left;">
Float
</td>
</tr>
<tr>
<td style="text-align:right;">
8
</td>
<td style="text-align:left;">
DS_Invert
</td>
<td style="text-align:left;">
Sets the downstream invert of the channel using the same rules as described for the US_Invert attribute above.
</td>
<td style="text-align:left;">
Float
</td>
</tr>
<tr>
<td style="text-align:right;">
9
</td>
<td style="text-align:left;">
Form_Loss
</td>
<td style="text-align:left;">
<p>Additional form losses (factor of dynamic head) due to bends, bridge piers, etc.</p>
This method is preferred instead of increasing Manning’s n to account for losses. For S channels, this only applies when not in upstream controlled friction mode.
</td>
<td style="text-align:left;">
Float
</td>
</tr>
<tr>
<td style="text-align:right;">
10
</td>
<td style="text-align:left;">
pBlockage
</td>
<td style="text-align:left;">
Not used.
</td>
<td style="text-align:left;">
Float
</td>
</tr>
<tr>
<td style="text-align:right;">
11
</td>
<td style="text-align:left;">
Inlet_Type
</td>
<td style="text-align:left;">
Not used unless using the legacy feature that accesses MIKE 11 cross-section data - see the <a href="https://downloads.tuflow.com/_archive/TUFLOW/Releases/2018-03/TUFLOW%20Manual.2018-03.pdf">2018 TUFLOW Manual</a> for details.
</td>
<td style="text-align:left;">
Char
</td>
</tr>
<tr>
<td style="text-align:right;">
12
</td>
<td style="text-align:left;">
Conn_1D_2D
</td>
<td style="text-align:left;">
Not used unless using the legacy features that access FloodModeller and MIKE 11 cross-section data - see the <a href="https://downloads.tuflow.com/_archive/TUFLOW/Releases/2018-03/TUFLOW%20Manual.2018-03.pdf">2018 TUFLOW Manual</a> for details.
</td>
<td style="text-align:left;">
Char
</td>
</tr>
<tr>
<td style="text-align:right;">
13
</td>
<td style="text-align:left;">
Conn_No
</td>
<td style="text-align:left;">
Not used unless using the legacy feature that accesses MIKE 11 cross-section data - see the <a href="https://downloads.tuflow.com/_archive/TUFLOW/Releases/2018-03/TUFLOW%20Manual.2018-03.pdf">2018 TUFLOW Manual</a> for details.
</td>
<td style="text-align:left;">
Integer
</td>
</tr>
<tr>
<td style="text-align:right;">
14
</td>
<td style="text-align:left;">
Width_or_Dia
</td>
<td style="text-align:left;">
Not used.
</td>
<td style="text-align:left;">
Float
</td>
</tr>
<tr>
<td style="text-align:right;">
15
</td>
<td style="text-align:left;">
Height_or_WF
</td>
<td style="text-align:left;">
Not used.
</td>
<td style="text-align:left;">
Float
</td>
</tr>
<tr>
<td style="text-align:right;">
16
</td>
<td style="text-align:left;">
Number_of
</td>
<td style="text-align:left;">
Not used.
</td>
<td style="text-align:left;">
Integer
</td>
</tr>
<tr>
<td style="text-align:right;">
17
</td>
<td style="text-align:left;">
HConF_or_WC
</td>
<td style="text-align:left;">
Not used.
</td>
<td style="text-align:left;">
Float
</td>
</tr>
<tr>
<td style="text-align:right;">
18
</td>
<td style="text-align:left;">
WConF_or_WEx
</td>
<td style="text-align:left;">
Not used.
</td>
<td style="text-align:left;">
Float
</td>
</tr>
<tr>
<td style="text-align:right;">
19
</td>
<td style="text-align:left;">
EntryC_or_WSa
</td>
<td style="text-align:left;">
Not used.
</td>
<td style="text-align:left;">
Float
</td>
</tr>
<tr>
<td style="text-align:right;">
20
</td>
<td style="text-align:left;">
ExitC_or_WSb
</td>
<td style="text-align:left;">
Can be used to apply a form loss coefficient per unit length of channel for an S type channel. For example, a value of 0.0001 v2/g / metre or (0.1 per km) for a 200m channel, the extra form loss would be 0.0001 x 200 or 0.02 v2/2g. This can be used to account for irregularities in the bed form not accounted for by Manning’s n value (eg. submerged rock ledges and obstructions, or large boulders). If using it is recommended that this is calibrated.
</td>
<td style="text-align:left;">
Float
</td>
</tr>
</tbody>
</table>
</div>
</div>
<div id="XS-2" class="section level2 hasAnchor" number="5.7">
<h2><span class="header-section-number">5.7</span> Cross-Sections<a href="OneD-Domains-1.html#XS-2" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Cross-section hydraulic properties tables may come from several sources:</p>
<ul>
<li>Calculated using a cross-section profile in a .csv or similar
formatted file.<br />
</li>
<li>A hydraulic properties table in a .csv or similar formatted file.<br />
</li>
<li>External sources such as MIKE 11 processed data .txt files or Flood
Modeller .pro files - see the 2018 manual for details for this legacy feature.</li>
</ul>
<p>Cross-section profile and hydraulic properties data are accessed using a
1d_xs GIS layer and the .ecf command, <a href="ECFCommands-1.html#ecfReadGISTableLinks">Read GIS Table
Links</a>. Type “XZ” is specified if accessing a
cross-section profile (distance versus elevation) and a type “CS” or
“HW” is used if accessing a hydraulic properties table (elevation versus
width). Table <a href="OneD-Domains-1.html#tab:tab-CrossAttributeDescriptions">5.4</a> presents the attributes required for the 1d_xs
GIS layer. A number of optional flags are available for both “XZ” and
“CS” or “HW” and are explained in more detail in Sections <a href="OneD-Domains-1.html#XS-flags-3">5.7.1</a>
and <a href="OneD-Domains-1.html#HW-flags-3">5.7.2</a>.</p>
<p>It is possible to let the water level at a cross-section to extend above
the highest elevation in the hydraulic properties table. The default is
to allow the water level to exceed ten times the depth of the CS or NA
table before an instability is triggered. See <a href="ECFCommands-1.html#ecfDepthLimitFactor">Depth Limit
Factor</a> for further details.</p>
<p>When the water level exceeds the top of a cross-section, the conveyance properties are calculated based on glass walling the cross-section above the top. This is carried out by taking the effective flow area and using the effective flow width to calculate the conveyance properties assuming no side wall friction applies above the cross-section top.</p>
<table>
<caption>
<span id="tab:tab-CrossAttributeDescriptions">Table 5.4: </span><strong>1D Cross-Section Table Link (1d_xs) Attribute Descriptions</strong>
</caption>
<thead>
<tr>
<th style="text-align:right;font-weight: bold;color: WHITE !important;background-color: rgba(26, 189, 201, 255) !important;">
No. 
</th>
<th style="text-align:left;font-weight: bold;color: WHITE !important;background-color: rgba(26, 189, 201, 255) !important;">
Default GIS Attribute Name
</th>
<th style="text-align:left;font-weight: bold;color: WHITE !important;background-color: rgba(26, 189, 201, 255) !important;">
Description
</th>
<th style="text-align:left;font-weight: bold;color: WHITE !important;background-color: rgba(26, 189, 201, 255) !important;">
Type
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right;">
1
</td>
<td style="text-align:left;">
Source
</td>
<td style="text-align:left;">
Filename (and path if needed) of the file containing the tabular data. Must be a comma or space delimited text file such as a .csv file.
</td>
<td style="text-align:left;">
Char(50)
</td>
</tr>
<tr>
<td style="text-align:right;">
2
</td>
<td style="text-align:left;">
Type
</td>
<td style="text-align:left;">
<p>Two characters defining the type of table link.</p>
<p><b>“XZ”</b>: Cross-section XZ profile (can include horizontal variations in resistance). The first column is the distance column, and the second the elevation column. Other optional columns are described under the Flags attribute below.</p>
<b>“CS” or “HW”</b>: Cross-section hydraulic properties table. The first two columns must be elevation and width. Optional flags are described under the Flags attribute below
</td>
<td style="text-align:left;">
Char(2)
</td>
</tr>
<tr>
<td style="text-align:right;">
3
</td>
<td style="text-align:left;">
Flags
</td>
<td style="text-align:left;">
<p>Optional flags are as follows:</p>
<p><b>XZ Tables:</b></p>
<p><b>“R”, “M” or “N”:</b> The relative resistance (Column 3) is used to vary the bed resistance value (Manning’s n) across the section. Specify an <b>“R”</b> flag for relative resistance factor, an <b>“M”</b> flag to use a material number or an <b>“N”</b> flag for a Manning’s n value.<br />
<b>“P”:</b> The position values (Column 4) are used to indicate whether an XZ point is left bank (1), mainstream (2) or right bank (3). P values must be entered as 1, 2 or 3. See Section <a href="OneD-Domains-1.html#RR-P-5">5.7.1.1.4</a>.<br />
<b>“A”:</b> The addition values (Column 5) are used to raise or lower the Z value – this is useful, for example, for modelling siltation or erosion of a cross-section, raising, or adding blocked rails to, a weir cross-section of an embankment, etc.<br />
<b>“E” or “T”:</b> Specify an “E” to use effective area or a “T” to use total area when calculating the flow area (see Section <a href="OneD-Domains-1.html#HW-F-4">5.7.2.4</a> and <a href="ECFCommands-1.html#ecfFlowArea">Flow Area</a>). If neither is specified, the global value set using <a href="ECFCommands-1.html#ecfFlowArea">Flow Area</a> is used.</p>
<b>CS or HW Tables: </b>
<b>“A”:</b> Flow area (Column 3)<br />
<b>“P”:</b> Wetted perimeter (Column 4)<br />
<b>“F” or “N”:</b> Vertical change in resistance (Column 5). Use “F” for a multiplication factor and “N” for a Manning’s n value.<br />
<b>“E”: </b> Effective flow width (Column 6)
</td>
<td style="text-align:left;">
Char(8)
</td>
</tr>
<tr>
<td style="text-align:right;">
4
</td>
<td style="text-align:left;">
Column_1
</td>
<td style="text-align:left;">
Optional. Identifies a label in the Source file that is the header for the first column of data. Values are read from the first number encountered below the label until a non-number value, blank line or end of the file is encountered.<br />
If this field is left blank, the first column of data in the Source file is used.
</td>
<td style="text-align:left;">
Char(20)
</td>
</tr>
<tr>
<td style="text-align:right;">
5
</td>
<td style="text-align:left;">
Column_2
</td>
<td style="text-align:left;">
<p>Optional. Identifies a label in the Source file that is in the header for the second column of data.</p>
If this field is left blank, the next column of data after Column_1 is used.
</td>
<td style="text-align:left;">
Char(20)
</td>
</tr>
<tr>
<td style="text-align:right;">
6
</td>
<td style="text-align:left;">
Column_3
</td>
<td style="text-align:left;">
Optional. Identifies a label in the Source file that is in the header for the third column of data.<br />
If this field is left blank, the second column of data after Column_1 is used.
</td>
<td style="text-align:left;">
Char(20)
</td>
</tr>
<tr>
<td style="text-align:right;">
7
</td>
<td style="text-align:left;">
Column_4
</td>
<td style="text-align:left;">
Optional. Defines the fourth column of data.
</td>
<td style="text-align:left;">
Char(20)
</td>
</tr>
<tr>
<td style="text-align:right;">
8
</td>
<td style="text-align:left;">
Column_5
</td>
<td style="text-align:left;">
Optional. Defines the fifth column of data.
</td>
<td style="text-align:left;">
Char(20)
</td>
</tr>
<tr>
<td style="text-align:right;">
9
</td>
<td style="text-align:left;">
Column_6
</td>
<td style="text-align:left;">
Optional. Defines the sixth column of data.
</td>
<td style="text-align:left;">
Char(20)
</td>
</tr>
<tr>
<td style="text-align:right;">
10
</td>
<td style="text-align:left;">
Z_Increment
</td>
<td style="text-align:left;">
Optional. Sets the height increment in metres to be used for calculating hydraulic properties from a XZ cross-section profile. If less than 0.01, the increment is determined automatically. Only used for XZ cross-section data.
</td>
<td style="text-align:left;">
Float
</td>
</tr>
<tr>
<td style="text-align:right;">
11
</td>
<td style="text-align:left;">
Z_Maximum
</td>
<td style="text-align:left;">
Optional. Sets the maximum elevation in metres to be used for calculating hydraulic properties from a XZ cross-section profile. If less than the lowest point in the cross-section profile, Z_Maximum is taken as the highest elevation in the profile. Only used for XZ cross-section data.
</td>
<td style="text-align:left;">
Float
</td>
</tr>
<tr>
<td style="text-align:right;">
12
</td>
<td style="text-align:left;">
Skew<br />
(in degrees)
</td>
<td style="text-align:left;">
Optional. Adjusts the cross-section properties for XZ and CS/HW data according to the skew angle. Useful where the cross-section line is surveyed oblique to the flow direction. The skew angle is zero degrees in the direction of flow and 90 degrees if surveyed at a right angle to the direction of flow. For example, a value of 45 adjusts the horizontal dimensions by dividing by the √2.
</td>
<td style="text-align:left;">
Float
</td>
</tr>
</tbody>
</table>
<div id="XS-flags-3" class="section level3 hasAnchor" number="5.7.1">
<h3><span class="header-section-number">5.7.1</span> Type “XZ” Optional Flags<a href="OneD-Domains-1.html#XS-flags-3" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div id="RR-4" class="section level4 hasAnchor" number="5.7.1.1">
<h4><span class="header-section-number">5.7.1.1</span> Relative Resistance<a href="OneD-Domains-1.html#RR-4" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Varying the resistance across an XZ (offset-elevation) cross-section is
possible by using either a relative resistance factor (R flag),
different material ID values (M flag) or different Manning’s n values (N
flag). These are discussed further in the sections below.</p>
<p>The relative resistance value applies midway to either side of the
X-value (except the first and last X-values where it only applies to
midway to the single neighbouring X-value). The reason for this is that
material or n values can be correctly sampled from a GIS layer at the
survey points. This is slightly different from some other 1D hydraulic
modelling software that apply relative resistance values from the
previous X-value to the current X-value or from the current to the next.</p>
<p>Sections of a cross-section can be “removed” by entering ‑1 (negative
one) for a resistance value. This feature is particularly useful when
developing a linked 1D/2D model where the 1D cross-sections are
typically trimmed to the top of bank to avoid double counting of
floodplain conveyance and storage. For more information on how negative “M”, “N” and “R” differ, please refer to the <a href="https://wiki.tuflow.com/TUFLOW_1D_Channels_and_Hydraulic_Structures#How_do_negative_.22M.22.2C_.22N.22_and_.22R.22_values_deactivate_1D_cross-sections.3F">TUFLOW Wiki</a>.</p>
<div id="RR-R-5" class="section level5 hasAnchor" number="5.7.1.1.1">
<h5><span class="header-section-number">5.7.1.1.1</span> Relative Resistance Factor (R)<a href="OneD-Domains-1.html#RR-R-5" class="anchor-section" aria-label="Anchor link to header"></a></h5>
<p>The relative resistance factor (R) is a multiplication factor applied to
the primary Manning’s n value of the channel. Wherever the R value
changes across the cross-section, a new parallel sub-channel is created.
The total conveyance for the whole cross-section is determined by
carrying out a parallel channel analysis of all the sub-channels. This
approach allows the variation in bed resistance across a cross-section
to be accounted for, and to force a parallel channel analyses so that
conveyance does not decrease with height when the wetted perimeter
suddenly increases (e.g. when overbank areas just become wet).</p>
<p>If using effective area (see Section <a href="OneD-Domains-1.html#Eff-vs-Total-3">5.7.4</a>), an R of 1.0 must
occur at some point in the profile to indicate the primary sub-channel.
If a value of 1.0 is not found an <a href="https://wiki.tuflow.com/TUFLOW_Message_1070">ERROR 1070</a> occurs, as grossly
incorrect channel velocities can occur when using effective area with an inappropriate primary sub-channel. The
Manning’s n value of the primary sub-channel is that specified in the
1d_nwk layer for the channel. The primary sub-channel does not have to
be the lowest part of the cross-section.</p>
</div>
<div id="RR-M-5" class="section level5 hasAnchor" number="5.7.1.1.2">
<h5><span class="header-section-number">5.7.1.1.2</span> Material Values (M)<a href="OneD-Domains-1.html#RR-M-5" class="anchor-section" aria-label="Anchor link to header"></a></h5>
<p>If using material values (M), the Manning’s n value to be applied is
taken from a Materials Definition File (see <a href="TCFCommands-1.html#tcfReadMaterialsFile">Read Materials
File</a>). If the Position “P” flag is not used, the
material at the lowest Z value (cross-section bed) is used as the
primary material, which then corresponds to a relative resistance factor
of 1.0. If no material values are specified, a material value of one (1)
is applied over the whole cross-section. If the P flag and values are
used, the primary material is determined as that at the lowest Z value
in the mainstream channel (see Section <a href="OneD-Domains-1.html#RR-N-5">5.7.1.1.3</a>).</p>
<p><strong>When using materials, the n_nF_Cd value in the 1d_nwk layer becomes a
multiplier and should be set to one (1.0).</strong> If justified, it can be
adjusted for calibration or sensitivity testing. For example, if a slightly higher
resistance is desired along a channel, rather than setting different
material values, change the n_nF_Cd value in the 1d_nwk layer to, say,
1.1 to increase all Manning’s n values across the cross-section by 10%.</p>
<p>A negative material value in the M column of a XZM cross-section table
can now be specified to disable (i.e. block out or remove) sections of a
cross-section. The negative value must be the negative of a valid
Material ID in the Materials Definition File (see <a href="TCFCommands-1.html#tcfReadMaterialsFile">Read Materials
File</a> and Section <a href="TwoD-Domains-1.html#Materials-2">7.3.6</a>). For more information on how negative “M”, “N” and “R” differ, please refer to the <a href="https://wiki.tuflow.com/TUFLOW_1D_Channels_and_Hydraulic_Structures#How_do_negative_.22M.22.2C_.22N.22_and_.22R.22_values_deactivate_1D_cross-sections.3F">TUFLOW Wiki</a>.</p>
<p><strong>Example</strong></p>
<p>In the following example, the TUFLOW Tutorial Model (discussed in Section <a href="GettingStarted-1.html#TutorialModels-3">2.1.1</a>) will be modified to demonstrate how Manning’s n values may be assigned to cross-sections based on values within the Materials Definition File.</p>
<p>An “M” flag is added to the 1d_xs layer referencing the cross-sectional data of the open channel.</p>
<p><img src="images/image45.png" width="20%" style="display: block; margin: auto;" /></p>
<p>An additional third column is then added to the .csv source file, containing one or more Material ID values from within the Materials Definition File. In the figure below, a Material ID of 10 has been assigned to the whole cross-section.</p>
<p><img src="images/image46.png" width="20%" style="display: block; margin: auto;" /></p>
<p>This correlates to a Manning’s n value of 0.08 as shown in the Materials Definition File.</p>
<p><img src="images/image47.png" width="60%" style="display: block; margin: auto;" /></p>
<p>When using the “M” flag to define material values, the “n_nF_Cd”
attribute in the 1d_nwk becomes a multiplier (refer to Table <a href="OneD-Domains-1.html#tab:tab-AttributeDescriptions">5.3</a>). In most cases,
this should be set to 1, as has been carried out for this example.</p>
<p>Once the model has been compiled, a check of the Manning’s n values
applied to each cross-section may be viewed in the <a href="https://wiki.tuflow.com/Check_Files_1d_ta_tables">_ta_tables_check.csv</a>.</p>
<p><img src="images/image48.png" width="60%" style="display: block; margin: auto;" /></p>
</div>
<div id="RR-N-5" class="section level5 hasAnchor" number="5.7.1.1.3">
<h5><span class="header-section-number">5.7.1.1.3</span> Manning’s n Values (N)<a href="OneD-Domains-1.html#RR-N-5" class="anchor-section" aria-label="Anchor link to header"></a></h5>
<p>If using Manning’s n values (N), the n value is specified directly,
noting that the n_or_n_Cd value in the 1d_nwk layer becomes a multiplier
and should be set to one (1.0). See discussion above for using material
values. A value of ‑1 ignores that section of the profile. For information on how negative “M”, “N” and “R” differ, please refer to the <a href="https://wiki.tuflow.com/TUFLOW_1D_Channels_and_Hydraulic_Structures#How_do_negative_.22M.22.2C_.22N.22_and_.22R.22_values_deactivate_1D_cross-sections.3F">TUFLOW Wiki</a>.</p>
</div>
<div id="RR-P-5" class="section level5 hasAnchor" number="5.7.1.1.4">
<h5><span class="header-section-number">5.7.1.1.4</span> Position Flag (P)<a href="OneD-Domains-1.html#RR-P-5" class="anchor-section" aria-label="Anchor link to header"></a></h5>
<p>The position values are used to indicate whether an XZ point is left
bank (1), mainstream (2) or right bank (3). The P value is used to
indicate where the mainstream sub-channel is located. If the materials (M
flag) is used, the primary material is taken as that at the lowest Z
value in the mainstream sub-channel. If the P flag and values are not
specified, the primary material is that at the lowest Z value across the
whole section.</p>
<!-- 
It is intended that the P values be used for other processing and
post-processing of results in future releases.
-->
</div>
</div>
</div>
<div id="HW-flags-3" class="section level3 hasAnchor" number="5.7.2">
<h3><span class="header-section-number">5.7.2</span> Type “HW” Optional Flags<a href="OneD-Domains-1.html#HW-flags-3" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div id="HW-A-4" class="section level4 hasAnchor" number="5.7.2.1">
<h4><span class="header-section-number">5.7.2.1</span> Flow Area (A)<a href="OneD-Domains-1.html#HW-A-4" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>The effective flow area in m<sup>2</sup> or ft<sup>2</sup> (depending on
the model’s units). If omitted, the area is calculated based on the
elevations and widths starting at an area of zero at the lowest
elevation.</p>
</div>
<div id="HW-P-4" class="section level4 hasAnchor" number="5.7.2.2">
<h4><span class="header-section-number">5.7.2.2</span> Wetted Perimeter (P)<a href="OneD-Domains-1.html#HW-P-4" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>The wetted perimeter in metres or feet (depending on the model’s units).
If omitted, the area is calculated based on the elevations and widths
assuming a symmetrical channel.</p>
</div>
<div id="HW-N-4" class="section level4 hasAnchor" number="5.7.2.3">
<h4><span class="header-section-number">5.7.2.3</span> Manning’s n Values (N)<a href="OneD-Domains-1.html#HW-N-4" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>If using Manning’s n values (N), the n value is specified directly,
noting that the n_or_n_Cd value in the 1d_nwk layer becomes a multiplier
and should be set to one (1.0). See discussion above for using material
values. A value less than zero is set to 0.001.</p>
</div>
<div id="HW-F-4" class="section level4 hasAnchor" number="5.7.2.4">
<h4><span class="header-section-number">5.7.2.4</span> Manning’s n Values (F)<a href="OneD-Domains-1.html#HW-F-4" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>If using Manning’s n value mulipliers (F), the n value specified in the
“n_or_n_Cd” value in the 1d_nwk layer is multiplied by the
specified factor. A value less than zero is set to 0.001.</p>
</div>
</div>
<div id="Parallel-Channel-3" class="section level3 hasAnchor" number="5.7.3">
<h3><span class="header-section-number">5.7.3</span> Parallel Channel Analysis<a href="OneD-Domains-1.html#Parallel-Channel-3" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>To calculate total conveyance, a cross-section needs to be sub-divided
into panels for which the velocity is uniformly distributed. Conveyance
for each panel is calculated using the Manning’s equation:</p>
<p><span class="math display" id="eq:equ-mannings">\[\begin{equation}
K = \ \frac{1.0}{n}\ AR^{\frac{2}{3}}
\tag{5.3}
\end{equation}\]</span></p>
<p>Where:</p>
<ul>
<li><span class="math inline">\(K\)</span> = conveyance of panel<br />
</li>
<li><span class="math inline">\(n\)</span> = Manning’s n roughness coefficient<br />
</li>
<li><span class="math inline">\(A\)</span> = Flow Area (m<sup>2</sup>)<br />
</li>
<li><span class="math inline">\(R\)</span> = Hydraulic Radius (m) – area / wetted perimeter</li>
</ul>
<p>The conveyance of a cross-section may reduce with height where there is
a sudden increase in the wetted perimeter compared with a relatively
small increase in flow area, causing the hydraulic radius to reduce
despite the water level increasing. A WARNING is issued if this occurs
and it is strongly recommended that the cross-section be reviewed and
corrected.</p>
<p>The most common cause for the reduction in conveyance with height occurs
when the extent of inundation across the cross-section increases
markedly during the transition from in-bank to out-of-bank flow. The
reducing conveyance with height problem is usually resolved by forcing a
parallel channel analysis by specifying a change in resistance using the
R, M or N flag discussed in the sections above.</p>
<p><tcmd><a href="ECFCommands-1.html#ecfConveyanceCalculation">Conveyance Calculation</a></tcmd><teq> ==</teq><tblk> ALL PARALLEL</tblk> is
the default setting. This forces a parallel channel analysis based on
splitting the cross-section into parallel channels at every distance
X-value. This approach generally ensures that conveyance does not reduce
with height. Using this approach to calculate the hydraulic properties
tends to produce a slightly more efficient cross-section (higher
conveyance), similar to the resistance radius formulation used by some
schemes. Therefore, a slightly higher Manning’s n value (by ~10%) may be
needed to achieve similar results.</p>
<p>Figure <a href="OneD-Domains-1.html#fig:fig-image49">5.2</a> illustrates the ALL PARALLEL method of conveyance calculation.</p>
<center>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:fig-image49"></span>
<img src="images/image49.png" alt="**‘All Parallel’ Conveyance Calculation Method**" width="80%" />
<p class="caption">
Figure 5.2: <strong>‘All Parallel’ Conveyance Calculation Method</strong>
</p>
</div>
</center>
<p><tcmd><a href="ECFCommands-1.html#ecfConveyanceCalculation">Conveyance Calculation</a> </tcmd><teq>==</teq><tblk> CHANGE IN
RESISTANCE</tblk> may be used as an alternative to the default <tblk>ALL PARALLEL</tblk>
approach. In this case, the parallel channel analysis splits the
cross-section into separate parallel channels based on wherever there is
a change in resistance (due to different relative resistance (R flag),
material type (M flag) or Manning’s n values (N flag)). This is
illustrated in Figure <a href="OneD-Domains-1.html#fig:fig-image50">5.3</a>:</p>
<center>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:fig-image50"></span>
<img src="images/image50.png" alt="**‘Change in Resistance’ Conveyance Calculation Method**" width="80%" />
<p class="caption">
Figure 5.3: <strong>‘Change in Resistance’ Conveyance Calculation Method</strong>
</p>
</div>
</center>
<p>It should be noted that differences in results are expected between the
two methods of conveyance calculation. The total number of panels for
each calculation method will be different as demonstrated,
thereby influencing the total conveyance.</p>
<p>The ALL PARALLEL approach has been chosen as the current default
conveyance calculation method for ESTRY. This is not to imply that this
method produces the more accurate result, rather it has been chosen as
it generally does not cause conveyance reducing with height warnings.</p>
</div>
<div id="Eff-vs-Total-3" class="section level3 hasAnchor" number="5.7.4">
<h3><span class="header-section-number">5.7.4</span> Effective Area versus Total Area<a href="OneD-Domains-1.html#Eff-vs-Total-3" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>For XZ (offset elevation) Cross-Sections, the flow area is calculated as
an effective area (E flag) or a total area (T flag). Use of the flag
will override the global setting set by <a href="ECFCommands-1.html#ecfFlowArea">Flow Area</a> where
the default approach is to use the effective area.</p>
<p>If there is no variation in relative resistance across the cross-section
there is no difference between effective and total areas. This is
dependent on the relative resistance being 1.0 across the whole section.
<a href="https://wiki.tuflow.com/TUFLOW_Message_1070">ERROR 1070</a> is produced if the relative resistance is not 1.0
somewhere along the cross-section when using effective area.</p>
<p>For an open channel, the total conveyance of a cross-section is not
affected by whether effective or total area is used. In the case of
effective area the wetted perimeter is adjusted to compensate for the
change in flow area so as to produce the same conveyance as would occur
for total area. For special channels that use cross-sections such as
bridges, weirs and irregular culverts, the flow area used is the
effective or total area as specified. This can be useful if the effects
of blockage or congestion within the section needs to be modelled.</p>
<p>The primary differences between using effective and total area are:</p>
<ul>
<li>The channel velocity calculated is the depth and width average of the
primary (normally mainstream) parallel sub-channel if using effective
area, and the averaged depth and width of the whole cross-section if
using total area.<br />
</li>
<li>Where the effective and total areas are significantly different, the
channel velocities used in the 1D momentum equation will be
significantly different. If the channel velocity is sufficiently high
and different depending on whether effective or total area is used,
the inertia terms in the 1D momentum equation may affect the results.
Note the frictional (bed resistance) term in the momentum equation is
NOT affected as the hydraulic properties for the cross-section are
adjusted so that the total conveyance is the same irrespective of
whether effective or total area is used.</li>
<li>Effective area gives a more reliable calculation of the mainstream
velocity, and therefore, a more accurate estimate of approach and exit
velocities of structures, and more appropriate velocities for
advection-dispersion and sediment transport calculations. Where
velocities are not high or significantly changed when using effective or
total area, the water level and flow results are usually identical or
very similar.</li>
</ul>
</div>
<div id="XS-Mid-3" class="section level3 hasAnchor" number="5.7.5">
<h3><span class="header-section-number">5.7.5</span> Mid Cross-Sections<a href="OneD-Domains-1.html#XS-Mid-3" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Cross-sections may be specified using lines digitised within a 1d_xs
layer partway along the channel. The upstream and downstream invert
levels of the channel are both assigned the invert level of the
cross-section if a value of -99999 has been specified within the 1d_nwk
channel (refer to Table <a href="OneD-Domains-1.html#tab:tab-AttributeDescriptions">5.3</a>). If either of these attributes is greater than
‑99999, the invert of the channel is set to the GIS attribute value
rather than that of the cross-section bed elevation.</p>
<p>The mid cross-section approach is the only approach available for
structures such as bridges, weirs and irregular shaped culverts. It can
also be used for open channels, however the digitisation of
cross-section lines within a 1d_xs layer that have been snapped to the
channel ends (as described in Section <a href="OneD-Domains-1.html#XS-End-3">5.7.6</a> below) has added
advantages and is recommended.</p>
<p>If using a mid cross-section 1d_xs line with more than two vertices, a intermediate vertex must be snapped to the 1d_nwk channel.</p>
</div>
<div id="XS-End-3" class="section level3 hasAnchor" number="5.7.6">
<h3><span class="header-section-number">5.7.6</span> End Cross-Sections<a href="OneD-Domains-1.html#XS-End-3" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Cross-sections for open channels (S channels and the superseded G
channels) can be specified using lines digitised within a 1d_xs layer at
the channel ends, rather than a single cross-section midway along the
channel as described above. This approach has the following benefits:</p>
<ul>
<li>The upstream and downstream inverts can be based on the beds of the
cross-sections, thereby saving some effort to enter this information
within the 1d_nwk file. To do this, set the US_Invert and DS_Invert
attributes in the 1d_nwk layer to ‑99999. If either of these
attributes is greater than ‑99999, the invert is set to the attribute
value rather than that of the cross-section bed.<br />
</li>
<li>Cross-section surveys from some other 1D models often have the
cross-sections at the channel ends, therefore, this makes it easier to
use these external data sources.</li>
</ul>
<p>There are a few rules on how end cross-sections are interpreted and
applied, as follows:</p>
<ul>
<li>The 1d_xs cross-section lines must have a vertex snapped to the
channel end.<br />
</li>
<li>If a 1d_xs cross-section line occurs elsewhere along an open channel
with end cross-sections, the midway cross-section prevails. This is
particularly useful where two channels’ ends are snapped to an end
cross-section, but the end cross-section is to be applied to only one
of the channels (e.g. one channel is a river channel using end
cross-sections, and the other is an overbank channel). For the
overbank channel, specify a cross-section line somewhere along the
channel, and preference will be given to this cross-section rather
than the end cross-section. Alternatively, an X connector can be used
if end cross-sections are required for both channels. See Section
<a href="OneD-Domains-1.html#XConnect-3">5.9.3</a>.<br />
</li>
<li>End cross-sections cannot be used to override previously defined
cross-section properties for a G or S channel. You can override the
end cross-sections using a midway cross-section.<br />
</li>
<li>For channels other than S and G channels, end cross-sections are
ignored.</li>
</ul>
</div>
<div id="Interpolate-XS-3" class="section level3 hasAnchor" number="5.7.7">
<h3><span class="header-section-number">5.7.7</span> Interpolated Cross-Section Protocols<a href="OneD-Domains-1.html#Interpolate-XS-3" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Cross-sections may be interpolated for channels (excluding C and R
culvert channels) that have not been assigned a cross-section. A series
of channels may now be digitised between two cross-sections, and the
cross-section properties at each channel are linearly interpolated
between the two cross-sections. The protocols applied when interpolating
cross-sections and setting Manning’s n values are:</p>
<ul>
<li>If a channel has a cross-section at each end, the processed data of
these cross-sections is averaged.<br />
</li>
<li>If a channel has a cross-section midway, this cross-section takes
priority over any end cross-sections.<br />
</li>
<li>If a channel only has one end cross-section, TUFLOW traverses
upstream/downstream to find the next available cross-section, and uses
this to interpolate the cross-section properties for that channel. The
next available cross-section can be a midway or end cross-section.<br />
</li>
<li>If a channel has no cross-sections attached to it, TUFLOW traverses
upstream and downstream to find the nearest cross-sections and
interpolates the channel properties based on these cross-sections.<br />
</li>
<li>When traversing upstream/downstream to find a cross-section:
<ul>
<li>If a junction (three or more channels snapped together) is reached
(excluding pits and connectors), an ERROR is issued as it is not
possible to determine which branch to follow. Note, channels
connected to a junction using a connector (Type “X”) are not used
for traversing, therefore use connectors to connect side channels to
the main branch to avoid interpolating sections from side channels<br />
</li>
<li>The digitised direction of the channel is important and controls the
direction used to traverse upstream and downstream. Ensure the
channels are digitised in a consistent direction (usually from
upstream to downstream).<br />
</li>
</ul></li>
<li>If a channel has an end cross-section only at one end, and no
cross-section is found when traversing, this end cross-section is used
at both ends for that channel only.<br />
</li>
<li>The inverts are also interpolated using the cross-section beds (unless
the inverts have been manually entered into the 1d_nwk attributes).
Specify -99999 for the 1d_nwk channel inverts to be interpolated from the cross-sections.<br />
</li>
<li>Cross-sections that are interpolated can be of any format, including CS or HW
1d_xs formats (see Table <a href="OneD-Domains-1.html#tab:tab-CrossAttributeDescriptions">5.4</a>).<br />
</li>
<li>The Manning’s n value assigned to the channel’s cross-section is as
follows:
<ul>
<li>If the cross-sections used for interpolation have no Manning’s n
values (i.e. for XZ cross-sections, M or N was not specified, or for
CS/HW cross-sections, N was not specified), the 1d_nwk Manning’s n
attribute of the channel is used.<br />
</li>
<li>If the cross-sections used for interpolation have Manning’s n
values, the value is interpolated from the cross-section n values
(at the bed) and multiplied by the 1d_nwk Manning’s n attribute of
the channel. In this case the 1d_nwk n_or_n_F attribute is a
multiplier that can be used to calibrate the model.<br />
</li>
<li>If one of the two cross-sections used for interpolation has a
Manning’s n value, and the other does not, the n value used is
interpolated using the channel’s 1d_nwk Manning’s n value and the
cross-section’s n value. Ideally, the model should be set up using
the same approach everywhere so that this situation does not arise
as it may cause undesirable results. A WARNING is issued if this
occurs.</li>
</ul></li>
</ul>
<p>The interpolation of cross-sections is the default. <a href="ECFCommands-1.html#ecfInterpolateCrossSections">Interpolate
Cross-Sections</a> can also be used to switch
this feature ON or OFF.</p>
</div>
</div>
<div id="Structures-2" class="section level2 hasAnchor" number="5.8">
<h2><span class="header-section-number">5.8</span> Structures<a href="OneD-Domains-1.html#Structures-2" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Hydraulic structures in the 1D domain are modelled by replacing the
momentum equation with standard equations describing the flow through
the structure. The structures available are described in the following
sections. A discussion on the choice of a 1D or 2D representation of the
structure is presented in Section <a href="TwoD-Domains-1.html#srf-3">7.3.9.1</a>.</p>
<p>A channel is flagged as a hydraulic structure using the Type attribute
as described in Table <a href="OneD-Domains-1.html#tab:tab-LineTypes">5.1</a>. Except for culverts, a structure has zero length, i.e.
there is no bed resistance. If a non-zero length is applied to a “zero length” structure, this is only used in the calculation of the storage (nodal area).</p>
<div id="culverts-pipes-3" class="section level3 hasAnchor" number="5.8.1">
<h3><span class="header-section-number">5.8.1</span> Culverts and Pipes<a href="OneD-Domains-1.html#culverts-pipes-3" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Culvert or pipe channels can be either rectangular, circular (pipe) or
irregular in shape. A range of different flow regimes is simulated with
flow in either direction. Adverse slopes are accounted for and flow may
be subcritical or supercritical. Figure <a href="OneD-Domains-1.html#fig:fig-image19">5.4</a>, Figure <a href="OneD-Domains-1.html#fig:fig-image20">5.5</a> and Table <a href="OneD-Domains-1.html#tab:tab-FlowRegimes">5.6</a> present the different flow regimes which can be modelled. The regimes that occur during a simulation are output to the .eof file next to the velocity and flow output values, and to the _TSF GIS layer (see Sections <a href="Checks-and-Logs-1.html#EOF-2">14.6</a> and <a href="Viewing-Output-1.html#TS-GIS-3">15.3.4</a>), and can be displayed on time-series plots in the QGIS TUFLOW Viewer plugin.</p>
<p>For all culvert types the length, upstream and downstream inverts,
Manning’s n, bend loss, entrance and exit losses, and number of barrels
are entered using the 1d_nwk attributes (see Table <a href="OneD-Domains-1.html#tab:tab-CulvertsAttributeDescriptions">5.5</a>). For type
“C” circular or type “R” rectangular culverts, the dimensions are also
specified within the 1d_nwk attributes. For an “I” irregular shaped
culvert, the cross-sectional shape is specified in the same manner as
for open channels using a 1d_xs GIS layer (refer to Section <a href="OneD-Domains-1.html#XS-2">5.7</a>
and Table <a href="OneD-Domains-1.html#tab:tab-CrossAttributeDescriptions">5.4</a>) and the command <a href="ECFCommands-1.html#ecfReadGISTableLinks">Read GIS Table
Links</a>. The line is digitised across
the 1d_nwk channel line.</p>
<p>The four culvert coefficients are as follows:</p>
<ul>
<li>The height contraction coefficient for box culverts. Usually 0.6 for
square edged entrances to 0.8 for rounded edges. This factor is not
used for circular culverts.<br />
</li>
<li>The width contraction coefficient for box culverts. Typically values
from 0.9 for sharp edges to 1.0 for rounded edges. This factor is
normally set to 1.0 for circular culverts.<br />
</li>
<li>The entry loss coefficient. The standard value for this coefficient is
0.5. Variations to this value may be applied based on manufacturer
specifications.<br />
</li>
<li>The exit loss coefficient, normally recommended as 1.0.</li>
</ul>
<p>The calculations of culvert flow and losses are carried out using
techniques from “Hydraulic Charts for the Selection of Highway Culverts”
and “Capacity Charts for the Hydraulic Design of Highway Culverts”,
together with additional information provided in <span class="citation">Henderson (<a href="#ref-Henderson1966">1966</a>)</span>. The
calculations have been compared and shown to be consistent with
manufacturer’s data provided by both “Rocla” and “Armco”.</p>
<p><strong>Note: By default, the entrance and exit losses above are adjusted every timestep according to
the approach and departure velocities based on the equations in Section <a href="OneD-Domains-1.html#LossAdjustment-3">5.8.7</a>.</strong></p>
<p>For benchmarking of culvert flow to the literature, see “<a href="https://www.tuflow.com/media/4989/2004-tuflow-testing-and-validation-huxley.pdf">TUFLOW
Validation and
Testing</a>”
<span class="citation">(<a href="#ref-Huxley2004">Huxley, 2004</a>)</span>.</p>
<table>
<caption>
<span id="tab:tab-CulvertsAttributeDescriptions">Table 5.5: </span><strong>Culverts and Pipes: 1D Model Network (1d_nwk) Attribute Descriptions</strong>
</caption>
<thead>
<tr>
<th style="text-align:right;font-weight: bold;color: WHITE !important;background-color: rgba(26, 189, 201, 255) !important;">
No. 
</th>
<th style="text-align:left;font-weight: bold;color: WHITE !important;background-color: rgba(26, 189, 201, 255) !important;">
Default GIS Attribute Name
</th>
<th style="text-align:left;font-weight: bold;color: WHITE !important;background-color: rgba(26, 189, 201, 255) !important;">
Description
</th>
<th style="text-align:left;font-weight: bold;color: WHITE !important;background-color: rgba(26, 189, 201, 255) !important;">
Type
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right;">
1
</td>
<td style="text-align:left;">
ID
</td>
<td style="text-align:left;">
Unique identifier up to 12 characters in length. It may contain any character except for quotes and commas, and cannot be blank. As a general rule, spaces and special characters (e.g. “\”) should be avoided, although they are accepted. The same ID can be used for a channel and a node, but no two nodes and no two channels can have the same ID.<br />
When automatically creating nodes (default) “.1” and “.2” are added to the channel names for the upstream and downstream node names respectively. IDs over 10 characters long are not recommended as the appending of .1 and .2 can cause duplicate node ID’s to be created.
</td>
<td style="text-align:left;">
Char(12)
</td>
</tr>
<tr>
<td style="text-align:right;">
2
</td>
<td style="text-align:left;">
Type
</td>
<td style="text-align:left;">
<p>The culvert type:</p>
<ul>
<li>“C” for a circular culvert;<br />
</li>
<li>“R” for a rectangular culvert;<br />
</li>
<li>“I” for an irregular shaped culvert</li>
</ul>
Optional type flags may also be used to implement additional flow controls such as unidirectional flow (“U”) or operated flow conditions (“O”). Culvert type details are outlined in Table <a href="OneD-Domains-1.html#tab:tab-LineTypes">5.1</a> and optional flags in Table <a href="OneD-Domains-1.html#tab:tab-LineTypesOptionalFlags">5.2</a> .
</td>
<td style="text-align:left;">
Char(4)
</td>
</tr>
<tr>
<td style="text-align:right;">
3
</td>
<td style="text-align:left;">
Ignore
</td>
<td style="text-align:left;">
If a “T”, “t”, “Y” or “y” is specified, the object will be ignored (T for True and Y for Yes). Any other entry, including a blank field, will treat the object as active.
</td>
<td style="text-align:left;">
Char(1)
</td>
</tr>
<tr>
<td style="text-align:right;">
4
</td>
<td style="text-align:left;">
UCS<br />
(Use Channel Storage at nodes)
</td>
<td style="text-align:left;">
If left blank or set to Yes (“Y” or “y”) or True (“T” or “t”), the storage based on the width of the channel over half the channel length is assigned to both of the two nodes connected to the channel. If set to No (“N” or “n”) or False (“F” or “f”), the channel width does not contribute to the node’s storage. See Section <a href="OneD-Domains-1.html#Nodes-2">5.13</a> for further discussion.
</td>
<td style="text-align:left;">
Char(1)
</td>
</tr>
<tr>
<td style="text-align:right;">
5
</td>
<td style="text-align:left;">
Len_or_ANA
</td>
<td style="text-align:left;">
The length of the culvert in metres. If the length is less than zero, except for the special values below, the length of the line is used.
</td>
<td style="text-align:left;">
Float
</td>
</tr>
<tr>
<td style="text-align:right;">
6
</td>
<td style="text-align:left;">
n_nF_Cd
</td>
<td style="text-align:left;">
<p>The Manning’s n value of the culvert.</p>
If using materials to define the bed resistance from XZ tables (only for Irregular culvert, see Section <a href="OneD-Domains-1.html#RR-M-5">5.7.1.1.2</a>), n_nF_Cd should be set to one (1) as it becomes a multiplication factor of the materials’ Manning’s n values. It may be adjusted as part of the calibration process.
</td>
<td style="text-align:left;">
Float
</td>
</tr>
<tr>
<td style="text-align:right;">
7
</td>
<td style="text-align:left;">
US_Invert
</td>
<td style="text-align:left;">
<p>The upstream bed or invert elevation of the culvert in metres.</p>
If a culvert invert has a value of 99999 (after any application of node/pit DS_Invert values), the invert is interpolated by searching upstream and downstream for the nearest specified inverts, and the invert is linearly interpolated. <a href="ECFCommands-1.html#ecfInterpolateCulvertInverts">Interpolate Culvert Inverts</a> can also be used to switch this feature ON or OFF.
</td>
<td style="text-align:left;">
Float
</td>
</tr>
<tr>
<td style="text-align:right;">
8
</td>
<td style="text-align:left;">
DS_Invert
</td>
<td style="text-align:left;">
Sets the downstream invert of the culvert using the same rules as for described for the US_Invert attribute above.
</td>
<td style="text-align:left;">
Float
</td>
</tr>
<tr>
<td style="text-align:right;">
9
</td>
<td style="text-align:left;">
Form_Loss
</td>
<td style="text-align:left;">
Specifies an additional dynamic head loss coefficient that is applied when the culvert flow is not critical at the inlet. Note, this loss coefficient is not subject to adjustment when using <tcmd><a href="ECFCommands-1.html#ecfStructureLosses">Structure Losses</a> </tcmd><teq>==</teq><tblk> ADJUST</tblk>, and is ideally used to model additional energy losses such as bend losses.
</td>
<td style="text-align:left;">
Float
</td>
</tr>
<tr>
<td style="text-align:right;">
10
</td>
<td style="text-align:left;">
pBlockage
</td>
<td style="text-align:left;">
<p><b>C, R Channel Type: </b><br />
The percentage blockage (for 10%, enter 10) of the culvert. For R culverts, the culvert width is reduced by the % Blockage, while for C culverts the pipe diameter is reduced by the square root of the % Blockage. Note that when applying a % Blockage to C culverts, the invert level remains unchanged and only the soffit level is reduced by the calculated decrease in diameter.</p>
<b>I Channel Type: </b><br />
Not used.
</td>
<td style="text-align:left;">
Float
</td>
</tr>
<tr>
<td style="text-align:right;">
11
</td>
<td style="text-align:left;">
Inlet_Type
</td>
<td style="text-align:left;">
Not used.
</td>
<td style="text-align:left;">
Char(256)
</td>
</tr>
<tr>
<td style="text-align:right;">
12
</td>
<td style="text-align:left;">
Conn_1D_2D
</td>
<td style="text-align:left;">
Not used.
</td>
<td style="text-align:left;">
Char(4)
</td>
</tr>
<tr>
<td style="text-align:right;">
13
</td>
<td style="text-align:left;">
Conn_No
</td>
<td style="text-align:left;">
Not used.
</td>
<td style="text-align:left;">
Integer
</td>
</tr>
<tr>
<td style="text-align:right;">
14
</td>
<td style="text-align:left;">
Width_or_Dia
</td>
<td style="text-align:left;">
<p><b>C Channel Type: </b><br />
The pipe diameter in metres.</p>
<p><b>R Channel Type:</b><br />
The box culvert width in metres.</p>
<b>I Channel Type: </b><br />
Not used.
</td>
<td style="text-align:left;">
Float
</td>
</tr>
<tr>
<td style="text-align:right;">
15
</td>
<td style="text-align:left;">
Height_or_WF
</td>
<td style="text-align:left;">
<p><b>R Channel Type: </b><br />
The box culvert height in metres.</p>
<b>C, I, Channel Type: </b><br />
Not used.
</td>
<td style="text-align:left;">
Float
</td>
</tr>
<tr>
<td style="text-align:right;">
16
</td>
<td style="text-align:left;">
Number_of
</td>
<td style="text-align:left;">
The number of culvert barrels. If set to zero, one barrel is assumed.
</td>
<td style="text-align:left;">
Integer
</td>
</tr>
<tr>
<td style="text-align:right;">
17
</td>
<td style="text-align:left;">
HConF_or_WC
</td>
<td style="text-align:left;">
<p><b>I, R Channel Type: </b><br />
The height contraction coefficient for orifice flow at the inlet. Usually 0.6 for square edged entrances to 0.8 for rounded edges. If value exceeds 1.0 or is less than or equal to zero, it is set to 1.0.<br />
Not used for unsubmerged inlet flow conditions or outlet controlled flow regimes.</p>
<b>C Channel Type: </b><br />
Not used.
</td>
<td style="text-align:left;">
Float
</td>
</tr>
<tr>
<td style="text-align:right;">
18
</td>
<td style="text-align:left;">
WConF_or_WEx
</td>
<td style="text-align:left;">
<p>The width contraction coefficient for inlet-controlled flow. Usually 0.9 for sharp edges to 1.0 for rounded edges for R culverts. Normally set to 1.0 for C culverts. If value exceeds 1.0 or is less than or equal to zero, it is set to 1.0 for C and 0.9 for R culverts.</p>
Not used for outlet controlled flow regimes.
</td>
<td style="text-align:left;">
Float
</td>
</tr>
<tr>
<td style="text-align:right;">
19
</td>
<td style="text-align:left;">
EntryC_or_WSa
</td>
<td style="text-align:left;">
The entry loss coefficient for outlet controlled flow (recommended value of 0.5). If value exceeds 1.0, it is set to 1.0. If value is less than zero (0), it is set to zero (0). If <tcmd><a href="ECFCommands-1.html#ecfStructureLosses">Structure Losses</a> </tcmd><teq>==</teq><tblk> ADJUST</tblk> (the default) or the A flag is used (see Table <a href="OneD-Domains-1.html#tab:tab-PointObjectTypes">5.29</a>), this value is adjusted according to the approach flow velocity (see Section <a href="OneD-Domains-1.html#LossAdjustment-3">5.8.7</a>). If the culvert is discharging out of a manhole, this attribute is ignored and the entry loss used is that determined by the manhole energy losses formulation (see Section <a href="OneD-Domains-1.html#Manholes-3">5.11.4</a>). The entry loss value used in the computation can be viewed over time using the _TSL output layer (see Section <a href="Viewing-Output-1.html#TS-GIS-3">15.3.4</a>) or the QGIS TUFLOW Viewer plugin.
</td>
<td style="text-align:left;">
Float
</td>
</tr>
<tr>
<td style="text-align:right;">
20
</td>
<td style="text-align:left;">
ExitC_or_WSb
</td>
<td style="text-align:left;">
The exit loss coefficient for outlet controlled flow (recommended value of 1.0). If value exceeds 1.0, it is set to 1.0. If value is less than zero (0), it is set to zero (0). If <tcmd><a href="ECFCommands-1.html#ecfStructureLosses">Structure Losses</a> </tcmd><teq>==</teq><tblk> ADJUST</tblk> (the default) or the A flag is used (see Table <a href="OneD-Domains-1.html#tab:tab-PointObjectTypes">5.29</a>), this value is adjusted according to the departure velocity (see Section <a href="OneD-Domains-1.html#LossAdjustment-3">5.8.7</a>). If the culvert is discharging out of a manhole, this attribute is ignored and the entry loss used is that determined by the manhole energy losses formulation (see Section <a href="OneD-Domains-1.html#Manholes-3">5.11.4</a>). The entry loss value used in the computation can be viewed over time using the _TSL output layer (see Section <a href="Viewing-Output-1.html#TS-GIS-3">15.3.4</a>) or the QGIS TUFLOW Viewer plugin.
</td>
<td style="text-align:left;">
Float
</td>
</tr>
</tbody>
</table>
<table>
<caption>
<span id="tab:tab-FlowRegimes">Table 5.6: </span><strong>1D Culvert Flow Regime Flags</strong>
</caption>
<thead>
<tr>
<th style="text-align:left;font-weight: bold;color: WHITE !important;background-color: rgba(26, 189, 201, 255) !important;">
Regime
</th>
<th style="text-align:left;font-weight: bold;color: WHITE !important;background-color: rgba(26, 189, 201, 255) !important;">
Description
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
A
</td>
<td style="text-align:left;">
Unsubmerged entrance and exit. Critical flow at entrance. Upstream controlled with the flow control at the inlet.
</td>
</tr>
<tr>
<td style="text-align:left;">
B
</td>
<td style="text-align:left;">
Submerged entrance and unsubmerged exit. Orifice flow at entrance. Upstream controlled with the flow control at the inlet. For circular culverts, not available for <tcmd><a href="ECFCommands-1.html#ecfCulvertFlow">Culvert Flow</a> </tcmd><teq>==</teq><tblk> Method A</tblk>.
</td>
</tr>
<tr>
<td style="text-align:left;">
C
</td>
<td style="text-align:left;">
Unsubmerged entrance and exit. Critical flow at exit. Upstream controlled with the flow control at the culvert outlet.
</td>
</tr>
<tr>
<td style="text-align:left;">
D
</td>
<td style="text-align:left;">
Unsubmerged entrance and exit. Sub-critical flow at exit. Downstream controlled.
</td>
</tr>
<tr>
<td style="text-align:left;">
E
</td>
<td style="text-align:left;">
Submerged entrance and unsubmerged exit. Full pipe flow. Upstream controlled with the flow control at the culvert outlet.
</td>
</tr>
<tr>
<td style="text-align:left;">
F
</td>
<td style="text-align:left;">
Submerged entrance and exit. Full pipe flow. Downstream controlled.
</td>
</tr>
<tr>
<td style="text-align:left;">
G
</td>
<td style="text-align:left;">
No flow. Dry or flap-gate active.
</td>
</tr>
<tr>
<td style="text-align:left;">
H
</td>
<td style="text-align:left;">
Submerged entrance and unsubmerged exit. Adverse slope. Downstream controlled.
</td>
</tr>
<tr>
<td style="text-align:left;">
J
</td>
<td style="text-align:left;">
Unsubmerged entrance and exit. Adverse slope. Downstream controlled.
</td>
</tr>
<tr>
<td style="text-align:left;">
K
</td>
<td style="text-align:left;">
Unsubmerged entrance and submerged exit. Critical flow at entrance. Upstream controlled with flow control at the inlet. Hydraulic jump along culvert. Not available for <tcmd><a href="ECFCommands-1.html#ecfCulvertFlow">Culvert Flow</a> </tcmd><teq>==</teq><tblk> Method A</tblk>.
</td>
</tr>
<tr>
<td style="text-align:left;">
L
</td>
<td style="text-align:left;">
Submerged entrance and exit. Orifice flow at entrance. Upstream controlled with the flow control at the inlet. Hydraulic jump along culvert. Not available for <tcmd><a href="ECFCommands-1.html#ecfCulvertFlow">Culvert Flow</a> </tcmd><teq>==</teq><tblk> Method A</tblk>.
</td>
</tr>
</tbody>
</table>
<center>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:fig-image19"></span>
<img src="images/image19.png" alt="**1D Inlet Control Culvert Flow Regimes**" width="50%" />
<p class="caption">
Figure 5.4: <strong>1D Inlet Control Culvert Flow Regimes</strong>
</p>
</div>
</center>
<center>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:fig-image20"></span>
<img src="images/image20.png" alt="**1D Outlet Control Culvert Flow Regimes**" width="50%" />
<p class="caption">
Figure 5.5: <strong>1D Outlet Control Culvert Flow Regimes</strong>
</p>
</div>
</center>
<div id="Blockage-4" class="section level4 hasAnchor" number="5.8.1.1">
<h4><span class="header-section-number">5.8.1.1</span> Blockage Matrix<a href="OneD-Domains-1.html#Blockage-4" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>This feature allows for blockage of culverts to be varied based on the Average Recurrence Interval (ARI) of the flood simulation. This applies to C (circular) and R (rectangular) type culverts. For Australian users, this hydraulic structure blockage option is consistent with Project 11 of <a href="https://arr.ga.gov.au/arr-guideline/revision-projects/project-list">Australian Rainfall &amp;
Runoff</a> <span class="citation">(<a href="#ref-WeeksWitheridge2013">Weeks et al., 2013</a>)</span>.</p>
<p>Two different blockage methods are available:</p>
<ol style="list-style-type: decimal">
<li>The first method reduces the area in the culvert;<br />
</li>
<li>The second applies a modified energy loss value to account for the
blockage.</li>
</ol>
<p>Please refer to <span class="citation">Ollett &amp; Syme (<a href="#ref-OllettSyme2016">2016</a>)</span> for background information on the loss approaches.</p>
<p>Each culvert can be assigned a blockage category, which is defined in the 1d_nwk pBlockage attribute as a character field. A matrix of blockage category and percentage blockage for a range of ARIs is defined. Please see Section <a href="OneD-Domains-1.html#BlockageImplement-5">5.8.1.1.4</a> for guidance on implementation.</p>
<div id="ReducedArea-5" class="section level5 hasAnchor" number="5.8.1.1.1">
<h5><span class="header-section-number">5.8.1.1.1</span> Reduced Area Method<a href="OneD-Domains-1.html#ReducedArea-5" class="anchor-section" aria-label="Anchor link to header"></a></h5>
<p>For the reduced area method, the culvert area is reduced to match the
specified blockage in the same manner as varying the pBlockage attribute
on the 1d_nwk layer (refer to Table <a href="OneD-Domains-1.html#tab:tab-CulvertsAttributeDescriptions">5.5</a>). For example, with a blockage value of
10 the culvert area is reduced by 10%.</p>
</div>
<div id="EnergyLoss-5" class="section level5 hasAnchor" number="5.8.1.1.2">
<h5><span class="header-section-number">5.8.1.1.2</span> Energy Loss Method<a href="OneD-Domains-1.html#EnergyLoss-5" class="anchor-section" aria-label="Anchor link to header"></a></h5>
<p>For this method the area of the culvert is not modified, however, an
increased entrance energy loss is applied. The modified energy loss is
based on the specified culvert entry loss and the blockage ratio as per
equation <a href="OneD-Domains-1.html#eq:equ-ELM">(5.4)</a> <span class="citation">(<a href="#ref-Witheridge2009">Witheridge, 2009</a>)</span>:</p>
<p><span class="math display" id="eq:equ-ELM">\[\begin{equation}
C_{ELC\_ modified} = \left( \frac{1 + \sqrt{C_{ELC}}}{BR} - 1 \right)^{2}
\tag{5.4}
\end{equation}\]</span></p>
<p>Where:</p>
<ul>
<li><span class="math inline">\(C_{ELC\_ modified}\)</span> = Modified culvert entry loss value<br />
</li>
<li><span class="math inline">\(C_{ELC}\)</span> = Specified culvert entry loss value</li>
<li><span class="math inline">\(BR\)</span> = Blockage ratio (area of blocked culvert / area unblocked culvert)</li>
</ul>
<p>When BR is 1 (unblocked), the modified entry loss
coefficient becomes the specified entry loss coefficient. The modified
coefficients for a range of blockages are provided in Table <a href="OneD-Domains-1.html#tab:tab-LossCoefficient">5.7</a>.</p>
<table>
<caption>
<span id="tab:tab-LossCoefficient">Table 5.7: </span><strong>Computed Values of Modified Energy Loss Coefficient</strong>
</caption>
<thead>
<tr>
<th style="text-align:left;font-weight: bold;color: WHITE !important;background-color: rgba(26, 189, 201, 255) !important;">
</th>
<th style="text-align:left;font-weight: bold;color: WHITE !important;background-color: rgba(26, 189, 201, 255) !important;">
</th>
<th style="text-align:left;font-weight: bold;color: WHITE !important;background-color: rgba(26, 189, 201, 255) !important;">
</th>
<th style="text-align:left;font-weight: bold;color: WHITE !important;background-color: rgba(26, 189, 201, 255) !important;">
C<sub>ELC</sub>
</th>
<th style="text-align:left;font-weight: bold;color: WHITE !important;background-color: rgba(26, 189, 201, 255) !important;">
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;font-weight: bold;color: WHITE !important;background-color: rgba(26, 189, 201, 255) !important;width: 10em; max-width: 10em; vertical-align:top;">
</td>
<td style="text-align:left;font-weight: bold;color: WHITE !important;background-color: rgba(26, 189, 201, 255) !important;width: 10em; max-width: 10em; vertical-align:top;">
</td>
<td style="text-align:left;font-weight: bold;color: WHITE !important;background-color: rgba(26, 189, 201, 255) !important;width: 10em; max-width: 10em; vertical-align:top;">
<b>0.3</b>
</td>
<td style="text-align:left;font-weight: bold;color: WHITE !important;background-color: rgba(26, 189, 201, 255) !important;width: 10em; max-width: 10em; vertical-align:top;">
<b>0.5</b>
</td>
<td style="text-align:left;font-weight: bold;color: WHITE !important;background-color: rgba(26, 189, 201, 255) !important;width: 10em; max-width: 10em; vertical-align:top;">
<b>0.7</b>
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;color: WHITE !important;background-color: rgba(26, 189, 201, 255) !important;width: 10em; max-width: 10em; vertical-align:top;">
<b>Specified % Blockage</b>
</td>
<td style="text-align:left;font-weight: bold;color: WHITE !important;background-color: rgba(26, 189, 201, 255) !important;width: 10em; max-width: 10em; vertical-align:top;">
BR
</td>
<td style="text-align:left;font-weight: bold;color: WHITE !important;background-color: rgba(26, 189, 201, 255) !important;width: 10em; max-width: 10em; vertical-align:top;">
</td>
<td style="text-align:left;font-weight: bold;color: WHITE !important;background-color: rgba(26, 189, 201, 255) !important;width: 10em; max-width: 10em; vertical-align:top;">
<b>C<sub>ELC_modified</sub></b>
</td>
<td style="text-align:left;font-weight: bold;color: WHITE !important;background-color: rgba(26, 189, 201, 255) !important;width: 10em; max-width: 10em; vertical-align:top;">
</td>
</tr>
<tr>
<td style="text-align:left;width: 10em; max-width: 10em; vertical-align:top;">
0
</td>
<td style="text-align:left;width: 10em; max-width: 10em; vertical-align:top;">
1
</td>
<td style="text-align:left;width: 10em; max-width: 10em; vertical-align:top;">
0.3
</td>
<td style="text-align:left;width: 10em; max-width: 10em; vertical-align:top;">
0.5
</td>
<td style="text-align:left;width: 10em; max-width: 10em; vertical-align:top;">
0.7
</td>
</tr>
<tr>
<td style="text-align:left;width: 10em; max-width: 10em; vertical-align:top;">
10
</td>
<td style="text-align:left;width: 10em; max-width: 10em; vertical-align:top;">
0.9
</td>
<td style="text-align:left;width: 10em; max-width: 10em; vertical-align:top;">
0.5
</td>
<td style="text-align:left;width: 10em; max-width: 10em; vertical-align:top;">
0.8
</td>
<td style="text-align:left;width: 10em; max-width: 10em; vertical-align:top;">
1.1 
</td>
</tr>
<tr>
<td style="text-align:left;width: 10em; max-width: 10em; vertical-align:top;">
25
</td>
<td style="text-align:left;width: 10em; max-width: 10em; vertical-align:top;">
0.75
</td>
<td style="text-align:left;width: 10em; max-width: 10em; vertical-align:top;">
1.1 
</td>
<td style="text-align:left;width: 10em; max-width: 10em; vertical-align:top;">
1.6
</td>
<td style="text-align:left;width: 10em; max-width: 10em; vertical-align:top;">
2.1
</td>
</tr>
<tr>
<td style="text-align:left;width: 10em; max-width: 10em; vertical-align:top;">
50
</td>
<td style="text-align:left;width: 10em; max-width: 10em; vertical-align:top;">
0.5
</td>
<td style="text-align:left;width: 10em; max-width: 10em; vertical-align:top;">
4.4 
</td>
<td style="text-align:left;width: 10em; max-width: 10em; vertical-align:top;">
5.8
</td>
<td style="text-align:left;width: 10em; max-width: 10em; vertical-align:top;">
7.1
</td>
</tr>
<tr>
<td style="text-align:left;width: 10em; max-width: 10em; vertical-align:top;">
75
</td>
<td style="text-align:left;width: 10em; max-width: 10em; vertical-align:top;">
0.25
</td>
<td style="text-align:left;width: 10em; max-width: 10em; vertical-align:top;">
27
</td>
<td style="text-align:left;width: 10em; max-width: 10em; vertical-align:top;">
34
</td>
<td style="text-align:left;width: 10em; max-width: 10em; vertical-align:top;">
40
</td>
</tr>
<tr>
<td style="text-align:left;width: 10em; max-width: 10em; vertical-align:top;">
90
</td>
<td style="text-align:left;width: 10em; max-width: 10em; vertical-align:top;">
0.1
</td>
<td style="text-align:left;width: 10em; max-width: 10em; vertical-align:top;">
210
</td>
<td style="text-align:left;width: 10em; max-width: 10em; vertical-align:top;">
260
</td>
<td style="text-align:left;width: 10em; max-width: 10em; vertical-align:top;">
300
</td>
</tr>
<tr>
<td style="text-align:left;width: 10em; max-width: 10em; vertical-align:top;">
95
</td>
<td style="text-align:left;width: 10em; max-width: 10em; vertical-align:top;">
0.05
</td>
<td style="text-align:left;width: 10em; max-width: 10em; vertical-align:top;">
900
</td>
<td style="text-align:left;width: 10em; max-width: 10em; vertical-align:top;">
1100
</td>
<td style="text-align:left;width: 10em; max-width: 10em; vertical-align:top;">
1280
</td>
</tr>
<tr>
<td style="text-align:left;width: 10em; max-width: 10em; vertical-align:top;">
100
</td>
<td style="text-align:left;width: 10em; max-width: 10em; vertical-align:top;">
0
</td>
<td style="text-align:left;width: 10em; max-width: 10em; vertical-align:top;">
∞
</td>
<td style="text-align:left;width: 10em; max-width: 10em; vertical-align:top;">
∞
</td>
<td style="text-align:left;width: 10em; max-width: 10em; vertical-align:top;">
∞
</td>
</tr>
</tbody>
</table>
<p>Whilst loss values of greater than 1.0 may appear counter-intuitive, it
is appropriate in this situation. In conduit hydraulics there are two
types of loss coefficients that are used to represent constrictions,
one type being applied to the velocity at the constriction itself (these
are always &lt;=1), and the other type which are applied to the
full-barrel velocity downstream of the blockage where the loss
coefficient may approach infinity. The second type is convenient as the
velocity downstream of the blockage is readily available and requires no
manipulation of culvert geometry, and follows in principle the same
application of valve coefficients. The equation above simply gives the
conversion between these two types of loss coefficients.</p>
<p>Note: The minimum blockage ratio is set to 0.001 or 0.1%. This is required to avoid a divide by zero error in the calculations. <strong>This loss method only applies when the culvert is operating under outlet control.</strong> For an inlet control flow regime no energy loss is applied, the reduced area method is used instead.</p>
</div>
<div id="BlockageCmds-5" class="section level5 hasAnchor" number="5.8.1.1.3">
<h5><span class="header-section-number">5.8.1.1.3</span> Blockage Matrix Commands<a href="OneD-Domains-1.html#BlockageCmds-5" class="anchor-section" aria-label="Anchor link to header"></a></h5>
<p>The commands available for the Blockage Matrix method are listed in Table <a href="OneD-Domains-1.html#tab:tab-MatrixMethod">5.8</a>.</p>
<table>
<caption>
<span id="tab:tab-MatrixMethod">Table 5.8: </span><strong>Commands for the Blockage Matrix Method</strong>
</caption>
<thead>
<tr>
<th style="text-align:left;font-weight: bold;color: WHITE !important;background-color: rgba(26, 189, 201, 255) !important;">
Command
</th>
<th style="text-align:left;font-weight: bold;color: WHITE !important;background-color: rgba(26, 189, 201, 255) !important;">
Description
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
<a href="TCFCommands-1.html#tcfBlockageMatrix">Blockage Matrix</a>
</td>
<td style="text-align:left;">
Turns on or off the blockage matrix functionality outlined in this section. The default is for this feature to be off.
</td>
</tr>
<tr>
<td style="text-align:left;">
<a href="TCFCommands-1.html#tcfBlockageMatrixFile">Blockage Matrix File</a>
</td>
<td style="text-align:left;">
Specifies a blockage file containing the blockage values for the various blockage categories and ARI values.
</td>
</tr>
<tr>
<td style="text-align:left;">
<a href="TCFCommands-1.html#tcfBlockageMethod">Blockage Method</a>
</td>
<td style="text-align:left;">
Specifies whether to use RAM (Reduced Area Method) or ELM (Energy Loss Method). No default approach is applied. This command must be specified if using the blockage matrix functionality.
</td>
</tr>
<tr>
<td style="text-align:left;">
<a href="TCFCommands-1.html#tcfBlockageARI">Blockage ARI</a>
</td>
<td style="text-align:left;">
Specifies the ARI for the current simulation. This would typically be defined in an event file (.tef).
</td>
</tr>
<tr>
<td style="text-align:left;">
<a href="TCFCommands-1.html#tcfBlockageOverride">Blockage Override</a>
</td>
<td style="text-align:left;">
Sets the blockage for <b>all</b> culverts with the specified blockage category. This option is useful for running simulations under an “all clear” case.
</td>
</tr>
<tr>
<td style="text-align:left;">
<a href="TCFCommands-1.html#tcfBlockageDefault">Blockage Default</a>
</td>
<td style="text-align:left;">
Sets the blockage category for culverts that do not have a blockage type specified (including those that have a numeric pBlockage defined)
</td>
</tr>
<tr>
<td style="text-align:left;">
<a href="TCFCommands-1.html#tcfBlockagePMFARI">Blockage PMF ARI</a>
</td>
<td style="text-align:left;">
If PMF has been specified in the ARI column of the blockage matrix, this command sets an ARI to be used for the PMF. This allows for interpolation of blockages for ARI values up to the PMF.
</td>
</tr>
</tbody>
</table>
</div>
<div id="BlockageImplement-5" class="section level5 hasAnchor" number="5.8.1.1.4">
<h5><span class="header-section-number">5.8.1.1.4</span> Implementation<a href="OneD-Domains-1.html#BlockageImplement-5" class="anchor-section" aria-label="Anchor link to header"></a></h5>
<p>To make use of this feature the pBlockage attribute of the 1d_nwk GIS layer needs to be changed from a float (numeric) type to a character field, with maximum width of 50. This has not been made the default field type in the empty (template) files that TUFLOW produces, for two main reasons:</p>
<ul>
<li>A character field is bigger and less efficient to read, this could slow down simulation start-up for models not using the blockage categories; and<br />
</li>
<li>A numeric field (in almost all GIS packages) defaults to 0.0, i.e. no blockage. This is not the case for a character field.</li>
</ul>
<p>Instructions on how to change the GIS layer attribute type in QGIS, ArcMap and MapInfo are provided in the TUFLOW Wiki as per the links below:</p>
<ul>
<li><a href="https://wiki.tuflow.com/QGIS_Change_Attribute_Type">QGIS</a><br />
</li>
<li><a href="https://wiki.tuflow.com/Arc_Change_Attribute_Type">ArcMap</a><br />
</li>
<li><a href="https://wiki.tuflow.com/MI_Change_Attribute_Type">MapInfo</a></li>
</ul>
<p>For each culvert the pBlockage attribute can be set to either; a numeric value (in which case this is used as per the standard simulation), a blockage category name (as a character string e.g. “A”), or left blank (in which case the <a href="TCFCommands-1.html#tcfBlockageDefault">Blockage Default</a> would apply). In the example below, the pBlockage attribute has been set to a category named “B”.</p>
<center>
<img src="images/image55.png"
style="width:2.30412in;height:4.23958in" />
</center>
<p>Each blockage category must be defined in the Blockage Matrix File. The
first column should contain the Average Recurrence Interval (ARI) for a
range of events, any additional columns contain percentage blockages for
each of the ARIs. An example blockage matrix file is provided in Table <a href="OneD-Domains-1.html#tab:tab-Blockage">5.9</a>
containing 5 different blockage categories (A, B, C, D, E). For blockage
category A the culvert is unblocked for all ARIs, for category E the
culvert is fully blocked for all ARIs. For the categories B, C, and D
the blockage varies by ARI.</p>
<p>If the specified ARI sits between the defined ARI values in the blockage
matrix file a linear interpolation is used. For example, in the table
below for a 50-year ARI, blockage category “C” will have a blockage of
13.75%.</p>
<table>
<caption>
<span id="tab:tab-Blockage">Table 5.9: </span><strong>Example Blockage Matrix File</strong>
</caption>
<thead>
<tr>
<th style="text-align:right;font-weight: bold;color: WHITE !important;background-color: rgba(26, 189, 201, 255) !important;">
ARI
</th>
<th style="text-align:right;font-weight: bold;color: WHITE !important;background-color: rgba(26, 189, 201, 255) !important;">
A
</th>
<th style="text-align:right;font-weight: bold;color: WHITE !important;background-color: rgba(26, 189, 201, 255) !important;">
B
</th>
<th style="text-align:right;font-weight: bold;color: WHITE !important;background-color: rgba(26, 189, 201, 255) !important;">
C
</th>
<th style="text-align:right;font-weight: bold;color: WHITE !important;background-color: rgba(26, 189, 201, 255) !important;">
D
</th>
<th style="text-align:right;font-weight: bold;color: WHITE !important;background-color: rgba(26, 189, 201, 255) !important;">
E
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
10
</td>
<td style="text-align:right;">
10
</td>
<td style="text-align:right;">
10
</td>
<td style="text-align:right;">
100
</td>
</tr>
<tr>
<td style="text-align:right;">
20
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
10
</td>
<td style="text-align:right;">
10
</td>
<td style="text-align:right;">
20
</td>
<td style="text-align:right;">
100
</td>
</tr>
<tr>
<td style="text-align:right;">
100
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
10
</td>
<td style="text-align:right;">
20
</td>
<td style="text-align:right;">
50
</td>
<td style="text-align:right;">
100
</td>
</tr>
<tr>
<td style="text-align:right;">
2000
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
20
</td>
<td style="text-align:right;">
50
</td>
<td style="text-align:right;">
70
</td>
<td style="text-align:right;">
100
</td>
</tr>
<tr>
<td style="text-align:right;">
10000
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
50
</td>
<td style="text-align:right;">
70
</td>
<td style="text-align:right;">
100
</td>
<td style="text-align:right;">
100
</td>
</tr>
</tbody>
</table>
<p>The ARI values for the blockage matrix file should be in ascending
order. “PMF” can be defined in the ARI column, if this is done, an ARI
must be assigned to the PMF using the command <a href="TCFCommands-1.html#tcfBlockagePMFARI">Blockage PMF
ARI</a>.</p>
<p><strong><u>Example TUFLOW commands</u></strong></p>
<p><strong><u>.tcf file commands</u></strong></p>
<p><tcmd>Blockage Matrix</tcmd><teq> ==</teq><tblk> On</tblk><br />
<tcmd>Blockage Matrix File</tcmd><teq> ==</teq><tblk> Matrix_Blockages.csv</tblk><br />
<tcmd>Blockage Method</tcmd><teq> ==</teq><tblk> RAM</tblk><br />
<tcmd>Blockage Default</tcmd><teq> ==</teq><tblk> C</tblk></p>
<p><strong><u>.tef file commands</u></strong></p>
<p><tcmd>Define Event</tcmd><teq> ==</teq><tblk> Q010</tblk><br />
 <tcmd>Blockage ARI</tcmd><teq> ==</teq><tblk> 10</tblk><br />
 <tcmd>BC Event Source</tcmd><teq> ==</teq><tblk> __ARI__ | Q010</tblk><br />
<tcmd>End Define</tblk><br />
<tcmd>Define Event</tcmd><teq> ==</teq><tblk> Q100</tblk><br />
 <tcmd>Blockage ARI</tcmd><teq> ==</teq><tblk> 100</tblk><br />
 <tcmd>BC Event Source</tcmd><teq> == </teq><tblk>__ARI__ | Q100</tblk><br />
<tcmd>End Define</tblk><br />
<tcmd>Define Event</tcmd><teq> == </teq><tblk>QPMF</tblk><br />
 <tcmd>Blockage ARI</tcmd><teq> == </teq><tblk>100000</tblk><br />
 <tcmd>BC Event Source</tcmd><teq> == </teq><tblk>__ARI__ | PMF</tblk><br />
<tcmd>End Define</tcmd></p>
<p>A working example of a blockage matrix model is provided in the example models on the <a href="https://wiki.tuflow.com/TUFLOW_Example_Models">TUFLOW Wiki</a>.</p>
</div>
</div>
<div id="id_-4" class="section level4 hasAnchor" number="5.8.1.2">
<h4><span class="header-section-number">5.8.1.2</span> Limitations<a href="OneD-Domains-1.html#id_-4" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>For the energy loss method, the loss value only applies to the culverts when flowing in outlet control flow regimes. When the flow conditions are inlet controlled TUFLOW reverts to using the reduced area method. This is required, as there is no guidance how to adjust the contraction coefficients or otherwise as used by the inlet controlled culvert equations.</p>
</div>
</div>
<div id="Bridges-3" class="section level3 hasAnchor" number="5.8.2">
<h3><span class="header-section-number">5.8.2</span> Bridges<a href="OneD-Domains-1.html#Bridges-3" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div id="BridgeIntro-4" class="section level4 hasAnchor" number="5.8.2.1">
<h4><span class="header-section-number">5.8.2.1</span> Bridges Overview<a href="OneD-Domains-1.html#BridgeIntro-4" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Bridge channels do not require data for length, Manning’s n, divergence
or bed slope (they are effectively zero-length channels, although the
length is used for automatically determining nodal storages – see
Section <a href="OneD-Domains-1.html#AutoStorageWidths-4">5.13.1.1</a>). The bridge opening cross-section is described in
the same manner to a normal channel.</p>
<p>Two types of bridge channels can be specified:</p>
<ul>
<li>“B” bridges require the user to specify an energy loss versus elevation table, usually derived from loss coefficients in the literature such as “Hydraulics of Bridge Waterways” <span class="citation">(<a href="#ref-Bradley1978">Bradley, 1978</a>)</span> or “Guide to Bridge Technology Part 8, Hydraulic Design of Waterway Structures” <span class="citation">(<a href="#ref-Austroads2018">Austroads, 2018</a>)</span>. The energy loss table can be generated automatically via the 1d_nwk Form_Loss attribute if the energy loss coefficient is constant up to the underside of the bridge deck.<br />
</li>
<li>“BB” bridges automatically calculate the form (energy) losses associated with the approach and departure flows as the water constricts and expands. It also automatically applies bridge deck losses associated with pressure flow. The only user specified loss coefficients required for BB bridges are the pier losses and the deck losses once fully submerged. If the pier loss coefficient is constant through the vertical the coefficient can simply be specified via the 1d_nwk Form_Loss attribute as described further below.</li>
</ul>
<p>For B bridges, two bridge flow approaches are offered using <a href="ECFCommands-1.html#ecfBridgeFlow">Bridge
Flow</a>. Method B is an enhancement on Method A by
providing better stability at shallow depths or when wetting and drying.
There are also some subtle differences between the methods in how the
loss coefficients are applied at the bridge deck. This is discussed
further below. Method B is the approach recommended with Method A
provided for legacy models. For <tcmd><a href="ECFCommands-1.html#ecfBridgeFlow">Bridge Flow</a> </tcmd><teq>==</teq><tblk> Method A</tblk>, the underside of the
bridge deck (the obvert or soffit) is taken as the elevation when the
flow area stops increasing, or the highest elevation in the bridge’s
cross-section data, whichever occurs first. For <tcmd><a href="ECFCommands-1.html#ecfBridgeFlow">Bridge
Flow</a></tcmd><teq> == </teq><tblk>Method B</tblk>, the highest (last) elevation in the
cross-section table is always assumed to be the underside of the bridge
deck.</p>
</div>
<div id="XSLoss-4" class="section level4 hasAnchor" number="5.8.2.2">
<h4><span class="header-section-number">5.8.2.2</span> Bridge Cross-Section and Loss Tables<a href="OneD-Domains-1.html#XSLoss-4" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>The cross-sectional shape of the bridge is specified in the same manner
as for open channels using a 1d_xs GIS layer (refer to Section
<a href="OneD-Domains-1.html#XS-2">5.7</a> and Table <a href="OneD-Domains-1.html#tab:tab-CrossAttributeDescriptions">5.4</a>) and the command <a href="ECFCommands-1.html#ecfReadGISTableLinks">Read GIS Table
Links</a>. The line is digitised midway
across the 1d_nwk channel line (do not specify as an end cross-section,
i.e. a cross-section line snapped to an end of the bridge channel). As
per the open channel, the cross-section data can be in offset-elevation
(XZ) or height-width (HW) format.</p>
<p>Bridge structures are modelled using a height varying form or energy
loss coefficient. A table (referred to as a Bridge Geometry “BG” or Loss
Coefficient “LC” Table) of backwater or form loss coefficient versus
height is required. The interpretation of loss coefficients provided by
the user differs depending on whether the bridge channel is of a B or BB
type as discussed in the following sections.</p>
<p>BG Tables can be entered using .csv files via a 1d_bg GIS layer (see
Table <a href="OneD-Domains-1.html#tab:tab-LinkAttributeDescriptions">5.11</a>) using the command <a href="ECFCommands-1.html#ecfReadGISTableLinks">Read GIS Table
Links</a>. A line is digitised crossing
the 1d_nwk channel in the same manner as for the 1d_xs GIS layer used to
define the cross-sectional shape of the bridge. The line does not have
to be identical to the cross-section line.</p>
<p>Where the loss coefficient is constant through to the bridge deck (e.g.
no losses such as a clear spanning bridge, or pier losses only – see BB
bridges), the BG table can automatically be created by specifying a
positive non-zero value for the Form_Loss attribute in the 1d_nwk layer
(see Table <a href="OneD-Domains-1.html#tab:tab-BridgesAttributeDescriptions">5.10</a>). How the Form_Loss attribute is interpreted differs between B and
BB bridge channels as discussed in the following sections.</p>
<p>Any wetted perimeter or Manning’s n inputs in the hydraulic properties
table are ignored. If the flow is expected to overtop the bridge, a
parallel weir channel should be included to represent the flow over the
bridge deck, or a BW or BBW channel can be specified (see
Section <a href="OneD-Domains-1.html#Auto-Weir-4">5.8.4.5</a>).</p>
</div>
<div id="B-Bridge-4" class="section level4 hasAnchor" number="5.8.2.3">
<h4><span class="header-section-number">5.8.2.3</span> B Bridge Losses Approach<a href="OneD-Domains-1.html#B-Bridge-4" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>The coefficients for B bridges are usually obtained from publications
such as “Hydraulics of Bridge Waterways” <span class="citation">(<a href="#ref-Bradley1978">Bradley, 1978</a>)</span> or “Guide to
Bridge Technology Part 8, Hydraulic Design of Waterway Structures”
<span class="citation">(<a href="#ref-Austroads2018">Austroads, 2018</a>)</span>, through the following procedure.</p>
<ul>
<li>The bridge opening ratio (stream constriction ratio), defined in
Equations 1 and 2 of “Hydraulics of Bridge Waterways” <span class="citation">(<a href="#ref-Bradley1978">Bradley, 1978</a>)</span>, is estimated
for various water levels from the local geometry. Alternatively, the
bridge opening ratio is estimated with the help of a trial modelling
run in which the stream crossed by the bridge is represented by a
number of parallel channels, providing a more quantitative basis for
estimating the proportion of flow obstructed by the bridge abutments.<br />
</li>
<li>For each level this enables the value of K<sub>b</sub> to be obtained
from Figure 6 of “Hydraulics of Bridge Waterways” <span class="citation">(<a href="#ref-Bradley1978">Bradley, 1978</a>)</span>. Additional factors,
for piers (K<sub>p</sub> from Figure 7), eccentricity (K<sub>e</sub>
from Figure 8) and for skew (K<sub>s</sub> from Figure 10) make up the
primary contributors to K<sub>b</sub>.<br />
</li>
<li>The backwater coefficient K<sub>b</sub> input into the LC table is the
sum of the relevant coefficients at each elevation. The velocity
through the bridge structure used for determining the head loss is
based on the flow area calculated using the water level at the
downstream node.</li>
</ul>
<p>Backwater coefficients derived in this manner have usually taken into
account the effects of approach and departure velocities (via
consideration of the upstream and downstream cross-section areas), in
which case the losses for the B channel should be fixed. This is the
default setting or can be manually specified using the “F” flag (i.e. a
“BF” channel) in the 1d_nwk Type attribute, or use <tcmd><a href="ECFCommands-1.html#ecfStructureLosses">Structure
Losses</a></tcmd><teq> == </teq><tblk>ADJUST EXCEPT BG TABLES</tblk> (the default).</p>
<p>For <tcmd><a href="ECFCommands-1.html#ecfBridgeFlow">Bridge Flow</a></tcmd><teq> ==</teq><tblk> Method A</tblk>, once the downstream water level is within 10% of the flow
depth under the bridge, a bridge deck submergence factor is phased in by
applying a correction for submerged decking using a minimum value of
1.5625 (if the specified loss coefficient is greater than 1.5625, this
value is applied). <tcmd><a href="ECFCommands-1.html#ecfBridgeFlow">Bridge Flow</a></tcmd><teq> == </teq><tblk>Method B</tblk> does not use the 10% of the flow depth
phasing in nor applies a minimum loss coefficient once the bridge deck
is submerged (i.e. it applies the value as per the specified loss
coefficients (BG) table). Method B relies on the user to provide
appropriate values at all flow heights.</p>
<p>The value of 1.5625 is derived from the following equation <a href="OneD-Domains-1.html#eq:equ-AustRoads">(5.5)</a> presented in
Waterway Design - A Guide to the Hydraulic Design of Bridges, Culverts
and Floodways <span class="citation">(<a href="#ref-Austroads1994">Austroads, 1994</a>)</span>:</p>
<p><span class="math display" id="eq:equ-AustRoads">\[\begin{equation}
Q = {C_d}{b_N}Z\sqrt{2gdH}
\tag{5.5}
\end{equation}\]</span></p>
<p>Where:</p>
<ul>
<li><em>Q =</em> Total discharge (<em>m<sup>3</sup>/s</em>)<br />
</li>
<li><em>C<sub>d</sub> =</em> Coefficient of discharge (0.8 for a surcharged bridge
deck)<br />
</li>
<li><em>b<sub>N</sub> =</em> Net width of waterway (<em>m</em>)<br />
</li>
<li><em>Z =</em> Vertical distance under bridge to mean river bed (<em>m</em>)<br />
</li>
<li><em>dH =</em> Upstream energy (or water surface) level minus downstream water
surface level (<em>m</em>)</li>
</ul>
<p>Assuming <span class="math inline">\({V} = \frac{Q}{b_{N}Z}\)</span> and
<span class="math inline">\(dh = K\frac{V^2}{2g}\)</span>,
the equation rearranges to give
<span class="math inline">\(K = \frac{1}{C_d^2}\)</span>, where a
<em>C<sub>d</sub></em> value of 0.8 equates to a K energy loss value of 1.5625.</p>
</div>
<div id="BB-Bridge-4" class="section level4 hasAnchor" number="5.8.2.4">
<h4><span class="header-section-number">5.8.2.4</span> BB Bridge Losses Approach<a href="OneD-Domains-1.html#BB-Bridge-4" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>BB bridges break down the energy losses into the following categories:</p>
<ul>
<li>Bridge pier losses;</li>
<li>Losses due to flow contraction and expansion;</li>
<li>Bridge deck losses when the bridge is submerged but not under pressure flow condition; and</li>
<li>If under pressure flow, the pressure flow equation is applied as described further below.</li>
</ul>
<p>BB bridges differ from B bridges in that the losses due to flow contraction and expansion, and
the occurrence of pressure flow are handled automatically. The only loss coefficient required to be specified is that due to piers (via the Form_Loss attribute value or a LC table). Other loss parameters can be either set based on the default parameters, or can be specified by users. The parameters used by the BB bridge routine are:</p>
<ul>
<li>Cd = the Bridge Deck surcharge coefficient (Default = 0.8).<br />
</li>
<li>DLC = the Deck loss coefficient (Default = 0.5) and only applies when
no LC table exists and an automatically generated table using the
1d_nwk Form_Loss attribute is created.<br />
</li>
<li>ELC = the unadjusted entry loss coefficient (Default = 0.5).<br />
</li>
<li>XLC = the unadjusted exit loss coefficient (Default = 1.0).</li>
</ul>
<p>The .ecf command “<tcmd><a href="ECFCommands-1.html#ecfBridgeZeroCoefficients">Bridge Zero Coefficients</a>
</tcmd><teq>==</teq><tblk> &lt;CD&gt;, &lt;DLC&gt;, &lt;ELC&gt;, &lt;XLC&gt;</tblk>” can be used to change the above
default values to the user’s own default values.</p>
<p>The above values can also be changed for an individual bridge using the following
1d_nwk attributes. If the attribute value is zero then the default value
or the value specified by <a href="ECFCommands-1.html#ecfBridgeZeroCoefficients">Bridge Zero
Coefficients</a> is used.</p>
<ul>
<li>CD = HConF_or_WC<br />
</li>
<li>DLC = WConF_or_WEx<br />
</li>
<li>ELC = EntryC_or_WSa<br />
</li>
<li>XLC = ExitC_or_WSb</li>
</ul>
<p>The entrance and exit losses are adjusted every timestep according to
the approach and departure velocities based on the equations below from Section <a href="OneD-Domains-1.html#LossAdjustment-3">5.8.7</a>. This approach yields similar
results to the approach for determining contraction and expansion losses
in publications such as “Hydraulics of Bridge Waterways” <span class="citation">(<a href="#ref-Bradley1978">Bradley, 1978</a>)</span>
or “Guide to Bridge Technology Part 8, Hydraulic Design of Waterway
Structures” <span class="citation">(<a href="#ref-Austroads2018">Austroads, 2018</a>)</span>.</p>
<p><span class="math display" id="eq:equ-ELC">\[\begin{equation}
C_{ELC\text{_}adjusted} = C_{ELC}\left\lbrack 1 - \frac{V_{approach}}{V_{structure}} \right\rbrack
\tag{5.6}
\end{equation}\]</span></p>
<p><span class="math display" id="eq:equ-XLC">\[\begin{equation}
C_{XLC\text{_}adjusted} = C_{XLC}\left\lbrack 1 - \frac{V_{departure}}{V_{structure}} \right\rbrack^{2}
\tag{5.7}
\end{equation}\]</span></p>
<p>Where:</p>
<ul>
<li><em>V =</em> Velocity (<em>m/s</em>)<br />
</li>
<li><em>C =</em> Energy Loss Coefficient</li>
</ul>
<p>Pressure flow is handled by transitioning from the equation described in
the previous section (to derive the K value of 1.5625 from a coefficient
of discharge value of 0.8) to a fully submerged situation where a deck
energy loss is applied. The flux is calculated based on both the fully submerged situation and the pressure flow situation, and the lesser of the two fluxes is applied. The 1d_nwk HConF_or_WC attribute can be used to
vary Cd (default value is 0.8) and the WConF_or_WEx attribute to set the
submerged deck loss coefficient. When pressure flow results the “P” flag
will appear in the .eof file and _TSF layer.</p>
<p>Optionally, LC tables can be specified for BB bridges. If a LC table exists, the Deck loss coefficient (DLC) will be ignored, while the other 3 parameters (CD, ELC and XLC) are not affected. The LC tables for BB bridges should therefore only be the losses due to piers and bridge decks. The LC table should not include any losses for contraction, expansion and pressure flow. Note the Form_Loss value is added to the LC table loss values.</p>
<p>If no LC table exists for the BB bridge, and the 1d_nwk Form_Loss
attribute is greater than 0.0001, a LC table is automatically generated
using Form_Loss for the pier losses and the WConF_or_WEx for the Deck
Loss coefficient (DLC).</p>
<p>Other notes are:</p>
<ul>
<li>BB bridges are only available if <tcmd><a href="ECFCommands-1.html#ecfStructureRoutines">Structure Routines</a> </tcmd><teq>==</teq><tblk> 2013</tblk> (the default).<br />
</li>
<li>The unadjusted entry and exist losses (ELS and XLC) cannot be below 0
or greater than 1, and will be automatically limited to these values.<br />
</li>
<li>_TSF and _TSL layers contain the following flags/values for BB
bridges:
<ul>
<li>For normal flow (“ ” or “D” if drowned out): fixed / adjusted
components<br />
</li>
<li>For Pressure (“P”) flow: Deck surcharge Coefficient / 0.0<br />
</li>
<li>Other flags:
<ul>
<li>“U” for upstream controlled flow – only occurs when downstream
water level is below the bridge bed level.<br />
</li>
<li>“Z” for zero or nearly zero flow.</li>
</ul></li>
</ul></li>
</ul>
<table>
<caption>
<span id="tab:tab-BridgesAttributeDescriptions">Table 5.10: </span><strong>Bridges: 1D Model Network (1d_nwk) Attribute Descriptions</strong>
</caption>
<thead>
<tr>
<th style="text-align:right;font-weight: bold;color: WHITE !important;background-color: rgba(26, 189, 201, 255) !important;">
No. 
</th>
<th style="text-align:left;font-weight: bold;color: WHITE !important;background-color: rgba(26, 189, 201, 255) !important;">
Default GIS Attribute Name
</th>
<th style="text-align:left;font-weight: bold;color: WHITE !important;background-color: rgba(26, 189, 201, 255) !important;">
Description
</th>
<th style="text-align:left;font-weight: bold;color: WHITE !important;background-color: rgba(26, 189, 201, 255) !important;">
Type
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right;">
1
</td>
<td style="text-align:left;">
ID
</td>
<td style="text-align:left;">
Unique identifier up to 12 characters in length. It may contain any character except for quotes and commas, and cannot be blank. As a general rule, spaces and special characters (e.g. “\”) should be avoided, although they are accepted. The same ID can be used for a channel and a node, but no two nodes and no two channels can have the same ID.
</td>
<td style="text-align:left;">
Char(12)
</td>
</tr>
<tr>
<td style="text-align:right;">
2
</td>
<td style="text-align:left;">
Type
</td>
<td style="text-align:left;">
“B” or “BB” as specified in Table <a href="OneD-Domains-1.html#tab:tab-LineTypes">5.1</a>.
</td>
<td style="text-align:left;">
Char(4)
</td>
</tr>
<tr>
<td style="text-align:right;">
3
</td>
<td style="text-align:left;">
Ignore
</td>
<td style="text-align:left;">
If a “T”, “t”, “Y” or “y” is specified, the object will be ignored (T for True and Y for Yes). Any other entry, including a blank field, will treat the object as active.
</td>
<td style="text-align:left;">
Char(1)
</td>
</tr>
<tr>
<td style="text-align:right;">
4
</td>
<td style="text-align:left;">
UCS<br />
(Use Channel Storage at nodes).
</td>
<td style="text-align:left;">
If left blank or set to Yes (“Y” or “y”) or True (“T” or “t”), the storage based on the width of the channel over half the channel length is assigned to both of the two nodes connected to the channel. If set to No (“N” or “n”) or False (“F” or “f”), the channel width does not contribute to the node’s storage. See Section <a href="OneD-Domains-1.html#Nodes-2">5.13</a> for further discussion.
</td>
<td style="text-align:left;">
Char(1)
</td>
</tr>
<tr>
<td style="text-align:right;">
5
</td>
<td style="text-align:left;">
Len_or_ANA
</td>
<td style="text-align:left;">
Only used in determining nodal storages if the UCS attribute is set to “Y” or “T”. Not used in conveyance calculations.
</td>
<td style="text-align:left;">
Float
</td>
</tr>
<tr>
<td style="text-align:right;">
6
</td>
<td style="text-align:left;">
n_nF_Cd
</td>
<td style="text-align:left;">
Not used.
</td>
<td style="text-align:left;">
Float
</td>
</tr>
<tr>
<td style="text-align:right;">
7
</td>
<td style="text-align:left;">
US_Invert
</td>
<td style="text-align:left;">
Sets the upstream and downstream inverts. Note that the invert is taken as the maximum of the US_Invert and the DS_Invert attributes. Use -99999 to use the bed of the cross-section as the invert.
</td>
<td style="text-align:left;">
Float
</td>
</tr>
<tr>
<td style="text-align:right;">
8
</td>
<td style="text-align:left;">
DS_Invert
</td>
<td style="text-align:left;">
Sets the downstream invert of the channel using the same rules as for described for the US_Invert attribute above.
</td>
<td style="text-align:left;">
Float
</td>
</tr>
<tr>
<td style="text-align:right;">
9
</td>
<td style="text-align:left;">
Form_Loss
</td>
<td style="text-align:left;">
<p>If a LC table exists, for BB bridges adds the value specified to the loss coefficients in the LC table. Not added to LC tables for B bridges.</p>
<p>If no LC table exists, and the value is greater than zero, TUFLOW automatically generates a LC table of constant loss coefficient up until the bridge deck (i.e. the top of the cross-section). The interpretation of the LC table generated from the Form_Loss value differs depending on whether a B or a BB bridge as follows:</p>
<p>For B bridges (with no LC table):</p>
<ul>
<li>The Form_Loss (LC value) is not subject to adjustment when using <tcmd>Structure Losses</tcmd><teq> == </teq><tblk>ADJUST</tblk>.</li>
<li>Above the underside of the bridge deck (the top of the cross-section) a value of 1.5625 is used, with the 1.5625 less the Form_Loss value is subject to adjustment when using <tcmd>Structure Losses</tcmd><teq> == </teq><tblk>ADJUST</tblk>.</li>
</ul>
<p>For BB bridges (with no LC table):</p>
<ul>
<li>The Form_Loss (LC value) is only used to apply pier losses. Contraction/expansion losses and bridge deck pressure flow losses are automatically calculated.</li>
<li>Once the bridge deck is fully submerged (and no longer under pressure flow) the WConF_or_WEx attribute is used to set the additional losses due to the bridge deck.</li>
</ul>
Note: Due to the potential for a divide by zero, a zero loss value cannot be specified with no LC table. A loss value of 0 will return <a href="https://wiki.tuflow.com/TUFLOW_Message_1422">ERROR 1422</a>. A minimum loss value of 0.01 for B bridges or 0.001 for BB bridges is required by TUFLOW to ensure a divide by zero does not occur. Specifying a loss value equal to or less than these minimums (but not 0) will apply these minimum losses, i.e. to apply these minimum losses specify a value of 0.001 for either B or BB bridges.
</td>
<td style="text-align:left;">
Float
</td>
</tr>
<tr>
<td style="text-align:right;">
10
</td>
<td style="text-align:left;">
pBlockage
</td>
<td style="text-align:left;">
Not used. Reserved for future builds to fully or partially block B channels. The 1d_xs Skew attribute can be used to partially block cross-sections of these channels – see Table <a href="OneD-Domains-1.html#tab:tab-CrossAttributeDescriptions">5.4</a>.
</td>
<td style="text-align:left;">
Float
</td>
</tr>
<tr>
<td style="text-align:right;">
11
</td>
<td style="text-align:left;">
Inlet_Type
</td>
<td style="text-align:left;">
Leave blank unless using the legacy MIKE 11 1D cross-section data feature.
</td>
<td style="text-align:left;">
Char(256)
</td>
</tr>
<tr>
<td style="text-align:right;">
12
</td>
<td style="text-align:left;">
Conn_1D_2D
</td>
<td style="text-align:left;">
Leave blank unless using the legacy MIKE 11 1D cross-section data feature, or if accessing a Flood Modeller cross-section database (.pro file), enter the label in the .pro file.
</td>
<td style="text-align:left;">
Char(4)
</td>
</tr>
<tr>
<td style="text-align:right;">
13
</td>
<td style="text-align:left;">
Conn_No
</td>
<td style="text-align:left;">
Leave blank unless using the legacy MIKE 11 1D cross-section data feature.
</td>
<td style="text-align:left;">
Integer
</td>
</tr>
<tr>
<td style="text-align:right;">
14
</td>
<td style="text-align:left;">
Width_or_Dia
</td>
<td style="text-align:left;">
Not used.
</td>
<td style="text-align:left;">
Float
</td>
</tr>
<tr>
<td style="text-align:right;">
15
</td>
<td style="text-align:left;">
Height_or_WF
</td>
<td style="text-align:left;">
Not used.
</td>
<td style="text-align:left;">
Float
</td>
</tr>
<tr>
<td style="text-align:right;">
16
</td>
<td style="text-align:left;">
Number_of
</td>
<td style="text-align:left;">
Not used.
</td>
<td style="text-align:left;">
Integer
</td>
</tr>
<tr>
<td style="text-align:right;">
17
</td>
<td style="text-align:left;">
HConF_or_WC
</td>
<td style="text-align:left;">
<p>B bridges: Not used.</p>
BB bridges: Bridge deck pressure flow contraction coefficient (C<sub>d</sub>). If set to zero the default of 0.8 or that specified by <a href="ECFCommands-1.html#ecfBridgeZeroCoefficients">Bridge Zero Coefficients</a> is used.
</td>
<td style="text-align:left;">
Float
</td>
</tr>
<tr>
<td style="text-align:right;">
18
</td>
<td style="text-align:left;">
WConF_or_WEx
</td>
<td style="text-align:left;">
<p>B bridges: Not used.</p>
BB bridges: Bridge deck energy loss coefficient (DLC) for fully submerged flow. If set to zero the default of 0.5 or that specified by <a href="ECFCommands-1.html#ecfBridgeZeroCoefficients">Bridge Zero Coefficients</a> is used.
</td>
<td style="text-align:left;">
Float
</td>
</tr>
<tr>
<td style="text-align:right;">
19
</td>
<td style="text-align:left;">
EntryC_or_WSa
</td>
<td style="text-align:left;">
<p>B bridges: Not used.</p>
BB bridges: Unadjusted entrance energy loss coefficient (ELC). If set to zero the default of 0.5 or that specified by <a href="ECFCommands-1.html#ecfBridgeZeroCoefficients">Bridge Zero Coefficients</a> is used.
</td>
<td style="text-align:left;">
Float
</td>
</tr>
<tr>
<td style="text-align:right;">
20
</td>
<td style="text-align:left;">
ExitC_or_WSb
</td>
<td style="text-align:left;">
<p>B bridges: Not used.</p>
BB bridges: Unadjusted exit energy loss coefficient (XLC). If set to zero the default of 1.0 or that specified by <a href="ECFCommands-1.html#ecfBridgeZeroCoefficients">Bridge Zero Coefficients</a> is used.
</td>
<td style="text-align:left;">
Float
</td>
</tr>
</tbody>
</table>
<table>
<caption>
<span id="tab:tab-LinkAttributeDescriptions">Table 5.11: </span><strong>1D Bridge Geometry Table Link (1d_bg) Attribute Descriptions</strong>
</caption>
<thead>
<tr>
<th style="text-align:right;font-weight: bold;color: WHITE !important;background-color: rgba(26, 189, 201, 255) !important;">
No. 
</th>
<th style="text-align:left;font-weight: bold;color: WHITE !important;background-color: rgba(26, 189, 201, 255) !important;">
Default GIS Attribute Name
</th>
<th style="text-align:left;font-weight: bold;color: WHITE !important;background-color: rgba(26, 189, 201, 255) !important;">
Description
</th>
<th style="text-align:left;font-weight: bold;color: WHITE !important;background-color: rgba(26, 189, 201, 255) !important;">
Type
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right;">
1
</td>
<td style="text-align:left;">
Source
</td>
<td style="text-align:left;">
Filename (and path or relative path if needed) of the file containing the tabular data. Must be a comma or space delimited text file such as a .csv file.
</td>
<td style="text-align:left;">
Char(50)
</td>
</tr>
<tr>
<td style="text-align:right;">
2
</td>
<td style="text-align:left;">
Type
</td>
<td style="text-align:left;">
<b>“BG” or “LC”: </b> Bridge energy loss coefficients (second column) versus elevation (first column) for bridge structures.
</td>
<td style="text-align:left;">
Char(2)
</td>
</tr>
<tr>
<td style="text-align:right;">
3
</td>
<td style="text-align:left;">
Flags
</td>
<td style="text-align:left;">
No optional flags.
</td>
<td style="text-align:left;">
Char(8)
</td>
</tr>
<tr>
<td style="text-align:right;">
4
</td>
<td style="text-align:left;">
Column_1
</td>
<td style="text-align:left;">
<p>Optional. Identifies a label in the Source file that is the header for the first column of data (ie. elevation). Values are read from the first number encountered below the label until a non-number value, blank line or end of the file is encountered.</p>
If this field is left blank, the first column of data in the Source file is used.
</td>
<td style="text-align:left;">
Char(20)
</td>
</tr>
<tr>
<td style="text-align:right;">
5
</td>
<td style="text-align:left;">
Column_2
</td>
<td style="text-align:left;">
<p>Optional. Identifies a label in the Source file that is in the header for the second column of data (ie. loss coefficient).</p>
If this field is left blank, the next column of data after Column_1 is used.
</td>
<td style="text-align:left;">
Char(20)
</td>
</tr>
<tr>
<td style="text-align:right;">
6
</td>
<td style="text-align:left;">
Column_3
</td>
<td style="text-align:left;">
Not used.
</td>
<td style="text-align:left;">
Char(20)
</td>
</tr>
<tr>
<td style="text-align:right;">
7
</td>
<td style="text-align:left;">
Column_4
</td>
<td style="text-align:left;">
Not used.
</td>
<td style="text-align:left;">
Char(20)
</td>
</tr>
<tr>
<td style="text-align:right;">
8
</td>
<td style="text-align:left;">
Column_5
</td>
<td style="text-align:left;">
Not used.
</td>
<td style="text-align:left;">
Char(20)
</td>
</tr>
<tr>
<td style="text-align:right;">
9
</td>
<td style="text-align:left;">
Column_6
</td>
<td style="text-align:left;">
Not used.
</td>
<td style="text-align:left;">
Char(20)
</td>
</tr>
<tr>
<td style="text-align:right;">
10
</td>
<td style="text-align:left;">
Z_Increment
</td>
<td style="text-align:left;">
Not used.
</td>
<td style="text-align:left;">
Float
</td>
</tr>
<tr>
<td style="text-align:right;">
11
</td>
<td style="text-align:left;">
Z_Maximum
</td>
<td style="text-align:left;">
Not used.
</td>
<td style="text-align:left;">
Float
</td>
</tr>
<tr>
<td style="text-align:right;">
12
</td>
<td style="text-align:left;">
Skew<br />
(in degrees)
</td>
<td style="text-align:left;">
Not used.
</td>
<td style="text-align:left;">
Float
</td>
</tr>
</tbody>
</table>
</div>
</div>
<div id="BArch-3" class="section level3 hasAnchor" number="5.8.3">
<h3><span class="header-section-number">5.8.3</span> Arch Bridge<a href="OneD-Domains-1.html#BArch-3" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>The 2023-03 release introduced support for arch bridges as 1D channels. The approach is based on the ‘Afflux at Arch Bridges’ <span class="citation">(<a href="#ref-HRWallingford1988">HR Wallingford, 1988</a>)</span>. Arch bridges are defined in the 1d_nwk layer as a “BArch” type. The 1d_nwk attributes specific to an arch bridge are outlined below in Table <a href="OneD-Domains-1.html#tab:tab-ArchBridgesAttributeDescriptions">5.12</a>.</p>
<table>
<caption>
<span id="tab:tab-ArchBridgesAttributeDescriptions">Table 5.12: </span><strong>Arch Bridges 1D Model Network (1d_nwk) Attribute Descriptions</strong>
</caption>
<thead>
<tr>
<th style="text-align:right;font-weight: bold;color: WHITE !important;background-color: rgba(26, 189, 201, 255) !important;">
No. 
</th>
<th style="text-align:left;font-weight: bold;color: WHITE !important;background-color: rgba(26, 189, 201, 255) !important;">
Default GIS Attribute Name
</th>
<th style="text-align:left;font-weight: bold;color: WHITE !important;background-color: rgba(26, 189, 201, 255) !important;">
Description
</th>
<th style="text-align:left;font-weight: bold;color: WHITE !important;background-color: rgba(26, 189, 201, 255) !important;">
Type
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right;">
1
</td>
<td style="text-align:left;">
ID
</td>
<td style="text-align:left;">
Unique identifier up to 12 characters in length. It may contain any character except for quotes and commas, and cannot be blank. As a general rule, spaces and special characters (e.g. “\”) should be avoided, although they are accepted. The same ID can be used for a channel and a node, but no two nodes and no two channels can have the same ID.
</td>
<td style="text-align:left;">
Char(12)
</td>
</tr>
<tr>
<td style="text-align:right;">
2
</td>
<td style="text-align:left;">
Type
</td>
<td style="text-align:left;">
“BArch” as specified in Table <a href="OneD-Domains-1.html#tab:tab-LineTypes">5.1</a>.
</td>
<td style="text-align:left;">
Char(4)
</td>
</tr>
<tr>
<td style="text-align:right;">
3
</td>
<td style="text-align:left;">
Ignore
</td>
<td style="text-align:left;">
If a “T”, “t”, “Y” or “y” is specified, the object will be ignored (T for True and Y for Yes). Any other entry, including a blank field, will treat the object as active.
</td>
<td style="text-align:left;">
Char(1)
</td>
</tr>
<tr>
<td style="text-align:right;">
4
</td>
<td style="text-align:left;">
UCS<br />
(Use Channel Storage at nodes).
</td>
<td style="text-align:left;">
If left blank or set to Yes (“Y” or “y”) or True (“T” or “t”), the storage based on the width of the channel over half the channel length is assigned to both of the two nodes connected to the channel. If set to No (“N” or “n”) or False (“F” or “f”), the channel width does not contribute to the node’s storage. See Section <a href="OneD-Domains-1.html#Nodes-2">5.13</a> for further discussion.
</td>
<td style="text-align:left;">
Char(1)
</td>
</tr>
<tr>
<td style="text-align:right;">
5
</td>
<td style="text-align:left;">
Len_or_ANA
</td>
<td style="text-align:left;">
Only used in determining nodal storages if the UCS attribute is set to “Y” or “T”. Not used in conveyance calculations.
</td>
<td style="text-align:left;">
Float
</td>
</tr>
<tr>
<td style="text-align:right;">
6
</td>
<td style="text-align:left;">
n_nF_Cd
</td>
<td style="text-align:left;">
Not used.
</td>
<td style="text-align:left;">
Float
</td>
</tr>
<tr>
<td style="text-align:right;">
7
</td>
<td style="text-align:left;">
US_Invert
</td>
<td style="text-align:left;">
Sets the upstream and downstream inverts. Note that the invert is taken as the maximum of the US_Invert and the DS_Invert attributes. Use -99999 to use the bed of the cross-section as the invert.
</td>
<td style="text-align:left;">
Float
</td>
</tr>
<tr>
<td style="text-align:right;">
8
</td>
<td style="text-align:left;">
DS_Invert
</td>
<td style="text-align:left;">
Sets the downstream invert of the channel using the same rules as for described for the US_Invert attribute above.
</td>
<td style="text-align:left;">
Float
</td>
</tr>
<tr>
<td style="text-align:right;">
9
</td>
<td style="text-align:left;">
Form_Loss
</td>
<td style="text-align:left;">
Not used.
</td>
<td style="text-align:left;">
Float
</td>
</tr>
<tr>
<td style="text-align:right;">
10
</td>
<td style="text-align:left;">
pBlockage
</td>
<td style="text-align:left;">
Not used.
</td>
<td style="text-align:left;">
Float
</td>
</tr>
<tr>
<td style="text-align:right;">
11
</td>
<td style="text-align:left;">
Inlet_Type
</td>
<td style="text-align:left;">
The relative path to the arch properties file (must be a .csv file). See Section <a href="OneD-Domains-1.html#M-Channel-3">5.9.1</a>.
</td>
<td style="text-align:left;">
Char(256)
</td>
</tr>
<tr>
<td style="text-align:right;">
12
</td>
<td style="text-align:left;">
Conn_1D_2D
</td>
<td style="text-align:left;">
Not used.
</td>
<td style="text-align:left;">
Char(4)
</td>
</tr>
<tr>
<td style="text-align:right;">
13
</td>
<td style="text-align:left;">
Conn_No
</td>
<td style="text-align:left;">
Not used.
</td>
<td style="text-align:left;">
Integer
</td>
</tr>
<tr>
<td style="text-align:right;">
14
</td>
<td style="text-align:left;">
Width_or_Dia
</td>
<td style="text-align:left;">
Optional skew parameter.
</td>
<td style="text-align:left;">
Float
</td>
</tr>
<tr>
<td style="text-align:right;">
15
</td>
<td style="text-align:left;">
Height_or_WF
</td>
<td style="text-align:left;">
Optional calibration coefficient.
</td>
<td style="text-align:left;">
Float
</td>
</tr>
<tr>
<td style="text-align:right;">
16
</td>
<td style="text-align:left;">
Number_of
</td>
<td style="text-align:left;">
Not used.
</td>
<td style="text-align:left;">
Integer
</td>
</tr>
<tr>
<td style="text-align:right;">
17
</td>
<td style="text-align:left;">
HConF_or_WC
</td>
<td style="text-align:left;">
Discharge coefficient for orifice flow - use negative value to switch on.
</td>
<td style="text-align:left;">
Float
</td>
</tr>
<tr>
<td style="text-align:right;">
18
</td>
<td style="text-align:left;">
WConF_or_WEx
</td>
<td style="text-align:left;">
Not used.
</td>
<td style="text-align:left;">
Float
</td>
</tr>
<tr>
<td style="text-align:right;">
19
</td>
<td style="text-align:left;">
EntryC_or_WSa
</td>
<td style="text-align:left;">
Lower transition distance for orifice flow.
</td>
<td style="text-align:left;">
Float
</td>
</tr>
<tr>
<td style="text-align:right;">
20
</td>
<td style="text-align:left;">
ExitC_or_WSb
</td>
<td style="text-align:left;">
Upper transition distance for orifice flow.
</td>
<td style="text-align:left;">
Float
</td>
</tr>
</tbody>
</table>
<p>The .csv for the arch properties should contain the columns outlined in Table <a href="OneD-Domains-1.html#tab:tab-ArchBridgeProperties">5.13</a>.</p>
<table>
<caption>
<span id="tab:tab-ArchBridgeProperties">Table 5.13: </span><strong>Arch Bridge Properties .csv</strong>
</caption>
<thead>
<tr>
<th style="text-align:right;font-weight: bold;color: WHITE !important;background-color: rgba(26, 189, 201, 255) !important;">
Column
</th>
<th style="text-align:left;font-weight: bold;color: WHITE !important;background-color: rgba(26, 189, 201, 255) !important;">
Description
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right;">
1
</td>
<td style="text-align:left;">
Start chainage for arch opening.
</td>
</tr>
<tr>
<td style="text-align:right;">
2
</td>
<td style="text-align:left;">
End chainage for arch opening.
</td>
</tr>
<tr>
<td style="text-align:right;">
3
</td>
<td style="text-align:left;">
Springing level.
</td>
</tr>
<tr>
<td style="text-align:right;">
4
</td>
<td style="text-align:left;">
Start chainage for arch opening.
</td>
</tr>
</tbody>
</table>
<div id="BArch-Editor-4" class="section level4 hasAnchor" number="5.8.3.1">
<h4><span class="header-section-number">5.8.3.1</span> Arch Bridge Editor<a href="OneD-Domains-1.html#BArch-Editor-4" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>An arch bridge creator and editor tool has been developed for the <a href="https://wiki.tuflow.com/TUFLOW_QGIS_Plugin">QGIS TUFLOW Plugin</a>. This tool is available from the TUFLOW Plugin Version 3.7 or later. The documentation and examples for this tool can be found on the <a href="https://wiki.tuflow.com/QGIS_TUFLOW_Arch_Bridge_Editor">TUFLOW Wiki</a>.</p>
<center>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:fig-image21"></span>
<img src="images/image21.png" alt="**Arch Bridge Editor Tool**"  />
<p class="caption">
Figure 5.6: <strong>Arch Bridge Editor Tool</strong>
</p>
</div>
</center>
</div>
<div id="BArch-Min-Blc-4" class="section level4 hasAnchor" number="5.8.3.2">
<h4><span class="header-section-number">5.8.3.2</span> Arch Minimum Blockage<a href="OneD-Domains-1.html#BArch-Min-Blc-4" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>The flume experiments in the ‘Afflux at Arch Bridges’ <span class="citation">(<a href="#ref-HRWallingford1988">HR Wallingford, 1988</a>)</span> were done using medium to high bridge blockages (20%~70%), and this approach can generate extremely high velocity when the bridge blockage is close to zero percent. The 2023-03-AF release introduced a minimum blockage of 5% to stabilise the flow. This default value can be changed using the following command:</p>
<p><tcmd><a href="ECFCommands-1.html#ecfArchBridgeMinimumBlockage">Arch Bridge Minimum Blockage (%)</a></tcmd><teq> == </teq><tblk>&lt;min_pblockage&gt;</tblk></p>
</div>
</div>
<div id="Weir-3" class="section level3 hasAnchor" number="5.8.4">
<h3><span class="header-section-number">5.8.4</span> Weirs<a href="OneD-Domains-1.html#Weir-3" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div id="Weir-Intro-4" class="section level4 hasAnchor" number="5.8.4.1">
<h4><span class="header-section-number">5.8.4.1</span> Weirs Overview<a href="OneD-Domains-1.html#Weir-Intro-4" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>A range of weir types are available as listed in Table <a href="OneD-Domains-1.html#tab:tab-WeirTypes">5.14</a>. Weir channels do not
require data for length, Manning’s n, divergence or bed slope (they are
effectively zero-length channels, although the length is used for
automatically determining nodal storages – see Section <a href="OneD-Domains-1.html#AutoStorageWidths-4">5.13.1.1</a>).</p>
<p>All weirs have three flow regimes of zero flow (dry), upstream
controlled flow (unsubmerged) and downstream controlled flow
(submerged).</p>
<table>
<caption>
<span id="tab:tab-WeirTypes">Table 5.14: </span><strong>Weir Types</strong>
</caption>
<thead>
<tr>
<th style="text-align:left;font-weight: bold;color: WHITE !important;background-color: rgba(26, 189, 201, 255) !important;">
Weir Type
</th>
<th style="text-align:left;font-weight: bold;color: WHITE !important;background-color: rgba(26, 189, 201, 255) !important;">
Description
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
W
</td>
<td style="text-align:left;">
The original ESTRY weir based on the broad-crested weir formula with the Bradley submergence approach (see <tcmd><a href="ECFCommands-1.html#ecfWeirApproach">Weir Approach</a> </tcmd><teq>==</teq><tblk> METHOD A</tblk>). The weir shape is defined either as a rectangle using the 1d_nwk Width attribute or as a cross-section.
</td>
</tr>
<tr>
<td style="text-align:left;">
WB
</td>
<td style="text-align:left;">
Broad-crested weir. A rectangular section shape is assumed.
</td>
</tr>
<tr>
<td style="text-align:left;">
WC
</td>
<td style="text-align:left;">
Crump weir.
</td>
</tr>
<tr>
<td style="text-align:left;">
WD
</td>
<td style="text-align:left;">
User-defined weir.
</td>
</tr>
<tr>
<td style="text-align:left;">
WO
</td>
<td style="text-align:left;">
Ogee-crested weir.
</td>
</tr>
<tr>
<td style="text-align:left;">
WR
</td>
<td style="text-align:left;">
Rectangular weir (sharp crested).
</td>
</tr>
<tr>
<td style="text-align:left;">
WT
</td>
<td style="text-align:left;">
Trapezoidal weir or Cippoletti weir.
</td>
</tr>
<tr>
<td style="text-align:left;">
WV
</td>
<td style="text-align:left;">
V-notch weir.
</td>
</tr>
<tr>
<td style="text-align:left;">
WW
</td>
<td style="text-align:left;">
Similar to the original W weir channel, but has more options allowing the user to customise the weir sub-mergence curve and other parameters. Can be based on either a rectangular shape using the 1d_nwk Width attribute or on a cross-section.
</td>
</tr>
</tbody>
</table>
</div>
<div id="W-Weir-4" class="section level4 hasAnchor" number="5.8.4.2">
<h4><span class="header-section-number">5.8.4.2</span> Original Weirs (W)<a href="OneD-Domains-1.html#W-Weir-4" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>For a “W” type weir, a standard weir flow formula is used as per the
equation below. The weir is assumed to be broad-crested. Weirs with
different characteristics should be modelled using one of the other weir
types listed in Table <a href="OneD-Domains-1.html#tab:tab-WeirTypes">5.14</a> and discussed in Section <a href="OneD-Domains-1.html#Adv-Weir-4">5.8.4.3</a>.</p>
<p><span class="math display" id="eq:equ-Qweir">\[\begin{equation}
Q_{weir} = \ \frac{2}{3}CW\sqrt{\frac{2g}{C_{f}}}H^{\frac{3}{2}}
\tag{5.8}
\end{equation}\]</span></p>
<p><span class="math display" id="eq:equ-Vapproach">\[\begin{equation}
V_{approach} = \ \frac{2}{3}C\sqrt{\frac{2gH}{C_{f}}}
\tag{5.9}
\end{equation}\]</span></p>
<p>Where:</p>
<ul>
<li><span class="math inline">\(Q_{weir}\)</span> = Unsubmerged flow over the weir (m<sup>3</sup>/s)<br />
</li>
<li><span class="math inline">\(V_{approach}\)</span> = Velocity approaching the weir (m/s)<br />
</li>
<li><span class="math inline">\(C\)</span> = Broad-crested weir coefficient of 0.57<br />
</li>
<li><span class="math inline">\(W\)</span> = Flow width (m)<br />
</li>
<li><span class="math inline">\(C_{f}\)</span> = Weir calibration factor (default of 1.0 – refer to 1d_nwk “Height_or_WF” attribute)<br />
</li>
<li><span class="math inline">\(H\)</span> = Depth of water approaching the weir relative to the weir invert (m)</li>
</ul>
<p>The calibration factor C<sub>f</sub>, is available for modifying the
flow. For a given approach velocity the backwater (head increment) of
the weir channel is proportional to the inverse of the factor. It is
normally set to 1.0 by default and modified if required for calibration
or other adjustment. Note, this factor is not the weir coefficient,
rather a calibration factor to adjust the standard broad-crested weir
equation. The factor can be used to model other types of weirs through
adjustment of the broad-crested weir equation, although use of the other
weir types listed in Table <a href="OneD-Domains-1.html#tab:tab-WeirTypes">5.14</a> is recommended.</p>
<p><span class="citation">Huxley (<a href="#ref-Huxley2004">2004</a>)</span> contains benchmarking of unsubmerged and submerged weir flow to the literature.</p>
<p>Note that the velocity output for a weir is the approach velocity,
V<sub>approach</sub>, in the above equations, not the velocity at
critical depth (when the flow is unsubmerged).</p>
<p>For submergence of W weir channels, it is recommended that <a href="ECFCommands-1.html#ecfWeirApproach">Weir Approach</a> is set to METHOD A or METHOD C. Both METHOD A and METHOD C utilises the Bradley submergence approach (METHOD C is a slight enhancement that only affects WW weir channels). The Bradley Submergence approach <span class="citation">(<a href="#ref-Bradley1978">Bradley, 1978</a>)</span>, Figure 24, is handled by fitting the equation below to Bradley’s submergence curve reproduced in Figure <a href="OneD-Domains-1.html#fig:fig-image22">5.7</a> and applying the submergence factor to the weir equation above.</p>
<p>Once the percentage of submergence exceeds 70%, the submergence factor
applied is given by the equation below <a href="OneD-Domains-1.html#eq:equ-submergence-factor">(5.10)</a>. The Bradley curve (as digitised)
and the resulting curve from the equation below are shown alongside the
submergence curves used for other weir types. The submergence
factor transitions the flow from weir flow to zero flow as the water
level difference (<em>dH</em>) approaches zero.</p>
<p><span class="math display" id="eq:equ-submergence-factor">\[\begin{equation}
C_{sf} = \ 1 - \left( 1 - \frac{dH}{H} \right)^{20}
\tag{5.10}
\end{equation}\]</span></p>
<p><tcmd><a href="ECFCommands-1.html#ecfWeirApproach">Weir Approach</a> </tcmd><teq>==</teq><tblk> METHOD B</tblk> was introduced to provide
additional stability for 1D flow over roadways connected to 2D domains,
however, it can cause excessive head drops under drowned flow conditions
and is therefore not recommended or to be used with caution. METHOD B
only applies to the W weir.</p>
<center>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:fig-image22"></span>
<img src="images/image22.png" alt="**Bradley Weir Submergence Curve [@Bradley1978]**" width="80%" />
<p class="caption">
Figure 5.7: <strong>Bradley Weir Submergence Curve <span class="citation">(<a href="#ref-Bradley1978">Bradley, 1978</a>)</span></strong>
</p>
</div>
</center>
</div>
<div id="Adv-Weir-4" class="section level4 hasAnchor" number="5.8.4.3">
<h4><span class="header-section-number">5.8.4.3</span> Advanced Weirs (WB, WC, WD, WO, WR, WT, WV, WW)<a href="OneD-Domains-1.html#Adv-Weir-4" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>The advanced weirs, as listed in Table <a href="OneD-Domains-1.html#tab:tab-WeirTypes">5.14</a>, offer greater variety, flexibility and can be customised by the user. Most of these weirs can also be operated, see Section <a href="OneD-Domains-1.html#OperationalChannels-2">5.10</a>.</p>
<p>The weir flow is determined by the following equation.</p>
<p><span class="math display" id="eq:equ-weir-flow">\[\begin{equation}
Q = {\frac{2}{3}\ {\ C}_{f\ }C}_{sf}{\ C}_{d\ }W\ \sqrt{2g}{\ H}^{Ex}
\tag{5.11}
\end{equation}\]</span></p>
<p>Where:</p>
<ul>
<li><span class="math inline">\(Q\)</span> = Flow over the weir (m<sup>3</sup>/s)<br />
</li>
<li><span class="math inline">\(C_{d}\)</span> = Weir coefficient<br />
</li>
<li><span class="math inline">\(C_{sf}\)</span> = Weir submergence factor<br />
</li>
<li><span class="math inline">\(C_{f}\)</span> = Weir calibration factor (default of 1.0 – refer to 1d_nwk “Height_or_WF” attribute)<br />
</li>
<li><span class="math inline">\(W\)</span> = Flow width (m)<br />
</li>
<li><span class="math inline">\(H\)</span> = Upstream water surface or energy depth relative to the weir invert (m) – see note 5 below<br />
</li>
<li><span class="math inline">\(Ex\)</span> = Weir flow equation exponent</li>
</ul>
<p>Notes</p>
<ol style="list-style-type: decimal">
<li>The default values for <em>C<sub>d</sub></em> are provided in Table <a href="OneD-Domains-1.html#tab:tab-WeirFlows">5.15</a>, and
documented further below for weirs where <em>C<sub>d</sub></em> is
recalculated each timestep.<br />
</li>
<li>The approach taken for calculating the weir submergence factor
<span class="math inline">\(C_{sf}\)</span> each timestep is documented below.<br />
</li>
<li>The weir calibration factor, <em>C<sub>f</sub></em>, is by default 1.0 and
should only be changed should there be a good justification.<br />
</li>
<li>For weirs where the flow width (<em>W)</em> varies (e.g. a V-notch WV weir)
the formula for that weir takes into account the varying width.<br />
</li>
<li>Whether water surface depth or the energy level is used for <em>H</em>
depends on the <a href="ECFCommands-1.html#ecfStructureFlowLevels">Structure Flow Levels</a>
setting, which can be changed on a structure by structure case using
the E or H flag (see Table <a href="OneD-Domains-1.html#tab:tab-LineTypesOptionalFlags">5.2</a>).<br />
</li>
<li>The default values for <em>Ex</em> are provided in Table <a href="OneD-Domains-1.html#tab:tab-WeirFlows">5.15</a> .</li>
</ol>
<p>Table <a href="OneD-Domains-1.html#tab:tab-WeirFlows">5.15</a> presents the weir coefficient <span class="math inline">\(C_{d}\)</span> and weir flow exponent <span class="math inline">\(Ex\)</span> used
for each weir. Some of these values are derived from dimensional forms
of the weir equations. Values other than the default values shown in Table <a href="OneD-Domains-1.html#tab:tab-WeirFlows">5.15</a> may
be used by altering the attributes of the 1d_nwk layer. Refer to Table <a href="OneD-Domains-1.html#tab:tab-WeirsAttributeDescriptions">5.16</a> for
further information.</p>
<p>Note that <em>C<sub>d</sub></em> for WO and WV weirs is recalculated every
timestep as described in the following sections. It is possible to
override this by specifying a non-zero positive value for the
“HConF_or_WC” attribute in the 1d_nwk layer. For WD weirs the user must
specify a non-zero positive value.</p>
<table>
<caption>
<span id="tab:tab-WeirFlows">Table 5.15: </span><strong>Default Attribute Values for the Weir Equation for Different Weir Flows</strong>
</caption>
<thead>
<tr>
<th style="text-align:center;font-weight: bold;color: WHITE !important;background-color: rgba(26, 189, 201, 255) !important;">
Channel Type
</th>
<th style="text-align:center;font-weight: bold;color: WHITE !important;background-color: rgba(26, 189, 201, 255) !important;">
<p>Cd</p>
(HConF_or_WC)
</th>
<th style="text-align:center;font-weight: bold;color: WHITE !important;background-color: rgba(26, 189, 201, 255) !important;">
<p>Ex</p>
(WConF_or_WEx)
</th>
<th style="text-align:center;font-weight: bold;color: WHITE !important;background-color: rgba(26, 189, 201, 255) !important;">
<p>a</p>
(EntryC_or_WSa)
</th>
<th style="text-align:center;font-weight: bold;color: WHITE !important;background-color: rgba(26, 189, 201, 255) !important;">
<p>b</p>
(ExitC_or_WSb)
</th>
<th style="text-align:left;font-weight: bold;color: WHITE !important;background-color: rgba(26, 189, 201, 255) !important;">
<p>Default Submergence Curve</p>
(Figure <a href="OneD-Domains-1.html#fig:fig-image26">5.10</a> and Figure <a href="OneD-Domains-1.html#fig:fig-image26">5.10</a>)
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center;">
SP
</td>
<td style="text-align:center;">
0.75
</td>
<td style="text-align:center;">
1.5
</td>
<td style="text-align:center;">
6.992
</td>
<td style="text-align:center;">
0.648
</td>
<td style="text-align:left;">
Ogee / Nappe <span class="citation">(<a href="#ref-IAHRManual1994">Miller, 1994</a>; <a href="#ref-USBR1987">USBR, 1987</a>)</span>
</td>
</tr>
<tr>
<td style="text-align:center;">
WB
</td>
<td style="text-align:center;">
0.577 
</td>
<td style="text-align:center;">
1.5
</td>
<td style="text-align:center;">
8.550
</td>
<td style="text-align:center;">
0.556
</td>
<td style="text-align:left;">
Broad-crested from Abou Seida &amp; Quarashi, 1976 <span class="citation">(<a href="#ref-IAHRManual1994">Miller, 1994</a>)</span>
</td>
</tr>
<tr>
<td style="text-align:center;">
WC
</td>
<td style="text-align:center;">
0.508 
</td>
<td style="text-align:center;">
1.5
</td>
<td style="text-align:center;">
17.870
</td>
<td style="text-align:center;">
0.590
</td>
<td style="text-align:left;">
Crump H1/Hb=1.5 <span class="citation">(<a href="#ref-Bos1989">Bos, 1989</a>)</span>
</td>
</tr>
<tr>
<td style="text-align:center;">
WD
</td>
<td style="text-align:center;">
User Defined
</td>
<td style="text-align:center;">
1.5
</td>
<td style="text-align:center;">
3.000
</td>
<td style="text-align:center;">
0.500
</td>
<td style="text-align:left;">
User Defined default settings
</td>
</tr>
<tr>
<td style="text-align:center;">
WO
</td>
<td style="text-align:center;">
Recalculated every timestep
</td>
<td style="text-align:center;">
1.5
</td>
<td style="text-align:center;">
6.992
</td>
<td style="text-align:center;">
0.648
</td>
<td style="text-align:left;">
Ogee / Nappe <span class="citation">(<a href="#ref-IAHRManual1994">Miller, 1994</a>; <a href="#ref-USBR1987">USBR, 1987</a>)</span>
</td>
</tr>
<tr>
<td style="text-align:center;">
WR
</td>
<td style="text-align:center;">
0.62
</td>
<td style="text-align:center;">
1.5
</td>
<td style="text-align:center;">
2.205
</td>
<td style="text-align:center;">
0.483
</td>
<td style="text-align:left;">
Sharp Crest Thin Plate from Hagar, 1987a <span class="citation">(<a href="#ref-IAHRManual1994">Miller, 1994</a>)</span>
</td>
</tr>
<tr>
<td style="text-align:center;">
WT
</td>
<td style="text-align:center;">
0.63
</td>
<td style="text-align:center;">
1.5
</td>
<td style="text-align:center;">
2.205
</td>
<td style="text-align:center;">
0.483
</td>
<td style="text-align:left;">
Sharp Crest Thin Plate from Hagar, 1987a <span class="citation">(<a href="#ref-IAHRManual1994">Miller, 1994</a>)</span>
</td>
</tr>
<tr>
<td style="text-align:center;">
WV
</td>
<td style="text-align:center;">
Recalculated every timestep
</td>
<td style="text-align:center;">
2.5
</td>
<td style="text-align:center;">
2.205
</td>
<td style="text-align:center;">
0.483
</td>
<td style="text-align:left;">
Sharp Crest Thin Plate from Hagar, 1987a <span class="citation">(<a href="#ref-IAHRManual1994">Miller, 1994</a>)</span>
</td>
</tr>
<tr>
<td style="text-align:center;">
WW
</td>
<td style="text-align:center;">
0.542 
</td>
<td style="text-align:center;">
1.5
</td>
<td style="text-align:center;">
21.150
</td>
<td style="text-align:center;">
0.627
</td>
<td style="text-align:left;">
Bradley 1978 Broad-crested <span class="citation">(<a href="#ref-Bradley1978">Bradley, 1978</a>)</span>
</td>
</tr>
</tbody>
</table>
<div id="WO-Weir-5" class="section level5 hasAnchor" number="5.8.4.3.1">
<h5><span class="header-section-number">5.8.4.3.1</span> Ogee Crest Weir (WO)<a href="OneD-Domains-1.html#WO-Weir-5" class="anchor-section" aria-label="Anchor link to header"></a></h5>
<p>For WO (Ogee crest) weirs, the charts developed in <span class="citation">USBR (<a href="#ref-USBR1987">1987</a>)</span> are used by fitting the relationship presented and plotted on the USBR curve below (Figure <a href="OneD-Domains-1.html#fig:fig-image24">5.8</a>). The relationship falls within ±0.5% of the curve. Note that the relationship below is for US Customary Units, which is converted to metric if running the simulation in metric units. The <span class="citation">USBR (<a href="#ref-USBR1987">1987</a>)</span> method consists of two steps:</p>
<ul>
<li>The ogee crest coefficient <span class="math inline">\(C_{0}\)</span> (i.e. the discharge coefficient when the actual upstream head <span class="math inline">\(H_{e}\)</span> = design head <span class="math inline">\(H_{0}\)</span>) is set based on <span class="math inline">\(H_{0}\)</span> and the height of the weir above its sill (<span class="math inline">\(P\)</span>) as per Figure 9-23 of <span class="citation">USBR (<a href="#ref-USBR1987">1987</a>)</span>. Note that for setting the value of <span class="math inline">\(P\)</span> the absolute difference in height between the US_Invert and DS_Invert attributes is used.</li>
</ul>
<center>
<img src="images/image23.png"
style="width:3.82292in;height:2.77774in" />
</center>
<center>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:fig-image24"></span>
<img src="images/image24.png" alt="**Ogee Spillway Discharge Coefficient, based on Figure 9-23 [@USBR1987]**" width="60%" />
<p class="caption">
Figure 5.8: <strong>Ogee Spillway Discharge Coefficient, based on Figure 9-23 <span class="citation">(<a href="#ref-USBR1987">USBR, 1987</a>)</span></strong>
</p>
</div>
</center>
<ul>
<li>When the actual head (<span class="math inline">\(H_{e}\)</span>) is different from the design head (<span class="math inline">\(H_{0}\)</span>) during the simulation, the discharge coefficient differs from that shown on Figure <a href="OneD-Domains-1.html#fig:fig-image24">5.8</a>. At each simulation timestep, the discharge coefficient is adjusted based on <span class="math inline">\(H_{e}\)</span>/<span class="math inline">\(H_{0}\)</span> as per the chart below. The final discharge coefficient applied is <span class="math inline">\(C_{0}\)</span> × <span class="math inline">\(C\)</span>/<span class="math inline">\(C_{0}\)</span> in this chart.</li>
</ul>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:fig-SmallDams2"></span>
<img src="images/SmallDams2.png" alt="**Adjustment of Discharge Coefficient based on $H_{e}$/$H_{0}$, Figure 9-24 [@USBR1987]**" width="60%" />
<p class="caption">
Figure 5.9: <strong>Adjustment of Discharge Coefficient based on <span class="math inline">\(H_{e}\)</span>/<span class="math inline">\(H_{0}\)</span>, Figure 9-24 <span class="citation">(<a href="#ref-USBR1987">USBR, 1987</a>)</span></strong>
</p>
</div>
<p>Three options to calculate the final discharge coefficient are offered based on the input value of the 1d_nwk HConF_or_WC attribute:</p>
<ul>
<li>If the discharge coefficient has already been obtained by hand calculation, a positive HConF_or_WC value can be used to apply a constant discharge coefficient, i.e. <span class="math inline">\(C\)</span> = <span class="math inline">\(C_{0}\)</span> = HConF_or_WC.</li>
<li>If the design head (<span class="math inline">\(H_0\)</span>) is known for an ogee crest weir, a negative HConF_or_WC value can be used to specify <span class="math inline">\(H_0\)</span>. The two-step <span class="citation">USBR (<a href="#ref-USBR1987">1987</a>)</span> method stated above will be applied to estimate the final discharge coefficient. Note this option is only available in the 2023-03-AB build or later.</li>
<li>If HConF_or_WC is zero (0) or left as blank (the default), the actual head <span class="math inline">\(H_e\)</span> at each simulation timestep will be used to estimate <span class="math inline">\(C\)</span> from Figure 9-23 of <span class="citation">USBR (<a href="#ref-USBR1987">1987</a>)</span>, with no further adjustment based on Figure 9-24 of <span class="citation">USBR (<a href="#ref-USBR1987">1987</a>)</span>. This approach should be used when the design head (<span class="math inline">\(H_0\)</span>) is unknown.</li>
</ul>
</div>
<div id="WV-Weir-5" class="section level5 hasAnchor" number="5.8.4.3.2">
<h5><span class="header-section-number">5.8.4.3.2</span> V-Notch Weir (WV)<a href="OneD-Domains-1.html#WV-Weir-5" class="anchor-section" aria-label="Anchor link to header"></a></h5>
<p>For WV (V-notch) weirs, the approach taken is to use the formulae derived by <a href="https://www.lmnoeng.com/Weirs/vweir.php">LMNO Engineering</a> as shown below. For metric models the flow is calculated in
ft<sup>3</sup>/s and converted to m<sup>3</sup>/s. The top height of a V-notch weir cannot be specified, the angle continues with the increasing water level.</p>
<center>
<img src="images/image25.png"
style="width:6.29931in;height:3.73542in" />
</center>
</div>
</div>
<div id="Submerge-4" class="section level4 hasAnchor" number="5.8.4.4">
<h4><span class="header-section-number">5.8.4.4</span> Advanced Weir Submergence Curves<a href="OneD-Domains-1.html#Submerge-4" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Weir submergence factors <span class="math inline">\(C_{sf}\)</span> were sought from two sources:
“Discharge Characteristics” <span class="citation">(<a href="#ref-IAHRManual1994">Miller, 1994</a>)</span> and “Discharge Measurement
Structures” <span class="citation">(<a href="#ref-Bos1989">Bos, 1989</a>)</span>. The submergence charts for each weir type,
relating the weir submergence factor to the ratio between downstream and
upstream water level were reproduced from the literature in Excel and
are shown in Figure <a href="OneD-Domains-1.html#fig:fig-image27">5.11</a>.</p>
<p>Two methods were utilised to fit equations to these curves. These are:</p>
<p>The Rational Function expressed as:</p>
<p><span class="math display" id="eq:equ-rational">\[\begin{equation}
C_{sf} = \frac{a + b\left( \frac{H_{d}}{H_{u}} \right)}{1 + c\left( \frac{H_{d}}{H_{u}} \right)\  + \ d\left( \frac{H_{d}}{H_{u}} \right)^{2}}
\tag{5.12}
\end{equation}\]</span></p>
<p>The Villemonte equation, expressed as:</p>
<p><span class="math display" id="eq:equ-villemonte">\[\begin{equation}
C_{sf} = \left( 1 - \ \left( \frac{H_{d}}{H_{u}} \right)^{a} \right)^{b}
\tag{5.13}
\end{equation}\]</span></p>
<p>Where:</p>
<ul>
<li><span class="math inline">\(H_{u}\)</span> = Upstream energy or water level above the weir crest (m or ft)<br />
</li>
<li><span class="math inline">\(H_{d}\)</span> = Downstream energy or water level above the weir crest (m or ft)<br />
</li>
<li><span class="math inline">\(a, b\)</span> = Model coefficients</li>
</ul>
<p>“Discharge Measurement Structures” <span class="citation">(<a href="#ref-Bos1989">Bos, 1989</a>)</span> applies upstream energy and downstream water level to calculate <span class="math inline">\(C_{sf}\)</span>. This can be specified globally using the <tcmd><a href="#tcfStructureFlowLevels">Structure Flow Levels</a></tcmd><teq> == </teq><tblk>ENERGY UPSTREAM</tblk> command (the default option is “ENERGY”, which uses energy level both upstream and downstream). It can also be changed for individual weirs using the “EH” flag in the 1d_nwk “Type” attribute, e.g. “WB EH”.</p>
<p>For each submergence curve, the above equations were solved to obtain
values for each of the variables that produced the best fit with the
curves provided in the literature. After a comparison of the results,
the equation from Villemonte was chosen for several reasons:</p>
<ul>
<li>The Rational Function was found to be sensitive to variables and
therefore required a greater number of decimal places. Villemonte was
found to provide accurate results with variables requiring only 2
decimal places.<br />
</li>
<li>The Villemonte equation contains only two variables, compared to four
used in the Rational Function, making it simpler and less susceptible
to error.<br />
</li>
<li>The Villemonte equation may be solved exactly at the extremities of
the curves (i.e. where <span class="math inline">\(\frac{H_{d}}{H_{u}} = \ 1\)</span> and <span class="math inline">\(C_{sf} = 0\)</span>,
and when <span class="math inline">\(\frac{H_{d}}{H_{u}}\)</span> = 0 and <span class="math inline">\(C_{sf} = 1\)</span>). The Rational
Function required further manipulation through inclusion of additional
points to achieve this outcome.</li>
</ul>
<p>The default variables <em>a</em> and <em>b</em> used to determine the submergence
factor <span class="math inline">\(C_{sf}\)</span> for each weir type are presented in Table <a href="OneD-Domains-1.html#tab:tab-WeirFlows">5.15</a>. Figure <a href="OneD-Domains-1.html#fig:fig-image27">5.11</a> shows the
submergence curves produced using the default values in Table <a href="OneD-Domains-1.html#tab:tab-WeirFlows">5.15</a> to
calculate <span class="math inline">\({\ C}_{sf}\)</span>.</p>
<center>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:fig-image26"></span>
<img src="images/image26.jpeg" alt="**Weir Submergence Curves from the Literature**" width="80%" />
<p class="caption">
Figure 5.10: <strong>Weir Submergence Curves from the Literature</strong>
</p>
</div>
</center>
<center>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:fig-image27"></span>
<img src="images/image27.jpeg" alt="**Weir Submergence Curves using Villemonte Equation**" width="80%" />
<p class="caption">
Figure 5.11: <strong>Weir Submergence Curves using Villemonte Equation</strong>
</p>
</div>
</center>
<table>
<caption>
<span id="tab:tab-WeirsAttributeDescriptions">Table 5.16: </span><strong>Weirs: 1D Model Network (1d_nwk) Attribute Descriptions</strong>
</caption>
<thead>
<tr>
<th style="text-align:right;font-weight: bold;color: WHITE !important;background-color: rgba(26, 189, 201, 255) !important;">
No. 
</th>
<th style="text-align:left;font-weight: bold;color: WHITE !important;background-color: rgba(26, 189, 201, 255) !important;">
Default GIS Attribute Name
</th>
<th style="text-align:left;font-weight: bold;color: WHITE !important;background-color: rgba(26, 189, 201, 255) !important;">
Description
</th>
<th style="text-align:left;font-weight: bold;color: WHITE !important;background-color: rgba(26, 189, 201, 255) !important;">
Type
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right;">
1
</td>
<td style="text-align:left;">
ID
</td>
<td style="text-align:left;">
Unique identifier up to 12 characters in length. It may contain any character except for quotes and commas, and cannot be blank. As a general rule, spaces and special characters (e.g. “\”) should be avoided, although they are accepted. The same ID can be used for a channel and a node, but no two nodes and no two channels can have the same ID.
</td>
<td style="text-align:left;">
Char(12)
</td>
</tr>
<tr>
<td style="text-align:right;">
2
</td>
<td style="text-align:left;">
Type
</td>
<td style="text-align:left;">
The weir channel type as specified using the flags in Table <a href="OneD-Domains-1.html#tab:tab-LineTypes">5.1</a> and <a href="OneD-Domains-1.html#tab:tab-WeirTypes">5.14</a>. For example, a V-notch weir would be entered as “WV”.
</td>
<td style="text-align:left;">
Char(4)
</td>
</tr>
<tr>
<td style="text-align:right;">
3
</td>
<td style="text-align:left;">
Ignore
</td>
<td style="text-align:left;">
If a “T”, “t”, “Y” or “y” is specified, the object will be ignored (T for True and Y for Yes). Any other entry, including a blank field, will treat the object as active.
</td>
<td style="text-align:left;">
Char(1)
</td>
</tr>
<tr>
<td style="text-align:right;">
4
</td>
<td style="text-align:left;">
UCS<br />
(Use Channel Storage at nodes).
</td>
<td style="text-align:left;">
If left blank or set to Yes (“Y” or “y”) or True (“T” or “t”), the storage based on the width of the channel over half the channel length is assigned to both of the two nodes connected to the channel. If set to No (“N” or “n”) or False (“F” or “f”), the channel width does not contribute to the node’s storage. See Section <a href="OneD-Domains-1.html#AutoStorageWidths-4">5.13.1.1</a> for further discussion.
</td>
<td style="text-align:left;">
Char(1)
</td>
</tr>
<tr>
<td style="text-align:right;">
5
</td>
<td style="text-align:left;">
Len_or_ANA
</td>
<td style="text-align:left;">
Only used in determining nodal storages if the UCS attribute is set to “Y” or “T”. Not used in conveyance calculations.
</td>
<td style="text-align:left;">
Float
</td>
</tr>
<tr>
<td style="text-align:right;">
6
</td>
<td style="text-align:left;">
n_nF_Cd
</td>
<td style="text-align:left;">
Not used.
</td>
<td style="text-align:left;">
Float
</td>
</tr>
<tr>
<td style="text-align:right;">
7
</td>
<td style="text-align:left;">
US_Invert
</td>
<td style="text-align:left;">
<p><b>All Weir (excluding WO) Channel Types: </b><br />
Sets the weir invert. Note that the invert is taken as the maximum of the US_Invert and the DS_Invert attributes. For W and WW weirs use -99999 to use the bed of the cross-section (if one exists) as the invert or weir crest.</p>
<b>WO Channel Type: </b><br />
The absolute difference in height between the US_Invert and DS_Invert is used to set the height of the weir above its sill (usually denoted as P), which is used for recalculating the weir’s discharge coefficient each timestep. If the US_Invert and DS_Invert are the same value the primary upstream channel bed will be used to set the value of P.
</td>
<td style="text-align:left;">
Float
</td>
</tr>
<tr>
<td style="text-align:right;">
8
</td>
<td style="text-align:left;">
DS_Invert
</td>
<td style="text-align:left;">
See comments above for US_Invert.
</td>
<td style="text-align:left;">
Float
</td>
</tr>
<tr>
<td style="text-align:right;">
9
</td>
<td style="text-align:left;">
Form_Loss
</td>
<td style="text-align:left;">
Not used.
</td>
<td style="text-align:left;">
Float
</td>
</tr>
<tr>
<td style="text-align:right;">
10
</td>
<td style="text-align:left;">
pBlockage
</td>
<td style="text-align:left;">
<p><b>W Channel Type: </b><br />
Not used. Reserved for future builds to fully or partially block W channels. The 1d_xs Skew attribute can be used to partially block cross-sections of these channels - see Table <a href="OneD-Domains-1.html#tab:tab-CrossAttributeDescriptions">5.4</a>.</p>
<p><b>WB, WC, WD, WO, WR, and WS Channel Type: </b><br />
The weir width is adjusted proportionally by the % blockage.</p>
<p><b>WT Channel Type: </b><br />
The base width of the weir is adjusted proportionally by the % blockage.</p>
<b>WV Channel Type: </b><br />
The V-notch angle is adjusted proportionally by the % blockage.
</td>
<td style="text-align:left;">
Float
</td>
</tr>
<tr>
<td style="text-align:right;">
11
</td>
<td style="text-align:left;">
Inlet_Type
</td>
<td style="text-align:left;">
Leave blank unless using the legacy MIKE 11 1D cross-section data feature.
</td>
<td style="text-align:left;">
Char(256)
</td>
</tr>
<tr>
<td style="text-align:right;">
12
</td>
<td style="text-align:left;">
Conn_1D_2D
</td>
<td style="text-align:left;">
Leave blank unless using the legacy MIKE 11 1D cross-section data feature, or if accessing a Flood Modeller cross-section database (.pro file), enter the label in the .pro file.
</td>
<td style="text-align:left;">
Char(4)
</td>
</tr>
<tr>
<td style="text-align:right;">
13
</td>
<td style="text-align:left;">
Conn_No
</td>
<td style="text-align:left;">
Leave blank unless using the legacy MIKE 11 1D cross-section data feature.
</td>
<td style="text-align:left;">
Integer
</td>
</tr>
<tr>
<td style="text-align:right;">
14
</td>
<td style="text-align:left;">
Width_or_Dia
</td>
<td style="text-align:left;">
<p><b>All Weir (excluding WT and WV) Channel Types: </b><br />
The weir width in metres. The maximum of US_Invert and DS_Invert is used in conjunction with the Width_or_Dia attribute to define a rectangular section 5m (16.4ft) high. The automatic height given to the weir of 5m (16.4ft) so that the generation of node storage areas from channel widths are within a realistic range of elevations. Use <a href="ECFCommands-1.html#ecfDepthLimitFactor">Depth Limit Factor</a> to allow water levels to exceed the 5m (16.4ft) range if required.</p>
<p>Note: For W and WW weirs if a cross-section for the channel exists, the cross-section profile will prevail over the automatic rectangular shape.
Note: For operational weirs, the width of the weir when fully open.</p>
<p><b>WT Channel Type:</b><br />
The width at the base of the trapezoidal weir. WT weirs are Cippoletti weirs that have side slopes of 1 horizontal to 4 vertical.</p>
<b>WV Channel Type:</b><br />
Angle of the V-notch in degrees. Must be between 20º and 100º.
</td>
<td style="text-align:left;">
Float
</td>
</tr>
<tr>
<td style="text-align:right;">
15
</td>
<td style="text-align:left;">
Height_or_WF
</td>
<td style="text-align:left;">
<p><b>For non-operated weirs</b>, this value can be used as a weir coefficient adjustment factor to be primarily used for model calibration or sensitivity testing. The weir coefficient is multiplied by this value. The resulting weir coefficient can be viewed in the .eof file and over time in the _TSL GIS layer. If zero or negative an adjustment factor of 1.0 (i.e. no adjustment) is applied.</p>
<b>For operational weirs</b>, the height of the weir above the crest when fully up.
</td>
<td style="text-align:left;">
Float
</td>
</tr>
<tr>
<td style="text-align:right;">
16
</td>
<td style="text-align:left;">
Number_of
</td>
<td style="text-align:left;">
Not used.
</td>
<td style="text-align:left;">
Integer
</td>
</tr>
<tr>
<td style="text-align:right;">
17
</td>
<td style="text-align:left;">
HConF_or_WC
</td>
<td style="text-align:left;">
<p><b>W Channel Type: </b><br />
Not used.</p>
<p><b>All Weir (excluding W) Channel Types:</b><br />
Weir coefficient, Cd, in its dimensionless form. If less than or equal to zero the default value for the weir type in Table <a href="OneD-Domains-1.html#tab:tab-WeirFlows">5.15</a> is used.</p>
<p>Note that for WV weirs the default is to recalculate Cd every timestep. Entering a value greater than zero (0) will override this and apply a fixed Cd.</p>
<p>For WO weirs, the default is to recalculate Cd every timestep based on the actual head, while entering a value less than zero (0) will specify a design head for Cd calulation. Entering a value greater than zero (0) will apply a fixed Cd. Please see Section <a href="OneD-Domains-1.html#WO-Weir-5">5.8.4.3.1</a> for the detailed ogee crest weir approach.</p>
<p>For WD weirs the user must specify a non-zero positive value.</p>
Note that published weir coefficients may be based on other non-dimensional or dimensional forms of the weir equation, therefore care should be taken in ensuring the coefficient is compatible with the form of the weir flow equation presented in Section <a href="OneD-Domains-1.html#Adv-Weir-4">5.8.4.3</a>.
</td>
<td style="text-align:left;">
Float
</td>
</tr>
<tr>
<td style="text-align:right;">
18
</td>
<td style="text-align:left;">
WConF_or_WEx
</td>
<td style="text-align:left;">
<p><b>W Channel Type: </b><br />
Not used.</p>
<b>All Weir (excluding W) Channel Types:</b><br />
Weir flow equation exponent Ex in the weir flow equation presented in Section <a href="OneD-Domains-1.html#Adv-Weir-4">5.8.4.3</a>. If less than or equal to zero the default value for the weir type in Table <a href="OneD-Domains-1.html#tab:tab-WeirFlows">5.15</a> is used. The default value is 1.5 for all weir types except for WV which is 2.5.
</td>
<td style="text-align:left;">
Float
</td>
</tr>
<tr>
<td style="text-align:right;">
19
</td>
<td style="text-align:left;">
EntryC_or_WSa
</td>
<td style="text-align:left;">
<p><b>W Channel Type: </b><br />
Not used.</p>
<b>All Weir (excluding W) Channel Types: </b><br />
Sets the submergence factor “a” exponent in the Villemonte Equation for calculating the weir submergence factor Csf (refer to equations in Section <a href="OneD-Domains-1.html#Adv-Weir-4">5.8.4.3</a> and <a href="OneD-Domains-1.html#Submerge-4">5.8.4.4</a>). If less than or equal to zero the default value for the weir type in Table <a href="OneD-Domains-1.html#tab:tab-WeirFlows">5.15</a> is used.
</td>
<td style="text-align:left;">
Float
</td>
</tr>
<tr>
<td style="text-align:right;">
20
</td>
<td style="text-align:left;">
ExitC_or_WSb
</td>
<td style="text-align:left;">
<p><b>W Channel Type: </b><br />
Not used.</p>
<b>All Weir (excluding W) Channel Types:</b><br />
Sets the submergence factor “b” exponent in the Villemonte Equation for calculating the weir submergence factor Csf (refer to equations in Section <a href="OneD-Domains-1.html#Adv-Weir-4">5.8.4.3</a> and <a href="OneD-Domains-1.html#Submerge-4">5.8.4.4</a>). If less than or equal to zero the default value for the weir type in Table <a href="OneD-Domains-1.html#tab:tab-WeirFlows">5.15</a> is used.
</td>
<td style="text-align:left;">
Float
</td>
</tr>
</tbody>
</table>
</div>
<div id="Auto-Weir-4" class="section level4 hasAnchor" number="5.8.4.5">
<h4><span class="header-section-number">5.8.4.5</span> Automatically Created Weirs<a href="OneD-Domains-1.html#Auto-Weir-4" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Weirs representing overtopping of structures such as culverts and
bridges may be automatically created without the need to digitise a
separate line within a 1d_nwk layer. The structure must be
digitised within a 1d_nwke layer (as opposed to a 1d_nwk layer) and a
“W” specified alongside the original structure type. For example, to
model a bridge and a weir representing overtopping of the road deck,
specify type “BW”. The weir crest level and dimensions are specified
within the additional attributes contained within a 1d_nwke layer and
are explained in Table <a href="OneD-Domains-1.html#tab:tab-OptionalAttributeDescriptions">5.17</a>. The original W weir approach is adopted for
calculating the flow (see Section <a href="OneD-Domains-1.html#W-Weir-4">5.8.4.2</a>).</p>
<p>The weir’s shape is assumed to be two rectangles on top of each other.
The lower rectangle is reduced in width according to the percent
blockage applied to the rail (i.e. the EN4 attribute in Table <a href="OneD-Domains-1.html#tab:tab-OptionalAttributeDescriptions">5.17</a>), and its
height is the EN3 attribute. The upper rectangle is the full flow width
and extends indefinitely in the vertical.</p>
<p>Alternatively, the flow over a structure can be manually digitised as a
separate 1d_nwk weir channel parallel to the original bridge or culvert
structure (i.e. the weir is connected to the ends of the
bridge/culvert). Any of the available weir types can be used in this
instance.</p>
<table>
<caption>
<span id="tab:tab-OptionalAttributeDescriptions">Table 5.17: </span><strong>1D Model Network (1d_nwke) OPTIONAL Attribute Descriptions</strong>
</caption>
<thead>
<tr>
<th style="text-align:right;font-weight: bold;color: WHITE !important;background-color: rgba(26, 189, 201, 255) !important;">
No. 
</th>
<th style="text-align:left;font-weight: bold;color: WHITE !important;background-color: rgba(26, 189, 201, 255) !important;">
Default GIS Attribute Name
</th>
<th style="text-align:left;font-weight: bold;color: WHITE !important;background-color: rgba(26, 189, 201, 255) !important;">
Description
</th>
<th style="text-align:left;font-weight: bold;color: WHITE !important;background-color: rgba(26, 189, 201, 255) !important;">
Type
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right;">
21
</td>
<td style="text-align:left;">
ES1
</td>
<td style="text-align:left;">
Not yet used (leave blank).
</td>
<td style="text-align:left;">
Char(50)
</td>
</tr>
<tr>
<td style="text-align:right;">
22
</td>
<td style="text-align:left;">
ES2
</td>
<td style="text-align:left;">
Not yet used (leave blank).
</td>
<td style="text-align:left;">
Char(50)
</td>
</tr>
<tr>
<td style="text-align:right;">
23
</td>
<td style="text-align:left;">
EN1
</td>
<td style="text-align:left;">
For BW, CW and RW channels, the flow width of weir (m) over the top of the B, C or R structure. If &lt; 0.001, uses width multiplied by the number of culverts attribute for C and R channels.
</td>
<td style="text-align:left;">
Float
</td>
</tr>
<tr>
<td style="text-align:right;">
24
</td>
<td style="text-align:left;">
EN2
</td>
<td style="text-align:left;">
For BW, CW and RW channels, the depth (m) of the bridge deck or culvert overlay.
</td>
<td style="text-align:left;">
Float
</td>
</tr>
<tr>
<td style="text-align:right;">
25
</td>
<td style="text-align:left;">
EN3
</td>
<td style="text-align:left;">
For BW, CW and RW channels, the depth of the hand rail (m). If &lt; 0.001 assumes solid or no rail, depending on the EN4 attribute entry.
</td>
<td style="text-align:left;">
Float
</td>
</tr>
<tr>
<td style="text-align:right;">
26
</td>
<td style="text-align:left;">
EN4
</td>
<td style="text-align:left;">
For BW, CW and RW channels, % blockage of the rail (e.g. 100 for solid rail, 50 for partially blocked, 0 for no rail).
</td>
<td style="text-align:left;">
Float
</td>
</tr>
<tr>
<td style="text-align:right;">
27
</td>
<td style="text-align:left;">
EN5
</td>
<td style="text-align:left;">
For BW, CW and RW channels, the weir calibration factor. Is set to 1.0 if &lt; 0.001 is specified.
</td>
<td style="text-align:left;">
Float
</td>
</tr>
<tr>
<td style="text-align:right;">
28
</td>
<td style="text-align:left;">
EN6
</td>
<td style="text-align:left;">
Not yet used (leave as zero).
</td>
<td style="text-align:left;">
Float
</td>
</tr>
<tr>
<td style="text-align:right;">
29
</td>
<td style="text-align:left;">
EN7
</td>
<td style="text-align:left;">
Not yet used (leave as zero).
</td>
<td style="text-align:left;">
Float
</td>
</tr>
<tr>
<td style="text-align:right;">
30
</td>
<td style="text-align:left;">
EN8
</td>
<td style="text-align:left;">
Not yet used (leave as zero).
</td>
<td style="text-align:left;">
Float
</td>
</tr>
</tbody>
</table>
</div>
<div id="VW-Channel-4" class="section level4 hasAnchor" number="5.8.4.6">
<h4><span class="header-section-number">5.8.4.6</span> VW Channels (Variable Geometry Weir)<a href="OneD-Domains-1.html#VW-Channel-4" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>The VW (variable weir) channel allows the modeller to vary the
cross-section geometry of a W weir over time using a trapezoidal shape.
To set up a VW channel follow the steps below.</p>
<p>In the 1d_nwk layer, the following attributes are required:</p>
<ul>
<li>ID = ID of the channel;<br />
</li>
<li>Type = “VW”;<br />
</li>
<li>Len_or_ANA = Nominal length in m (only used for calculating nodal
storage if UCS is on);<br />
</li>
<li>US_Invert = -99999 (the invert level is specified in the .csv file
discussed below);<br />
</li>
<li>DS_Invert = -99999 (the invert level is specified in the .csv file
discussed below);<br />
</li>
<li>Inlet_Type = relative path to a .csv file containing information on
how the weir geometry varies; and<br />
</li>
<li>Height_Cont = Trigger Value (the upstream water level to trigger the
start of the failure; upstream water level is determined as the higher
water level of the upstream and downstream nodes).</li>
</ul>
<p>The .csv file must be structured as follows (also see example below):</p>
<ol style="list-style-type: decimal">
<li>TUFLOW searches through the sheet until more than 4 numbers are
found at the beginning of a row (Row 2 in the example below).<br />
</li>
<li>Each row of values is read until the end of the file or a row with
no or less than four numbers is found. There is no limit on the
number of rows of data.<br />
</li>
<li>The four columns must be as follows and in this order. The labels
for the columns are optional.
<ol style="list-style-type: lower-roman">
<li>Time from start of breach in hours.<br />
</li>
<li>Weir bed level in metres.<br />
</li>
<li>Weir bed width in metres.<br />
</li>
<li>Side slope (enter as the vertical distance in metres for one
metre horizontal). For example, a value of 0.5 means a slope of
two horizontal to one vertical.</li>
</ol></li>
</ol>
<p>In the example below, the weir once triggered will erode from a bed level of 270m to 254m, widen from a bed width of 0 to 20m and the side slope will remain constant at 0.5. The period of time for the erosion is 0.5hours.</p>
<p>Although in most cases the weir is eroded, the weir can also be raised/accreted as well or a combination of the two. Simply enter the change over time using as many rows as needed.</p>
<p>The original W weir approach is adopted for calculating the flow (see Section <a href="OneD-Domains-1.html#W-Weir-4">5.8.4.2</a>).</p>
<center>
<img src="images/image28a.png" />
</center>
</div>
</div>
<div id="SP-3" class="section level3 hasAnchor" number="5.8.5">
<h3><span class="header-section-number">5.8.5</span> Spillways (SP)<a href="OneD-Domains-1.html#SP-3" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Spillways (‘SP’) were introduced for the TUFLOW 2013-12 release and may
also be used in operational mode as a gated spillway (see
Section <a href="OneD-Domains-1.html#OperationalChannels-2">5.10</a>). Spillways may also be simulated and operated as Q
or QO channels where the user provides the stage discharge relationships
(see Section <a href="OneD-Domains-1.html#Q-Channels-3">5.9.2</a> and Section <a href="OneD-Domains-1.html#QO-3">5.10.3</a>). The 1d_nwk attributes are
presented in Table <a href="OneD-Domains-1.html#tab:tab-SpecialAttributeDescriptions">5.18</a>.</p>
<p>Spillways use the same equation as for advanced weirs
(Section <a href="OneD-Domains-1.html#Adv-Weir-4">5.8.4.3</a>). For ungated spillways (i.e. SP, non-operated
spillways) the same parameters as for Ogee Weirs are the default (see Table <a href="OneD-Domains-1.html#tab:tab-WeirFlows">5.15</a>),
except for Cd, which is fixed with the default value of 0.75. For Ogee
Weirs, C<sub>d</sub> is recalculated every timestep (see
Section <a href="OneD-Domains-1.html#WO-Weir-5">5.8.4.3.1</a>). The 1d_nwk attributes in Table <a href="OneD-Domains-1.html#tab:tab-WeirFlows">5.15</a> can be used to
modify the flow equation parameters for SP channels in a similar manner
for advanced weirs.</p>
<p>SPO channels also use the same equation when the gate is not affecting
the flow (for more information on SPO channels refer to Section <a href="OneD-Domains-1.html#SPO-3">5.10.6</a>).</p>
<p>SP and SPO channels can also drown out as per the submergence curves for
advanced weirs.</p>
</div>
<div id="SG-3" class="section level3 hasAnchor" number="5.8.6">
<h3><span class="header-section-number">5.8.6</span> Sluice Gates (SG)<a href="OneD-Domains-1.html#SG-3" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>For sluice gates refer to Section <a href="OneD-Domains-1.html#SG-SGO-3">5.10.5</a>. The same approach applies as for SGO
operated gates, except that the gate is assumed to be in a fixed
position based on the 1d_nwk Height_or_WF attribute value. The 1d_nwk
attributes are presented in Table <a href="OneD-Domains-1.html#tab:tab-SpecialAttributeDescriptions">5.18</a>.</p>
</div>
<div id="LossAdjustment-3" class="section level3 hasAnchor" number="5.8.7">
<h3><span class="header-section-number">5.8.7</span> Adjustment of Contraction and Expansion Losses<a href="OneD-Domains-1.html#LossAdjustment-3" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>The energy losses associated with the contraction and expansion of flow
lines into and out of a structure, can be automatically adjusted
according to the approach and departure velocities in the upstream and
downstream channels. This is particularly important where:</p>
<ul>
<li>There is no change in velocity magnitude and direction as water flows
through a structure. In this situation, there is effectively no
entrance (contraction) or exit (expansion) losses and the losses need
to be reduced to zero. Examples are:
<ul>
<li>A clear spanning bridge over a stormwater channel where there are no
losses due to any obstruction to flow until the bridge deck becomes
surcharged.<br />
</li>
<li>Flow from one pipe to another where the pipe size remains unchanged
and there is no significant bend or change in grade.<br />
</li>
</ul></li>
<li>There is a change in velocity, but the change does not warrant
application of the full entrance and exit loss. This is the most
common case where the application of the full entrance and exit loss
coefficients (typically 0.5 and 1.0) will overestimate the energy loss
through the structure. The full values are only representative of the
situation where the approach and departure velocities are close to
zero, for example, a culvert discharging from a lake into another lake
where the velocity transitions from still water to fast flowing and to
still water.</li>
</ul>
<p>The entrance and exit losses are adjusted according to the equations
below to take into account the change in velocity caused by the
structure. The first equation is empirical, while the second equation to
adjust exit losses can be derived from first principles.</p>
<p><span class="math display" id="eq:equ-Entrance-1">\[\begin{equation}
\text{C}_{\text{entrance_adjusted}} = \text{C}_{\text{entrance}}\left\lbrack 1 - \frac{\text{V}_{\text{approach}}}{\text{V}_{\text{structure}}} \right\rbrack
\tag{5.14}
\end{equation}\]</span></p>
<p><span class="math display" id="eq:equ-Exit-1">\[\begin{equation}
\text{C}_{\text{exit_adjusted}} = \text{C}_{\text{exit}}\left\lbrack 1 - \frac{\text{V}_{\text{departure}}}{\text{V}_{\text{structure}}} \right\rbrack^{2}
\tag{5.15}
\end{equation}\]</span></p>
<p>Where:</p>
<ul>
<li><em>V =</em> Velocity (<em>m/s</em>)<br />
</li>
<li><em>C =</em> Energy Loss Coefficient</li>
</ul>
<p>As the structure velocity approaches the incoming and/or outgoing
velocities, the loss coefficient approaches zero. When the
incoming and/or outgoing velocity approaches zero (i.e. water is
leaving/entering a large body of water), the loss coefficients approach
their full value.</p>
<p><span class="citation">Tullis &amp; Robinson (<a href="#ref-TullisRobinson2008">2008</a>)</span> provide an excellent proof for the need to
adjust losses for different flow regimes using the exit loss equation
above. The paper benchmarks different exit loss equations used within
the industry methods against experimental flume test results.</p>
<p>The adjustment of losses feature is available to structures that require
entrance and exit loss coefficients, namely culverts and bridges. For
culverts, the adjusted entrance loss coefficient only applies where the
flow is not inlet controlled (i.e. Regimes C, D, E, F, H and J in Table <a href="OneD-Domains-1.html#tab:tab-FlowRegimes">5.6</a>), and the adjusted exit loss is only influential where the flow is downstream
controlled (i.e. Regimes D, F, H and J (subcritical at exit) in Table <a href="OneD-Domains-1.html#tab:tab-FlowRegimes">5.6</a>). For
bridges, the application varies as discussed below.</p>
<p>If <tcmd><a href="ECFCommands-1.html#ecfStructureLosses">Structure Losses</a></tcmd><teq> == </teq><tblk>ADJUST EXCEPT BG TABLES</tblk>
(default), the adjustment of the losses is only applied to culverts and
B bridges with automatically generated loss tables using the 1d_nwk
Form_Loss attribute (see Table <a href="OneD-Domains-1.html#tab:tab-BridgesAttributeDescriptions">5.10</a>). There is no adjustment for B
bridges with a user specified BG or LC energy loss table, because bridge
energy losses are most often based on coefficients from publications
such as “Hydraulics of Bridge Waterways” <span class="citation">(<a href="#ref-Bradley1978">Bradley, 1978</a>)</span> or “Guide to
Bridge Technology Part 8, Hydraulic Design of Waterway Structures”
<span class="citation">(<a href="#ref-Austroads2018">Austroads, 2018</a>)</span> that have already taken into account the effects of
contraction and expansion.</p>
<p>For BB bridges, the LC table should only
represent the pier and submerged deck losses (see Section <a href="OneD-Domains-1.html#Submerge-4">5.8.4.4</a>),
as the adjustment of entrance and exit losses every timestep as per the
equations above is always applied irrespective of the <a href="ECFCommands-1.html#ecfStructureLosses">Structure
Losses</a> setting. The equations above conform with
the approach for determining contraction and expansion losses in
publications such as Hydraulics of Bridge Waterways.</p>
<p>For B bridges and culverts, if <a href="ECFCommands-1.html#ecfStructureLosses">Structure Losses</a>
is set to “ADJUST”, or “A” has been specified in the 1d_nwk Type
attribute (e.g. BA, CA, IA or RA), the entrance and exit losses are
adjusted according to the equations above. For B bridges, because the
entrance and exit losses are combined as one loss coefficient, the
entrance and exit loss components are proportioned one-third /
two-thirds respectively when applying the above equations. For the new
BB bridge, entrance and exit losses are always adjusted as per the
equations above and the <a href="ECFCommands-1.html#ecfStructureLosses">Structure Losses</a> setting
is not relevant (also see Section <a href="OneD-Domains-1.html#Submerge-4">5.8.4.4</a>).</p>
<p>The selection of the upstream and downstream channels on which to base
the approach and departure velocities is as follows:</p>
<ul>
<li>The upstream channel is determined as the channel which has a positive
flow direction into the structure whose invert is closest to that of
the upstream invert of the structure. If no channel exists, no
adjustment of losses is made (this includes structures connected to a
2D domain). Note that the upstream channel must be digitised so that
it has the same positive flow direction to that of the structure.<br />
</li>
<li>The downstream channel is selected on a similar basis to that for the
upstream channel.<br />
</li>
<li>The selected upstream and downstream channels are listed in the .eof
file for cross-checking (search for “Primary Channel”).<br />
</li>
<li>X channels can be used to connect additional channels and ensure that
these are not considered the primary channel.</li>
</ul>
<p>TUFLOW has no requirement of a minimum loss coefficient value for
stability, and therefore allows the adjusted coefficient to approach
zero allowing this feature to correctly model the structure losses when
the structure causes no disturbance to flow, or when one pipe discharges
into another of identical size, grade and alignment.</p>
<p>The adjustment of loss coefficients does not apply to:</p>
<ul>
<li>Any bend or additional loss for a culvert entered using the Form_Loss
attribute in the 1d_nwk layer. This coefficient can be used to apply
additional losses (e.g. pit or bend losses) that are not affected by
changes in the relativity of the approach/departure and structure
velocities.<br />
</li>
<li>Any additional loss coefficient component for BB bridges entered using
the Form_Loss attribute in the 1d_nwk layer. This coefficient can be
used to apply additional losses (e.g. pier losses) that are not
affected by changes in the relativity of the approach/departure and
structure velocities.<br />
</li>
<li>The ends of culverts and bridges that are connected to 2D SX or HX
cells as the approach or departure velocity needs to be derived in
some manner from the 2D velocity field. It is important not to be duplicating
energy losses by applying exit losses to a 1D structure and simulating
the same energy losses due to the flow expansion in the 2D domain –
for further information see the <a href="https://www.tuflow.com/library/webinars/#structures">Modelling Energy Losses at Structures AWS Webinar</a>.</li>
</ul>
<p>If <a href="ECFCommands-1.html#ecfStructureLosses">Structure Losses</a> is set to FIX, or “F” has
been specified in the 1d_nwk Type attribute (e.g. BF, CF, IF or RF), the
loss coefficients for B bridges and culverts are not adjusted. Fixing
the entrance and exit losses for BB bridges is not available – use a B
bridge instead.</p>
<p>The variation in time of the loss coefficients can be viewed using the
_TSL output layer (see Section <a href="Viewing-Output-1.html#TS-GIS-3">15.3.4</a>) or charted in the QGIS TUFLOW Viewer plugin.</p>
<p>If there is a manhole at the culvert end, a manhole energy loss approach
(see Section <a href="OneD-Domains-1.html#Manholes-3">5.11.4</a>) is used instead of the culvert’s
contraction/expansion loss, and the above description does not apply.</p>
</div>
</div>
<div id="Special-Channels-2" class="section level2 hasAnchor" number="5.9">
<h2><span class="header-section-number">5.9</span> Special Channels<a href="OneD-Domains-1.html#Special-Channels-2" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="M-Channel-3" class="section level3 hasAnchor" number="5.9.1">
<h3><span class="header-section-number">5.9.1</span> M Channels (User Defined Flow Matrix)<a href="OneD-Domains-1.html#M-Channel-3" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>M channels allow the modeller to define the flow through a channel
(usually a structure) based on a user specified flow matrix. To set up M
channels follow the steps below:</p>
<ol style="list-style-type: decimal">
<li>In the 1d_nwk layer, populate the required attributes as shown in Table <a href="OneD-Domains-1.html#tab:tab-SpecialAttributeDescriptions">5.18</a><br />
</li>
<li>Create the flow matrix as shown in the image below and save the
file as a .csv. The .csv file is referenced in
the 1d_nwk Inlet_Type attribute. Notes using the example in the
below image are:
<ol style="list-style-type: decimal">
<li>TUFLOW searches through the sheet until more than 3 numbers are
found at the beginning of a row (Row 3 in the example).<br />
</li>
<li>This first row contains a multiplication factor (in Cell A3)
followed by upstream depth values (in the direction that the
channel is digitised). The depth values are added to the channel
invert to set the water level.<br />
</li>
<li>The next rows have the downstream depth in Column A. Flows are
listed in the adjacent columns relating to the above upstream
depth value (Row 3).<br />
</li>
<li>Note: at present the matrix must be square and that the u/s and
d/s depths must be the same values. The flows along the diagonal
must be zero, and to the left of the diagonal negative (or zero)
and to the right positive (or zero).<br />
</li>
</ol></li>
<li>Optionally create a flow area matrix of the same dimensions and
depth values as for the flow matrix. Note:
<ol style="list-style-type: decimal">
<li>The path to the area.csv file is specified after the flow.csv
file in the Inlet_Type attribute (separate the two filenames
using a “|”; eg. “..\UD_Q.csv | ..\UD_A.csv”).<br />
</li>
<li>The factor value in the A3 cell is not used in the flow area
matrix (the value in the flow matrix is used to factor
the areas).<br />
</li>
<li>The area values are only used for outputting the channel
velocity (they are not used for the hydraulic computations other
than when the channel velocity is used for other channels, eg.
adjusting structure losses).<br />
</li>
<li>If an area matrix is not provided, TUFLOW will calculate the
area based on the channel width multiplied by the pBlockage and
the average of the upstream and downstream depths.</li>
</ol></li>
</ol>
<center>
<img src="images/image29a.png" />
</center>
</div>
<div id="Q-Channels-3" class="section level3 hasAnchor" number="5.9.2">
<h3><span class="header-section-number">5.9.2</span> Q Channels (Upstream Depth-Discharge Relationship)<a href="OneD-Domains-1.html#Q-Channels-3" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Q channels are used to model flow through a channel using an .ecf <a href="ECFCommands-1.html#ecfDepthDischargeDatabase">Depth
Discharge Database</a>. The Depth Discharge
Database is the same as the <a href="ECFCommands-1.html#ecfPitInletDatabase">Pit Inlet Database</a>
used for Q pits, with the same database used for both Q channels and Q
pits. Refer to Section <a href="OneD-Domains-1.html#DD-Database-3">5.11.3</a>.</p>
<p>In the 1d_nwk layer, the following attributes can be used to set up a Q
channel (also see Table <a href="OneD-Domains-1.html#tab:tab-SpecialAttributeDescriptions">5.18</a>).</p>
<ul>
<li>ID = Unique Channel ID.<br />
</li>
<li>Type = “Q”.<br />
</li>
<li>US_Invert = Elevation corresponding to zero depth in the
depth-discharge curve.<br />
</li>
<li>Inlet_Type = The depth discharge curve in the <a href="ECFCommands-1.html#ecfDepthDischargeDatabase">Depth Discharge
Database</a> or <a href="ECFCommands-1.html#ecfPitInletDatabase">Pit Inlet
Database</a>. This is analogous to a Q pit (see
Section <a href="OneD-Domains-1.html#DD-Database-3">5.11.3</a>). Note that the flow is automatically adjusted for
being drowned out using the Bradley relationship for weirs (see
Section <a href="OneD-Domains-1.html#W-Weir-4">5.8.4.2</a> or Figure <a href="OneD-Domains-1.html#fig:fig-image22">5.7</a>), and if the flow reverses the same
depth discharge curve is used.<br />
</li>
<li>Width_or_Dia = For Q channels can be used as a flow multiplier – this
is useful if the depth-discharge curve is a unit flow (i.e. flow per
unit width). Therefore, if the discharge is unit flow specify the
width of the flow, otherwise specify a value of 1.0 (noting that a
zero value is treated as 1.0).<br />
</li>
<li>Number_of = The number of parallel Q channels (a zero value is
interpreted as one channel).</li>
</ul>
</div>
<div id="XConnect-3" class="section level3 hasAnchor" number="5.9.3">
<h3><span class="header-section-number">5.9.3</span> X Connectors<a href="OneD-Domains-1.html#XConnect-3" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>X connectors are used for connecting a side tributary or pipe into the
main flow path. They are digitised as a line within a 1d_nwk
GIS layer with type “X”. No other attributes are required.</p>
<p>Use of an X connector has the advantage of allowing different end
cross-sections (see Section <a href="OneD-Domains-1.html#XS-End-3">5.7.6</a>) or WLLs (see Section
<a href="Outputs-1.html#OneDMap-3">11.2.4</a>) to be specified for the side channel, rather than using the
end cross-section on the main channel.</p>
<p>They can also be used in pipe
networks to ensure that the angle of the inlet and outlet culverts has
been digitised appropriately as this influences the manhole losses
calculated when using the Engelund loss approach (see
Section <a href="OneD-Domains-1.html#Engelund-4">5.11.4.4</a>). The angle of the pipe channel line is used for determining manhole losses, not that of the X connector.</p>
<p>The direction of the X Connector must be digitised starting from the
side channel and ending at the main channel. If two or more connectors
are used at the same location (i.e. to connect two or more side channels
to a main channel) their ends must all snap to the same main channel.</p>
</div>
<div id="Legacy-Channel-3" class="section level3 hasAnchor" number="5.9.4">
<h3><span class="header-section-number">5.9.4</span> Legacy Channels<a href="OneD-Domains-1.html#Legacy-Channel-3" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>For backwards compatibility, gradient (type ‘G’) and normal (type
‘blank’) channels remain supported in the current release of TUFLOW.
Sloping (type ‘S’) open channels are the preferred method of modelling
open channels as it incorporates the flow regimes covered by normal and
G channels and include the additional ability of handling super-critical
flow. Refer to Section <a href="OneD-Domains-1.html#Open-Channel-2">5.6</a> for further information.</p>
<p>A normal flow channel is defined by its length, bed resistance and
hydraulic properties. The channel can wet and dry, however, for overbank
areas (e.g. tidal flats or floodplains) G or S channels should be used.
<strong>Note: For open channels it is recommended to use the S Type
for the reasons given above.</strong></p>
<p>Gradient channels were designed for overbank areas such as tidal
flats and floodplains. The upstream and downstream bed invert attributes
must be specified to define the slope of the channel. They are like
normal channels, except when the water level at one end of the channel
falls below the channel bed, the channel invokes a free-overfall
algorithm that keeps water flowing without using negative depths. The
algorithm takes into account both the channel’s bed resistance and
upstream controlled weir flow at the downstream end.
<strong>Note: For overbank areas it is recommended to use the S Type
for the reasons given above.</strong></p>
</div>
<div id="OneD-nwk-3" class="section level3 hasAnchor" number="5.9.5">
<h3><span class="header-section-number">5.9.5</span> 1d_nwk Attributes (M, P, Q, SG, SP Channels)<a href="OneD-Domains-1.html#OneD-nwk-3" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>The table below covers the 1d_nwk attributes for all channels not
covered in other 1d_nwk attribute tables.</p>
<table>
<caption>
<span id="tab:tab-SpecialAttributeDescriptions">Table 5.18: </span><strong>Special Channels: 1D Model Network (1d_nwk) Attribute Descriptions</strong>
</caption>
<thead>
<tr>
<th style="text-align:right;font-weight: bold;color: WHITE !important;background-color: rgba(26, 189, 201, 255) !important;">
No. 
</th>
<th style="text-align:left;font-weight: bold;color: WHITE !important;background-color: rgba(26, 189, 201, 255) !important;">
Default GIS Attribute Name
</th>
<th style="text-align:left;font-weight: bold;color: WHITE !important;background-color: rgba(26, 189, 201, 255) !important;">
Description
</th>
<th style="text-align:left;font-weight: bold;color: WHITE !important;background-color: rgba(26, 189, 201, 255) !important;">
Type
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right;">
1
</td>
<td style="text-align:left;">
ID
</td>
<td style="text-align:left;">
Unique identifier up to 12 characters in length. It may contain any character except for quotes and commas and cannot be blank. As a rule, spaces and special characters (e.g. “\”) should be avoided, although they are accepted. The same ID can be used for a channel and a node, but no two nodes and no two channels can have the same ID.
</td>
<td style="text-align:left;">
Char(12)
</td>
</tr>
<tr>
<td style="text-align:right;">
2
</td>
<td style="text-align:left;">
Type
</td>
<td style="text-align:left;">
<p>The channel type as specified using the flags in Table <a href="OneD-Domains-1.html#tab:tab-LineTypes">5.1</a>.</p>
For X (connectors), no other attributes are required.
</td>
<td style="text-align:left;">
Char(4)
</td>
</tr>
<tr>
<td style="text-align:right;">
3
</td>
<td style="text-align:left;">
Ignore
</td>
<td style="text-align:left;">
If a “T”, “t”, “Y” or “y” is specified, the object will be ignored (T for True and Y for Yes). Any other entry, including a blank field, will treat the object as active.
</td>
<td style="text-align:left;">
Char(1)
</td>
</tr>
<tr>
<td style="text-align:right;">
4
</td>
<td style="text-align:left;">
UCS<br />
(Use Channel Storage at nodes).
</td>
<td style="text-align:left;">
<p><b>M, P, Q Channel Type:</b><br />
Not used.</p>
<b>SG, SP Channel Type:</b><br />
If left blank or set to Yes (“Y” or “y”) or True (“T” or “t”), the storage based on the width of the channel over half the channel length is assigned to both of the two nodes connected to the channel. If set to No (“N” or “n”) or False (“F” or “f”), the channel width does not contribute to the node’s storage. See Section <a href="OneD-Domains-1.html#AutoStorageWidths-4">5.13.1.1</a> for further discussion.
</td>
<td style="text-align:left;">
Char(1)
</td>
</tr>
<tr>
<td style="text-align:right;">
5
</td>
<td style="text-align:left;">
Len_or_ANA
</td>
<td style="text-align:left;">
<p><b>M, P, Q Channel Type:</b><br />
Not used.</p>
<b>SG, SP Channel Type:</b><br />
Only used in determining nodal storages if the UCS attribute is set to “Y” or “T”. Not used in conveyance calculations.
</td>
<td style="text-align:left;">
Float
</td>
</tr>
<tr>
<td style="text-align:right;">
6
</td>
<td style="text-align:left;">
n_ nF_Cd
</td>
<td style="text-align:left;">
<p><b>M, P, Q Channel Type: </b><br />
Not used.</p>
<b>SG, SP Channel Type: </b><br />
Discharge coefficient for the structure if using a fixed coefficient. If the value is less than or equal to zero, the default Cd value of 0.6 for SG and 0.75 for SP is used.
</td>
<td style="text-align:left;">
Float
</td>
</tr>
<tr>
<td style="text-align:right;">
7
</td>
<td style="text-align:left;">
US_Invert
</td>
<td style="text-align:left;">
<p><b>M Channel Type:</b><br />
Invert level of channel.</p>
<p><b>P Channel Type:</b><br />
Intake elevation of the pump.</p>
<p><b>Q Channel Type: </b>
US_Invert sets the level from which the upstream depth is to be calculated for interpolation into the depth-discharge curve.</p>
<p><b>SG Channel Type: </b><br />
The higher of US_Invert and DS_Invert is used to set the structure crest or invert.</p>
<b>SP Channel Type:</b><br />
Sets the spillway crest
</td>
<td style="text-align:left;">
Float
</td>
</tr>
<tr>
<td style="text-align:right;">
8
</td>
<td style="text-align:left;">
DS_Invert
</td>
<td style="text-align:left;">
<p><b>M Channel Type: </b><br />
Invert level of channel is taken as the maximum of US_Invert and DS_Invert.</p>
<p><b>P Channel Type:</b><br />
Outlet elevation of the receptor.</p>
<p><b>Q Channel Type: </b><br />
Not used.</p>
<p><b>SG Channel Type: </b><br />
See comments above for US_Invert.</p>
<b>SP Channel Type: </b><br />
Sets the level of the gate seat (if SP is operated, i.e. a SPO channel).
</td>
<td style="text-align:left;">
Float
</td>
</tr>
<tr>
<td style="text-align:right;">
9
</td>
<td style="text-align:left;">
Form_Loss
</td>
<td style="text-align:left;">
<p><b>M, P, Q, SP Channel Type: </b><br />
Not used.</p>
<b>SG Channel Type: </b><br />
If no weir is specified in the Type attribute, it is assumed that the gate seats on to the bottom of the channel. For this case the flow calculations where the gate is not surcharged uses the Form_Loss attribute to apply an energy loss to the structure to represent contraction/expansion losses.
</td>
<td style="text-align:left;">
Float
</td>
</tr>
<tr>
<td style="text-align:right;">
10
</td>
<td style="text-align:left;">
pBlockage
</td>
<td style="text-align:left;">
<p><b>Q Channel Type:</b><br />
Not used.</p>
<p><b>M Channel Type:</b><br />
Percentage blockage of channel (only used if no flow area matrix is provided). Refer to Inlet_Type attribute below.</p>
<b>P, SG, SP Channel Type: </b><br />
The channel’s dimensions and flow capacity are reduced as per the pBlockage value.
</td>
<td style="text-align:left;">
Float
</td>
</tr>
<tr>
<td style="text-align:right;">
11
</td>
<td style="text-align:left;">
Inlet_Type
</td>
<td style="text-align:left;">
<p><b>M Channel Type: </b><br />
The relative path to the flow matrix file (must be a .csv file), and optionally flow area matrix file. See Section <a href="OneD-Domains-1.html#M-Channel-3">5.9.1</a>.</p>
<p><b>P, SG, SP Channel Type: </b><br />
Only used for operational versions of these channels (i.e. type “PO”, “RGO”, SGO” or “SPO”) to specify the name of the <control_id>. The <control_id> is referenced within the .toc file and specifies the rules used to operate the channel. More than one channel can point to the same <control_id>. Refer to Section <a href="OneD-Domains-1.html#M-Channel-3">5.9.1</a>.</p>
<p><b>Q Channel Type (for QO see further below): </b><br />
For non-operated Q channels the name of the depth-discharge curve in a depth discharge database (identical approach to inlet Q pits). A Q channel is distinguished from a Q pit, in that a Q channel is a line in the 1d_nwk layer and a Q pit is a point object. A depth-discharge database is the same as a pit inlet database as used for Q pits, and the same database file can be used for both Q channels and Q pits. The .ecf command <a href="ECFCommands-1.html#ecfDepthDischargeDatabase">Depth Discharge Database</a> and the existing command <a href="ECFCommands-1.html#ecfPitInletDatabase">Pit Inlet Database</a> perform the same function.<br />
Note that the depth discharge curve is depth (not water elevation) and the depth is taken as the upstream water level less the Q channel’s invert.</p>
<b>QO Channel Type: </b><br />
For operated Q channels the filename of a .csv file containing a flow matrix table in the same format as used for M channels. See Section <a href="OneD-Domains-1.html#M-Channel-3">5.9.1</a>. </control_id></control_id></control_id>
</td>
<td style="text-align:left;">
Char<br />
(max 256)
</td>
</tr>
<tr>
<td style="text-align:right;">
12
</td>
<td style="text-align:left;">
Conn_1D_2D
</td>
<td style="text-align:left;">
Not used.
</td>
<td style="text-align:left;">
Char
</td>
</tr>
<tr>
<td style="text-align:right;">
13
</td>
<td style="text-align:left;">
Conn_No
</td>
<td style="text-align:left;">
Not used.
</td>
<td style="text-align:left;">
Integer
</td>
</tr>
<tr>
<td style="text-align:right;">
14
</td>
<td style="text-align:left;">
Width_or_Dia
</td>
<td style="text-align:left;">
<p><b>P Channel Type: </b><br />
The diameter of the pump offtake. Only used for outputting a velocity - it does not affect the hydraulic calculations.</p>
<p><b>M Channel Type: </b><br />
Width of channel (only used if no flow area matrix is provided). Refer to Inlet_Type attribute above.</p>
<p><b>Q Channel Type (for QO see further below):</b><br />
A multiplier applied to the flow interpolated from the depth-discharge curve. Particularly useful if the discharge values are per unit width (i.e. m<sup>2</sup>/s or ft<sup>2</sup>/s). If set to zero (0), the multiplier is set to one (1).</p>
<p><b>QO Channel Type:</b><br />
Used to determine the flow area at different stages by multiplying by the upstream depth. The area is used to determine the velocity that is output, otherwise, it does not play a role in the hydraulic calculations.</p>
<b>SG, SP Channel Type:</b><br />
The width of the gate/spillway. The flow area is assumed to be rectangular in shape.
</td>
<td style="text-align:left;">
Float
</td>
</tr>
<tr>
<td style="text-align:right;">
15
</td>
<td style="text-align:left;">
Height_or_WF
</td>
<td style="text-align:left;">
<p><b>M, Q Channel Type: </b><br />
Not used.</p>
<p><b>P Channel Type: </b><br />
Can be used to set the pump flow capacity for operated pumps (i.e. a PO channel). The pump capacity can also be set and changed during the simulation using the .toc file operating control commands. Useful where the operating control definition is generic (i.e. pump control is used for more than one pump of different flow capacities).</p>
<p><b>SG Channel Type: </b><br />
The vertical height of the gate in its fully open position. If an underlying weir is specified, the weir is assigned a coefficient adjustment factor of 1.0, which cannot be modified using this attribute.</p>
<b>SPO Channel Type: </b><br />
For an operated (gated) spillway (SPO), sets the vertical height of the gate in its fully open position. The fully open height can also be changed during the simulation using the .toc file operating control commands. This is useful where the operating control definition is generic (i.e. non-structure specific). Not used if channel is non-operational (i.e. a SP channel).
</td>
<td style="text-align:left;">
Float
</td>
</tr>
<tr>
<td style="text-align:right;">
16
</td>
<td style="text-align:left;">
Number_of
</td>
<td style="text-align:left;">
<p><b>P, SG, SP Channel Type: </b><br />
The number of parallel (duplicate) channels. If set to zero, one channel is assumed.</p>
<b>M, Q Channel Type:</b><br />
Number of parallel channels (flow and area matrices are multiplied by this value). If zero is set to one.
</td>
<td style="text-align:left;">
Integer
</td>
</tr>
<tr>
<td style="text-align:right;">
17
</td>
<td style="text-align:left;">
HConF_or_WC
</td>
<td style="text-align:left;">
<p><b>M, Q Channel Type:</b><br />
Not used.</p>
<p><b>SP Channel Type:</b><br />
Weir flow coefficient, Cd, in its dimensionless form as in the equation below. If less than or equal to zero the default value for spillways in Table <a href="OneD-Domains-1.html#tab:tab-WeirFlows">5.15</a> is used. Entering a value greater than zero (0) will override this and apply a fixed Cd.<br />
Note that published coefficients may be based on other non-dimensional or dimensional forms of the equation below, therefore care should be taken in ensuring the coefficient is converted to comply with the form below if this is the case.</p>
<p><span class="math display">\[Q = \frac{2}{3}\:C_{sf}\:C_{d}\:B\:\sqrt{2g}\:H^{Ex}\]</span></p>
<b>SG Channel Type:</b><br />
As for the weir channel in Table <a href="OneD-Domains-1.html#tab:tab-WeirsAttributeDescriptions">5.16</a> if a weir has been specified (e.g. a “SG WB” channel).
</td>
<td style="text-align:left;">
Float
</td>
</tr>
<tr>
<td style="text-align:right;">
18
</td>
<td style="text-align:left;">
WConF_or_WEx
</td>
<td style="text-align:left;">
<p><b>M, Q Channel Type:</b><br />
Not used.</p>
<p><b>SP Channel Type:</b><br />
Weir flow equation exponent Ex in the equation for HConF_or_WC. If less than or equal to zero the default value for spillways in Table <a href="OneD-Domains-1.html#tab:tab-WeirFlows">5.15</a> is used (i.e. 1.5).</p>
<b>SG Channel Type:</b><br />
As for the weir channel in Table <a href="OneD-Domains-1.html#tab:tab-WeirsAttributeDescriptions">5.16</a> if a weir has been specified (e.g. a “SG WB” channel).
</td>
<td style="text-align:left;">
Float
</td>
</tr>
<tr>
<td style="text-align:right;">
19
</td>
<td style="text-align:left;">
EntryC_or_WSa
</td>
<td style="text-align:left;">
<p><b>M, Q, SPO Channel Type:</b><br />
Not used.</p>
<p><b>SP Channel Type:</b><br />
Sets the submergence factor “a” exponent in the equation below for calculating the submergence factor Csf. If less than or equal to zero the default value for spillways in Table <a href="OneD-Domains-1.html#tab:tab-WeirFlows">5.15</a> is used.</p>
<p><span class="math display">\[C_{sf} = \left(1 - \left(\frac{H_{d}}{H_{u}}\right)^a\right)^b\]</span></p>
<b>SG Channel Type:</b><br />
As for the weir channel in Table <a href="OneD-Domains-1.html#tab:tab-WeirsAttributeDescriptions">5.16</a> if a weir has been specified (e.g. a “SG WB” channel).
</td>
<td style="text-align:left;">
Float
</td>
</tr>
<tr>
<td style="text-align:right;">
20
</td>
<td style="text-align:left;">
ExitC_or_WSb
</td>
<td style="text-align:left;">
<p><b>M, Q, SPO Channel Type:</b><br />
Not used.</p>
<p><b>SP Channel Type:</b><br />
Sets the submergence factor “b” exponent in the weir flow equation above for calculating the weir submergence factor Csf. If less than or equal to zero the default value for spillways in Table <a href="OneD-Domains-1.html#tab:tab-WeirFlows">5.15</a> is used.</p>
<b>SG Channel Type: </b><br />
As for the weir channel in Table <a href="OneD-Domains-1.html#tab:tab-WeirsAttributeDescriptions">5.16</a> if a weir has been specified (e.g. a “SG WB” channel).
</td>
<td style="text-align:left;">
Float
</td>
</tr>
</tbody>
</table>
</div>
</div>
<div id="OperationalChannels-2" class="section level2 hasAnchor" number="5.10">
<h2><span class="header-section-number">5.10</span> Operational Channels<a href="OneD-Domains-1.html#OperationalChannels-2" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Gated rectangular culverts, pumps, sluice gates, gated spillways, weirs
and Q channels can be operated using logical scripts. An “O” Type flag
is required within the 1d_nwk layer for structures that are to be
operated using an operating control definition. For example, an operated
pump would have a Type attribute of “PO” or “OP”.</p>
<p>Operating rules are contained within a .toc file (<strong><u>T</u></strong>UFLOW
<strong><u>O</u></strong>perations <strong><u>C</u></strong>ontrol) with each set of rules
contained within a control definition. More than one structure/device
can use the same control definition. The .toc file is referenced using
<a href="ECFCommands-1.html#ecfReadOperatingControlsFile">Read Operating Controls File</a> via the
.ecf file, or via the .tcf file within a <a href="TCFCommands-1.html#tcfStart1DDomain">Start 1D
Domain</a> block or by preceding the command with “1D”.</p>
<p>The operating rules for a control can only occur within a .toc file.
More than one .toc file can be set up and accessed should there be a
need to break the control definitions into several files (for example,
all pump controls could be placed in one file and sluice gate controls
in another).</p>
<p>Operational structure time-series data are output to the _1d_O.csv file.
The file reports the time varying status of the structure and the
resulting flow rate. Values of user defined variables and other
information are also output to this file. This is discussed in greater
detail within Section <a href="Viewing-Output-1.html#TS-GIS-3">15.3.4</a>.</p>
<div id="TOC-Logic-3" class="section level3 hasAnchor" number="5.10.1">
<h3><span class="header-section-number">5.10.1</span> .toc File Commands and Logic<a href="OneD-Domains-1.html#TOC-Logic-3" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div id="TOC-Define-4" class="section level4 hasAnchor" number="5.10.1.1">
<h4><span class="header-section-number">5.10.1.1</span> Define Control Command<a href="OneD-Domains-1.html#TOC-Define-4" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>A .toc file can only contain <a href="TOCCommands-1.html#tocDefineControl">Define Control</a> and
<a href="TOCCommands-1.html#tocEndfDefine">End Define</a> blocks.</p>
<p>Each <a href="TOCCommands-1.html#tocDefineControl">Define Control</a> must include a keyword
indicating the type of structure/device as per below:</p>
<p><tcmd>Define [ Culvert | Pump | Q Channel | Sluice | Spillway | Weir ] Control </tcmd><teq>==</teq><tblk> &lt;control_id&gt;</tblk><br />
 …<br />
<tcmd>End Define</tcmd></p>
<p>Where <tblk>&lt;control_id&gt;</tblk> is a unique control definition name, noting that
more than one structure can refer to the same operational control
definition. For example, several pumps of different capacities may
utilise the same operational control logic. The 1d_nwk Inlet_Type
attribute is used to link a control definition with the structure.</p>
<p>Within the control definition, commands specific to the type of
structure/device can be used to adjust the structure/device’s operation.
The commands available for each type of control are described below.</p>
<p>Each <a href="TOCCommands-1.html#tocDefineControl">Define Control</a> block consists of three sections:</p>
<ol style="list-style-type: decimal">
<li>The default settings for the control’s commands. These are usually
placed at the top of the definition and prior to the logical rules.
These default settings are used at the start of the
simulation/operation and during the operation unless changed by the
logical rules.<br />
</li>
<li>User defined variables as described further below.<br />
</li>
<li>One or more logical rules as described further below.</li>
</ol>
<p>An example of a definition control with the three sections is provided
below.</p>
<center>
<img src="images/image30.png"
style="width:7.87in;height:4.65in" />
</center>
</div>
<div id="UserDef-4" class="section level4 hasAnchor" number="5.10.1.2">
<h4><span class="header-section-number">5.10.1.2</span> User Defined Variables<a href="OneD-Domains-1.html#UserDef-4" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>If a line in the control definition cannot be processed as one of the
commands described above, and it is not within an If…End If block, it is
treated as a variable definition using the syntax:</p>
<p><tcmd>&lt;variable&gt; </tcmd><teq>==</teq><tblk> &lt;variable_value&gt;</tblk></p>
<p>Where <tcmd>&lt;variable&gt;</tcmd> is the variable name, while <tblk>&lt;variable_value&gt;</tblk> must
conform to one of the options in Table <a href="OneD-Domains-1.html#tab:tab-ValueTypes">5.19</a>. Any characters can
be used for the variable name, but it is recommended to use only
letters, numbers and underscores and to avoid spaces. Note that
variables can be redefined at any point within the control definition.
Also note that these variables only apply to the control. For global
variables, use the <a href="TCFCommands-1.html#tcfSetVariable">Set Variable</a> feature.</p>
<table>
<caption>
<span id="tab:tab-ValueTypes">Table 5.19: </span><strong>Variable Value Types</strong>
</caption>
<thead>
<tr>
<th style="text-align:left;font-weight: bold;color: WHITE !important;background-color: rgba(26, 189, 201, 255) !important;">
Variable Value
</th>
<th style="text-align:left;font-weight: bold;color: WHITE !important;background-color: rgba(26, 189, 201, 255) !important;">
Description
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
constant
</td>
<td style="text-align:left;">
Sets the variable to the value of &lt;constant&gt;. Must be a number. </constant>
</td>
</tr>
<tr>
<td style="text-align:left;">
Time of Model
</td>
<td style="text-align:left;">
Sets the variable to the simulation time in hours.
</td>
</tr>
<tr>
<td style="text-align:left;">
Time in 24H
</td>
<td style="text-align:left;">
Sets the variable to the simulation time in hours on a 24-hour clock (i.e. will always be between 0 and 24 hours). A simulation time of zero is equivalent to midnight.
</td>
</tr>
<tr>
<td style="text-align:left;">
Time Stamp
</td>
<td style="text-align:left;">
Sets the variable to the current simulation time and keep the variable constant until the variable is changed by a repeat execution of “Time Stamp”.
</td>
</tr>
<tr>
<td style="text-align:left;">
Day of Week
</td>
<td style="text-align:left;">
Sets the variable to the day of the week where Sunday is 1 and Saturday is 7. The keywords “Sun”, “Mon”, “Tue”, “Wed”, “Thu”, “Fri” and “Sat” can also be used when using the variable in a logic rule.
</td>
</tr>
<tr>
<td style="text-align:left;">
Period No Change
</td>
<td style="text-align:left;">
Sets the variable to the time in hours since there was last a change in operation.
</td>
</tr>
<tr>
<td style="text-align:left;">
H1D &lt;node_id&gt; </node_id>
</td>
<td style="text-align:left;">
Sets the variable to the water level at the 1D node named &lt;node_id&gt;. </node_id>
</td>
</tr>
<tr>
<td style="text-align:left;">
Q1D &lt;channel_id&gt; </channel_id>
</td>
<td style="text-align:left;">
Sets the variable to the flow in the 1D channel named &lt;channel_id&gt;. </channel_id>
</td>
</tr>
<tr>
<td style="text-align:left;">
H2D &lt;x&gt;,&lt;y&gt; </y></x>
</td>
<td style="text-align:left;">
Sets the variable to the water level at the 2D cell located at the XY coordinates &lt;x&gt;,&lt;y&gt; </y></x>
</td>
</tr>
<tr>
<td style="text-align:left;">
H2D &lt;2d_po_ID&gt;
</td>
<td style="text-align:left;">
Sets the variable to the water level at the 2D plot output location given by the plot output ID.
</td>
</tr>
<tr>
<td style="text-align:left;">
HU
</td>
<td style="text-align:left;">
Sets the variable to the 1D water level at the upstream node of the channel, based on the digitised direction of the channel.
</td>
</tr>
<tr>
<td style="text-align:left;">
HD
</td>
<td style="text-align:left;">
Sets the variable to the 1D water level at the downstream node of the channel based on the digitised direction of the channel.
</td>
</tr>
<tr>
<td style="text-align:left;">
dHUD
</td>
<td style="text-align:left;">
Sets the variable to the difference in water level between the upstream and downstream nodes based on the digitised direction of the channel. Will be negative if flow is in opposite direction to digitised direction.
</td>
</tr>
<tr>
<td style="text-align:left;">
H1
</td>
<td style="text-align:left;">
Sets the variable to the upstream water level of the channel based on the flow direction.
</td>
</tr>
<tr>
<td style="text-align:left;">
H2
</td>
<td style="text-align:left;">
Sets the variable to the downstream water level of the channel based on the flow direction.
</td>
</tr>
<tr>
<td style="text-align:left;">
dH12
</td>
<td style="text-align:left;">
Sets the variable to the difference in water level between the upstream and downstream nodes based on the flow direction of the channel. Will always be positive.
</td>
</tr>
<tr>
<td style="text-align:left;">
YU
</td>
<td style="text-align:left;">
Sets the variable to the depth above the structure invert of the upstream node based on the digitised direction of the channel.
</td>
</tr>
<tr>
<td style="text-align:left;">
YD
</td>
<td style="text-align:left;">
Sets the variable to the depth above the structure invert of the downstream node based on the digitised direction of the channel.
</td>
</tr>
<tr>
<td style="text-align:left;">
Y1
</td>
<td style="text-align:left;">
Sets the variable to the upstream depth relative to the structure invert based on the flow direction.
</td>
</tr>
<tr>
<td style="text-align:left;">
Y2
</td>
<td style="text-align:left;">
Sets the variable to the downstream depth relative to the structure invert based on the flow direction.
</td>
</tr>
</tbody>
</table>
<p>The 2020-10 release introduced a feature to allow operational control
channels to refer to the status/variables from other operational control
channels. This makes coordinated operations possible between multiple
operational structures. The supported status/variables include:</p>
<ul>
<li>“Period No Change” returns the time in hours since there was a change
in operation in another operational channel.<br />
</li>
<li>“Status” returns the operational status keywords in text format for
different types of operational channels. The full list of keywords is
summarised in Table <a href="OneD-Domains-1.html#tab:tab-StatusVariable">5.20</a>.<br />
</li>
<li>“Operational Variables” returns the numeric values of operational
variables from other operational channels, such as “Gate Height”,
“Weir Width”, etc. The full list of keywords is summarised in Table <a href="OneD-Domains-1.html#tab:tab-OperationalVariables">5.21</a>.</li>
</ul>
<p>The operational control channel ID (1d_nwk attribute) must be added at
the end of user defined variable commands listed above to refer to the
“Period of No Change”, “Status” or “Operational Variable” from other
operational channels, e.g.:</p>
<p><tcmd>&lt;variable&gt; </tcmd><teq>==</teq><tblk> Weir Height &lt;channel_ID&gt;</tblk></p>
<table>
<caption>
<span id="tab:tab-StatusVariable">Table 5.20: </span><strong>Keywords Returned by “Status” Variable</strong>
</caption>
<thead>
<tr>
<th style="text-align:left;font-weight: bold;color: WHITE !important;background-color: rgba(26, 189, 201, 255) !important;">
Operational Channels
</th>
<th style="text-align:left;font-weight: bold;color: WHITE !important;background-color: rgba(26, 189, 201, 255) !important;">
Status Strings
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
Pumps (PO)
</td>
<td style="text-align:left;">
“Off”, “Dry”, “Below Soffit”, “Starting”, “Stopping”, “Constant”, “Pump Curve”
</td>
</tr>
<tr>
<td style="text-align:left;">
Gated Drowned Rectangular Culverts (RO)<br />
Sluice Gates (SGO)<br />
Spillways with Gates (SPO)<br />
Weirs (WBO, WCO, WDO, WOO, WRO, WTO)<br />
Dam failure (DF)<br />
Pipe failure (PF)
</td>
<td style="text-align:left;">
“Opening”, “Closing”, “Steady”, “Closed”, “Fully Open”
</td>
</tr>
</tbody>
</table>
<table>
<caption>
<span id="tab:tab-OperationalVariables">Table 5.21: </span><strong>Values Returned by ‘Operational Variables’.</strong>
</caption>
<thead>
<tr>
<th style="text-align:left;font-weight: bold;color: WHITE !important;background-color: rgba(26, 189, 201, 255) !important;">
Operational Channels
</th>
<th style="text-align:left;font-weight: bold;color: WHITE !important;background-color: rgba(26, 189, 201, 255) !important;">
Operational Variables
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
Pumps (PO)
</td>
<td style="text-align:left;">
Pump Flow
</td>
</tr>
<tr>
<td style="text-align:left;">
Q channel (QO)
</td>
<td style="text-align:left;">
Q Opening, Q Fully Open
</td>
</tr>
<tr>
<td style="text-align:left;">
Gated Drowned Rectangular Culverts (RO)
</td>
<td style="text-align:left;">
Gate Height, Gate Width
</td>
</tr>
<tr>
<td style="text-align:left;">
Sluice Gates (SGO)
</td>
<td style="text-align:left;">
Gate Opening
</td>
</tr>
<tr>
<td style="text-align:left;">
Spillways with Gates (SPO)
</td>
<td style="text-align:left;">
Gate Opening
</td>
</tr>
<tr>
<td style="text-align:left;">
Weirs (WBO, WCO, WDO, WOO, WRO, WTO)
</td>
<td style="text-align:left;">
Weir Height, Weir Width
</td>
</tr>
<tr>
<td style="text-align:left;">
Dam failure (DF)
</td>
<td style="text-align:left;">
Breach Depth, Top Width
</td>
</tr>
<tr>
<td style="text-align:left;">
Pipe failure (PF)
</td>
<td style="text-align:left;">
Orifice Height, Orifice Width
</td>
</tr>
</tbody>
</table>
<p>In the example below, the model has an operational sluice gate
(“SGate1”) and an operational pump (“Pump1”). Pump1 calls the “status”
of SGate1 and operates only if SGate1’s status is “Closed”.</p>
<center>
<img src="images/image31.png"
style="width:6.29931in;height:2.76806in" />
</center>
</div>
<div id="Logic-4" class="section level4 hasAnchor" number="5.10.1.3">
<h4><span class="header-section-number">5.10.1.3</span> Logic Rules<a href="OneD-Domains-1.html#Logic-4" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>The logic rules consist of using If…End If blocks using the construct
below.</p>
<p><tcmd>If &lt;condition_1&gt; [ [ and | or ] &lt;condition_2&gt; ] [ [ and | or ] &lt;condition_3&gt; ]…</tcmd><br />
 <tblk>…enter one or more commands or variable definition lines</tblk><br />
<tcmd>[ Else If &lt;condition_1&gt; [ [ and | or ] &lt;condition_2&gt; ] [ [and | or ] &lt;condition_3&gt; ]…</tcmd><br />
 <tblk>…enter one or more commands or variable definition lines</tblk><br />
<tcmd>[ Else If…repeat as needed]</tcmd><br />
 <tblk>…enter one or more commands or variable definition lines</tblk><br />
<tcmd>[ Else</tcmd><br />
 <tblk>…enter one or more commands or variable definition lines</tblk><br />
<tcmd>End If</tcmd></p>
<p><tcmd>&lt;condition_1&gt;</tcmd> must be a conditional operation that includes one of the
symbols “=”, “&gt;”, “&gt;=”, “&lt;” or “&lt;=”. The left and right sides of the
condition must be a single value or a variable name. Optionally the
variable may be operated on by the following:</p>
<ul>
<li>A “+”, “-“, “*” or “/” and a constant value. For example, a condition
could be “x + 2 &lt; 3”; or<br />
</li>
<li>Specifying “HIGHER” or “LOWER” to compare the current value of the
variable to its value at the start of the current period of no change
in operation. For example, “x == LOWER” will be true if the current
value of ‘x’ is less than its value at the last time there was a
change in operation.</li>
</ul>
<p>If more than one condition is to be applied, the conditions must be
separated by either an “and” or “or”. &lt;condition_2&gt;, &lt;condition_3&gt;,
etc. have the same format as for &lt;condition_1&gt; above.</p>
<p>If…End If blocks can be nested inside other If…End If blocks. Indenting
is strongly recommended to make the control file easier to read.</p>
</div>
<div id="Increment-Operate-4" class="section level4 hasAnchor" number="5.10.1.4">
<h4><span class="header-section-number">5.10.1.4</span> Incremental Operators<a href="OneD-Domains-1.html#Increment-Operate-4" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>For the majority of the parameters / variables within a control block
these can be manipulated using simple arithmetic. For example, within a
control block, rather than opening a gate to a set opening height or
percentage it is possible to open by a set amount:</p>
<ul>
<li>Gate Opening % == 50 will open the gate to 50% open<br />
</li>
<li>Gate Opening % == ++ 10 will open the gate by 10% from its previous
position</li>
</ul>
<p>Four incremental / arithmetic operators are available, these are:</p>
<ul>
<li>++ increment up<br />
</li>
<li>-- increment down<br />
</li>
<li>** multiply<br />
</li>
<li>// divide</li>
</ul>
<p>These can be used with or without the percentage operator. Gate Opening
% == ++10 will open a gated structure by 10%, Gate Opening == ++ 1.0
will open a gated structure by a height of 1m.</p>
<p>The example below shows the control definition for a pump that operates
between 6am and 6pm Monday to Friday and 10am and 4pm on the weekends.</p>
<center>
<img src="images/image30.png"
style="width:6.29931in;height:3.7217in" />
</center>
<p>The example below shows the control definitions for a gravity released
discharge to a power station (modelled as a pump) and the gated
discharge through the reservoir (courtesy of Natural Resources
Department, Wales).</p>
<center>
<img src="images/image32.png"
style="width:6.29931in;height:6.19836in" />
</center>
</div>
</div>
<div id="Pumps-3" class="section level3 hasAnchor" number="5.10.2">
<h3><span class="header-section-number">5.10.2</span> Pumps (P and PO)<a href="OneD-Domains-1.html#Pumps-3" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Pumps can be modelled as a “P” or “PO” type channel. In non-operational
mode (P channel), the pump flow is interpolated from a head discharge
curve in the <a href="ECFCommands-1.html#ecfDepthDischargeDatabase">Depth Discharge Database</a>
defined via a head difference versus flow relationship – see Section
<a href="OneD-Domains-1.html#DD-Database-3">5.11.3</a>. In operational mode, PO, the pump flow can be varied using
functions such as: switching on and off over a start-up and shutdown
period; and changing the pump capacity and/or discharge curve according
to time, day of the week, hydraulic conditions and other variables.
Pumps do not contribute to any model storage.</p>
<p>In the 1d_nwk layer, the following attributes can be used to set up the
pump (also see Table <a href="OneD-Domains-1.html#tab:tab-SpecialAttributeDescriptions">5.18</a>).</p>
<ul>
<li>ID = Unique Channel ID.<br />
</li>
<li>Type = “P” or “PO”.<br />
</li>
<li>US_Invert = Intake elevation of the pump.<br />
</li>
<li>DS_Invert = Outlet elevation of the receptor.<br />
</li>
<li>Inlet_Type = For non-operated (P) pumps the pump discharge curve in
the <a href="ECFCommands-1.html#ecfDepthDischargeDatabase">Depth Discharge Database</a>. This curve
is a head difference versus discharge curve, therefore, for a pump
this curve would usually have greater flows for smaller head
differences. If the head difference is negative (i.e. the receptor
water level is below the intake water level) the discharge used is
that for a zero head difference. For operational (PO) pumps Inlet_Type
refers to the Pump operational control definition (see <a href="TOCCommands-1.html#tocDefineControl">Define
Control</a>).<br />
</li>
<li>Width_or_Dia = Diameter of the pump’s outlet pipe/hose. Used to
trigger dry conditions (see below) and for calculating the velocity.<br />
</li>
<li>Height_or_WF = For PO pumps the initial operating pump capacity for
fixed (constant) flow pumps (subject to not being overridden by an
operational control command).<br />
</li>
<li>Number_of = Number of (identical) pumps represented by the channel.</li>
</ul>
<p>P and PO pumps are simulated as dry (zero flow) if the upstream (intake)
node is dry or the upstream water level is below the intake elevation
plus the output pipe diameter (i.e. the upstream (intake) water level is
below the intake soffit, which equals the US_Invert + Width_or_Dia).</p>
<p>P pumps always produce a flow in the direction the P channel is
digitised based on that interpolated from the pump discharge curve; the
exception being when dry as described above.</p>
<p>PO pumps are typically operated on a time basis or based on hydraulic
conditions elsewhere in the model. Operational control commands specific
to the <a href="TOCCommands-1.html#tocDefineControl">Define Pump Control</a> command are provided
below. Subject to not being overridden by an operational control
command, PO pumps are assumed to be OFF at the start of the simulation.</p>
<ul>
<li><a href="TOCCommands-1.html#tocPumpOperation">Pump Operation</a> turns the pump on or off.<br />
</li>
<li><a href="TOCCommands-1.html#tocPeriodStartupShutdown">Period Startup/Shutdown</a> sets the time
taken to start the pump up or shut it down.<br />
</li>
<li><a href="TOCCommands-1.html#tocPumpCapacity">Pump Capacity</a> sets the flow capacity of the pump.
It is possible to set a constant flow rate or a head-discharge curve
referenced within the <a href="ECFCommands-1.html#ecfDepthDischargeDatabase">Depth Discharge Database</a>.<br />
</li>
<li><a href="TOCCommands-1.html#tocPumpNumber">Pump Number</a> sets the number of pumps in parallel.</li>
</ul>
<p>The operational status of each pump is reported over time in the _O.csv
output (see Section <a href="Viewing-Output-1.html#TS-GIS-3">15.3.4</a>). Possible status conditions include:</p>
<ul>
<li>“Off” is the pump is switched off.<br />
</li>
<li>“Dry” if the upstream (intake) node is dry.<br />
</li>
<li>“Below Soffit” if the upstream (intake) water level is below the
intake soffit.<br />
</li>
<li>“Starting” and “Stopping” indicate the pump is starting up or stopping
within <a href="TOCCommands-1.html#tocPeriodStartupShutdown">Period Startup/Shutdown</a>.<br />
</li>
<li>“Constant” indicates the pump has reached full flow capacity after
starting up and is operating at its constant (fixed) flow rate, or
“Pump Curve”, which indicates the pump is operating at a flow rate
based on interpolating into its head discharge curve.</li>
</ul>
</div>
<div id="QO-3" class="section level3 hasAnchor" number="5.10.3">
<h3><span class="header-section-number">5.10.3</span> QO Channels<a href="OneD-Domains-1.html#QO-3" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>For QO channels, depth discharge curves for different structure openings
are used to vary and control the discharge. The relationships are
contained in a csv file in a similar format as used for M channels (see
Section <a href="OneD-Domains-1.html#M-Channel-3">5.9.1</a>). The vertical axis is the depth above the
channel’s invert and the horizontal axis is the percentage opening as
shown in the example below. In the example, Column A contains the depth
above invert values and Row 2 the % opening values. Note that the value
in cell A2 is a flow multiplier. If this value is empty, negative or set
to zero (0), a multiplier of one (1) is used. The flow through the
channel is interpolated from this table at each timestep based on the
structure’s opening and upstream depth above the invert.</p>
<center>
<img src="images/image33.png"
style="width:5.22332in;height:2.53018in" />
</center>
<p>In the 1d_nwk layer, the following attributes can be used to set up a QO
channel.</p>
<ul>
<li>ID = Unique Channel ID.<br />
</li>
<li>Type = “QO”.<br />
</li>
<li>US_Invert = Elevation corresponding to zero depth in the
depth-discharge curve.<br />
</li>
<li>Inlet_Type = Contains both the control_ID and the link to the csv file
containing the matrix of flows for different openings and upstream
water level as per discussion above. For example, “DS_Gate |
QChannel.csv”.
<ul>
<li>The default field width for the inlet_type attribute is 12
characters, this may need to be increased to allow longer names to
be used. Instructions on how to change the GIS layer attribute type
in ArcMap, QGIS and MapInfo are provided on the TUFLOW Wiki as per
the links below:
<ul>
<li><a href="https://wiki.tuflow.com/Arc_Change_Attribute_Type">ArcMap</a><br />
</li>
<li><a href="https://wiki.tuflow.com/MI_Change_Attribute_Type">MapInfo</a><br />
</li>
<li><a href="https://wiki.tuflow.com/QGIS_Change_Attribute_Type">QGIS</a><br />
</li>
</ul></li>
</ul></li>
<li>Width_or_Dia = Not used other than to estimate the velocity and
contribute to nodal storage.</li>
</ul>
<p>The following commands are specific to the <a href="TOCCommands-1.html#tocDefineControl">Define Q Channel
Control</a> command used for QO channels.</p>
<ul>
<li><a href="TOCCommands-1.html#tocGateSpeed">Gate Speed</a> sets the speed the gate moves.<br />
</li>
<li><a href="TOCCommands-1.html#tocPeriodOpeningClosing">Period Opening/Closing</a> sets the time taken
to transition from zero to 100% opening or vice versa.<br />
</li>
<li><a href="TOCCommands-1.html#tocGateOpening">Gate Opening</a> sets the position of the opening to be
operated towards. This can be specified incrementally or as an
absolute value.</li>
<li><a href="TOCCommands-1.html#tocDischargeCurveType">Discharge Curve Type</a> sets how the depth/head discharge curves are calculated.</li>
</ul>
<p>An example of the GIS attributes and .toc commands for a QO channel are
provided below.</p>
<center>
<img src="images/image34.png"
style="width:2.78102in;height:3.8414in" /><img src="images/image35.png"
style="width:2.83856in;height:2.7224in" />
</center>
</div>
<div id="RO-3" class="section level3 hasAnchor" number="5.10.4">
<h3><span class="header-section-number">5.10.4</span> Gated Drowned Rectangular Culverts (RO)<a href="OneD-Domains-1.html#RO-3" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Rectangular culverts with a gate on the exit can be operated using the
.toc commands below for a <a href="TOCCommands-1.html#tocDefineControl">Define Culvert Control</a>
block. The command is applicable for operated rectangular (RO) culverts
only, and uses the equation below as implemented into TUFLOW for a
project based in Florida. The equation below is for US Customary Units,
but RO culverts can be used in metric or US Customary units. Note that
the equation is for submerged culverts only, therefore the user must
ensure that the culvert is drowned at all times.</p>
<center>
<img src="images/image36.png"
style="width:3.85246in;height:4.1771in" />
</center>
<ul>
<li><a href="TOCCommands-1.html#tocGateType">Gate Type</a> sets the type of gate arrangement.<br />
</li>
<li><a href="TOCCommands-1.html#tocGateSpeed">Gate Speed</a> sets the speed at which the gate moves.<br />
</li>
<li><a href="TOCCommands-1.html#tocPeriodOpeningClosing">Period Opening/Closing</a> sets the time taken
to fully open a closed gate or to fully close an open gate.<br />
</li>
<li><a href="TOCCommands-1.html#tocGateHeightFullyOpen">Gate Height Fully Open</a> sets the height (not
elevation) of the gate when fully open above the gate’s seat for
vertically moving gates. If not set, the 1d_nwk “Height” attribute is
used.<br />
</li>
<li><a href="TOCCommands-1.html#tocGateWidthFullyOpen">Gate Width Fully Open</a> sets the width of the
gate(s) when fully open for horizontally moving gates. If not set, the
1d_nwk “Width_or_Dia” attribute is used.<br />
</li>
<li><a href="TOCCommands-1.html#tocGateOpening">Gate Opening</a> sets the position the gate is to be
operated towards. This can be specified incrementally or as an absolute
value.<br />
</li>
<li><a href="TOCCommands-1.html#tocCd">Cd</a> sets the discharge coefficient <em>C<sub>d</sub></em> in the
equation above.</li>
</ul>
</div>
<div id="SG-SGO-3" class="section level3 hasAnchor" number="5.10.5">
<h3><span class="header-section-number">5.10.5</span> Sluice Gates (SG and SGO)<a href="OneD-Domains-1.html#SG-SGO-3" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Sluice gates can be operated using the .toc commands further below for a
<a href="TOCCommands-1.html#tocDefineControl">Define Sluice Control</a> block. The approach to
calculating the flow through the gate is based on that documented in the
HEC-RAS 4.0 Reference Manual as described below. For non-operated sluice
gates (SG) the gate is assumed to be in a fixed position based on the
1d_nwk Height_or_WF attribute value.</p>
<p>For a free-flowing sluice gate (i.e. upstream controlled) <em>Q</em> is calculated using:
<span class="math display" id="eq:equ-US-controlled">\[\begin{equation}
Q = C_{d}WB\sqrt{2gH_{1}}
\tag{5.16}
\end{equation}\]</span></p>
<p>Where:</p>
<ul>
<li><span class="math inline">\(Q = \ \)</span>Discharge<br />
</li>
<li><span class="math inline">\(C_{d} = \ \)</span>Discharge coefficient upstream controlled flow (default = 0.6)<br />
</li>
<li><span class="math inline">\(W = \ \)</span>Width<br />
</li>
<li><span class="math inline">\(B = \ \)</span>Height of gate opening above crest level<br />
</li>
<li><span class="math inline">\(H_{1} = \ \)</span>Upstream energy level – Crest level</li>
</ul>
<p>For downstream controlled flow:</p>
<p><span class="math display" id="eq:equ-DS-controlled">\[\begin{equation}
Q = C_{s}WB\sqrt{2g\mathrm{\Delta}H}
\tag{5.17}
\end{equation}\]</span></p>
<p>Where:</p>
<ul>
<li><span class="math inline">\(C_{s} = \ \)</span>Submerged discharge coefficient (default = 0.8)<br />
</li>
<li><span class="math inline">\(\mathrm{\Delta}H = \ \)</span>Upstream energy level – Downstream level</li>
</ul>
<p>For the transition between upstream controlled and full submergence downstream
controlled flow:</p>
<p><span class="math display" id="eq:equ-transition">\[\begin{equation}
Q = C_{d}WB\sqrt{2g3\mathrm{\Delta}H}
\tag{5.18}
\end{equation}\]</span></p>
<p>The transition between downstream and upstream controlled flow equations
is based on the degree of submergence calculated as the tailwater depth
above the spill crest divided by the upstream energy depth. For a ratio
below 0.67 upstream controlled flow applies, above 0.8 downstream
controlled flow and in between the transition equation applies.</p>
<p>Note that by default the energy level is used for calculating
<em>H<sub>1</sub></em> and <span class="math inline">\(\mathrm{\Delta}H\)</span>, however, this can be changed
as follows:</p>
<ul>
<li>Setting the global default to water surface level using <tcmd><a href="ECFCommands-1.html#ecfStructureFlowLevels">Structure Flow Levels</a></tcmd><teq> == </teq><tblk>WATER</tblk> or by using the “H” flag for the Type attribute (see Table <a href="OneD-Domains-1.html#tab:tab-LineTypesOptionalFlags">5.2</a>).</li>
<li>Setting the global default to energy at the upstream node and water level at the downstream node using <tcmd><a href="ECFCommands-1.html#ecfStructureFlowLevels">Structure Flow Levels</a></tcmd><teq> == </teq><tblk>ENERGY UPSTREAM</tblk> or by using the “EH” flag for the Type attribute (see Table <a href="OneD-Domains-1.html#tab:tab-LineTypesOptionalFlags">5.2</a>). This option was introduced in the 2023-03-AC build.</li>
</ul>
<p>When the flow is not in contact with the gate one of the following
options apply:</p>
<ul>
<li>One of the advanced weir types (see Section <a href="OneD-Domains-1.html#Adv-Weir-4">5.8.4.3</a>) can be
specified for the sill by adding the weir type to the 1d_nwk Type
attribute (e.g. “SGWB” or “SG WB” are accepted). The weir equation for
the weir type is applied when the gate is not controlling the flow.
It is recommended that one of the rectangular weir shapes is used
(i.e. WB, WD, WO or WR).<br />
</li>
<li>If no weir is associated with the SG channel, the flow is calculated using a zero length rectangular culvert channel with adjusted entrance and exit losses as per a zero length culvert. Note the total of the entrance and exit losses is defined by the ‘Form_Loss’ attribute (see Table <a href="OneD-Domains-1.html#tab:tab-SpecialAttributeDescriptions">5.18</a>), where 1/3 and 2/3 of the ‘Form_Loss’ value are assigned as entrance and exit losses, respectively (typically 0.5 and 1.0).</li>
</ul>
<p>In the 1d_nwk layer, the following attributes can be used to set up the SG or SGO channel.</p>
<ul>
<li>ID = Unique Channel ID.<br />
</li>
<li>Type = “SG” or “SGO”.<br />
</li>
<li>US_Invert and DS_Invert: The higher value is used for the sill crest.<br />
</li>
<li>Width_or_Dia = Width of the gate.<br />
</li>
<li>Height_or_WF = The height above the sill crest of the gate when fully
opened (subject to not being overridden by an operational control
command).<br />
</li>
<li>Number_of = Number of (identical) parallel gates.</li>
</ul>
<p>The following commands can be used within the <a href="TOCCommands-1.html#tocDefineControl">Define Sluice
Control</a> block.</p>
<ul>
<li><a href="TOCCommands-1.html#tocGateSpeed">Gate Speed</a> sets the speed the gate moves.<br />
</li>
<li><a href="TOCCommands-1.html#tocPeriodOpeningClosing">Period Opening/Closing</a> sets the time taken
to fully open a closed gate or to fully close an open gate.<br />
</li>
<li><a href="TOCCommands-1.html#tocGateHeightFullyOpen">Gate Height Fully Open</a> sets the height (not
elevation) of the gate when fully open above the gate’s seat for
vertically moving gates. If not set, the 1d_nwk “Height” attribute is
used.<br />
</li>
<li><a href="TOCCommands-1.html#tocGateOpening">Gate Opening</a> sets the position the gate is to be
operated towards. This can be specified incrementally or as an
absolute value.<br />
</li>
<li><a href="TOCCommands-1.html#tocCdGate">Cd Gate</a> sets the discharge coefficient of the gate,
<em>C<sub>d</sub></em>.<br />
</li>
<li><a href="TOCCommands-1.html#tocCdGateSubmerged">Cd Gate Submerged</a> sets the submerged discharge
coefficient, <em>C<sub>s</sub></em>.</li>
</ul>
</div>
<div id="SPO-3" class="section level3 hasAnchor" number="5.10.6">
<h3><span class="header-section-number">5.10.6</span> Spillways with Gates (SPO)<a href="OneD-Domains-1.html#SPO-3" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Gated spillways can be operated using the approach documented in the USACE Hydraulic Design Criteria Sheet 312 <span class="citation">(<a href="#ref-USACE1977">USACE, 1977</a>)</span> for Vertical Lift Gates on Spillways.</p>
<p>For flow over the spillway unaffected by a gate the following equation
applies:</p>
<p><span class="math display" id="eq:equ-spillway">\[\begin{equation}
Q = {\frac{2}{3}C}_{d}WH\sqrt{2gH}
\tag{5.19}
\end{equation}\]</span></p>
<p>Where:</p>
<ul>
<li><span class="math inline">\(Q = \ \)</span>Discharge<br />
</li>
<li><span class="math inline">\(C_{d} = \ \)</span>Discharge coefficient (default = 0.75)<br />
</li>
<li><span class="math inline">\(W = \ \)</span>Width of the spillway (rectangular cross-section assumed)<br />
</li>
<li><span class="math inline">\(H = \ \)</span>Upstream energy level – Crest level</li>
</ul>
<p><strong>NOTE: <em>C<sub>d</sub></em> prior to the 2016-03 release was based on</strong>
<span class="math inline">\(\mathbf{Q =}\mathbf{C}_{\mathbf{d}}\mathbf{WH}\sqrt{\mathbf{2}\mathbf{gH}}\)</span>
<strong>(as per Sheet 312), with a default <em>C<sub>d</sub></em> value of 0.5. As of
the 2016-03 release, SPO channels now use the same formula as SP and
weir channels and use a default value of 0.75.</strong></p>
<p>The ratio of the gated discharge to the ungated discharge is derived as:</p>
<p><span class="math display" id="eq:equ-ungated-discharge">\[\begin{equation}
\frac{Q_{G}}{Q} = \frac{C_{G}}{C_{d}}\left( \frac{H_{2}^{\frac{3}{2}} - H_{1}^{\frac{3}{2}}}{H^{\frac{3}{2}}} \right)
\tag{5.20}
\end{equation}\]</span></p>
<p>Where:</p>
<ul>
<li><span class="math inline">\(C_{G}\)</span> = Discharge coefficient (default = <span class="math inline">\(C_{d}\)</span>)<br />
</li>
<li><span class="math inline">\(H_{1}\)</span> and <span class="math inline">\(H_{2}\)</span> = See diagram below from Sheet 312</li>
</ul>
<p>If <em>Q<sub>G</sub></em> is less than <em>Q</em>, <em>Q<sub>G</sub></em> is used for the flow through the
structure. The structure is also tested for submergence using the same
setting as for Ogee Weirs (see Section <a href="OneD-Domains-1.html#Submerge-4">5.8.4.4</a>).</p>
<center>
<img src="images/image37.png" style="width:6.29931in;height:3.10903in" />
</center>
<p>Note that by default the energy level is used for calculating
<em>H<sub>1</sub></em> and <span class="math inline">\(\mathrm{\Delta}H\)</span>, however, this can be changed
as follows:</p>
<ul>
<li>Setting the global default to water surface level, using <tcmd><a href="ECFCommands-1.html#ecfStructureFlowLevels">Structure Flow Levels</a></tcmd><teq> == </teq><tblk>WATER</tblk>, or by using the “H” flag for the Type attribute (see Table <a href="OneD-Domains-1.html#tab:tab-LineTypesOptionalFlags">5.2</a>).</li>
<li>Setting the global default to energy at the upstream node and water level at the downstream node, using <tcmd><a href="ECFCommands-1.html#ecfStructureFlowLevels">Structure Flow Levels</a></tcmd><teq> == </teq><tblk>ENERGY UPSTREAM</tblk>, or by using the “EH” flag for the Type attribute (see Table <a href="OneD-Domains-1.html#tab:tab-LineTypesOptionalFlags">5.2</a>). This option was introduced in the 2023-03-AC build.</li>
</ul>
<p>In the 1d_nwk layer, the following attributes can be used to set up a
SPO channel. Note that the 1d_nwk values can be overridden by their
equivalent operational control command.</p>
<ul>
<li>ID = Unique Channel ID.<br />
</li>
<li>Type = “SPO”.<br />
</li>
<li>US_Invert = Spillway crest level.<br />
</li>
<li>DS_Invert = Gate seat level (see GATE SEAT EL in diagram from Sheet
312). If DS_Invert is higher than US_Invert <a href="https://wiki.tuflow.com/TUFLOW_Message_1050">ERROR 1050</a> results.<br />
</li>
<li>Width_or_Dia = Width of the gate.<br />
</li>
<li>Height_or_WF = The height of the gate above the gate seat when fully
opened.<br />
</li>
<li>Number_of = Number of (identical) parallel spillways.</li>
</ul>
<p>The following section lists commands specific to the <a href="TOCCommands-1.html#tocDefineControl">Define Spillway
Control</a> commands.</p>
<ul>
<li><a href="TOCCommands-1.html#tocGateSpeed">Gate Speed</a>: sets the speed the gate moves.</li>
<li><a href="TOCCommands-1.html#tocPeriodOpeningClosing">Period Opening/Closing</a>: sets the time taken
to fully open a closed gate or to fully close an open gate.</li>
<li><a href="TOCCommands-1.html#tocGateHeightFullyOpen">Gate Height Fully Open</a>: sets the height (not
elevation) of the gate when fully open above the gate’s seat for
vertically moving gates. If not set, the 1d_nwk “Height” attribute is
used.</li>
<li><a href="TOCCommands-1.html#tocGateSeatVerticalOffset">Gate Seat Vertical Offset</a>: sets the
difference in height between the spillway crest and the seat of the gate
(i.e. the CREST EL minus GATE SEAT EL in the diagram above from Sheet
312).</li>
<li><a href="TOCCommands-1.html#tocGateOpening">Gate Opening</a>: sets the position the gate is to be
operated towards. This can be specified incrementally or as an absolute
value. This value is G<sub>O</sub> in the diagram above from Sheet 312.</li>
<li><a href="TOCCommands-1.html#tocCdSpillway">Cd Spillway</a>: sets the discharge coefficient of the
spillway, <em>C<sub>d</sub></em>. Default value is 0.75.</li>
<li><a href="TOCCommands-1.html#tocCdGate">Cd Gate</a>: sets the discharge coefficient of the gate,
<em>C<sub>G</sub></em>. By default assumed to be the same as <a href="TOCCommands-1.html#tocCdSpillway">Cd Spillway</a> see Sheet 312.</li>
</ul>
</div>
<div id="Weirs-Operational-3" class="section level3 hasAnchor" number="5.10.7">
<h3><span class="header-section-number">5.10.7</span> Weirs (WBO, WCO, WDO, WOO, WRO, WTO)<a href="OneD-Domains-1.html#Weirs-Operational-3" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Weirs can be operated to simulate structures such as fabri (inflatable)
dams for the WB, WC, WD, WO, WR and WT weir types.</p>
<p>In addition to the 1d_nwk attributes for non-operated weirs (see
Section <a href="OneD-Domains-1.html#Adv-Weir-4">5.8.4.3</a>) the following criteria is used to set the
limiting dimensions via the 1d_nwk attributes as follows:</p>
<ul>
<li>Width_or_Dia = The width of the weir when fully open, or if the width
remains unchanged throughout.<br />
</li>
<li>Height_or_WF = The maximum height the weir can be raised above the
weir invert during operation. The weir invert level is defined by the
maximum of the US_Invert and DS_Invert attributes and represents the
elevation of the weir when fully lowered. Note that for operational
weirs the Height_or_WF attribute cannot be used to set the Weir
Calibration Factor, for which a value of 1.0 is used. For example, if
we wish to operate a weir up to an elevation of 15m for a structure
with 1d_nwk attributes US_Invert = 9.9m and DS_Invert = 10m the
following would apply:
<ul>
<li>The weir invert would be at an elevation of 10m (which corresponds
to a weir height of zero (0) m).<br />
</li>
<li>The Height_of_WF attribute would be 5m (i.e. a height of 5m above
the weir invert).</li>
</ul></li>
</ul>
<p>The following are the commands specific to <a href="TOCCommands-1.html#tocDefineControl">Define Weir
Control</a> blocks for operating weirs.</p>
<ul>
<li><a href="TOCCommands-1.html#tocWeirHeight">Weir Height</a>: sets the height above the weir crest to
operate towards.<br />
</li>
<li><a href="TOCCommands-1.html#tocWeirWidth">Weir Width</a>: sets the width of the weir to operate
towards.<br />
</li>
<li><a href="TOCCommands-1.html#tocWeirHeightSpeed">Weir Height Speed</a>: sets the speed of the weir in
the vertical.<br />
</li>
<li><a href="TOCCommands-1.html#tocWeirWidthSpeed">Weir Width Speed</a>: sets the speed of the weir in
the horizontal.<br />
</li>
<li>The generic commands <a href="TOCCommands-1.html#tocOperation">Operation</a> and <a href="TOCCommands-1.html#tocPeriodOpeningClosing">Period Opening/Closing</a> also apply.<br />
</li>
<li>Cf sets the weir calibration factor (default = 1.0). Note the
“Height_or_WF” attribute is used to define the height of the
operational weir above the crest level. This .toc command was added in
the 2020-10 release to specify the weir calibration factor
(<em>C<sub>f</sub></em>) for an operational weir.</li>
</ul>
<p>Note the default values of <a href="TOCCommands-1.html#tocWeirHeight">Weir Height</a> and <a href="TOCCommands-1.html#tocWeirWidth">Weir
Width</a> are both zero (0). To set the initial position of
the weir, specify these commands before the if logic block in the .toc
file.</p>
<p>The 2023-03-AB build introduced three new commands, based on Section 9.11 of <span class="citation">USBR (<a href="#ref-USBR1987">1987</a>)</span>, which includes an allowance for side or horizontal flow contraction caused by piers and abutments that contract the flow and reduces the flow width over the weir (<span class="math inline">\(W\)</span>) to an effective flow width (<span class="math inline">\(W&#39;\)</span>) using:</p>
<p><span class="math display" id="eq:equ-piers-on-weirs">\[\begin{equation}
W&#39; = W - 2(NK_{p} + K_{a})H_{e}
\tag{5.21}
\end{equation}\]</span></p>
<p>Where:</p>
<ul>
<li><span class="math inline">\(H_{e}\)</span> = Upstream energy or water level (see <a href="ECFCommands-1.html#ecfStructureFlowLevels">Structure Flow Levels</a> command).</li>
<li><span class="math inline">\(N\)</span> = Number of piers.</li>
<li><span class="math inline">\(K_{p}\)</span> = Pier contraction coefficient.</li>
<li><span class="math inline">\(K_{a}\)</span> = Abutment contraction coefficient.</li>
</ul>
<p>The new .toc file commands to specify the parameters are:</p>
<ul>
<li><a href="TOCCommands-1.html#tocNumberofPiers">Number of Piers</a>: Sets the number of piers over a weir (the default is zero, 2023-03-AB build and onwards).</li>
<li><a href="TOCCommands-1.html#tocKp">Kp</a>: Sets the pier contraction coefficient (the default is zero, 2023-03-AB build and onwards).</li>
<li><a href="TOCCommands-1.html#tocKa">Ka</a>: Sets the abutment contraction coefficient (the default is zero, 2023-03-AB build and onwards).</li>
</ul>
<p>Section 9.11 of <span class="citation">USBR (<a href="#ref-USBR1987">1987</a>)</span> recommends the following values for the pier contraction coefficient <span class="math inline">\(K_{p}\)</span>:</p>
<ul>
<li>Square-nosed piers with corners rounded on a radius equal to about 0.1 of the pier thickness: <span class="math inline">\(K_{p}\)</span> = 0.02</li>
<li>Round-nosed piers: <span class="math inline">\(K_{p}\)</span> = 0.01</li>
<li>Pointed-nose piers: <span class="math inline">\(K_{p}\)</span> = 0.0</li>
</ul>
<p>The recommended values for the abutment contraction coefficient <span class="math inline">\(K_{a}\)</span> depends on the shape of the abutment, the design head (<span class="math inline">\(H_{0}\)</span>) and the radius of abutment rounding:</p>
<ul>
<li>Square abutments with headwall at 90° to direction of flow: <span class="math inline">\(K_{a}\)</span> = 0.20</li>
<li>Rounded abutments with headwall at 90° to direction of flow, when 0.15<span class="math inline">\(H_{0}\)</span> ≤ <span class="math inline">\(r\)</span> ≤ 0.5<span class="math inline">\(H_{0}\)</span>: <span class="math inline">\(K_{a}\)</span> = 0.10<br />
</li>
<li>Rounded abutments where <span class="math inline">\(r\)</span> &gt; 0.5<span class="math inline">\(H_{0}\)</span>, and headwall is placed not more than 45° to direction of flow: <span class="math inline">\(K_{a}\)</span> = 0.0</li>
</ul>
<p>Note that in the relationship above, the effective flow width (<span class="math inline">\(W&#39;\)</span>) reduces linearly as the upstream head (<span class="math inline">\(H_{e}\)</span>) increases. The ratio of contraction calculated by this equation is usually small relative to the actual width of weir (<span class="math inline">\(W\)</span>). But to avoid unreasonable contraction ratios, a lower limit of 0.6<span class="math inline">\(W\)</span> is applied.</p>
</div>
<div id="PFDF-3" class="section level3 hasAnchor" number="5.10.8">
<h3><span class="header-section-number">5.10.8</span> Piping and Dam Failure<a href="OneD-Domains-1.html#PFDF-3" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>The 2020-10-AB build introduced two new operational channels for piping and dam failure:</p>
<ol style="list-style-type: decimal">
<li>“PF” type: can be used to model the pipe failure process, as discussed in Section <a href="OneD-Domains-1.html#PF-4">5.10.8.1</a>; and</li>
<li>“DF” type: can be used to model a dam/levee break, as discussed in Section <a href="OneD-Domains-1.html#DF-4">5.10.8.2</a>.</li>
</ol>
<p>In the 1d_nwk layer, the attributes in Table <a href="OneD-Domains-1.html#tab:tab-FailureAttributeDescriptions">5.22</a> can be used to set up the channel parameters.</p>
<table>
<caption>
<span id="tab:tab-FailureAttributeDescriptions">Table 5.22: </span><strong>Piping &amp; Dam Failure Channels: 1D Model Network (1d_nwk) Attribute Descriptions</strong>
</caption>
<thead>
<tr>
<th style="text-align:right;font-weight: bold;color: WHITE !important;background-color: rgba(26, 189, 201, 255) !important;">
No. 
</th>
<th style="text-align:left;font-weight: bold;color: WHITE !important;background-color: rgba(26, 189, 201, 255) !important;">
Default GIS Attribute Name
</th>
<th style="text-align:left;font-weight: bold;color: WHITE !important;background-color: rgba(26, 189, 201, 255) !important;">
Description
</th>
<th style="text-align:left;font-weight: bold;color: WHITE !important;background-color: rgba(26, 189, 201, 255) !important;">
Type
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right;">
1
</td>
<td style="text-align:left;">
ID
</td>
<td style="text-align:left;">
Unique identifier up to 12 characters in length. It may contain any character except for quotes and commas and cannot be blank. As a rule, spaces and special characters (e.g. “\”) should be avoided, although they are accepted.
</td>
<td style="text-align:left;">
Char(12)
</td>
</tr>
<tr>
<td style="text-align:right;">
2
</td>
<td style="text-align:left;">
Type
</td>
<td style="text-align:left;">
<p>“PF”: Piping Failure</p>
“DF”: Dam Failure
</td>
<td style="text-align:left;">
Char(4)
</td>
</tr>
<tr>
<td style="text-align:right;">
3
</td>
<td style="text-align:left;">
Ignore
</td>
<td style="text-align:left;">
If a “T”, “t”, “Y” or “y” is specified, the object will be ignored (T for True and Y for Yes). Any other entry, including a blank field, will treat the object as active.
</td>
<td style="text-align:left;">
Char(1)
</td>
</tr>
<tr>
<td style="text-align:right;">
4
</td>
<td style="text-align:left;">
UCS
</td>
<td style="text-align:left;">
Not used.
</td>
<td style="text-align:left;">
Char(1)
</td>
</tr>
<tr>
<td style="text-align:right;">
5
</td>
<td style="text-align:left;">
Len_or_ANA
</td>
<td style="text-align:left;">
Not used.
</td>
<td style="text-align:left;">
Float
</td>
</tr>
<tr>
<td style="text-align:right;">
6
</td>
<td style="text-align:left;">
n_nF_Cd
</td>
<td style="text-align:left;">
Not used.
</td>
<td style="text-align:left;">
Float
</td>
</tr>
<tr>
<td style="text-align:right;">
7
</td>
<td style="text-align:left;">
US_Invert
</td>
<td style="text-align:left;">
<p>“PF”: Inlet elevation of the piping.</p>
“DF”: Elevation of the dam crest level before failure.
</td>
<td style="text-align:left;">
Float
</td>
</tr>
<tr>
<td style="text-align:right;">
8
</td>
<td style="text-align:left;">
DS_Invert
</td>
<td style="text-align:left;">
<p>“PF”: Outlet elevation of the piping.</p>
“DF”: Not Used.
</td>
<td style="text-align:left;">
Float
</td>
</tr>
<tr>
<td style="text-align:right;">
9
</td>
<td style="text-align:left;">
Form_Loss
</td>
<td style="text-align:left;">
Not used.
</td>
<td style="text-align:left;">
Float
</td>
</tr>
<tr>
<td style="text-align:right;">
10
</td>
<td style="text-align:left;">
pBlockage
</td>
<td style="text-align:left;">
Not used.
</td>
<td style="text-align:left;">
Float
</td>
</tr>
<tr>
<td style="text-align:right;">
11
</td>
<td style="text-align:left;">
Inlet_Type
</td>
<td style="text-align:left;">
<p>“PF”: Refers to the Piping Failure operational control definition in .toc file.</p>
“DF”: Refers to the Dam Failure operational control definition in .toc file.
</td>
<td style="text-align:left;">
Char(256)
</td>
</tr>
<tr>
<td style="text-align:right;">
12
</td>
<td style="text-align:left;">
Conn_1D_2D
</td>
<td style="text-align:left;">
Not used.
</td>
<td style="text-align:left;">
Char(4)
</td>
</tr>
<tr>
<td style="text-align:right;">
13
</td>
<td style="text-align:left;">
Conn_No
</td>
<td style="text-align:left;">
Not used.
</td>
<td style="text-align:left;">
Integer
</td>
</tr>
<tr>
<td style="text-align:right;">
14
</td>
<td style="text-align:left;">
Width_or_Dia
</td>
<td style="text-align:left;">
<p>“PF”: Width of the piping orifice when fully breached.</p>
“DF”: Top width of the dam failure channel.
</td>
<td style="text-align:left;">
Float
</td>
</tr>
<tr>
<td style="text-align:right;">
15
</td>
<td style="text-align:left;">
Height_or_WF
</td>
<td style="text-align:left;">
<p>“PF”: Height of the piping orifice when fully breached.</p>
“DF”: Weir coefficient C<sub>d</sub> of the intact part.
</td>
<td style="text-align:left;">
Float
</td>
</tr>
<tr>
<td style="text-align:right;">
16
</td>
<td style="text-align:left;">
Number_of
</td>
<td style="text-align:left;">
Not used.
</td>
<td style="text-align:left;">
Integer
</td>
</tr>
<tr>
<td style="text-align:right;">
17
</td>
<td style="text-align:left;">
HConF_or_WC
</td>
<td style="text-align:left;">
Not used.
</td>
<td style="text-align:left;">
Float
</td>
</tr>
<tr>
<td style="text-align:right;">
18
</td>
<td style="text-align:left;">
WConF_or_WEx
</td>
<td style="text-align:left;">
Not used.
</td>
<td style="text-align:left;">
Float
</td>
</tr>
<tr>
<td style="text-align:right;">
19
</td>
<td style="text-align:left;">
EntryC_or_WSa
</td>
<td style="text-align:left;">
Not used.
</td>
<td style="text-align:left;">
Float
</td>
</tr>
<tr>
<td style="text-align:right;">
20
</td>
<td style="text-align:left;">
ExitC_or_WSb
</td>
<td style="text-align:left;">
Not used.
</td>
<td style="text-align:left;">
Float
</td>
</tr>
</tbody>
</table>
<div id="PF-4" class="section level4 hasAnchor" number="5.10.8.1">
<h4><span class="header-section-number">5.10.8.1</span> Piping Failure (PF)<a href="OneD-Domains-1.html#PF-4" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Dam/levee breaks can be initiated by flow overtopping, or by internal erosion (often called “piping” or “piping failure”) when
water seeps through the embankment forming a tiny flow path. This “pipe failure” process can be modelled using a “PF” type 1D operational channel. In the 1d_nwk layer, the attributes in Table <a href="OneD-Domains-1.html#tab:tab-FailureAttributeDescriptions">5.22</a> can be used to set up the channel parameters.</p>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:fig-image38"></span>
<img src="images/image38.png" alt="**Schematisation of 1D Piping Failure**" width="60%" />
<p class="caption">
Figure 5.12: <strong>Schematisation of 1D Piping Failure</strong>
</p>
</div>
<p>Operational control commands (.toc file) specific to the Piping Failure
channel are provided below:</p>
<ul>
<li><a href="TOCCommands-1.html#tocPeriodFailure">Period Failure</a>: sets the time taken to reach the
full size of piping failure.<br />
</li>
<li><a href="TOCCommands-1.html#tocOrificeWidthFullyOpen">Orifice Width Fully Open</a>: sets the width
or the diameter of the piping orifice when fully breached. If omitted,
the value set by the 1d_nwk Width_or_Dia attribute is used.<br />
</li>
<li><a href="TOCCommands-1.html#tocOrificeHeightFullyOpen">Orifice Height Fully Open</a>: sets the
height of the piping orifice when fully breached. If omitted, the
value set by the 1d_nwk Height_or_WF attribute is used.<br />
</li>
<li><a href="TOCCommands-1.html#tocPeriodCollapse">Period Collapse</a>: sets the time taken to ‘shut
down’ the piping failure channel after it reaches the full extent due
to the channel collapsing.<br />
</li>
<li><a href="TOCCommands-1.html#tocOrificeOpening">Orifice Opening</a>: sets the piping failure status.<br />
</li>
<li><a href="TOCCommands-1.html#tocCd">Cd</a>: sets the discharge coefficient in the orifice flow
equation below.</li>
</ul>
<p>The flow rate through a piping failure channel is calculated using the orifice flow equation as provided below. Note that zero flow is
assumed should the upstream water level fall below the orifice obvert,
i.e. no partial flow of the orifice is assumed to occur.</p>
<p><span class="math display" id="eq:equ-orifice-flow">\[\begin{equation}
Q = C_{d}A\sqrt{2g\left( H_{up} - H_{down} \right)}
\tag{5.22}
\end{equation}\]</span></p>
<p>Where</p>
<ul>
<li><span class="math inline">\(C_{d}\)</span> is the discharge coefficient set by <a href="TOCCommands-1.html#tocCd">Cd</a> command<br />
</li>
<li><span class="math inline">\(A\)</span> is the cross-sectional area of the orifice<br />
</li>
<li><span class="math inline">\(H_{up}\)</span> is the upstream water level<br />
</li>
<li><span class="math inline">\(H_{down}\)</span> is the higher of the downstream obvert or downstream water level</li>
</ul>
<p>It is assumed the orifice shape is rectangular, and the orifice size increases
linearly with time. The expansion of the orifice is assumed to be
centrally around the upstream and downstream inverts.</p>
<p>An example of a .toc file <a href="TOCCommands-1.html#tocDefineControl">Define Pipe Failure Control</a> block is provided below:</p>
<center>
<img src="images/image39.png"
style="width:6.29931in;height:2.73403in" />
</center>
</div>
<div id="DF-4" class="section level4 hasAnchor" number="5.10.8.2">
<h4><span class="header-section-number">5.10.8.2</span> Dam Failure (DF)<a href="OneD-Domains-1.html#DF-4" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>The dam failure “DF” type 1D operational channel can be used to model dam/levee breaks in 1D. This channel can commence independently,
or be triggered by a 1D pipe failure using “PF” type trigger. The flow
rate is calculated based on the advanced weir flow equation (Section
<a href="OneD-Domains-1.html#Adv-Weir-4">5.8.4.3</a>). Either a rectangular or trapezoidal cross-section can be
applied, and the opening size is assumed to increase linearly with time.
In the 1d_nwk layer, the attributes in Table <a href="OneD-Domains-1.html#tab:tab-FailureAttributeDescriptions">5.22</a> can be used to set up the channel parameters.</p>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:fig-image40"></span>
<img src="images/image40.png" alt="**Schematisation of 1D Dam Failure**" width="60%" />
<p class="caption">
Figure 5.13: <strong>Schematisation of 1D Dam Failure</strong>
</p>
</div>
<p>Operational control commands specific to the Dam Failure channel are
provided below:</p>
<ul>
<li><a href="TOCCommands-1.html#tocPeriodFailure">Period Failure</a>: sets the time taken to reach the
full size of the dam failure.<br />
</li>
<li><a href="TOCCommands-1.html#tocTopWidthFullyBreached">Top Width Fully Breached</a>: Same as the
“Height_or_WF” attribute.<br />
</li>
<li><a href="TOCCommands-1.html#tocDepthFullyBreached">Depth Fully Breached</a>: Same as the
“Width_or_Dia” attribute.<br />
</li>
<li><a href="TOCCommands-1.html#tocSideSlopeDegree">Side Slope (degree)</a>: Sets the angle of the side slopes.
This is used for calculating the bottom width and flow area.<br />
</li>
<li><a href="TOCCommands-1.html#tocPeriodCollapse">Period Collapse</a>: Defines the time taken to
form the dam breach opening at the start of the dam
break.<br />
</li>
<li><a href="TOCCommands-1.html#tocDepthCollapse">Depth Collapse</a>: defines the depth of the dam
crest collapse during <a href="TOCCommands-1.html#tocPeriodCollapse">Period Collapse</a> at the
beginning of the dam break.<br />
</li>
<li><a href="TOCCommands-1.html#tocBreachOpening">Breach Opening</a>: Sets the dam failure status.</li>
</ul>
<p>During any period of the dam failure, the Side Slope is set as constant.
If the bottom width calculated from the width, depth and the side slope
becomes negative, a V shaped cross-section is assumed based on the width
and the side slope. A DF channel can be subject to one of the following
three flow phases, depending on the upstream water level and state of
the breach:</p>
<ul>
<li><p>Flow overtopping above the crest level can occur before the dam break.
At this stage, all the water is flowing through the “Intact” section
of the dam crest.</p>
<center>
<p><img src="images/image41.png" style="width:3.93701in;height:1.91038in" /></p>
</center></li>
<li><p>After the dam break commences, the water can flow through both the
“Intact” section of the dam crest (provided the upstream water level
is greater than the invert of the intact section), and the “failed”
section. The total flow is reported in the .eof file and the _1d_Q.csv
output file, while the flow rate for each section is reported
separately in the _1d_O.csv output file.</p>
<center>
<p><img src="images/image42.png" style="width:3.94028in;height:2.22708in" /></p>
</center></li>
<li><p>Once the maximum breach width is reached or there is no flow over any
remaining intact sections, the flow is confined entirely within the
“Failed” section.</p>
<center>
<p><img src="images/image43.png" style="width:3.94028in;height:1.76042in" /></p>
</center></li>
</ul>
<p>The flow calculation through a 1D dam break channel is computed for both
the intact and failed sections, with the user able to set the weir flow
equation parameters separately for both sections as per the table below.</p>
<table>
<caption>
<span id="tab:tab-WeirFlowTOCCommands">Table 5.23: </span><strong>.toc Commands to Set Weir Flow Equation Parameters in DF Channel</strong>
</caption>
<thead>
<tr>
<th style="text-align:left;font-weight: bold;color: WHITE !important;background-color: rgba(26, 189, 201, 255) !important;">
“Intact” Section
</th>
<th style="text-align:left;font-weight: bold;color: WHITE !important;background-color: rgba(26, 189, 201, 255) !important;">
“Failed” Section
</th>
<th style="text-align:left;font-weight: bold;color: WHITE !important;background-color: rgba(26, 189, 201, 255) !important;">
Description
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
<a href="TOCCommands-1.html#tocWeirTypeIntactFailed">Weir Type Intact</a>
</td>
<td style="text-align:left;">
<a href="TOCCommands-1.html#tocWeirTypeIntactFailed">Weir Type Failed</a>
</td>
<td style="text-align:left;">
Sets the weir channel type using the flags in Table <a href="OneD-Domains-1.html#tab:tab-WeirTypes">5.14</a>. If this command is not specified, the defaults are “WB” for the Intact section and “WW” for the failed section. Note that the “Side Slope” is not considered in the cross-section calculation for non-WW type weirs.
</td>
</tr>
<tr>
<td style="text-align:left;">
<a href="TOCCommands-1.html#tocCdIntactFailed">Cd Intact</a>
</td>
<td style="text-align:left;">
<a href="TOCCommands-1.html#tocCdIntactFailed">Cd Failed</a>
</td>
<td style="text-align:left;">
Sets the weir coefficient, <em>C<sub>d</sub></em>, in its dimensionless form.
</td>
</tr>
<tr>
<td style="text-align:left;">
<a href="TOCCommands-1.html#tocCfIntactFailed">Cf Intact</a>
</td>
<td style="text-align:left;">
<a href="TOCCommands-1.html#tocCfIntactFailed">Cf Failed</a>
</td>
<td style="text-align:left;">
Sets the weir coefficient adjustment factor <em>C<sub>f</sub></em>.
</td>
</tr>
<tr>
<td style="text-align:left;">
<a href="TOCCommands-1.html#tocExIntactFailed">Ex Intact</a>
</td>
<td style="text-align:left;">
<a href="TOCCommands-1.html#tocExIntactFailed">Ex Failed</a>
</td>
<td style="text-align:left;">
Sets the weir flow equation exponent <em>E<sub>x</sub></em>.
</td>
</tr>
<tr>
<td style="text-align:left;">
<a href="TOCCommands-1.html#tocSaIntactFailed">Sa Intact</a>
</td>
<td style="text-align:left;">
<a href="TOCCommands-1.html#tocSaIntactFailed">Sa Failed</a>
</td>
<td style="text-align:left;">
Sets the submergence factor “a” exponent in the Villemonte Equation for calculating the weir submergence factor <em>C<sub>sf</sub></em>.
</td>
</tr>
<tr>
<td style="text-align:left;">
<a href="TOCCommands-1.html#tocSbIntactFailed">Sb Intact</a>
</td>
<td style="text-align:left;">
<a href="TOCCommands-1.html#tocSbIntactFailed">Sb Failed</a>
</td>
<td style="text-align:left;">
Sets the submergence factor “b” exponent in the Villemonte Equation for calculating the weir submergence factor <em>C<sub>sf</sub></em>.
</td>
</tr>
</tbody>
</table>
<p>An example of a <a href="TOCCommands-1.html#tocDefineControl">Define Dam Failure Control</a> block is
provided below:</p>
<center>
<img src="images/image44.png" style="width:6.29931in;height:4.04236in"
alt="Text Description automatically generated" />
</center>
<p>The <span class="citation">USBR (<a href="#ref-USBR1987">1987</a>)</span> approach to include an allowance for side or horizontal flow contraction caused by piers and abutments can be optionally applied for the “Intact” part of a DF channel (see Section <a href="OneD-Domains-1.html#Weirs-Operational-3">5.10.7</a>). The 2023-03-AB build introduced the following three new commands:</p>
<ul>
<li><a href="TOCCommands-1.html#tocNumberofPiers">Number of Piers</a>: Sets the number of piers over the weir (the default is zero, 2023-03-AB build and onwards).</li>
<li><a href="TOCCommands-1.html#tocKpIntact">Kp Intact</a>: Sets the pier contraction coefficient (the default is zero, 2023-03-AB build and onwards).</li>
<li><a href="TOCCommands-1.html#tocKaIntact">Ka Intact</a>: Sets the abutment contraction coefficient (the default is zero, 2023-03-AB build and onwards).</li>
</ul>
</div>
</div>
</div>
<div id="Pipes-2" class="section level2 hasAnchor" number="5.11">
<h2><span class="header-section-number">5.11</span> Pipe Networks<a href="OneD-Domains-1.html#Pipes-2" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Pipe networks can be modelled using two different approaches, or a combination of these approaches:</p>
<ol style="list-style-type: decimal">
<li>Detailed modelling by defining the physical
features of the pipe network using 1d_nwk channels to represent
pipes, 1d_pit or 1d_nwk nodes to represent pits, and 1d_mh nodes to
represent manholes, as discussed within this Section.<br />
</li>
<li>An approximate approach termed Virtual Pipes is also available if
the pipe details are unknown though inlet and outlet information is
available. A Virtual Pipe network can be modelled using 1d_pit or
1d_nwk nodes to represent inlets and outlets between which flow is
instantaneously transferred or exits the model (i.e. no physical routing is
calculated). Virtual pipes are discussed in Section <a href="OneD-Domains-1.html#Virtual-Pipes-2">5.12</a>.</li>
</ol>
<p>Complete 1D pipe networks and Virtual pipe pits can coexist in the same
model. From the 2020-10 release and onwards, in TUFLOW HPC, virtual pipe outputs can connect to, and discharge into, the upstream or downstream end of a channel.</p>
<p>TUFLOW 1D produces a true HGL, with all losses accounted for. Different methods are available to quantify the losses at junctions and manholes, with the default setting being the Englehund approach, which automatically adjusts losses every timestep according to the expansion/contraction of flow, and changes in pipe direction, slope, inverts, etc.</p>
<p>Note that care should be taken in interpreting the HGL profile as the water level output currently only supports one level, which is the level in the manhole chamber (ie. after expansion losses into the chamber have been accounted for, or after a free-overfalling pipe outlet discharges into the manhole). Therefore, especially where upstream controlled flow regimes occur (eg. free outflow), the profile may appear to intersect the pipe invert profile.</p>
<div id="Pipes-3" class="section level3 hasAnchor" number="5.11.1">
<h3><span class="header-section-number">5.11.1</span> Pipes<a href="OneD-Domains-1.html#Pipes-3" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Culverts within a pipe network are created by digitising lines within
one or more 1d_nwk GIS layers and assigning a type C, R or I (refer to
Section <a href="OneD-Domains-1.html#culverts-pipes-3">5.8.1</a>). The culverts are considered linked when the
channel ends are snapped to one another or they are connected by a connector (“X” channel). Connectivity between the
underground pipe with the surface above is defined using pits (see
Section <a href="OneD-Domains-1.html#Pits-3">5.11.2</a>). Pipe junctions are referred to as manholes in
TUFLOW terminology and can occur with or without pits (see Section
<a href="OneD-Domains-1.html#Manholes-3">5.11.4</a>). TUFLOW includes a range of energy dissipation options at
junctions. These are also discussed in Section <a href="OneD-Domains-1.html#Manholes-3">5.11.4</a>.</p>
</div>
<div id="Pits-3" class="section level3 hasAnchor" number="5.11.2">
<h3><span class="header-section-number">5.11.2</span> Pits<a href="OneD-Domains-1.html#Pits-3" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Pits are used for two purposes.</p>
<ol style="list-style-type: decimal">
<li>In pipe network models (Section <a href="OneD-Domains-1.html#Pipes-3">5.11.1</a>), pits transfer water
between the 2D domain on the surface and a 1D pipe network
underground.<br />
</li>
<li>In virtual pipe networks (Section <a href="OneD-Domains-1.html#Virtual-Pipes-2">5.12</a>), pits define inlet
and outlet locations.</li>
</ol>
<p>Pits are defined by digitising points within one or more 1d_pit or
1d_nwk layers. Of these two alternatives the 1d_pit layer is the most
efficient option. It excludes superfluous attributes included in the
1d_nwk format that are required for other uses (such as 1D pipe or open
channel details). Both options are described in the following sections.</p>
<p>The following notes apply to pits:</p>
<ul>
<li>For pits connected to a channel start or end (usually a pipe), either
by snapping or via an “X” channel, or are within the <a href="ECFCommands-1.html#ecfPitSearchDistance">Pit Search
Distance</a>, the pit calculations are carried out
by ESTRY and it is assumed a pipe network is being modelled.
<ul>
<li>Under this scenario TUFLOW/ESTRY will automatically create a short
channel called a “pit channel” to connect the 2D domain (surface) to
the underground 1D pipe network. The pit channel is computationally
“zero length” and does not contribute to any storage in the system
(noting that the Len_or_ANA attribute is used to specify the surface
area or storage of the pit chamber).<br />
</li>
<li>The pit inlet capacities curves are specified in a <a href="ECFCommands-1.html#ecfPitInletDatabase">Pit
Inlet Database</a> (see Section <a href="OneD-Domains-1.html#DD-Database-3">5.11.3</a>) for
“Q” type pits in Table <a href="OneD-Domains-1.html#tab:tab-PitsModelNetwork">5.24</a>.<br />
</li>
</ul></li>
<li>Unconnected pits, (i.e. pits not snapped/connected to a channel end or within the <a href="ECFCommands-1.html#ecfPitSearchDistance">Pit Search
Distance</a> of a channel end), or VPI and VPO pits,
are used for virtual pipe modelling and the following
logic applies:
<ul>
<li>The virtual pipe pit inlet capacity curves are specified in a <a href="ECFCommands-1.html#ecfPitInletDatabase">Pit
Inlet Database</a> (see Section <a href="OneD-Domains-1.html#DD-Database-3">5.11.3</a>) for
a “VPI” or “Q” type pit in Table <a href="OneD-Domains-1.html#tab:tab-PitsAttributeDescriptions">5.25</a>.<br />
</li>
<li>VPI and VPO type pits are always treated as disconnected (i.e.
virtual pipe inlets or outlets), even if snapped or within a <a href="ECFCommands-1.html#ecfPitSearchDistance">Pit
Search Distance</a>.
<ul>
<li>For Classic, all unconnected pits and VPI pits are treated as being
connected to a virtual pipe. The pit’s discharge is extracted from
the model on the assumption there are no backwater or surcharging
effects at that pit. For example, free flow into the ocean. Note:
VPO pits are not supported in Classic and will show zero flow.<br />
</li>
<li>For HPC, all VPI and VPO discharges are calculated by the HPC solver
as per the virtual pipe feature. For all other unconnected pits,
their discharges are calculated by the TUFLOW 1D solver (ESTRY) in
the same manner as for Classic above.<br />
</li>
</ul></li>
</ul></li>
<li>A <a href="https://wiki.tuflow.com/TUFLOW_Message_1626">CHECK 1626</a> message is issued for unconnected pits (excluding VPI and VPO
pits), alerting the modeller to the possibility of a pit possibly
being inadvertently not snapped or within the <a href="ECFCommands-1.html#ecfPitSearchDistance">Pit Search
Distance</a>. If all the pits should be connected
(excluding VPI and VPO pits), the user can specify the .ecf command
<a href="TCFCommands-1.html#tcfPitNo1DConnection">Pit No 1D Connection</a> to force an <a href="https://wiki.tuflow.com/TUFLOW_Message_1626">ERROR 1626</a>
in the case of a pit not being connected by snapping or within the
<a href="ECFCommands-1.html#ecfPitSearchDistance">Pit Search Distance</a>.<br />
</li>
<li>If a pit cannot be connected to an overland 2D domain
(because, for example, it does not fall on an active cell), a WARNING
is issued and the pit channel will remain
unconnected.</li>
<li>In the various 1D output and the 1d_nwk check files, the pit channels
that are snapped to a channel end are displayed as a small channel
orientated in the north-south axis, not a node (point). The display
length of the channel is, by default, set to 10 m, however, this can
be changed using <a href="ECFCommands-1.html#ecfPitChannelOffset">Pit Channel Offset</a>. For pits
connected using <a href="ECFCommands-1.html#ecfPitSearchDistance">Pit Search Distance</a>, the pit
is displayed as extending from its connected node.<br />
</li>
<li>Flow through unconnected pits will appear in the mass balance
reporting as follows:
<ul>
<li>Within the _MB2D.csv or _HPC.csv “As SX V In” and “Es SX V Out” SX
in and out flow columns.<br />
</li>
<li>For unconnected pits calculated by ESTRY the discharge exiting the
model is included in the _MB1d.csv or _MB.csv “H Vol Out” column.<br />
</li>
<li>For HPC VPI and VPO pits the volumes exiting or entering the model
are included in the SX Volumes.<br />
</li>
</ul></li>
<li>The downstream node of an unconnected pit channel will have a boundary
type “V” in the .eof file as shown below.<br />

<center>
<img src="images/image51.jpeg" style="width:4.71875in;height:1.29167in"
alt="image003" />
</center></li>
<li>For an unconnected pit, which must have an ID, the upstream and
downstream nodes are assigned .1 and .2 extensions respectively.<br />
</li>
<li>If a connected pit’s node ID is left blank the pit channel ID is given
a “.P” extension based on the pit node’s automatically assigned ID
(see Section <a href="OneD-Domains-1.html#Nodes-2">5.13</a>). The upstream (ground) node ID of the pit
channel is given the pit channel’s ID with a “.0” extension.<br />
</li>
<li><a href="ECFCommands-1.html#ecfMinimumNAPit">Minimum NA Pit</a> sets the minimum NA (Nodal Area) of
the upstream (ground) nodes for all pit channels. This command was
introduced to differentiate upstream pit channel nodes from the
<a href="ECFCommands-1.html#ecfMinimumNA">Minimum NA</a> setting.</li>
</ul>
<div id="OneD-pit-nwk-4" class="section level4 hasAnchor" number="5.11.2.1">
<h4><span class="header-section-number">5.11.2.1</span> 1d_nwk Pits<a href="OneD-Domains-1.html#OneD-pit-nwk-4" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Pits are created by digitising points within one or more 1d_nwk GIS
layers and setting the “Type” attribute to C, Q, R or W (refer to Table <a href="OneD-Domains-1.html#tab:tab-PointObjectTypes">5.29</a>). Table <a href="OneD-Domains-1.html#tab:tab-PitsModelNetwork">5.24</a> describes the 1d_nwk attributes required for pits defined in the 1d_nwk
format.</p>
<table>
<caption>
<span id="tab:tab-PitsModelNetwork">Table 5.24: </span><strong>Pits: 1D Model Network (1d_nwk) Attribute Descriptions</strong>
</caption>
<thead>
<tr>
<th style="text-align:right;font-weight: bold;color: WHITE !important;background-color: rgba(26, 189, 201, 255) !important;">
No. 
</th>
<th style="text-align:left;font-weight: bold;color: WHITE !important;background-color: rgba(26, 189, 201, 255) !important;">
Default GIS Attribute Name
</th>
<th style="text-align:left;font-weight: bold;color: WHITE !important;background-color: rgba(26, 189, 201, 255) !important;">
Description
</th>
<th style="text-align:left;font-weight: bold;color: WHITE !important;background-color: rgba(26, 189, 201, 255) !important;">
Type
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right;">
1
</td>
<td style="text-align:left;">
ID
</td>
<td style="text-align:left;">
<p>Unique identifier up to 12 characters in length. For pits connected to a 1d_nwk channel, either by being snapped or connected using <a href="ECFCommands-1.html#ecfPitSearchDistance">Pit Search Distance</a>, if ID is blank the pit channel’s ID is automatically assigned based on one of the connecting channel IDs. For pits not connected to a channel, ID cannot be blank and must be unique.</p>
ID may contain any character except for quotes and commas. As a general rule, spaces and special characters (e.g. “\”) should be avoided, although they are accepted. The same ID can be used for a channel and a node, but no two nodes and no two channels can have the same ID.
</td>
<td style="text-align:left;">
Char(12)
</td>
</tr>
<tr>
<td style="text-align:right;">
2
</td>
<td style="text-align:left;">
Type
</td>
<td style="text-align:left;">
Used to specify a Pit Channel as one of C, Q, R or W as per Table <a href="OneD-Domains-1.html#tab:tab-PointObjectTypes">5.29</a>.
</td>
<td style="text-align:left;">
Char(4)
</td>
</tr>
<tr>
<td style="text-align:right;">
3
</td>
<td style="text-align:left;">
Ignore
</td>
<td style="text-align:left;">
If a “T”, “t”, “Y” or “y” is specified, the object will be ignored (T for True and Y for Yes). Any other entry, including a blank field, will treat the object as active.
</td>
<td style="text-align:left;">
Char(1)
</td>
</tr>
<tr>
<td style="text-align:right;">
4
</td>
<td style="text-align:left;">
UCS<br />
(Use Channel Storage at nodes).
</td>
<td style="text-align:left;">
Not used.
</td>
<td style="text-align:left;">
Char(1)
</td>
</tr>
<tr>
<td style="text-align:right;">
5
</td>
<td style="text-align:left;">
Len_or_ANA
</td>
<td style="text-align:left;">
<p>Adds the value specified as additional nodal area (surface area in m2). If no nodal area data exists for the node, either via the UCS attribute from the connected 1d_nwk channels, or via a NA table, TUFLOW automatically creates an NA table of constant surface area.</p>
If a negative value is specified, this value is used as a multiplier of the node storage. For example, a value of -1.5 increases the nodal storage table (NA table) by 50% (or to reduce storage use a value between -1 and 0). Increasing storage can be useful to stabilise problematic 1D nodes, provided that the added storage does not adversely distort the results. This multiplication is applied after any effect of <a href="ECFCommands-1.html#ecfMinimumChannelStorageLength">Minimum Channel Storage Length</a>. <a href="ECFCommands-1.html#ecfMinimumNA">Minimum NA</a> is applied after the multiplication.
</td>
<td style="text-align:left;">
Float
</td>
</tr>
<tr>
<td style="text-align:right;">
6
</td>
<td style="text-align:left;">
n_nF_Cd
</td>
<td style="text-align:left;">
Not used.
</td>
<td style="text-align:left;">
Float
</td>
</tr>
<tr>
<td style="text-align:right;">
7
</td>
<td style="text-align:left;">
US_Invert
</td>
<td style="text-align:left;">
<p>Used to specify the ground elevation of the pit. This is used to set the upstream and downstream elevation of the pit channel. If set to -99999, the ground elevation is set to the ZC elevation of the 2D cell that the pit falls within, or the lowest elevation sampled if using SGS (provided there is a 2D SX connection – see Conn_1D_2D attribute below).</p>
If Conn_1D_2D is set to “SXL”, US_Invert is used as the amount by which to lower the 2D cell and the pit channel invert is set to this level.
</td>
<td style="text-align:left;">
Float
</td>
</tr>
<tr>
<td style="text-align:right;">
8
</td>
<td style="text-align:left;">
DS_Invert
</td>
<td style="text-align:left;">
The bottom elevation of the pit. Can also be used to set the upstream and downstream inverts of connected channels – see discussion for US_Invert for channels above. If set to -99999, not used.
</td>
<td style="text-align:left;">
Float
</td>
</tr>
<tr>
<td style="text-align:right;">
9
</td>
<td style="text-align:left;">
Form_Loss
</td>
<td style="text-align:left;">
The Form_Loss value is applied as an energy loss to all outgoing culverts (i.e. culverts that are digitised as leaving the pit/node), so the Form_Loss value should be based on the outgoing pipe velocity (e.g. the K values). Note, it may be necessary to zero or reduce the Entry_Loss and/or Exit_Loss attributes of culverts connected to the pit/node so that duplication of losses does not occur. This loss coefficient is not adjusted according to the approach and departure velocities as documented in Section <a href="OneD-Domains-1.html#LossAdjustment-3">5.8.7</a>.
</td>
<td style="text-align:left;">
Float
</td>
</tr>
<tr>
<td style="text-align:right;">
10
</td>
<td style="text-align:left;">
pBlockage
</td>
<td style="text-align:left;">
The percentage blockage (%) of the pits. Reduces the flow capacity through the pit by the specified amount.
</td>
<td style="text-align:left;">
Float
</td>
</tr>
<tr>
<td style="text-align:right;">
11
</td>
<td style="text-align:left;">
Inlet_Type
</td>
<td style="text-align:left;">
For Q pit channels, the name of a pit inlet type in the <a href="ECFCommands-1.html#ecfPitInletDatabase">Pit Inlet Database</a> (see Section <a href="OneD-Domains-1.html#DD-Database-3">5.11.3</a>). Otherwise not used.
</td>
<td style="text-align:left;">
Char(256)
</td>
</tr>
<tr>
<td style="text-align:right;">
12
</td>
<td style="text-align:left;">
Conn_1D_2D
</td>
<td style="text-align:left;">
<p>Used to specify a “SX” flag that automatically creates a 2D SX cell and 1D/2D connection where the 1D pit occurs. This negates the need to create SX objects in a 2d_bc layer.</p>
<p>The following options/changes are available:</p>
<ul>
<li>“SX” can also be used to automatically connect 1D nodes as well as pits to the 2D domain.<br />
</li>
<li>“SXL” can be specified to connect the 1D pit to the 2D domain and lower the 2D cell by the amount of the US_Invert attribute. The invert of the pit channel is set to the lowered 2D cell level. This is useful to help trap the water into the pit as it flows overland in the 2D domain. This feature works well in combination with the <a href="TBCCommands-1.html#tbcReadGISSA">Read GIS SA PITS</a> option. If using the SGS functionality (Section <a href="TwoD-Domains-1.html#SGS-3">7.4.3</a>), the “L” flag lowers the minumum cell elevation by the amount of the US_Invert attribute, but retains the original cell volume versus depth curve. The lowered cell can be made flat as per the traditional sampling (non-SGS) approach, using the <a href="TCFCommands-1.html#tcfSGSSXZFlagApproach">SGS SX Z Flag Approach</a> command. However, if the underlying DEM has good representation of the pit inlet elevation, it is not recommended to use the “L” flag.</li>
<li>By default, if more than one 2D cell is automatically connected, pits are assumed to be connected using the Grade (G) approach and nodes the Sag (S) approach (see Section <a href="OneD-Domains-1.html#Conn-Pits-Nds-4">5.11.2.3</a>). To override these default approaches, specify either “SXG” or “SXS”.</li>
</ul>
<a href="ECFCommands-1.html#ecfPitDefault2DConnection">Pit Default 2D Connection</a> can be used to set a global default value for Conn_1D_2D, and up to four characters is now accepted. “NO” can also be used to not connect the node or pit to a 2D domain.
</td>
<td style="text-align:left;">
Char(4)
</td>
</tr>
<tr>
<td style="text-align:right;">
13
</td>
<td style="text-align:left;">
Conn_No
</td>
<td style="text-align:left;">
<p>If “SX” is specified for Conn_1D_2D, can be used to control the number of 2D cells connected. See Section <a href="OneD-Domains-1.html#Conn-Pits-Nds-4">5.11.2.3</a> for a discussion on how the 2D cells are selected.</p>
<ul>
<li><p>A positive value increases the number of automatically selected 2D cells by the value of Conn_No.<br />
</p></li>
<li><p>If negative, this ignores the automatic approach and fixes the number of 2D cells connected to the absolute value of Conn_No. For example, a value of -1 would only connect the pit or node to one (1) 2D cell irrespective of the connection width.</p>
</td>
<td style="text-align:left;">
<p>Integer</p>
</td>
</tr>
<tr>
<td style="text-align:right;">
<p>14</p>
</td>
<td style="text-align:left;">
<p>Width_or_Dia</p>
</td>
<td style="text-align:left;">
<p><b>C, R, W Pit Type:</b><br />
For C pits, sets the diameter of the pit inlet cross-section in the vertical plane. For R and W pits, sets the width of the pit inlet section in the vertical plane.</p>
<p><b>Q Pit Type:</b><br />
Used as a multiplier of the flow derived from the depth-discharge curve. For example, if Width_or_Dia equals 2, the flow is doubled. If set to zero (0), a value of 1.0 is used (i.e. the discharge curve remains unchanged).</p>
</td>
<td style="text-align:left;">
<p>Float</p>
</td>
</tr>
<tr>
<td style="text-align:right;">
<p>15</p>
</td>
<td style="text-align:left;">
<p>Height_or_WF</p>
</td>
<td style="text-align:left;">
<p>Sets the height of an R pit inlet channel. Not used for other pit types.</p>
</td>
<td style="text-align:left;">
<p>Float</p>
</td>
</tr>
<tr>
<td style="text-align:right;">
<p>16</p>
</td>
<td style="text-align:left;">
<p>Number_of</p>
</td>
<td style="text-align:left;">
<p><b>C, R, W Pit Type:</b><br />
Sets the number of pits (of same dimension) within the one pit channel.</p></li>
</ul>
<b>Q Pit Type:</b><br />
Used as a multiplier of the flow derived from the depth-discharge curve. For example, if Number_of equals 3, this assumes there are three pits lumped together and the flow is tripled. If set to zero (0) a value of 1 is used (i.e. a single inlet pit is assumed). Multiplies the flow only, additional storage defined by the Len_or_ANA attribute is not multiplied. Where a pit is connected to a manhole, increasing the Number_of attribute will not increase the number of manholes, or its dimensions; the pits remain connected to only one manhole.
</td>
<td style="text-align:left;">
Integer
</td>
</tr>
<tr>
<td style="text-align:right;">
17
</td>
<td style="text-align:left;">
HConF_or_WC
</td>
<td style="text-align:left;">
<b>R Pit Type:</b> Sets the height contraction coefficient, otherwise not used for other pit types. Usually 0.6 for square edged entrances to 0.8 for rounded edges. If value exceeds 1.0 or is less than or equal to zero, it is set to 0.6.
</td>
<td style="text-align:left;">
Float
</td>
</tr>
<tr>
<td style="text-align:right;">
18
</td>
<td style="text-align:left;">
WConF_or_WEx
</td>
<td style="text-align:left;">
<b>C, R Pit Type:</b> Sets the width contraction coefficient, otherwise not used for other pit types. Usually 0.9 for sharp edges to 1.0 for rounded edges for R culverts. Normally set to 1.0 for C pits. If value exceeds 1.0 or is less than or equal to zero, it is set to 1.0 for C and 0.9 for R pits.
</td>
<td style="text-align:left;">
Float
</td>
</tr>
<tr>
<td style="text-align:right;">
19
</td>
<td style="text-align:left;">
EntryC_or_WSa
</td>
<td style="text-align:left;">
<b>C, R Pit Type:</b> Sets the entry loss coefficient, otherwise not used for other pit types.
</td>
<td style="text-align:left;">
Float
</td>
</tr>
<tr>
<td style="text-align:right;">
20
</td>
<td style="text-align:left;">
ExitC_or_WSb
</td>
<td style="text-align:left;">
<b>C, R Pit Type:</b> Sets the exit loss coefficient, otherwise not used for other pit types.
</td>
<td style="text-align:left;">
Float
</td>
</tr>
</tbody>
</table>
</div>
<div id="OneD-pit-4" class="section level4 hasAnchor" number="5.11.2.2">
<h4><span class="header-section-number">5.11.2.2</span> 1d_pit Pits<a href="OneD-Domains-1.html#OneD-pit-4" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>The 1d_pit layer can be used for all types of pits in Classic and HPC, whether connected to a 1d_nwk or a virtual pipe system. Table <a href="OneD-Domains-1.html#tab:tab-PitsAttributeDescriptions">5.25</a> presents the attributes associated with 1d_pit GIS layer. The 1d_pits attribute table excludes superfluous attibutes included in the 1d_nwk format that are required for other uses (e.g. pipes and open channels).</p>
<table>
<caption>
<span id="tab:tab-PitsAttributeDescriptions">Table 5.25: </span><strong>Pits: 1D Model Network (1d_pit) Attribute Descriptions</strong>
</caption>
<thead>
<tr>
<th style="text-align:right;font-weight: bold;color: WHITE !important;background-color: rgba(26, 189, 201, 255) !important;">
No. 
</th>
<th style="text-align:left;font-weight: bold;color: WHITE !important;background-color: rgba(26, 189, 201, 255) !important;">
Default GIS Attribute Name
</th>
<th style="text-align:left;font-weight: bold;color: WHITE !important;background-color: rgba(26, 189, 201, 255) !important;">
Description
</th>
<th style="text-align:left;font-weight: bold;color: WHITE !important;background-color: rgba(26, 189, 201, 255) !important;">
Type
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right;">
1
</td>
<td style="text-align:left;">
ID
</td>
<td style="text-align:left;">
<p>Unique identifier up to 12 characters in length. For pits that connect to a 1d_nwk channel, either by being snapped or connected using <a href="ECFCommands-1.html#ecfPitSearchDistance">Pit Search Distance</a>, if ID is blank the pit channel’s ID is automatically assigned based on one of the connecting channel IDs.</p>
<p>Note VPI and VPO pits are never connected to a 1d_nwk channel, therefore, they always require unique IDs. For any pit not connected to a channel, ID cannot be blank and must be a unique (channel) ID.</p>
ID may contain any character except for quotes and commas. Generally, spaces and special characters (e.g. “\”) should be avoided, although they are accepted. The same ID can be used for a pit (which is converted to a channel) and a node, but no two nodes and no two channels can have the same ID.
</td>
<td style="text-align:left;">
Char (12)
</td>
</tr>
<tr>
<td style="text-align:right;">
2
</td>
<td style="text-align:left;">
Type
</td>
<td style="text-align:left;">
<p>“VPI” or “I” (Virtual Pipe Inlet):<br />
VPI pits are Q pits treated as being disconnected from all 1d_nwk channels (even if they are snapped to a channel). For the HPC solver VPIs can optionally be associated with a VPO (Virtual Pipe Outlet) to discharge flow back into the 2D domain. For the Classic 2D solver as of Build 2018-03-AA, all VPI pit discharges are irretrievably extracted from the 2D domain. Prior to Build 2018-03-AA a VPI pit could only be denoted as “I” and would not extract or surcharge virtual pipe flow unless there was an outlet (“O”) pit with the same VP_Network_ID. As of Build 2018-03-AA if there is no VPO pit with the same VP_Network_ID the VPI pit discharge is extracted from the 2D domain. “VPI” is the preferred notation.</p>
<p>“VPO” or “O” (Virtual Pipe Outlet):<br />
HPC 2D solver only (not used by the Classic 2D solver). VPOs are treated as being disconnected from all 1d_nwk channels (even if they are snapped to a channel). They act as a discharge of the total or proportion of VPI inflows on the same VP_Network_ID back into the 2D domain. Prior to Build 2018-03-AA a VPO pit could only be denoted as “O”, however, “VPO” is now the preferred notation. More than one VPO pit can exist for the same VP_Network_ID.</p>
“C”, “Q”, “R” and “W”:<br />
As of Build 2018-03-AA, the standard C, Q, R and W pits can be specified via a 1d_pit layer, and can be connected, or disconnected, to a 1d_nwk. If a C, Q, R or W pit is not connected to a 1d_nwk channel, either by snapping or using <a href="ECFCommands-1.html#ecfPitSearchDistance">Pit Search Distance</a>, the discharge through the pit is permanently extracted from the 2D domain. Alternatively, unconnected C, Q, R or W pits can be treated as an ERROR. For C, R and W pits, the default width, contraction and weir coefficients are used – to vary from these use a 1d_nwk layer for the pits.
</td>
<td style="text-align:left;">
Char (4)
</td>
</tr>
<tr>
<td style="text-align:right;">
3
</td>
<td style="text-align:left;">
VP_Network_ID
</td>
<td style="text-align:left;">
VP_Network ID (as an integer) used to determine which outlet(s) the flow into the inlet pits discharges from (if any). Separate or independent networks should have a different network ID. VP_Network_ID should be a positive integer as some negative integer numbers are reserved for special purposes.
</td>
<td style="text-align:left;">
(Positive)<br />
Integer
</td>
</tr>
<tr>
<td style="text-align:right;">
4
</td>
<td style="text-align:left;">
Inlet_Type
</td>
<td style="text-align:left;">
For a VPI or Q pit, the name of a pit inlet type in the <a href="ECFCommands-1.html#ecfPitInletDatabase">Pit Inlet Database</a> (see Section <a href="OneD-Domains-1.html#Pits-3">5.11.2</a>). Not used for other pits.
</td>
<td style="text-align:left;">
Char (32)
</td>
</tr>
<tr>
<td style="text-align:right;">
5
</td>
<td style="text-align:left;">
VP_Sur_Index
</td>
<td style="text-align:left;">
<p>Only used for VPI pits if using the HPC solver (not used by the Classic solver). If the total flow into the VPIs on the same VP_Network_ID exceeds the maximum outflow capacity of the VPOs of that VP_Network_ID (see Qmax below), one or more of the VPI flow rates must be modified. The surcharge index is used to determine how VPI flows are adjusted. The VPIs with the lowest surcharge index are given priority.</p>
<p>When the total inflow of all VPIs exceeds the total capacity of all VPOs for a VP_Network_ID, the VPI inflow with the lowest surcharge index is reduced. If this VPI’s inflow is reduced to zero, this VPI is permitted to become an outlet (i.e. surcharge) with the flow rate up to but not exceeding its maximum outflow (see QMax below). If the total inflow of all remaining VPIs exceeds the maximum outflow plus the maximum outflow of this VPI, then the VPI with the next highest surcharge index is adjusted using the same methodology. To prevent a VPI from surcharging, set QMax to zero.</p>
<p>For example, the ground level at the VPI could be used for the surcharge index, in which case the lowest VPIs surcharge first. However, if you have reliable data for the order in which they tend to surcharge this could be used. The virtual pipe network is flow conserving, but not necessarily energy conserving. The highest VPI could be incorrectly specified with the lowest surcharge index in which case water would be flowing uphill!</p>
<p>VPI for the Classic solver: Not used.</p>
VPO, C, Q and W: Not used.
</td>
<td style="text-align:left;">
Float
</td>
</tr>
<tr>
<td style="text-align:right;">
6
</td>
<td style="text-align:left;">
VP_QMax
</td>
<td style="text-align:left;">
<p>VPI and VPO if using the HPC solver:<br />
For VPOs the maximum flow that can discharge back into the 2D domain. For VPIs the maximum surcharge capacity or flow back on to the 2D domain. To prevent a VPI from surcharging enter a QMax of 0.0 (zero).</p>
<p>If the total flow capacity (sum of QMax values for VPOs on the same VP_Network_ID) of the VPOs is reached, the inflow to VPIs is restricted and/or surcharged at the VPIs using VP_Sur_Index value above.</p>
<p>R pits: Sets the height of the pit section in the vertical plane.</p>
<p>VPI and VPO for the Classic solver: Not used.</p>
C, Q and W: Not used.
</td>
<td style="text-align:left;">
Float
</td>
</tr>
<tr>
<td style="text-align:right;">
7
</td>
<td style="text-align:left;">
Width
</td>
<td style="text-align:left;">
<p>For C pits the diameter of the pit inlet cross-section in the vertical plane. For R and W pits, the width of the pit inlet section in the vertical plane.</p>
<p>For Q and VPI pits the multiplier of width in Pit Inlet Database.</p>
For all pits the width is also used to determine the number of 2D cells to connect.
</td>
<td style="text-align:left;">
Float
</td>
</tr>
<tr>
<td style="text-align:right;">
8
</td>
<td style="text-align:left;">
Conn_2D
</td>
<td style="text-align:left;">
<p>Used to control the connection type. For pits this field must be blank or set to “SX”. If set to blank, is treated as a SX connection.</p>
Other options may be provided in the future.
</td>
<td style="text-align:left;">
Char (8)
</td>
</tr>
<tr>
<td style="text-align:right;">
9
</td>
<td style="text-align:left;">
Conn_No
</td>
<td style="text-align:left;">
<p>Overwrite the automatically determined number of connected 2D cells (see Width attribute above).</p>
<ul>
<li>A positive value increases the number of automatically selected 2D cells by the value of Conn_No.<br />
</li>
<li>If negative, this ignores the automatic approach and fixes the number of 2D cells connected to the absolute value of Conn_No. For example, a value of -1 would only connect the pit or node to one (1) 2D cell irrespective of the width.
</td>
<td style="text-align:left;">
Integer
</td>
</tr>
<tr>
<td style="text-align:right;">
10
</td>
<td style="text-align:left;">
pBlockage
</td>
<td style="text-align:left;">
The percentage blockage (%) of the pits. Reduces the flow capacity through the pit by the specified amount. For VPI and VPO pits this feature was introduced for Build 2016-03-AB, and for C, Q, R and W pits it was introduced for Build 2018-03-AA. Prior to these builds the pBlockage attribute was reserved and not used.
</td>
<td style="text-align:left;">
Float
</td>
</tr>
<tr>
<td style="text-align:right;">
11
</td>
<td style="text-align:left;">
Number_of
</td>
<td style="text-align:left;">
Number of (same type of) pits represented by the pit channel. This optional attribute was introduced for Build 2018-03-AA.</li>
</ul>
This value will also affect the width value used to determine how many 2D cells to connect to. For example, a value of 2 will double the connection width.
</td>
<td style="text-align:left;">
Integer
</td>
</tr>
<tr>
<td style="text-align:right;">
12
</td>
<td style="text-align:left;">
Lag_Approach
</td>
<td style="text-align:left;">
<p>Sets the lag approach, as described in Section <a href="OneD-Domains-1.html#Virtual-Pipes-2">5.12</a>:</p>
<ul>
<li>“None” or Blank - no lag is applied.</li>
<li>“Shift” - Shift method applied.</li>
<li>“Decay” - Decay method applied.</li>
</ul>
This optional attribute was introduced for Build 2023-03-AB.
</td>
<td style="text-align:left;">
Char (8)
</td>
</tr>
<tr>
<td style="text-align:right;">
13
</td>
<td style="text-align:left;">
Lag_Value
</td>
<td style="text-align:left;">
Lag value in hours. This optional attribute was introduced for Build 2023-03-AB.
</td>
<td style="text-align:left;">
Float
</td>
</tr>
</tbody>
</table>
</div>
<div id="Conn-Pits-Nds-4" class="section level4 hasAnchor" number="5.11.2.3">
<h4><span class="header-section-number">5.11.2.3</span> Connecting Pits and Nodes to 2D Domains<a href="OneD-Domains-1.html#Conn-Pits-Nds-4" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Both pits and nodes can be automatically connected to 2D domains using
the 1d_nwk Conn_1D_2D attribute (see Table <a href="OneD-Domains-1.html#tab:tab-PitsAttributeDescriptions">5.25</a> and Table <a href="OneD-Domains-1.html#tab:tab-PitsModelNetwork">5.24</a>). If Conn_1D_2D is set to
“SX”, TUFLOW automatically connects the upstream end of the pit channel
or node to the 2D domain. The 2D cell must be active (Code = 1). If no
active 2D cells are found a <a href="https://wiki.tuflow.com/TUFLOW_Message_2122">WARNING 2122</a> or <a href="https://wiki.tuflow.com/TUFLOW_Message_2123">2123</a> is
issued. For Classic M2D models <a href="https://wiki.tuflow.com/TUFLOW_Message_2037">WARNING 2037</a> is given if there is overlapping 2D domains and
more than one 2D cell is active.</p>
<p>The command <a href="ECFCommands-1.html#ecfPitDefault2DConnection">Pit Default 2D Connection</a> can
be used to set the global default value for the 1d_nwk Conn_1D_2D
attribute.</p>
<p>By default TUFLOW will connect the 1D pit channel or node to one or more 2D cells at
pit connections. The number of 2D cells selected is a function of the
flow (connection) width of the pit inlet (including the effects of the Number_of and
Width_or_Dia 1d_nwk attributes), or the total flow width of the channels
connected to the node. The total width of the 2D cells selected is
always more than the pit inlet width or width of channels. For example,
a width of 3.6m on a 2m grid selects two cells. The advantage of
selecting more than one 2D cell is to provide enhanced stability at the
1D/2D connection when the 1D flow width exceeds the 2D cell size. The
number of 2D connection cells is limited to 10 per pit inlet.</p>
<p>The 1d_nwk Conn_No attribute can be used to change the number of 2D
cells connected as follows.</p>
<ul>
<li>A positive value adds that number of 2D cells to the automatic number.
In the example above, if Conn_No is set to 1, three (2 + 1) 2D cells
are connected. The upper limit is 10 connected cells.<br />
</li>
<li>If Conn_No is negative, this ignores the automatic approach and fixes
the number of 2D cells connected to the absolute value of Conn_No. For
example, a value of -1 would only connect the pit or node to one (1)
2D cell irrespective of the connection width.</li>
</ul>
<p>If more than one 2D cell is being connected, there are two approaches
available for how the 2D cells are selected.</p>
<ul>
<li>For pits, the default is the G (on Grade) option that selects the 2nd,
3rd, etc… cells by traversing to the next highest 2D cell that
neighbours the 2D cell(s) already selected (this includes diagonal
cells, i.e. all 8 cells around a cell are considered). These cells are
also automatically lowered to the same height as the first cell so
that their ZC value is at or below the pit inlet.</li>
<li>For nodes, the default is the S (Sag) option that selects the 2nd,
3rd, etc… cells by traversing to the next lowest 2D cell. The ZC
values of these cells are not changed as they are already at or below
the node invert.<br />
</li>
<li>The above approaches can be changed using the G (Grade) and S (Sag)
flags for the 1d_nwk Conn_1D_2D attribute. The G approach is that
adopted by default for pits and S for nodes. To override the default
approach, specify G or S as appropriate. For example, if the S
approach is preferred for a pit that is draining a depression, specify
an S flag for the Conn_1D_2D attribute (i.e. “SXS”). Note SX must come
first before an optional flag is specified.<br />
</li>
<li>Note: If <a href="TCFCommands-1.html#tcfDefaults">Defaults</a> == PRE 2008-08 is specified, the
original approach of only selecting one 2D cell is used, irrespective
of the Conn_1D_2D and Conn_No values.</li>
<li>If using SGS, the on Grade and Sag approaches are applied based on the minimum SGS elevations of the cells.</li>
</ul>
<p>Note that the conventional approach of using 2d_bc SX points or lines
can still be used to connect 1D channel ends. This gives the user
complete control over which 2D cells are selected and is often
preferred in situations where large 1D structures are being connected to
2D cells.</p>
</div>
</div>
<div id="DD-Database-3" class="section level3 hasAnchor" number="5.11.3">
<h3><span class="header-section-number">5.11.3</span> Pit Inlet and Depth/Stage vs Discharge Databases<a href="OneD-Domains-1.html#DD-Database-3" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Pit channels can be specified as a Q Type, where flow through the pit is
controlled by a depth-discharge curve defined within the <a href="ECFCommands-1.html#ecfPitInletDatabase">Pit Inlet
Database</a>. The database is similar to the <a href="TCFCommands-1.html#tcfBCDatabase">BC
Database</a> and is described below. The alternative naming
convention <a href="ECFCommands-1.html#ecfDepthDischargeDatabase">Depth Discharge Database</a>
performs the exact same function and can be used instead of <a href="ECFCommands-1.html#ecfPitInletDatabase">Pit Inlet
Database</a>. Only a single Depth Discharge or Pit
Inlet Database should be used.</p>
<p>The database is a .csv file usually set up and managed in a Microsoft
Excel spreadsheet. The database file sources depth-discharge curves in
other .csv files that are also usually set up and managed within the
same Excel spreadsheet. The TUFLOW Microsoft Excel macro can be used to
export these csv files from the parent spreadsheet. It is available to
download at no cost from
<a href="https://www.tuflow.com/downloads/#utilities">www.tuflow.com</a>. The
format of the Pit Inlet Database is described in Table <a href="OneD-Domains-1.html#tab:tab-DatabaseFormat">5.26</a>.</p>
<table>
<caption>
<span id="tab:tab-DatabaseFormat">Table 5.26: </span><strong>Pit Inlet Database Format</strong>
</caption>
<thead>
<tr>
<th style="text-align:right;font-weight: bold;color: WHITE !important;background-color: rgba(26, 189, 201, 255) !important;">
Column No. 
</th>
<th style="text-align:left;font-weight: bold;color: WHITE !important;background-color: rgba(26, 189, 201, 255) !important;">
Description
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right;">
1
</td>
<td style="text-align:left;">
Contains the pit inlet type as referenced by the 1d_nwk Inlet_Type attribute (see Table <a href="OneD-Domains-1.html#tab:tab-PitsModelNetwork">5.24</a>).
</td>
</tr>
<tr>
<td style="text-align:right;">
2
</td>
<td style="text-align:left;">
Contains the name of the source .csv file that contains the depth-discharge curve.
</td>
</tr>
<tr>
<td style="text-align:right;">
3
</td>
<td style="text-align:left;">
The heading label of the column containing depth within the source .csv file.
</td>
</tr>
<tr>
<td style="text-align:right;">
4
</td>
<td style="text-align:left;">
The heading label of the column containing flow within the source .csv file.
</td>
</tr>
<tr>
<td style="text-align:right;">
5
</td>
<td style="text-align:left;">
The pit inlet’s nominated full flow area in m<sup>2</sup> . Note that the flow area is only used to output a velocity for the pit channel (i.e. it does not have any influence over the hydraulic calculations).
</td>
</tr>
<tr>
<td style="text-align:right;">
6
</td>
<td style="text-align:left;">
<p>The pit inlet’s nominated flow width in m. The width is used for the automatic selection of 2D cells when connecting to a 2D domain (see Section <a href="OneD-Domains-1.html#Conn-Pits-Nds-4">5.11.2.3</a>) and for extending the depth discharge curve.</p>
Note: When width is set in 1d_nwk or 1d_pit layer for Q and VPI pits the width will multiply width in the Pit Inlet Database.
</td>
</tr>
</tbody>
</table>
<p>Figure <a href="OneD-Domains-1.html#fig:fig-image53">5.14</a> shows an example of a <a href="ECFCommands-1.html#ecfPitInletDatabase">Pit Inlet
Database</a> .csv file. For the example, if the
1d_nwk Inlet_Type attribute is set to “M”, TUFLOW searches the first
column (Name) until it finds “M” as highlighted in green in the image
below. The source .csv file, pit_inlet_curves.csv is opened and the
occurrence of the labels “Depth” (shaded yellow) and “Type M” (orange)
on the same line in pit_inlet_curves.csv are searched for. The numeric
values for these two columns, as shown in the second image below in
yellow and orange, are read and applied as the depth-discharge
relationship for the Q pit channel.</p>
<center>
<img src="images/image52.png" width="80%" style="display: block; margin: auto;" />
</center>
<!-- EFC to update figure if someone gives spreadsheet-->
<center>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:fig-image53"></span>
<img src="images/image53.png" alt="**Example of Pit Inlet Database**" width="80%" />
<p class="caption">
Figure 5.14: <strong>Example of Pit Inlet Database</strong>
</p>
</div>
</center>
<p>The depth-discharge curve is applied and extrapolated as follows:</p>
<ul>
<li>The first coordinate on the curve must be 0, 0 (i.e. zero flow at zero
depth).</li>
<li>The depth and flow must be in metres and m<sup>3</sup>/s or feet and
ft<sup>3</sup>/s if the model is running in US Customary Units (see
<a href="TCFCommands-1.html#tcfUnits">Units</a>).</li>
<li>The depth and flow data entries should be specified as positive values.</li>
<li>The depth value used to derive the discharge through the pit channel
is taken as the water level in the 2D domain less the pit invert
(usually the ground/2D level). If the downstream water level of the
pit channel rises above the pit invert, the depth value used for
deriving the pit channel flow is the difference in water level. This
provides a smooth transition from upstream controlled flow to drowned
flow. If the pit channel starts to be surcharged (i.e. flow is
reversed), the flow is extracted from the depth-discharge curve using
the downstream water level less the upstream water level (pit invert
if dry) as the depth value, and is applied as a negative discharge so
that flow surcharges from the pipe network onto the 2D domain.</li>
<li>If required the curve is extrapolated. An “effective” flow width of
the pit inlet is calculated that gives the same flow at the top of the
curve as would orifice flow. The orifice flow equation is then used to
extend the curve indefinitely, using the equation:</li>
</ul>
<p><span class="math display" id="eq:equ-orifice-flow">\[\begin{equation}
Q = 0.6\frac{2}{3}y_{top}w_{effective}\ \sqrt{2g(y - 0.6\ \frac{2}{3}\ y_{top)}}
\tag{5.22}
\end{equation}\]</span></p>
<p>Table <a href="OneD-Domains-1.html#tab:tab-PitFlowRegimes">5.27</a> presents the different Q pit flow regimes. These are
output to the .eof file next to the velocity and flow values, and to the
_TSF and _TSL output layers (see Sections <a href="Checks-and-Logs-1.html#EOF-2">14.6</a> and
<a href="Viewing-Output-1.html#TS-GIS-3">15.3.4</a>).</p>
<table>
<caption>
<span id="tab:tab-PitFlowRegimes">Table 5.27: </span><strong>Q Pit Flow Regime Flags</strong>
</caption>
<thead>
<tr>
<th style="text-align:left;font-weight: bold;color: WHITE !important;background-color: rgba(26, 189, 201, 255) !important;">
Regime
</th>
<th style="text-align:left;font-weight: bold;color: WHITE !important;background-color: rgba(26, 189, 201, 255) !important;">
Description
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
N
</td>
<td style="text-align:left;">
The depth-discharge point is within the bounds of the Q pit curve provided.
</td>
</tr>
<tr>
<td style="text-align:left;">
O
</td>
<td style="text-align:left;">
The depth is over (exceeds) the highest depth in the Q pit curve and the extrapolated orifice flow equation is being used.
</td>
</tr>
<tr>
<td style="text-align:left;">
R
</td>
<td style="text-align:left;">
Reverse (negative) flow is occurring.
</td>
</tr>
</tbody>
</table>
<div id="Xfall-4" class="section level4 hasAnchor" number="5.11.3.1">
<h4><span class="header-section-number">5.11.3.1</span> Road Crossfall Options<a href="OneD-Domains-1.html#Xfall-4" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>The command <a href="ECFCommands-1.html#ecfPitDefaultRoadCrossfall">Pit Default Road Crossfall</a>
increases the depth at Q pits based on the crossfall slope of the road
cross-section. This approach aims to account for changes in ground
elevation that occur at a finer scale than the 2D cell resolution.
TUFLOW calculates the water depth that is used by the <a href="ECFCommands-1.html#ecfPitInletDatabase">Pit Inlet
Database</a> using an adjacent side triangle depth
approach, instead of the actual cell flow depth. This is shown in Figure <a href="OneD-Domains-1.html#fig:fig-image54">5.15</a>. The resulting triangle has the same area as the vertical flow area
in the 2D cell the pit is connected to (i.e. the triangle’s area is the
depth in the 2D cell times the width of the cell).</p>
<center>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:fig-image54"></span>
<img src="images/image54a.png" alt="**Road Crossfall Option**" width="80%" />
<p class="caption">
Figure 5.15: <strong>Road Crossfall Option</strong>
</p>
</div>
</center>
<p>Use of this command can improve the ability to capture water from 2D
cells into pits feeding the pipe network. Especially for larger cell
sizes, the shallow depth that can occur in the cell can be
unrepresentative of the depth at the entrance to the pit, therefore
restricting the amount of flow entering the pit. The larger depth using
an equivalent triangle will push more water into the pit providing a
more realistic representation of the pit’s capture.</p>
<p><strong>Note: If using the Sub-Grid Sampling (SGS), and the underlying DEM has good representation
of the road cross-profile, this feature is not needed and should not be used.</strong></p>
</div>
</div>
<div id="Manholes-3" class="section level3 hasAnchor" number="5.11.4">
<h3><span class="header-section-number">5.11.4</span> Manholes<a href="OneD-Domains-1.html#Manholes-3" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Manholes are used at pipe junctions for maintenance access and where
there is a change in pipe configuration and/or inlet pit flow entry.
Flow energy is dissipated due to:</p>
<ul>
<li>Expansion/contraction of flow within the manhole chamber and outlet
culverts, see Figure <a href="OneD-Domains-1.html#fig:fig-manhole-entry-exit-losses">5.16</a>.<br />
</li>
<li>Change in direction of the culverts (e.g. at a bend), see Figure <a href="OneD-Domains-1.html#fig:fig-manhole-bend-losses">5.17</a>.<br />
</li>
<li>Change in height and/or invert level of the adjoining culverts, see Figure <a href="OneD-Domains-1.html#fig:fig-manhole-drop-losses">5.18</a>.</li>
</ul>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:fig-manhole-entry-exit-losses"></span>
<img src="images/manhole_entry_exit_losses.png" alt="**Flow Expansion/Contraction at a Manhole**" width="30%" />
<p class="caption">
Figure 5.16: <strong>Flow Expansion/Contraction at a Manhole</strong>
</p>
</div>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:fig-manhole-bend-losses"></span>
<img src="images/manhole_bent_losses.png" alt="**Change in Flow Direction at a Manhole**" width="30%" />
<p class="caption">
Figure 5.17: <strong>Change in Flow Direction at a Manhole</strong>
</p>
</div>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:fig-manhole-drop-losses"></span>
<img src="images/manhole_drop_losses.png" alt="**Change in Inlet/Outlet Height at a Manhole**" width="30%" />
<p class="caption">
Figure 5.18: <strong>Change in Inlet/Outlet Height at a Manhole</strong>
</p>
</div>
<p>The presence of a manhole will override the exit loss of any culvert
discharging into the manhole and the entrance loss of any culvert taking
flow out of the manhole. Therefore, the corresponding Entry_Loss and
Exit_Loss attributes of the culverts in the 1d_nwk layer are not used
(see Section <a href="OneD-Domains-1.html#Engelund-4">5.11.4.4</a> and the notes on these attributes in Table <a href="OneD-Domains-1.html#tab:tab-CulvertsAttributeDescriptions">5.5</a> for more information).</p>
<p>There are three different types of manholes:</p>
<ul>
<li>“C” for circular chambers.<br />
</li>
<li>“R” for rectangular chambers.<br />
</li>
<li>“J” for culvert junctions without a chamber.</li>
</ul>
<p>And three different energy loss approaches:</p>
<ul>
<li>“NO” no special manhole losses (the standard entry/exit losses of the
connected culverts apply).<br />
</li>
<li>“EN” for the Engelund loss approach (this is the default approach).<br />
</li>
<li>“FX” for the Fixed loss approach.</li>
</ul>
<p>The manhole loss approach can be selected globally using the command, <a href="ECFCommands-1.html#ecfManholeDefaultLossApproach">Manhole Default Loss Approach</a>.</p>
<p>The manhole types, loss methods and dimensions are output in the <a href="https://wiki.tuflow.com/Check_Files_1d_mhc">_mhc_check</a> file.</p>
<div id="Auto-MH-4" class="section level4 hasAnchor" number="5.11.4.1">
<h4><span class="header-section-number">5.11.4.1</span> Automatically Assigned Manholes<a href="OneD-Domains-1.html#Auto-MH-4" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>By default, manholes are automatically created at all culvert junctions
(nodes) where the following conditions are met.</p>
<ul>
<li>There is at least one incoming and one outgoing culvert – a culvert is
a C, I or R channel.<br />
</li>
<li>There are no open channels connected (i.e. no bridges, weirs or any
other channel that is not a culvert/pipe).<br />
</li>
<li>Pit channels can be connected, but are not included in any of the
calculations for determining manhole energy losses. Note, however, that
the connection of a pit to a manhole (or multiple pits via the
Number_of 1d_nwk pits attribute) may influence the default Engelund
losses indirectly via the introduction of additional flow to the pipe
network.</li>
</ul>
<p>Three different approaches to the sizing of automatic manholes and the
application of losses are available through the .ecf command <a href="ECFCommands-1.html#ecfManholeApproach">Manhole
Approach</a>. The current default is Method C. This is
the preferred approach unless backward compatibility is required for
legacy reasons. Further details on Methods A and B may be found by
referring to the 2018 Manual, Release Notes of previous TUFLOW builds, or by
contacting <a href="mailto:support@tuflow.com" class="email">support@tuflow.com</a>.</p>
<p>The type of manhole assigned is set using <a href="ECFCommands-1.html#ecfManholeDefaultType">Manhole Default
Type</a>. If <a href="ECFCommands-1.html#ecfManholeDefaultType">Manhole Default
Type</a> is not specified the default is to assign
a C, R or J types based on the size and configuration of culverts
connected to the manhole (see <a href="ECFCommands-1.html#ecfManholeDefaultType">Manhole Default
Type</a> for more information).</p>
<p>The minimum diameter/width of a manhole chamber is controlled by
<a href="ECFCommands-1.html#ecfManholeMinimumDimension">Manhole Minimum Dimension</a>, and the
default side clearance and clearance between culverts is set using
<a href="ECFCommands-1.html#ecfManholeDefaultSideClearance">Manhole Default Side Clearance</a>.</p>
<p>The default energy loss approach is controlled by <a href="ECFCommands-1.html#ecfManholeDefaultLossApproach">Manhole Default Loss
Approach</a>.</p>
</div>
<div id="OneD-mh-4" class="section level4 hasAnchor" number="5.11.4.2">
<h4><span class="header-section-number">5.11.4.2</span> Manually Assigned Manholes (1d_mh Layer)<a href="OneD-Domains-1.html#OneD-mh-4" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Manholes are manually assigned at channel ends (nodes) using a 1d_mh layer and <a href="ECFCommands-1.html#ecfReadGISManhole">Read
GIS Manhole</a>. Any number of 1d_mh layers can be
specified. The attributes of a 1d_mh layer are described below in Table <a href="OneD-Domains-1.html#tab:tab-Manhole">5.28</a>.</p>
<p><strong>A manhole in a 1d_mh layer will override any automatically created
manhole. If a manually specified manhole occurs at the same location
more than once, the last occurrence will prevail (i.e. the last manhole
at a node will override any previously specified manholes at the same
node).</strong></p>
<p>To remove an automatically created manhole, digitise a point at the node
in a 1d_mh layer and set the Loss_Approach to “NO” (i.e. no manhole
energy losses). Note that culvert inlet/outlet losses will apply instead
in accordance with Section <a href="OneD-Domains-1.html#culverts-pipes-3">5.8.1</a>.</p>
<table>
<caption>
<span id="tab:tab-Manhole">Table 5.28: </span><strong>1D Manhole (1d_mh) Attribute Descriptions</strong>
</caption>
<thead>
<tr>
<th style="text-align:right;font-weight: bold;color: WHITE !important;background-color: rgba(26, 189, 201, 255) !important;">
No. 
</th>
<th style="text-align:left;font-weight: bold;color: WHITE !important;background-color: rgba(26, 189, 201, 255) !important;">
Default GIS Attribute Name
</th>
<th style="text-align:left;font-weight: bold;color: WHITE !important;background-color: rgba(26, 189, 201, 255) !important;">
Description
</th>
<th style="text-align:left;font-weight: bold;color: WHITE !important;background-color: rgba(26, 189, 201, 255) !important;">
Type
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right;">
1
</td>
<td style="text-align:left;">
ID
</td>
<td style="text-align:left;">
Unique identifier up to 12 characters in length (see ID for 1d_nwk layers). The ID is used to label the node that is created at the location of the manhole. If left blank, then the ID will be automatically assigned according to the rules for an automatically created node as discussed in Section <a href="OneD-Domains-1.html#Nodes-2">5.13</a>.
</td>
<td style="text-align:left;">
Char(12)
</td>
</tr>
<tr>
<td style="text-align:right;">
2
</td>
<td style="text-align:left;">
Type
</td>
<td style="text-align:left;">
<p>“C” for circular shaped chamber.</p>
<p>“J” for a junction, but no manhole chamber.</p>
<p>“R” for rectangular shaped.</p>
If left blank, the global default type set by <a href="ECFCommands-1.html#ecfManholeDefaultType">Manhole Default Type</a> is used.
</td>
<td style="text-align:left;">
Char(4)
</td>
</tr>
<tr>
<td style="text-align:right;">
3
</td>
<td style="text-align:left;">
Loss_Approach
</td>
<td style="text-align:left;">
<p>“NO” for no manhole loss approach (the standard entry/exit losses of the connected culverts apply).</p>
<p>“EN” for the Engelund loss approach.</p>
<p>“FX” for the Fixed loss approach.</p>
If left blank, the global default type set by <a href="ECFCommands-1.html#ecfManholeDefaultLossApproach">Manhole Default Loss Approach</a> is used.
</td>
<td style="text-align:left;">
Char(4)
</td>
</tr>
<tr>
<td style="text-align:right;">
4
</td>
<td style="text-align:left;">
Ignore
</td>
<td style="text-align:left;">
If set to true (i.e. “T”), the manhole is ignored and makes no contribution to the final network. Otherwise set to “F”.
</td>
<td style="text-align:left;">
Char(1)
</td>
</tr>
<tr>
<td style="text-align:right;">
5
</td>
<td style="text-align:left;">
Invert_Level
</td>
<td style="text-align:left;">
The bottom or bed elevation of the manhole. This attribute is also used to set the upstream and downstream inverts of connected culverts if the culverts have not been assigned an invert. If set to -99999, not used.
</td>
<td style="text-align:left;">
Float
</td>
</tr>
<tr>
<td style="text-align:right;">
6
</td>
<td style="text-align:left;">
Flow_Width
</td>
<td style="text-align:left;">
The flow width in metres of the manhole (i.e. the width of the manhole perpendicular to the dominant direction of flow). For a C manhole this would be the diameter. Used to calculate the manhole flow area and velocity through the manhole.
</td>
<td style="text-align:left;">
Float
</td>
</tr>
<tr>
<td style="text-align:right;">
7
</td>
<td style="text-align:left;">
Flow_Length
</td>
<td style="text-align:left;">
The flow length in metres of the manhole (i.e. the length of the manhole in the dominant direction of flow). For a C manhole this attribute is not used and the diameter (Flow_Width attribute) is used. Only used to calculate the storage of the node at the manhole.
</td>
<td style="text-align:left;">
Float
</td>
</tr>
<tr>
<td style="text-align:right;">
8
</td>
<td style="text-align:left;">
ANA
</td>
<td style="text-align:left;">
Additional storage surface area in m<sup>2</sup> for the node at the manhole.<br />
Usually set to zero.
</td>
<td style="text-align:left;">
Float
</td>
</tr>
<tr>
<td style="text-align:right;">
9
</td>
<td style="text-align:left;">
K_fixed
</td>
<td style="text-align:left;">
Fixed component of the calculated manhole loss coefficient. If using the Fixed approach, this is the only coefficient applied.
</td>
<td style="text-align:left;">
Float
</td>
</tr>
<tr>
<td style="text-align:right;">
10
</td>
<td style="text-align:left;">
Km
</td>
<td style="text-align:left;">
<p>Manhole exit coefficient used by the Engelund approach.</p>
If set to zero (0), for C manholes the <a href="ECFCommands-1.html#ecfManholeDefaultCExitCoefficient">Manhole Default C Exit Coefficient</a> is applied, and for R manholes <a href="ECFCommands-1.html#ecfManholeDefaultRExitCoefficient">Manhole Default R Exit Coefficient</a> is used.
</td>
<td style="text-align:left;">
Float
</td>
</tr>
<tr>
<td style="text-align:right;">
11
</td>
<td style="text-align:left;">
K_Bend_Max
</td>
<td style="text-align:left;">
<p>The upper limit of the combination of K<sub>Ɵ</sub> and K<sub>drop</sub> in the Engelund approach.</p>
If set to zero (0), <a href="ECFCommands-1.html#ecfManholeKMaximumBendDrop">Manhole K Maximum Bend/Drop</a> is applied.
</td>
<td style="text-align:left;">
Float
</td>
</tr>
<tr>
<td style="text-align:right;">
12
</td>
<td style="text-align:left;">
C_reserved
</td>
<td style="text-align:left;">
Reserved for future use – leave blank.
</td>
<td style="text-align:left;">
Char(12)
</td>
</tr>
<tr>
<td style="text-align:right;">
13
</td>
<td style="text-align:left;">
N1_reserved
</td>
<td style="text-align:left;">
Reserved for future use – leave as zero (0).
</td>
<td style="text-align:left;">
Float
</td>
</tr>
<tr>
<td style="text-align:right;">
14
</td>
<td style="text-align:left;">
N2_reserved
</td>
<td style="text-align:left;">
Reserved for future use – leave as zero (0).
</td>
<td style="text-align:left;">
Float
</td>
</tr>
<tr>
<td style="text-align:right;">
14
</td>
<td style="text-align:left;">
N3_reserved
</td>
<td style="text-align:left;">
Reserved for future use – leave as zero (0).
</td>
<td style="text-align:left;">
Float
</td>
</tr>
</tbody>
</table>
</div>
<div id="mh-direction-4" class="section level4 hasAnchor" number="5.11.4.3">
<h4><span class="header-section-number">5.11.4.3</span> Digitising Culverts Connected to Manholes<a href="OneD-Domains-1.html#mh-direction-4" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>During the simulation, a culvert is determined to be an inlet or outlet
culvert based on the <strong>flow direction</strong>, not the digitised direction of
the 1d_nwk object. Therefore, if reverse flow occurs this is taken into
account in determining the appropriate loss coefficients. However, the
pre-processing of the model assumes that the culverts have been
digitised in the predominant direction of flow. A variety of checks are
made such as whether both an inlet and an outlet culvert are connected
to a manhole, and ERRORs or WARNINGs and CHECKs are issued if there is
an incompatibility. Therefore, it is strongly recommended that the
culverts are digitised consistently in the downstream direction (i.e.
from upstream to downstream).</p>
</div>
<div id="Engelund-4" class="section level4 hasAnchor" number="5.11.4.4">
<h4><span class="header-section-number">5.11.4.4</span> Engelund Manhole Loss Approach<a href="OneD-Domains-1.html#Engelund-4" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>The Engelund energy loss approach at manholes is based on the work of F.A. Engelund, and used by the MOUSE software <span class="citation">(<a href="#ref-DHI2009">DHI, 2009</a>)</span>. The adopted approach has been further enhanced through advice from, and discussions with, staff from Technical Services Branch of the Gold Coast City Council, Queensland, Australia. This is the default manhole loss approach.</p>
<p>The Engelund approach provides an automatic method for determining the energy loss coefficients presented below. Of note is that the coefficients are recalculated every timestep, and therefore vary depending on the flow distribution between inlet and outlet culverts and the depth of water within the manhole. The calculated values are output to the _TSL layer so they can be reviewed/checked over time.</p>
<center>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:fig-manhole-HGL"></span>
<img src="images/manhole_HGL.png" alt="**Engelund Energy Loss Approach at Manholes**" width="60%" />
<p class="caption">
Figure 5.19: <strong>Engelund Energy Loss Approach at Manholes</strong>
</p>
</div>
</center>
<ul>
<li>K<sub>entry</sub> covers the expansion of flow within the manhole at
the outlet of an inlet culvert. The coefficient overrides the exit
loss of the inlet culvert. Its time varying value is shown as the
third value for inlet culvert in the _TSL output layer.<br />
</li>
<li>K<sub>Ɵ</sub> represents the losses due to a change in direction (i.e.
a bend) between inlet and outlet culverts. K<sub>Ɵ</sub> is based on
the angle of the digitised lines of the culverts. For the inlet
culvert the last two vertices of the line are used and for the outlet
culvert the first two vertices. If the culvert line is digitised so
that it has an unrepresentative first/last segment angle (this may
occur where two parallel culverts have been digitised apart to make it
easier to visualise), a 1d_nwk connector (X Type) can be used to
connect the start/end of the culvert to the node, so that the
first/last segment is a correct representation of the culvert angle
relative to the other culverts. Refer to Section <a href="OneD-Domains-1.html#XConnect-3">5.9.3</a> for
further information.<br />
</li>
<li>K<sub>drop</sub> is the loss coefficient due to a change in invert
level and culvert height between inlet and outlet culverts.<br />
</li>
<li>K<sub>Ɵ</sub> and K<sub>drop</sub> are added and applied as an energy
loss for each outlet culvert. The calculated value is reported as the
middle value for outlet culverts in the _TSL output layer. Any
Form_Loss value assigned to the outlet culvert via the 1d_nwk layer is
also applied and will also be included in the _TSL middle value.<br />
</li>
<li>K<sub>exit</sub> covers the contraction from the manhole and
re-expansion of flow within the entrance of an outlet culvert. It overrides
the entrance loss of the outlet culvert and is the first
value for outlet culverts in the _TSL output layer.<br />
</li>
<li>K<sub>m</sub> is the manhole exit coefficient used to calculate K<sub>exit</sub>. The default value for
K<sub>m</sub> is dependent on whether the manhole is of a C or R type,
and is set using <a href="ECFCommands-1.html#ecfManholeDefaultCExitCoefficient">Manhole Default C Exit
Coefficient</a> or <a href="ECFCommands-1.html#ecfManholeDefaultRExitCoefficient">Manhole Default R
Exit Coefficient</a>.</li>
</ul>
<p>The equations used for the Engelund loss approach are provided below.</p>
<p><span class="math inline">\(Q_{p}\)</span> = Flow in culvert<br />
<span class="math inline">\(Q_{im}\)</span> = Total flow in to manhole<br />
<span class="math inline">\(Q_{om}\)</span> = Total flow out of manhole<br />
<span class="math inline">\(y_{i}\)</span> = Height of inlet culvert<br />
<span class="math inline">\(y_{o}\)</span> = Height of outlet culvert<br />
<span class="math inline">\(h_{i}\)</span> = Inlet culvert invert<br />
<span class="math inline">\(h_{o}\)</span> = Outlet culvert invert<br />
<span class="math inline">\(\theta\)</span> = Angle in degrees of inlet culvert relative to outlet
culvert<br />
(<span class="math inline">\(\theta = 0{^\circ}\)</span> when the culverts are in line,
<span class="math inline">\(\theta = 90{^\circ}\)</span> when the outlet culvert is at right angles)<br />
<span class="math inline">\(Q_{p}\)</span> = Flow in outlet culvert<br />
<span class="math inline">\(W_{m}\)</span> = Flow width in manhole = 1d_mh width attribute<br />
<span class="math inline">\(y_{m}\)</span> = Depth of water in manhole<br />
<span class="math inline">\(A_{m}\)</span> = Flow area in manhole<br />
<span class="math inline">\(A_{m}^{&#39;}\)</span> = Effective flow area in manhole<br />
<span class="math inline">\(A_{p}\)</span> = Flow area of culvert<br />
<span class="math inline">\(K_{m}\)</span> = Km 1d_mh attribute<br />
<span class="math inline">\(K_{b}\)</span> = Bend loss coefficient (1d_nwk Form_Loss attribute)<br />
<span class="math inline">\(K_{f}\)</span> = Fixed loss (1d_mh K_Fixed attribute)<br />
<span class="math inline">\(K_{Bend\_ Max}\)</span> = Upper limit to sum of <span class="math inline">\(K_{\theta}\)</span> and <span class="math inline">\(K_{drop}\)</span>
(1d_mh K_Bend_Max attribute)</p>
<p><span class="math inline">\({V_{m} = \frac{Q_{om}}{A_{m}}}\)</span><br />
<span class="math inline">\({Q_{f} = min\left( \frac{Q_{p}}{Q_{om}},1.0 \right)}\)</span><br />
<span class="math inline">\({{A^{&#39;}}_{m} = \frac{W_{m}y_{m}Q_{om}}{Q_{im}}}\)</span><br />
<span class="math inline">\({K_{entry} = \left\lbrack 1 - min\left( \frac{V_{m}}{V_{p}},1 \right) \right\rbrack^{2}}\)</span><br />
(applied as an exit loss on the inlet culvert)<br />
<span class="math inline">\({K_{\theta} = \sum_{inletpipes}^{}\left\lbrack Q_{f}\min\left( \frac{\theta^{2}}{90^{2}},\ 4\right)\right\rbrack}\)</span><br />
<span class="math inline">\({K_{drop} = \sum_{inletpipes}^{}\left\lbrack \min\left( \max\left( \frac{Q_{f}(h_{o} - h_{i})(h_{o} + y_{o} - h_{i} - y_{i})}{y_{o}y_{i}},0 \right),2 \right) \right\rbrack}\)</span><br />
<span class="math inline">\({K_{exit} = K_{m}\left( 1 - min\left( \frac{A_{p}}{{A^{&#39;}}_{m}},1 \right) \right)}\)</span><br />
(applied as inlet loss on the outlet culvert)<br />
<span class="math inline">\({K_{outlet\ pipe} = \min\left( K_{\theta} + K_{drop},K_{Bend_{Max}} \right) + K_{b} + K_{f}}\)</span><br />
(applied as loss using outlet culvert velocity)</p>
</div>
<div id="FixedLoss-4" class="section level4 hasAnchor" number="5.11.4.5">
<h4><span class="header-section-number">5.11.4.5</span> Fixed Manhole Loss Approach<a href="OneD-Domains-1.html#FixedLoss-4" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>The Fixed loss approach applies the 1d_mh K_fixed coefficient as an
energy loss on the outlet culvert(s). This is in accordance with
publications that quote K values for different manholes based on the
velocity in the outlet culvert.</p>
<p>The energy loss is applied as an inlet loss to the outlet culvert if
K_fixed is 0.5 or less. If K_fixed exceeds 0.5, 0.5 is applied as an
inlet loss, and the remainder is applied as a form or bend loss. The
inlet loss component is shown as the first value in the _TSL output
layer, and any remainder as the second (middle) value. Any Form_Loss
value assigned to the outlet culvert via the 1d_nwk layer is also
applied and will be included in the _TSL middle value.</p>
<p>By default, K_fixed is set to zero. Therefore, to assign a K_fixed value
to any manhole using the Fixed loss approach will require using a 1d_mh
layer.</p>
<p>Note that K_fixed is also used by the Engelund loss approach as an
additional (calibration) energy loss if required.</p>
</div>
<div id="JunctionLoss-4" class="section level4 hasAnchor" number="5.11.4.6">
<h4><span class="header-section-number">5.11.4.6</span> Discussion on Approaches to Modelling Pipe Junction Losses<a href="OneD-Domains-1.html#JunctionLoss-4" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>The approach taken to modelling junctions and manhole losses affects the
pipe network’s energy losses and overland flood levels, especially if a
large proportion of the flow is within the pipe network. As a general
guide, the following approaches available in TUFLOW will produce the
following outcomes:</p>
<ol style="list-style-type: decimal">
<li><strong>Ideal Scenario:</strong> If you are fortunate to have the details and
budget to include manholes using 1d_mh layers, this will produce the
most reliable results. Either the Engelund approach or application
of fixed losses based on guidance within the literature, or a
combination of these, is recommended. However, in the absence of
manhole details, one of the following approaches, or a combination,
needs to be adopted.<br />
</li>
<li><strong>Least Conservative</strong> (flatter hydraulic grade lines along pipes
with lower flood levels overall): No manholes (<a href="ECFCommands-1.html#ecfManholesatAllCulvertJunctions">Manholes at All
Culvert Junctions</a> is set to “OFF”
and no 1d_mh layers are specified) and adjustment of structure losses
(the default) applies. In this case there will be minor losses at pipe
junctions, because the <a href="ECFCommands-1.html#ecfStructureLosses">Structure Losses</a> by
default will adjust the entrance and exit losses at pipe connections
down according to the approach/departure velocities (see equations
in Section <a href="OneD-Domains-1.html#LossAdjustment-3">5.8.7</a>). As the velocities are usually similar from one
pipe to the next the entrance and exit losses are reduced downwards,
often close to zero (as would be expected for a junction of two
pipes with no manhole, no change in direction and no change in
invert level).<br />
</li>
<li><strong>Middle Ground:</strong> Automatically create and size manholes and apply
the Engelund approach (the default setting). The automatic creation
of manholes may be slightly conservative as a manhole (including
junctions) is created at every closed node (a closed node occurs
where only culverts/pipes and pits are connected). If there are many short
pipes in the network an excess of manholes may result in
causing greater energy losses. However, if single very long culvert
channels are used to represent lengths of same sized pipes, any
manholes along the long pipes will not be modelled and losses will
be underestimated. In this case it is generally good practice to
split the long culvert channels into several channels (this will
also produce an improved hydraulic grade line along the pipe).<br />
</li>
<li><strong>Most Conservative</strong> (steeper hydraulic grade lines along pipes
with higher flood levels overall): No manholes (<a href="ECFCommands-1.html#ecfManholesatAllCulvertJunctions">Manholes at All
Culvert Junctions</a> set to “OFF”
and no 1d_mh layers specified); fixed structure losses on all
culverts (<a href="ECFCommands-1.html#ecfStructureLosses">Structure Losses</a> set to “FIX” is
specified or 1d_nwk “F” flag is used); and the entrance and exit
loss coefficients are not adjusted. For example if 0.5 and 1.0 are
used, this will apply the full (e.g. 0.5 and 1.0) entrance and
exit loss coefficients at the pipe junctions. It typically produces
the greatest energy losses along pipe networks, and therefore,
produces higher flood levels in upper areas.</li>
</ol>
</div>
</div>
</div>
<div id="Virtual-Pipes-2" class="section level2 hasAnchor" number="5.12">
<h2><span class="header-section-number">5.12</span> Virtual Pipes<a href="OneD-Domains-1.html#Virtual-Pipes-2" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Virtual pipes can be used to simulate flows in drainage networks without
full linking to a 1D model network. A depth flow relationship is applied
at inlet locations and the flow is instantaneously transferred to the
outlet location or out of the model (eg. to the ocean). No pipe details are entered, all
model inputs are defined using points defining the pit
locations (refer to Section <a href="OneD-Domains-1.html#Pits-3">5.11.2</a> below) and references to depth
flow curves:</p>
<ul>
<li>The inlet depth discharge capacity curves are specified in a <a href="ECFCommands-1.html#ecfPitInletDatabase">Pit Inlet
Database</a> (see Section <a href="OneD-Domains-1.html#DD-Database-3">5.11.3</a>) as per a
“VPI” or “Q” type pit in Table <a href="OneD-Domains-1.html#tab:tab-PitsAttributeDescriptions">5.25</a>.<br />
</li>
<li>Using virtual pipes, the flows at the inlet and outlet can be limited.
If the outlet becomes limited, the inlet capacity is reduced and pits
can surcharge. The order in which pits are limited / surcharge is
discussed in Section <a href="OneD-Domains-1.html#OneD-pit-4">5.11.2.2</a>).<br />
</li>
<li>The flows and water levels for each inlet and outlet are output to
.csv files and _TS GIS layers. Note that the downstream pit level is
not known nor is needed for the calculations as the pit is always
assumed to have no downstream influence, therefore, the downstream
levels are output as 10m below the upstream level.</li>
</ul>
<p>Virtual Pipes were introduced to TUFLOW Classic and HPC in the
2018-03-AA release. Prior to build 2018-03-AA virtual pipes were only
available in TUFLOW HPC / GPU.</p>
<p>From build 2023-03-AB or later it is possible to lag virtual pipe flows from the inlet to the outlet. Two additional attributes are required, and these are output in empty files written with the 2023-03-AB or later build of TUFLOW. These additional 1d_pit attributes are described in Table <a href="OneD-Domains-1.html#tab:tab-PitsAttributeDescriptions">5.25</a> below. These data are input on the inlets (VPI).</p>
<p>Two approaches are available for lagging flows, these are “Shift” and “Decay”. For the shift method, the outflow is lagged (shifted) by the lag value time, but is otherwise unchanged.</p>
<p>The decay method is based on exponential filtering of the inflow. A “current internal volume” is tracked:</p>
<p><span class="math display" id="eq:equ-VPILagDecay-1">\[\begin{equation}
Q(T) = \int_{0}^{T} [\dot{Q}_{in}\,(t)-\dot{Q}_{out}\,(t)]dt
\tag{5.23}
\end{equation}\]</span></p>
<p>The outflow rate is computed from the internal volume and the time constant (the Lag_Value attribute):</p>
<p><span class="math display" id="eq:equ-VPILagDecay-2">\[\begin{equation}
\dot{Q}_{out}\,(t) = \frac{Q(t)}{Lag\_Value}
\tag{5.24}
\end{equation}\]</span></p>
<p>Figure <a href="OneD-Domains-1.html#fig:fig-VirtualPipeLag">5.20</a> below shows the lag approaches applied with a lag value of 60 seconds which is input as 0.0167 hours. All pits with the same VP Network ID (i.e. form a local network) must use the same approach and Lag_Value.</p>
<center>
<div class="figure"><span style="display:block;" id="fig:fig-VirtualPipeLag"></span>
<div class="plotly html-widget html-fill-item" id="htmlwidget-fa963ef28000a6157c18" style="width:75%;height:480px;"></div>
<script type="application/json" data-for="htmlwidget-fa963ef28000a6157c18">{"x":{"visdat":{"56ec378a1590":["function () ","plotlyVisDat"]},"cur_data":"56ec378a1590","attrs":{"56ec378a1590":{"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"name":"Inflow","y":[0,0,0,0,0,0,0,0,0,0,0,1,2,3,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,4,3,2,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],"x":[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125,126,127,128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,144,145,146,147,148,149,150,151,152,153,154,155,156,157,158,159,160,161,162,163,164,165,166,167,168,169,170,171,172,173,174,175,176,177,178,179,180],"hovertemplate":"%{y:.1f}<extra><\/extra>","line":{"color":"rgb(26,189,201)"},"type":"scatter","mode":"lines","inherit":true},"56ec378a1590.1":{"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"name":"Outflow: Shift Method","y":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,2,3,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,4,3,2,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],"x":[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125,126,127,128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,144,145,146,147,148,149,150,151,152,153,154,155,156,157,158,159,160,161,162,163,164,165,166,167,168,169,170,171,172,173,174,175,176,177,178,179,180],"hovertemplate":"%{y:.1f}<extra><\/extra>","line":{"color":"rgb(212,208,15)"},"type":"scatter","mode":"line","inherit":true},"56ec378a1590.2":{"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"name":"Outflow: Decay Method","y":[0,0,0,0,0,0,0,0,0,0,0,0,0.016666666666666666,0.049722222222222223,0.098893518518518519,0.16391195987654322,0.24451342721193417,0.32377153675840192,0.40170867781242858,0.47834686651555475,0.55370775207362888,0.62781262287240169,0.70068241249119501,0.77233770561634174,0.84279874385606923,0.9120854314584681,0.98021734093416035,1.0472137185852577,1.1130934899421701,1.1778752651098006,1.2415773440246372,1.3042177216242266,1.3658140929304894,1.4263838580483146,1.4859441270808427,1.5445117249628286,1.6021031962134482,1.6587348096098906,1.7144225627830592,1.7691821867366748,1.8230291502910636,1.8759786644528793,1.9113790200453313,1.9295227030445758,1.9306973246604997,1.9151857025828247,1.8832659408731112,1.8518781751918925,1.8210135389386941,1.7906633132897158,1.7608189247348873,1.7314719426559724,1.7026140769450395,1.6742371756626222,1.6463332227349119,1.6188943356893299,1.5919127634278412,1.5653808840373771,1.539291202636754,1.5136363492594749,1.488409076771817,1.4636022588256201,1.4392088878451932,1.4152220730477731,1.3916350384969769,1.3684411211886942,1.3456337691688824,1.3232065396827344,1.301153097354689,1.2794672123987776,1.2581427588587981,1.2371737128778182,1.2165541509965212,1.1962782484799126,1.1763402776719141,1.156734606377382,1.1374556962710924,1.1184981013332409,1.0998564663110202,1.0815255252058364,1.0635000997857391,1.0457750981226435,1.0283455131539327,1.0112064212680338,0.99435298091356661,0.9777804312316738,0.96148409071114593,0.94545935586596019,0.92970169993486096,0.91420667160261326,0.89896989374256964,0.88398706218019352,0.86925394447719029,0.85476637873590378,0.84052027242363869,0.82651160121657807,0.8127364078629683,0.7991908010652522,0.78587095438083132,0.77277310514115072,0.75989355338879827,0.74722866083231831,0.73477484981844632,0.7225286023214722,0.71048645894944762,0.69864501796695688,0.6870009343341742,0.67555091876193807,0.66429173678257247,0.65322020783619617,0.6423332043722596,0.63162765096605533,0.62110052344995437,0.61074884805912188,0.60056970059146975,0.59056020558161193,0.58071753548858507,0.57103890989710859,0.56152159473215668,0.55216290148662084,0.54296018646184385,0.53391085002081318,0.52501233585379958,0.51626213025623635,0.50765776141863239,0.49919679872832184,0.49087685208284981,0.48269557121480233,0.47465064502788901,0.46673980094409084,0.45896080426168934,0.45131145752399449,0.44378959989859457,0.43639310656695135,0.42911988812416885,0.421967889988766,0.41493509182228655,0.4080195069585818,0.40121918184260541,0.394532195478562,0.38795665888725261,0.38149071457246514,0.37513253599625734,0.3688803270629864,0.36273232161193664,0.35668678291840439,0.35074200320309762,0.34489630314971265,0.33914803143055072,0.33349556424004156,0.32793730483604089,0.3224716830887735,0.31709715503729391,0.31181220245333902,0.30661533241245004,0.30150507687224254,0.29647999225770516,0.29153865905341009,0.28667968140251993,0.28190168671247789,0.27720332526726998,0.27258326984614883,0.26804021534871303,0.2635728784262345,0.25917999711913059,0.2548603305004784,0.25061265832547047,0.2464357806867126,0.24232851767526736,0.23828970904734625,0.23431821389655713,0.23041291033161451,0.22657269515942097,0.2227964835734306,0.21908320884720675,0.21543182203308664,0.21184129166586854,0.2083106034714374,0.20483876008024679,0.20142478074557602,0.19806770106648308],"x":[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125,126,127,128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,144,145,146,147,148,149,150,151,152,153,154,155,156,157,158,159,160,161,162,163,164,165,166,167,168,169,170,171,172,173,174,175,176,177,178,179,180],"hovertemplate":"%{y:.1f}<extra><\/extra>","line":{"color":"rgb(226,1,119)"},"type":"scatter","mode":"line","inherit":true}},"layout":{"margin":{"b":40,"l":60,"t":25,"r":10},"yaxis":{"domain":[0,1],"automargin":true,"title":"Flow (m<sup>3<\/sup>/s)","range":[0,6]},"xaxis":{"domain":[0,1],"automargin":true,"title":"Time (s)","tickvals":[0,30,60,90,120,150,180]},"hovermode":"closest","showlegend":true},"source":"A","config":{"modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false,"displayModeBar":true,"displaylogo":false},"data":[{"name":"Inflow","y":[0,0,0,0,0,0,0,0,0,0,0,1,2,3,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,4,3,2,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],"x":[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125,126,127,128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,144,145,146,147,148,149,150,151,152,153,154,155,156,157,158,159,160,161,162,163,164,165,166,167,168,169,170,171,172,173,174,175,176,177,178,179,180],"hovertemplate":["%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>"],"line":{"color":"rgb(26,189,201)"},"type":"scatter","mode":"lines","marker":{"color":"rgba(31,119,180,1)","line":{"color":"rgba(31,119,180,1)"}},"error_y":{"color":"rgba(31,119,180,1)"},"error_x":{"color":"rgba(31,119,180,1)"},"xaxis":"x","yaxis":"y","frame":null},{"name":"Outflow: Shift Method","y":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,2,3,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,4,3,2,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],"x":[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125,126,127,128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,144,145,146,147,148,149,150,151,152,153,154,155,156,157,158,159,160,161,162,163,164,165,166,167,168,169,170,171,172,173,174,175,176,177,178,179,180],"hovertemplate":["%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>"],"line":{"color":"rgb(212,208,15)"},"type":"scatter","mode":"line+lines","marker":{"color":"rgba(255,127,14,1)","line":{"color":"rgba(255,127,14,1)"}},"error_y":{"color":"rgba(255,127,14,1)"},"error_x":{"color":"rgba(255,127,14,1)"},"xaxis":"x","yaxis":"y","frame":null},{"name":"Outflow: Decay Method","y":[0,0,0,0,0,0,0,0,0,0,0,0,0.016666666666666666,0.049722222222222223,0.098893518518518519,0.16391195987654322,0.24451342721193417,0.32377153675840192,0.40170867781242858,0.47834686651555475,0.55370775207362888,0.62781262287240169,0.70068241249119501,0.77233770561634174,0.84279874385606923,0.9120854314584681,0.98021734093416035,1.0472137185852577,1.1130934899421701,1.1778752651098006,1.2415773440246372,1.3042177216242266,1.3658140929304894,1.4263838580483146,1.4859441270808427,1.5445117249628286,1.6021031962134482,1.6587348096098906,1.7144225627830592,1.7691821867366748,1.8230291502910636,1.8759786644528793,1.9113790200453313,1.9295227030445758,1.9306973246604997,1.9151857025828247,1.8832659408731112,1.8518781751918925,1.8210135389386941,1.7906633132897158,1.7608189247348873,1.7314719426559724,1.7026140769450395,1.6742371756626222,1.6463332227349119,1.6188943356893299,1.5919127634278412,1.5653808840373771,1.539291202636754,1.5136363492594749,1.488409076771817,1.4636022588256201,1.4392088878451932,1.4152220730477731,1.3916350384969769,1.3684411211886942,1.3456337691688824,1.3232065396827344,1.301153097354689,1.2794672123987776,1.2581427588587981,1.2371737128778182,1.2165541509965212,1.1962782484799126,1.1763402776719141,1.156734606377382,1.1374556962710924,1.1184981013332409,1.0998564663110202,1.0815255252058364,1.0635000997857391,1.0457750981226435,1.0283455131539327,1.0112064212680338,0.99435298091356661,0.9777804312316738,0.96148409071114593,0.94545935586596019,0.92970169993486096,0.91420667160261326,0.89896989374256964,0.88398706218019352,0.86925394447719029,0.85476637873590378,0.84052027242363869,0.82651160121657807,0.8127364078629683,0.7991908010652522,0.78587095438083132,0.77277310514115072,0.75989355338879827,0.74722866083231831,0.73477484981844632,0.7225286023214722,0.71048645894944762,0.69864501796695688,0.6870009343341742,0.67555091876193807,0.66429173678257247,0.65322020783619617,0.6423332043722596,0.63162765096605533,0.62110052344995437,0.61074884805912188,0.60056970059146975,0.59056020558161193,0.58071753548858507,0.57103890989710859,0.56152159473215668,0.55216290148662084,0.54296018646184385,0.53391085002081318,0.52501233585379958,0.51626213025623635,0.50765776141863239,0.49919679872832184,0.49087685208284981,0.48269557121480233,0.47465064502788901,0.46673980094409084,0.45896080426168934,0.45131145752399449,0.44378959989859457,0.43639310656695135,0.42911988812416885,0.421967889988766,0.41493509182228655,0.4080195069585818,0.40121918184260541,0.394532195478562,0.38795665888725261,0.38149071457246514,0.37513253599625734,0.3688803270629864,0.36273232161193664,0.35668678291840439,0.35074200320309762,0.34489630314971265,0.33914803143055072,0.33349556424004156,0.32793730483604089,0.3224716830887735,0.31709715503729391,0.31181220245333902,0.30661533241245004,0.30150507687224254,0.29647999225770516,0.29153865905341009,0.28667968140251993,0.28190168671247789,0.27720332526726998,0.27258326984614883,0.26804021534871303,0.2635728784262345,0.25917999711913059,0.2548603305004784,0.25061265832547047,0.2464357806867126,0.24232851767526736,0.23828970904734625,0.23431821389655713,0.23041291033161451,0.22657269515942097,0.2227964835734306,0.21908320884720675,0.21543182203308664,0.21184129166586854,0.2083106034714374,0.20483876008024679,0.20142478074557602,0.19806770106648308],"x":[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125,126,127,128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,144,145,146,147,148,149,150,151,152,153,154,155,156,157,158,159,160,161,162,163,164,165,166,167,168,169,170,171,172,173,174,175,176,177,178,179,180],"hovertemplate":["%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>","%{y:.1f}<extra><\/extra>"],"line":{"color":"rgb(226,1,119)"},"type":"scatter","mode":"line+lines","marker":{"color":"rgba(44,160,44,1)","line":{"color":"rgba(44,160,44,1)"}},"error_y":{"color":"rgba(44,160,44,1)"},"error_x":{"color":"rgba(44,160,44,1)"},"xaxis":"x","yaxis":"y","frame":null}],"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.20000000000000001,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
<p class="caption">
Figure 5.20: <strong>Virtual Pipe Lag Methods</strong>
</p>
</div>
</center>
</div>
<div id="Nodes-2" class="section level2 hasAnchor" number="5.13">
<h2><span class="header-section-number">5.13</span> Nodes<a href="OneD-Domains-1.html#Nodes-2" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Nodes must be defined (either automatically or manually) at the ends of channel elements. They provide storage information, and the 1D water level (the mass balance equation) is calculated at the nodes. Nodes are created in several ways:</p>
<ul>
<li>Automatically, at channel ends (Section <a href="OneD-Domains-1.html#Auto-Node-3">5.13.1</a>).<br />
</li>
<li>Manually, as digitised points in a 1d_nd or 1d_nwk layer (Section <a href="OneD-Domains-1.html#Manual-Node-3">5.13.2</a>).<br />
</li>
<li>From a pit in a 1d_pit or 1d_nwk layer (Section <a href="OneD-Domains-1.html#Pits-3">5.11.2</a>).<br />
</li>
<li>From a manhole in a 1d_mh layer (Section <a href="OneD-Domains-1.html#Manholes-3">5.11.4</a>).</li>
</ul>
<p><strong>Note: The use of the term “node” in this manual refers to <u>both</u> manually digitised nodes and nodes that are automatically created at the ends of channels where no digitised nodes exist.</strong></p>
<p>Table <a href="OneD-Domains-1.html#tab:tab-PointObjectTypes">5.29</a> below lists the available node types.</p>
<table>
<caption>
<span id="tab:tab-PointObjectTypes">Table 5.29: </span><strong>1d_nwk Point Object Types</strong>
</caption>
<thead>
<tr>
<th style="text-align:left;font-weight: bold;color: WHITE !important;background-color: rgba(26, 189, 201, 255) !important;">
Channel/Node
</th>
<th style="text-align:left;font-weight: bold;color: WHITE !important;background-color: rgba(26, 189, 201, 255) !important;">
Type
</th>
<th style="text-align:left;font-weight: bold;color: WHITE !important;background-color: rgba(26, 189, 201, 255) !important;">
Description
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
Node
</td>
<td style="text-align:left;">
<b>Node</b><br />
(or leave blank)
</td>
<td style="text-align:left;">
Used for manually assigning nodal storage or invert levels.
</td>
</tr>
<tr>
<td style="text-align:left;">
Circular Culvert
</td>
<td style="text-align:left;">
<b>C</b>
</td>
<td style="text-align:left;">
Circular (in the vertical) pit channel inlet (see Section <a href="OneD-Domains-1.html#OneD-pit-4">5.11.2.2</a>).
</td>
</tr>
<tr>
<td style="text-align:left;">
Depth-Discharge<br />
Pit or Channel
</td>
<td style="text-align:left;">
<b>Q</b>
</td>
<td style="text-align:left;">
A pit channel whose flow is defined by a depth-discharge curve from a database of curves (see Section <a href="OneD-Domains-1.html#tab:tab-DatabaseFormat">5.26</a>).
</td>
</tr>
<tr>
<td style="text-align:left;">
Rectangular Culvert
</td>
<td style="text-align:left;">
<b>R</b>
</td>
<td style="text-align:left;">
A rectangular (in the vertical) pit channel inlet (see Section <a href="OneD-Domains-1.html#OneD-pit-4">5.11.2.2</a>).
</td>
</tr>
<tr>
<td style="text-align:left;">
Weir
</td>
<td style="text-align:left;">
<b>W</b>
</td>
<td style="text-align:left;">
A weir (in the vertical) pit channel inlet (see Section <a href="OneD-Domains-1.html#OneD-pit-4">5.11.2.2</a>).
</td>
</tr>
</tbody>
</table>
<p>Storage at a node is defined either:</p>
<ul>
<li>automatically via:
<ul>
<li>the widths and lengths of the connected channels (see Section <a href="OneD-Domains-1.html#Auto-Node-3">5.13.1</a>);<br />
</li>
</ul></li>
<li>manually via:
<ul>
<li>a user defined storage table of elevation versus surface area (NA
tables – see Section <a href="OneD-Domains-1.html#NA-Table-4">5.13.2.1</a>); or<br />
</li>
<li>a manually defined Node type 1d_nd or 1d_nwk point objects (see Section
<a href="OneD-Domains-1.html#Manual-Node-3">5.13.2</a>).</li>
</ul></li>
<li>a combination of the above using the Len_or_ANA attribute to add additional storage to the automatic storage.</li>
</ul>
<p>All nodes must have their storage defined by one of these approaches.</p>
<p>Note that checks are also made for the following.</p>
<ul>
<li>The lowest elevation of a node must be below the lowest channel
connected to the node.<br />
</li>
<li>The highest elevation of a node is used to detect instabilities.
Therefore, the highest elevation should be above the highest expected
water level, unless <a href="ECFCommands-1.html#ecfDepthLimitFactor">Depth Limit Factor</a> is used
to extend storage properties above the highest elevation.<br />
</li>
<li>The storage (surface area) of a node must not be zero at any level.</li>
</ul>
<p>It is important to note the logic in assigning node storage:</p>
<ol style="list-style-type: decimal">
<li>User defined NA tables take precedence (see Section <a href="OneD-Domains-1.html#NA-Table-4">5.13.2.1</a>).
The overwrite principle applies, so that if a NA table has been
previously defined, the latter NA table prevails.<br />
</li>
<li>Nodes without any NA tables assigned as for Step 1 above, and which
have one or more connected channels that have the UCS attribute left
blank or set to “Y” or “T”, have their NA table automatically
calculated from the channel widths (see Section <a href="OneD-Domains-1.html#AutoStorageWidths-4">5.13.1.1</a>).<br />
</li>
<li>The Len_or_ANA attribute of a node (or pit) in a 1d_nwk layer can be
used to add additional surface area to the NA table. If no NA table
exists after the above steps, and the Len_or_ANA attribute is
greater than zero, a NA table of constant surface area is created.<br />
</li>
<li>If there are any nodes remaining without a NA table, an ERROR
occurs.</li>
</ol>
<div id="Auto-Node-3" class="section level3 hasAnchor" number="5.13.1">
<h3><span class="header-section-number">5.13.1</span> Automatically Defined Nodes<a href="OneD-Domains-1.html#Auto-Node-3" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>If a node has not been digitised at the end of a channel a new node is automatically created. The ID of the
automatic node is the first ten characters of the Channel ID with a “.1” or “.2” extension. “.1” is used if
the node is at the start of the channel and “.2” if at the end in the direction digitised. If more than one channel is connected to the
created node, the Channel ID that occurs first alphanumerically is used. The automatic creation of nodes
can be switched off using <a href="ECFCommands-1.html#ecfCreateNodes">Create Nodes</a>. If automatic creation of Nodes is turned off, a manually defined
node must be specified at the ends of each channel in the model.</p>
<p>The automatic node approach is used in <a href="https://wiki.tuflow.com/Tutorial_M05">Tutorial Module 5</a>.</p>
<p>The nodal storage for the automatically created nodes consists of 3 parts:</p>
<ul>
<li>Storage calculated from channel/pipe widths;</li>
<li>Storage added from the len_or_ANA attribute of the connected pits/nodes/manholes; and</li>
<li>Storage above the top of channels (Section <a href="OneD-Domains-1.html#Obvert-3">5.13.3</a>).</li>
</ul>
<div id="AutoStorageWidths-4" class="section level4 hasAnchor" number="5.13.1.1">
<h4><span class="header-section-number">5.13.1.1</span> Storage Calculated Automatically from Channel Widths<a href="OneD-Domains-1.html#AutoStorageWidths-4" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>The channel storage is, by default, automatically assigned to the nodes at the channel’s ends. The channel storage approach is invoked using the 1d_nwk UCS attribute, see Table <a href="OneD-Domains-1.html#tab:tab-SpecialAttributeDescriptions">5.18</a>. If the attribute is left blank or set to “Y” (yes) or “T” (true), the channel storage is assigned to the two nodes at the channel’s ends, with the storage split equally between the nodes.
For each node the surface area at different elevations is calculated as the product of the channel width by half the channel length. The channel slope is taken into account when distributing the storage. This approach applies for both 1D open channel networks and 1D pipe networks.</p>
<center>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:fig-Nodal-Storage"></span>
<img src="images/Nodal_Storage.png" alt="**Nodal Storage in Open Channel &amp; Pipe Networks**" width="80%" />
<p class="caption">
Figure 5.21: <strong>Nodal Storage in Open Channel &amp; Pipe Networks</strong>
</p>
</div>
</center>
<p>This approach does not require any specification of a NA table and is therefore the easiest to implement. It is suited to open channel or pipe network nodes where the storage is accurately defined using the channel widths. For example, nodes connecting channels that model the in-bank flow paths of a river. It may not be suited to, for example, floodplain areas where the storage may differ significantly from that calculated using the widths of the floodplain channels.</p>
<p>Care should be taken using this option for G or S channels that have very steep slopes – check that the resulting calculated NA table in the .eof file is satisfactory.</p>
<p>Some structures such as pits, weirs, gates and etc., are treated as ‘zero-length’ channel. These channels do <u>not</u> add storage to the connected nodes, unless a non-zero ‘Len_or_ANA’ value is specified (See Section <a href="OneD-Domains-1.html#AutoStorageANA-4">5.13.1.2</a>).</p>
<p>Nodal storage is <u>not</u> automatically calculated based on the channel width and length if the 1d_nwk UCS attribute is set to “N” (no) or “F” (false). This would require manual specification of an NA table (see Section <a href="OneD-Domains-1.html#NA-Table-4">5.13.2.1</a>).</p>
</div>
<div id="AutoStorageANA-4" class="section level4 hasAnchor" number="5.13.1.2">
<h4><span class="header-section-number">5.13.1.2</span> Additional Storage Added from Len_or_ANA Attribute<a href="OneD-Domains-1.html#AutoStorageANA-4" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>The Len_or_ANA attribute can be used to add extra storage to the connected nodes. For example, the Len_or_ANA attribute of a 1D_nwk pit layer can be used to specify the additional nodal storage of a manhole chamber. Similarly, the Len_or_ANA attribute of a 1D_nwk weir layer can be used to set the additional nodal storages of a broad crest weir. This extra storage may also be useful for stabilising a 1D node provided relatively negligible additional amounts of storage are added. Below is the summary of 1D layers that support the Len_or_ANA attribute:</p>
<ul>
<li>1D_nwk pit or node layer;<br />
</li>
<li>1d_nd and 1d_mh layer;<br />
</li>
<li>1d_nwk weir, gate, spillway and etc.; and<br />
</li>
<li>1d_bg layer.</li>
</ul>
<p>Please see the attribute table of each layer for more details.</p>
<p>Note that a minimum storage area of 1 m<sup>2</sup> applies to all nodes (except for the upstream (ground) nodes of pit channels) for simulation stability. If any ‘Len_or_ANA’ value is less than 1 m<sup>2</sup> it might not be reflected in the NA table. This minimum value can be adjusted using the <a href="ECFCommands-1.html#ecfMinimumNA">Minimum NA</a> and the <a href="ECFCommands-1.html#ecfMinimumNAPit">Minimum NA Pit</a> commands.</p>
</div>
</div>
<div id="Manual-Node-3" class="section level3 hasAnchor" number="5.13.2">
<h3><span class="header-section-number">5.13.2</span> Manually Defined Nodes<a href="OneD-Domains-1.html#Manual-Node-3" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Table <a href="OneD-Domains-1.html#tab:tab-NodesAttributeDescriptions">5.30</a> lists the attributes required for manually created nodes in the 1d_nwk layer format, used with the <a href="ECFCommands-1.html#ecfReadGISNetwork">Read GIS Network</a> command. Table <a href="OneD-Domains-1.html#tab:tab-DescriptionsNodes">5.31</a> lists the attributes required for manually created nodes in the 1d_nd format with the <a href="ECFCommands-1.html#ecfReadGISNode">Read GIS Node</a> command – essentially an updated, cutdown version of the 1d_nwk format that removes unnecessary input fields. Both formats remain supported.</p>
<p>These attribute descriptions are for basic “Node” type 1d_nwk point objects. These may be used for assigning storage and invert levels to channels. They can also be used to automatically link 1D nodes to the 2D domains (without the need to digitise objects within a 2d_bc layer). The 1D/2D link functionality is discussed in detail within Section <a href="DomainLinking-1.html#OneD2DESTRYPipeNetwork-3">10.3.3</a>.</p>
<p>If an ID is specified it must be unique amongst all nodes, and up to 12 characters in length. It may contain any character except for quotes and commas. As a rule, spaces and special characters (e.g. “\”), should be avoided although they are accepted. A node ID can be used for a channel (i.e. a channel and node can have the same ID), but not for another node. The Ignore attribute can be used to ignore a node. It is recommended for the 1d_nwk Type attribute that “Node” is entered to
easily distinguish nodes from channels when querying objects in the GIS, or alternatively place the nodes and pits in separate 1d_nwk layers.</p>
<p>This section does not provide information on pit type nodes (C, Q, R or W) that also use the 1d_nwk file format. Refer to Section <a href="OneD-Domains-1.html#Pits-3">5.11.2</a> for information about pit type nodes.</p>
<table>
<caption>
<span id="tab:tab-NodesAttributeDescriptions">Table 5.30: </span><strong>Nodes: 1D Model Network (1d_nwk) Attribute Descriptions</strong>
</caption>
<thead>
<tr>
<th style="text-align:right;font-weight: bold;color: WHITE !important;background-color: rgba(26, 189, 201, 255) !important;">
No. 
</th>
<th style="text-align:left;font-weight: bold;color: WHITE !important;background-color: rgba(26, 189, 201, 255) !important;">
Default GIS Attribute Name
</th>
<th style="text-align:left;font-weight: bold;color: WHITE !important;background-color: rgba(26, 189, 201, 255) !important;">
Description
</th>
<th style="text-align:left;font-weight: bold;color: WHITE !important;background-color: rgba(26, 189, 201, 255) !important;">
Type
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right;">
1
</td>
<td style="text-align:left;">
ID
</td>
<td style="text-align:left;">
<p>Unique identifier up to 12 characters in length. It may contain any character except for quotes and commas and cannot be blank. As a rule, spaces and special characters (e.g. “\”) should be avoided, although they are accepted. The same ID can be used for a channel and a node, but no two nodes and no two channels can have the same ID.</p>
Digitised nodes can have their ID left blank and TUFLOW will assign an ID.
</td>
<td style="text-align:left;">
Char(12)
</td>
</tr>
<tr>
<td style="text-align:right;">
2
</td>
<td style="text-align:left;">
Type
</td>
<td style="text-align:left;">
Leaving this attribute blank or specifying “Node” will define the point feature as a Node type. “Node” is recommended for easy identification.
</td>
<td style="text-align:left;">
Char(4)
</td>
</tr>
<tr>
<td style="text-align:right;">
3
</td>
<td style="text-align:left;">
Ignore
</td>
<td style="text-align:left;">
If a “T”, “t”, “Y” or “y” is specified, the object will be ignored (T for True and Y for Yes). Any other entry, including a blank field, will treat the object as active.
</td>
<td style="text-align:left;">
Char(1)
</td>
</tr>
<tr>
<td style="text-align:right;">
4
</td>
<td style="text-align:left;">
UCS
</td>
<td style="text-align:left;">
Not used.
</td>
<td style="text-align:left;">
Char(1)
</td>
</tr>
<tr>
<td style="text-align:right;">
5
</td>
<td style="text-align:left;">
Len_or_ANA
</td>
<td style="text-align:left;">
<p>Adds the value specified as additional nodal area (surface area in m<sup>2</sup>). If no nodal area data exists for the node, either via the UCS attribute from the connected 1d_nwk channels, or via NA table, TUFLOW automatically creates an NA table of constant surface area set to this value with an elevation range based on the US_Invert and DS_Invert values.</p>
If a negative value is specified, the absolute of this value is used as a multiplier of the node storage. For example, a value of -1.5 increases the nodal storage table (NA table) by 50% (or to reduce storage use a value between -1 and 0). Increasing storage can be useful to stabilise problematic 1D nodes, provided that the added storage does not adversely distort the results. This multiplication is applied after any effect of <a href="ECFCommands-1.html#ecfMinimumChannelStorageLength">Minimum Channel Storage Length</a>. <a href="ECFCommands-1.html#ecfMinimumNA">Minimum NA</a> is applied after the multiplication.
</td>
<td style="text-align:left;">
Float
</td>
</tr>
<tr>
<td style="text-align:right;">
6
</td>
<td style="text-align:left;">
n_nF_Cd
</td>
<td style="text-align:left;">
Not used.
</td>
<td style="text-align:left;">
Float
</td>
</tr>
<tr>
<td style="text-align:right;">
7
</td>
<td style="text-align:left;">
US_Invert
</td>
<td style="text-align:left;">
If no NA table exists and Len_or_ANA is greater than zero, used to set the upper elevation of the NA table. Note that in this case if US_Invert is less than DS_Invert, US_Invert is set to the DS_Invert plus 5 metres.
</td>
<td style="text-align:left;">
Float
</td>
</tr>
<tr>
<td style="text-align:right;">
8
</td>
<td style="text-align:left;">
DS_Invert
</td>
<td style="text-align:left;">
<p>If no NA table exists and Len_or_ANA is greater than zero, used to set the bottom elevation of the NA table.</p>
<p>Also used to set the upstream and downstream inverts of connected open channels, culverts/pipes and other channel types – as an example see discussion for US_Invert in Table <a href="OneD-Domains-1.html#tab:tab-AttributeDescriptions">5.3</a>. Also see Section <a href="OneD-Domains-1.html#channel-invert-4">5.13.2.2</a>.</p>
If set to -99999, not used.
</td>
<td style="text-align:left;">
Float
</td>
</tr>
<tr>
<td style="text-align:right;">
9
</td>
<td style="text-align:left;">
Form_Loss
</td>
<td style="text-align:left;">
Not used.
</td>
<td style="text-align:left;">
Float
</td>
</tr>
<tr>
<td style="text-align:right;">
10
</td>
<td style="text-align:left;">
pBlockage
</td>
<td style="text-align:left;">
Not used.
</td>
<td style="text-align:left;">
Float
</td>
</tr>
<tr>
<td style="text-align:right;">
11
</td>
<td style="text-align:left;">
Inlet_Type
</td>
<td style="text-align:left;">
Not used.
</td>
<td style="text-align:left;">
Char(256)
</td>
</tr>
<tr>
<td style="text-align:right;">
12
</td>
<td style="text-align:left;">
Conn_1D_2D
</td>
<td style="text-align:left;">
<p>Used to specify a “SX” or “SXZ” flag that automatically creates a 2D SX cell and connection at the 2D cell within which the 1D node occurs. This negates the need to create SX objects in a 2d_bc layer (see Flags attribute in Table <a href="Boundaries-InitialConditions-1.html#tab:tab-ConditionsAttribute">8.6</a>). Notes:</p>
<ul>
<li>“SXZ” flag lowers the 2D cell centre elevation to match the invert of the 1D node (i.e. channel or pipe end). If using the SGS functionality (Section <a href="TwoD-Domains-1.html#SGS-3">7.4.3</a>), the lowered 2D cell retains the original cell volume versus depth curve, but the minumum cell elevation is lowered to match the invert of the 1D node. The lowered cell can be made flat as per the traditional sampling (non-SGS) approach, using the <a href="TCFCommands-1.html#tcfSGSSXZFlagApproach">SGS SX Z Flag Approach</a> command. However, if the underlying DEM has good representation the ground elevation of the structure inlet/outlet, it is not recommended to use the “Z” flag.</li>
<li>By default, if more than one 2D cell is automatically connected, nodes are assumed to be connected using the Sag (S) approach (see Section <a href="OneD-Domains-1.html#Conn-Pits-Nds-4">5.11.2.3</a>). To override the default approach, specify “SXG” for an on-grade connection.<br />
</li>
<li>From 2017 onwards, the SXL option is no longer supported for Nodes (Type = Node or blank). SXL is only available for Pit objects (Type = C, Q, R, W).
</td>
<td style="text-align:left;">
Char(4)
</td>
</tr>
<tr>
<td style="text-align:right;">
13
</td>
<td style="text-align:left;">
Conn_No
</td>
<td style="text-align:left;">
If “SX” is specified for Conn_1D_2D, can be used to control the number of 2D cells connected. See Section <a href="OneD-Domains-1.html#Conn-Pits-Nds-4">5.11.2.3</a> for a discussion on how the 2D cells are selected.</li>
</ul>
<p>The number of 2D cells connected can be controlled by using:</p>
<ul>
<li>A positive value increases the number of automatically selected 2D cells by the value of Conn_No.<br />
</li>
<li>A negative value, this ignores the automatic approach and fixes the number of 2D cells connected to the absolute value of Conn_No. For example, a value of -1 would only connect the pit or node to one (1) 2D cell irrespective of the width.</li>
</ul>
Note that if a culvert with more than one barrel is connected to the node, the number of barrels is used to set the width, which controls the number of automatically selected SX cells.
</td>
<td style="text-align:left;">
Integer
</td>
</tr>
<tr>
<td style="text-align:right;">
14
</td>
<td style="text-align:left;">
Width_or_Dia
</td>
<td style="text-align:left;">
If “SX” is specified for Conn_1D_2D, can be used to control the number of 2D cells connected. For example, if a width of 3.6m is entered on a 2m grid, two boundary cells are automatically created and connected.
</td>
<td style="text-align:left;">
Float
</td>
</tr>
<tr>
<td style="text-align:right;">
15
</td>
<td style="text-align:left;">
Height_or_WF
</td>
<td style="text-align:left;">
Not used.
</td>
<td style="text-align:left;">
Float
</td>
</tr>
<tr>
<td style="text-align:right;">
16
</td>
<td style="text-align:left;">
Number_of
</td>
<td style="text-align:left;">
Not used.
</td>
<td style="text-align:left;">
Integer
</td>
</tr>
<tr>
<td style="text-align:right;">
17
</td>
<td style="text-align:left;">
HConF_or_WC
</td>
<td style="text-align:left;">
Not used.
</td>
<td style="text-align:left;">
Float
</td>
</tr>
<tr>
<td style="text-align:right;">
18
</td>
<td style="text-align:left;">
WConF_or_WEx
</td>
<td style="text-align:left;">
Not used.
</td>
<td style="text-align:left;">
Float
</td>
</tr>
<tr>
<td style="text-align:right;">
19
</td>
<td style="text-align:left;">
EntryC_or_WSa
</td>
<td style="text-align:left;">
Not used.
</td>
<td style="text-align:left;">
Float
</td>
</tr>
<tr>
<td style="text-align:right;">
20
</td>
<td style="text-align:left;">
ExitC_or_WSb
</td>
<td style="text-align:left;">
Not used.
</td>
<td style="text-align:left;">
Float
</td>
</tr>
</tbody>
</table>
<table>
<caption>
<span id="tab:tab-DescriptionsNodes">Table 5.31: </span><strong>1D Model Network (1d_nd) Attribute Descriptions for Nodes</strong>
</caption>
<thead>
<tr>
<th style="text-align:right;font-weight: bold;color: WHITE !important;background-color: rgba(26, 189, 201, 255) !important;">
No. 
</th>
<th style="text-align:left;font-weight: bold;color: WHITE !important;background-color: rgba(26, 189, 201, 255) !important;">
Default GIS Attribute Name
</th>
<th style="text-align:left;font-weight: bold;color: WHITE !important;background-color: rgba(26, 189, 201, 255) !important;">
Description
</th>
<th style="text-align:left;font-weight: bold;color: WHITE !important;background-color: rgba(26, 189, 201, 255) !important;">
Type
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right;">
1
</td>
<td style="text-align:left;">
ID
</td>
<td style="text-align:left;">
<p>Unique identifier up to 12 characters in length. It may contain any character except for quotes and commas and cannot be blank. As a rule, spaces and special characters (e.g. “\”) should be avoided, although they are accepted. The same ID can be used for a channel and a node, but no two nodes and no two channels can have the same ID.</p>
Digitised nodes can have their ID left blank and TUFLOW will assign an ID.
</td>
<td style="text-align:left;">
Char(12)
</td>
</tr>
<tr>
<td style="text-align:right;">
2
</td>
<td style="text-align:left;">
Type
</td>
<td style="text-align:left;">
Not used for Nodes although it can be recommended to type in “Node” for easy identification.
</td>
<td style="text-align:left;">
Char(4)
</td>
</tr>
<tr>
<td style="text-align:right;">
3
</td>
<td style="text-align:left;">
Ignore
</td>
<td style="text-align:left;">
If a “T”, “t”, “Y” or “y” is specified, the object will be ignored (T for True and Y for Yes). Any other entry, including a blank field, will treat the object as active.
</td>
<td style="text-align:left;">
Logical
</td>
</tr>
<tr>
<td style="text-align:right;">
4
</td>
<td style="text-align:left;">
Bed_Level
</td>
<td style="text-align:left;">
<p>If no NA table exists and Len_or_ANA is greater than zero, used to set the bottom elevation of the NA table.</p>
<p>Also used to set the upstream and downstream inverts of connected open channels, culverts/pipes and other channel types – as an example see discussion for US_Invert in Table <a href="OneD-Domains-1.html#tab:tab-AttributeDescriptions">5.3</a>. Also see Section <a href="OneD-Domains-1.html#channel-invert-4">5.13.2.2</a>.</p>
If set to -99999, not used.
</td>
<td style="text-align:left;">
Float
</td>
</tr>
<tr>
<td style="text-align:right;">
5
</td>
<td style="text-align:left;">
ANA
</td>
<td style="text-align:left;">
<p>Adds the value specified as additional nodal area (surface area in m<sup>2</sup>). If no nodal area data exists for the node TUFLOW automatically creates an NA table of constant surface area using this value.</p>
If a negative value is specified, the absolute of this value is used as a multiplier of the node storage. For example, a value of 1.5 increases the nodal storage table (NA table) by 50% (or to reduce storage use a value between -1 and 0). Increasing storage can be useful to stabilise problematic 1D nodes, provided that the added storage does not adversely distort the results. This multiplication is applied after any effect of <a href="ECFCommands-1.html#ecfMinimumChannelStorageLength">Minimum Channel Storage Length</a>. <a href="ECFCommands-1.html#ecfMinimumNA">Minimum NA</a> is applied after the multiplication.
</td>
<td style="text-align:left;">
Float
</td>
</tr>
<tr>
<td style="text-align:right;">
6
</td>
<td style="text-align:left;">
Conn_1D_2D
</td>
<td style="text-align:left;">
<p>Used to specify a “SX” or “SXZ” flag that automatically creates a 2D SX cell and connection at the 2D cell within which the 1D node occurs. This negates the need to create SX objects in a 2d_bc layer (see Flags attribute in Table <a href="Boundaries-InitialConditions-1.html#tab:tab-ConditionsAttribute">8.6</a>).</p>
<p>Notes:</p>
<ul>
<li>“SXZ” flag lowers the 2D cell centre elevation to match the invert of the 1D node (i.e. channel or pipe end). If using the SGS functionality (Section <a href="TwoD-Domains-1.html#SGS-3">7.4.3</a>), the lowered 2D cell retains the original cell volume versus depth curve, but the minumum cell elevation is lowered to match the invert of the 1D node. The lowered cell can be made flat as per the traditional sampling (non-SGS) approach, using the <a href="TCFCommands-1.html#tcfSGSSXZFlagApproach">SGS SX Z Flag Approach</a> command. However, if the underlying DEM has good representation the ground elevation of the structure inlet/outlet, it is not recommended to use the “Z” flag.</li>
<li>By default, if more than one 2D cell is automatically connected, nodes are assumed to be connected using the Sag (S) approach (see Section <a href="OneD-Domains-1.html#Conn-Pits-Nds-4">5.11.2.3</a>). To override the default approach, specify “SXG” for an on-grade connection.<br />
</li>
<li>From 2017 onwards, the SXL option is no longer supported for Nodes (Type = Node or blank). SXL is only available for Pit objects (Type = C, Q, R, W).
</td>
<td style="text-align:left;">
Char(4)
</td>
</tr>
<tr>
<td style="text-align:right;">
7
</td>
<td style="text-align:left;">
Conn_Width
</td>
<td style="text-align:left;">
If “SX” is specified for Conn_1D_2D, can be used to control the number of 2D cells connected as follows. See Section <a href="OneD-Domains-1.html#Conn-Pits-Nds-4">5.11.2.3</a> for a discussion on how the 2D cells are selected.</li>
</ul>
<p>The number of 2D cells connected can be controlled by using:</p>
<ul>
<li>A positive value increases the number of automatically selected 2D cells by the value of Conn_No.<br />
</li>
<li>If negative, this ignores the automatic approach and fixes the number of 2D cells connected to the absolute value of Conn_No. For example, a value of -1 would only connect the pit or node to one (1) 2D cell irrespective of the width.</li>
</ul>
Note that if a culvert with more than one barrel is connected to the node, the number of barrels is used to set the width, which controls the number of automatically selected SX cells.
</td>
<td style="text-align:left;">
Float
</td>
</tr>
<tr>
<td style="text-align:right;">
8
</td>
<td style="text-align:left;">
R1
</td>
<td style="text-align:left;">
Reserved for future use
</td>
<td style="text-align:left;">
Float
</td>
</tr>
<tr>
<td style="text-align:right;">
9
</td>
<td style="text-align:left;">
R2
</td>
<td style="text-align:left;">
Reserved for future use
</td>
<td style="text-align:left;">
Float
</td>
</tr>
<tr>
<td style="text-align:right;">
10
</td>
<td style="text-align:left;">
R3
</td>
<td style="text-align:left;">
Reserved for future use
</td>
<td style="text-align:left;">
Float
</td>
</tr>
</tbody>
</table>
<div id="NA-Table-4" class="section level4 hasAnchor" number="5.13.2.1">
<h4><span class="header-section-number">5.13.2.1</span> Storage Nodes (User Defined NA Tables)<a href="OneD-Domains-1.html#NA-Table-4" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Storage at an existing node can be manually defined using an elevation versus surface area table (NA table – NA stands for <strong><u>N</u></strong>odal surface <strong><u>A</u></strong>rea). This provides the opportunity to accurately define the storage of the floodplain including any backwater areas that do not act as flow paths.</p>
<p>The NA table must be in a comma delimited file (.csv). By default, unique NA table csv files should be defined for each individual location where desired. Within the NA table csv file the first column lists the elevation (m or ft) information and the second column lists the corresponding surface area (m<sup>2</sup> or ft<sup>2</sup>). TUFLOW uses these inputs to define storage volume variation with height.</p>
<p>The NA table is associated with a spatial location with the model via a 1d_na layer using the ECF command <a href="ECFCommands-1.html#ecfReadGISTableLinks">Read GIS Table Links</a>. Similar to the other table link GIS layers (1d_xs and 1d_bg), 1d_na GIS layers and .csv files are often stored in a separate folder underneath the <em>model</em> folder (i.e. same level as the gis folder):</p>
<ul>
<li>1d_na for nodal surface area tables in <em>TUFLOW\<strong>na</strong></em><br />
</li>
<li>1d_xs for cross-section tables in <em>TUFLOW\<strong>xs</strong></em><br />
</li>
<li>1d_bg for bridge loss tables in <em>TUFLOW\<strong>bg</strong></em></li>
</ul>
<p>Unlike the other table link GIS layers (1d_xs and 1d_bg) the 1d_na layer must be digitised as a point, not a line. Table <a href="OneD-Domains-1.html#tab:tab-AreaTableLink">5.32</a> presents the attributes of a 1d_na GIS layer.</p>
<p>1d_na point objects do not create a 1d_nwk node, but they do assign additional storage where nodes already exist. As such, 1d_na point objects must be snapped to a 1d_nwk node point object, or the end of a channel (where automatic nodes are created).</p>
<p><a href="ECFCommands-1.html#ecfMinimumNA">Minimum NA</a> is useful for stabilising 1D nodes that have small surface areas, particularly at shallow depths or when wetting and drying. The <a href="ECFCommands-1.html#ecfMinimumNA">Minimum NA</a> value is not applied to automatically created NA tables for any node with a 1d_nwk Length_or_ANA value that is greater than 0.001m<sup>2</sup>, provided there is no NA table that has been manually specified or created from channel storages. See also <a href="ECFCommands-1.html#ecfMinimumNAPit">Minimum NA Pit</a>.</p>
<p><a href="ECFCommands-1.html#ecfMinimumChannelStorageLength">Minimum Channel Storage Length</a> can be useful to add additional storage for stability reasons to nodes at the ends of very short channels.</p>
<table>
<caption>
<span id="tab:tab-AreaTableLink">Table 5.32: </span><strong>1D Nodal Area Table Link (1d_na) Attribute Descriptions</strong>
</caption>
<thead>
<tr>
<th style="text-align:right;font-weight: bold;color: WHITE !important;background-color: rgba(26, 189, 201, 255) !important;">
No. 
</th>
<th style="text-align:left;font-weight: bold;color: WHITE !important;background-color: rgba(26, 189, 201, 255) !important;">
Default GIS Attribute Name
</th>
<th style="text-align:left;font-weight: bold;color: WHITE !important;background-color: rgba(26, 189, 201, 255) !important;">
Description
</th>
<th style="text-align:left;font-weight: bold;color: WHITE !important;background-color: rgba(26, 189, 201, 255) !important;">
Type
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right;">
1
</td>
<td style="text-align:left;">
Source
</td>
<td style="text-align:left;">
Filename (and path if needed) of the file containing the tabular data. Must be a comma or space delimited text file such as a .csv file.
</td>
<td style="text-align:left;">
Char(50)
</td>
</tr>
<tr>
<td style="text-align:right;">
2
</td>
<td style="text-align:left;">
Type
</td>
<td style="text-align:left;">
<b>“NA”</b>: Nodal surface area versus height table. The first column is elevation and the second surface area in m<sup>2</sup>.
</td>
<td style="text-align:left;">
Char(2)
</td>
</tr>
<tr>
<td style="text-align:right;">
3
</td>
<td style="text-align:left;">
Flags
</td>
<td style="text-align:left;">
No optional flags available
</td>
<td style="text-align:left;">
Char(8)
</td>
</tr>
<tr>
<td style="text-align:right;">
4
</td>
<td style="text-align:left;">
Column_1
</td>
<td style="text-align:left;">
<p>Optional. Identifies a label in the Source file that is the header for the first column of data. Values are read from the first number encountered below the label until a non-number value, blank line or end of the file is encountered.</p>
If this field is left blank, the first column of data in the Source file is used.
</td>
<td style="text-align:left;">
Char(20)
</td>
</tr>
<tr>
<td style="text-align:right;">
5
</td>
<td style="text-align:left;">
Column_2
</td>
<td style="text-align:left;">
<p>Optional. Identifies a label in the Source file that is in the header for the second column of data.</p>
If this field is left blank, the next column of data after Column_1 is used.
</td>
<td style="text-align:left;">
Char(20)
</td>
</tr>
<tr>
<td style="text-align:right;">
6
</td>
<td style="text-align:left;">
Column_3
</td>
<td style="text-align:left;">
Not used.
</td>
<td style="text-align:left;">
Char(20)
</td>
</tr>
<tr>
<td style="text-align:right;">
7
</td>
<td style="text-align:left;">
Column_4
</td>
<td style="text-align:left;">
Not used.
</td>
<td style="text-align:left;">
Char(20)
</td>
</tr>
<tr>
<td style="text-align:right;">
8
</td>
<td style="text-align:left;">
Column_5
</td>
<td style="text-align:left;">
Not used.
</td>
<td style="text-align:left;">
Char(20)
</td>
</tr>
<tr>
<td style="text-align:right;">
9
</td>
<td style="text-align:left;">
Column_6
</td>
<td style="text-align:left;">
Not used.
</td>
<td style="text-align:left;">
Char(20)
</td>
</tr>
<tr>
<td style="text-align:right;">
10
</td>
<td style="text-align:left;">
Z_Increment
</td>
<td style="text-align:left;">
Not used.
</td>
<td style="text-align:left;">
Float
</td>
</tr>
<tr>
<td style="text-align:right;">
11
</td>
<td style="text-align:left;">
Z_Maximum
</td>
<td style="text-align:left;">
Not used.
</td>
<td style="text-align:left;">
Float
</td>
</tr>
<tr>
<td style="text-align:right;">
12
</td>
<td style="text-align:left;">
Skew<br />
(in degrees)
</td>
<td style="text-align:left;">
Not used.
</td>
<td style="text-align:left;">
Float
</td>
</tr>
</tbody>
</table>
</div>
<div id="channel-invert-4" class="section level4 hasAnchor" number="5.13.2.2">
<h4><span class="header-section-number">5.13.2.2</span> Using Nodes to Define Channel Inverts<a href="OneD-Domains-1.html#channel-invert-4" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>1D nodes can be used to set the inverts of connected channels. Channel inverts are sourced from either, end cross-sections (see Section <a href="OneD-Domains-1.html#XS-End-3">5.7.6</a>) or nodes if an upstream or downstream channel invert of -99999 is specified within the 1d_nwk file.</p>
<p>For this option, the basic “Node” type point objects (see Table <a href="OneD-Domains-1.html#tab:tab-NodesAttributeDescriptions">5.30</a> and Table <a href="OneD-Domains-1.html#tab:tab-DescriptionsNodes">5.31</a>) can be used to set the upstream and downstream inverts of any connected channels via the “DS_Invert” attribute in the 1d_nwk format, or “Bed_Level” attribute in the 1d_nd format. If both nodes and cross-sections are specified the cross-section is given higher priority (refer to Section <a href="OneD-Domains-1.html#XS-Mid-3">5.7.5</a>). This feature is useful during pipe network modelling, where cross-sections are not required (the shape is
defined by the culvert type). The downstream inverts (of incoming channels) and upstream invert (of outgoing channels) will be set to the node elevation. In order to model different incoming and outgoing inverts (for manhole drop losses) these need to be specified on the channels.</p>
</div>
<div id="Nd-Auto-Conn-4" class="section level4 hasAnchor" number="5.13.2.3">
<h4><span class="header-section-number">5.13.2.3</span> Automatically Connecting Nodes to 2D domains<a href="OneD-Domains-1.html#Nd-Auto-Conn-4" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>1D nodes may be automatically connected to 2D domains using the Conn_1D_2D attribute in either the 1d_nwk (see Table <a href="OneD-Domains-1.html#tab:tab-NodesAttributeDescriptions">5.30</a>) or 1d_nd (see Table <a href="OneD-Domains-1.html#tab:tab-DescriptionsNodes">5.31</a>) layers. The approach is similar to the connection of 1D pits to a 2D domain and further discussion may be found in Section <a href="OneD-Domains-1.html#Conn-Pits-Nds-4">5.11.2.3</a>.</p>
</div>
</div>
<div id="Obvert-3" class="section level3 hasAnchor" number="5.13.3">
<h3><span class="header-section-number">5.13.3</span> Storage Above Top of Channels<a href="OneD-Domains-1.html#Obvert-3" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>For 1D open channels, the storage area above the highest elevation in the CS or NA table is extended by 10 times the depth the CS or NA table. If the water level exceeds that limit, TUFLOW will exit with an ‘UNSTABLE’ 1D water level error. This limit can be adjusted using the <a href="ECFCommands-1.html#ecfDepthLimitFactor">Depth Limit Factor</a> command (the default value is 10).</p>
<p>For 1D pipes/culverts, the storage above the structure obvert is extended by 5m. By default, it applies 5% of the maximum surface area of the node. This small nodal area is needed to simulate the pressurised flow through pipes/culverts, noting it does not affect the conveyance of the pipe/culvert. For models where the storage contributed by culverts and bridges is significant (e.g. an urban pipe model), use <a href="ECFCommands-1.html#ecfStorageAboveStructureObvert">Storage above Structure Obvert</a> to minimise the storage contributed by these channels above their obvert (note that some storage is necessary to prevent a divide by zero in the equations). Note that this additional storage rarely has any demonstrable affect on the hydraulics as pipe systems tend to be conveyance dominated and the conveyance is not affected by this feature. This is easily checked by running a sensitivity test that, for example, halves (or doubles) the additional storage by changing the <a href="ECFCommands-1.html#ecfStorageAboveStructureObvert">Storage above Structure Obvert</a> value.</p>
<p><img src="images/WQFooter.jpg" width="100%" /></p>

</div>
</div>
</div>
<h3>References<a href="references.html#references" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div id="refs" class="references csl-bib-body hanging-indent" entry-spacing="1" line-spacing="2">
<div id="ref-Austroads1994" class="csl-entry">
Austroads. (1994). <em>Waterway Design - a Guide to the Hydraulic Design of Bridges, Culverts and Floodways</em>. <a href="https://austroads.com.au/">https://austroads.com.au/</a>
</div>
<div id="ref-Austroads2018" class="csl-entry">
Austroads. (2018). <em>Guide to Bridge Technology Part 8, Hydraulic Design of Waterway Structures</em>. <a href="https://austroads.com.au/">https://austroads.com.au/</a>
</div>
<div id="ref-Bos1989" class="csl-entry">
Bos, M. (1989). <em>Discharge Measurement Structures</em> (3rd revised edition.). International Institute for Land Reclamation; Improvement. <a href="https://www.samsamwater.com/library/pub20.pdf">https://www.samsamwater.com/library/pub20.pdf</a>
</div>
<div id="ref-Bradley1978" class="csl-entry">
Bradley, J. (1978). <em>Hydraulics of Bridge Waterways</em> (HDS 1, FIWA). Bridge Division. <a href="https://www.fhwa.dot.gov/engineering/hydraulics/pubs/hds1.pdf">https://www.fhwa.dot.gov/engineering/hydraulics/pubs/hds1.pdf</a>
</div>
<div id="ref-DHI2009" class="csl-entry">
DHI. (2009). <em>MOUSE PIPE FLOW – Reference Manual</em>. Danish Hydraulic Institute. <a href="https://manuals.mikepoweredbydhi.help/2017/Cities/MOUSEPipeFlowReference.pdf">https://manuals.mikepoweredbydhi.help/2017/Cities/MOUSEPipeFlowReference.pdf</a>
</div>
<div id="ref-Henderson1966" class="csl-entry">
Henderson, F. (1966). <em>Open Channel Flow</em>. Macmillan.
</div>
<div id="ref-HRWallingford1988" class="csl-entry">
HR Wallingford. (1988). <em>Afflux at Arch Bridges</em>. <a href="https://eprints.hrwallingford.com/219/1/SR182-Afflux-arch-bridges-HRWallingford.pdf">https://eprints.hrwallingford.com/219/1/SR182-Afflux-arch-bridges-HRWallingford.pdf</a>
</div>
<div id="ref-Huxley2004" class="csl-entry">
Huxley, C. (2004). <em>TUFLOW Testing and Validation</em> (B. ENG. Christopher Dylan Huxley, Ed.) [Thesis]. <a href="https://www.tuflow.com/Download/Publications/TUFLOW%20Validation%20and%20Testing,%20Huxley,%202004.pdf">https://www.tuflow.com/Download/Publications/TUFLOW%20Validation%20and%20Testing,%20Huxley,%202004.pdf</a>
</div>
<div id="ref-IAHRManual1994" class="csl-entry">
Miller, D. (1994). <em>Discharge Characteristics IAHR Hydraulic Structures Design Manual</em> (No. No.8; pp. 249 pages). Hydraulic Design Considerations, Balkema Publ.
</div>
<div id="ref-MorrisonSmith1978" class="csl-entry">
Morrison, W., &amp; Smith, P. (1978). <em>A Practical Application of a Network Model Numerical Simulation of Fluid Motion</em>. North Holland Publishing Company.
</div>
<div id="ref-OllettSyme2016" class="csl-entry">
Ollett, P., &amp; Syme, B. (2016). <em>ARR blockage: Numerical implementation and three case studies</em>. <a href="http://www.hydralinc.com/wp-content/uploads/Ollett-Syme-2016-ARR-Blockage.pdf">http://www.hydralinc.com/wp-content/uploads/Ollett-Syme-2016-ARR-Blockage.pdf</a>
</div>
<div id="ref-TullisRobinson2008" class="csl-entry">
Tullis, B., &amp; Robinson, S. (2008). Quantifying Culvert Exit Loss. <em>Journal of Irrigation and Drainage Engineering</em>, <em>Vol. 134</em>(No. 2), pp. 263–266.
</div>
<div id="ref-USACE1977" class="csl-entry">
USACE. (1977). <em>Hydraulic Design Criteria-Sheets 312</em>. US Army Corp of Engineers. <a href="https://apps.dtic.mil/sti/tr/pdf/ADA092238.pdf">https://apps.dtic.mil/sti/tr/pdf/ADA092238.pdf</a>
</div>
<div id="ref-USBR1987" class="csl-entry">
USBR. (1987). <em>Design of Small Dams</em> [Technology &amp; Engineering]. U.S. Dept. of the Interior, Bureau of Reclamation, 1987-. <a href="https://www.usbr.gov/tsc/techreferences/mands/mands-pdfs/SmallDams.pdf">https://www.usbr.gov/tsc/techreferences/mands/mands-pdfs/SmallDams.pdf</a>
</div>
<div id="ref-WeeksWitheridge2013" class="csl-entry">
Weeks, W., Witheridge, G., Rigby, E., Barthelmess, A., &amp; O’Loughlin, G. (2013). <em>Australian Rainfall and Runoff Revision Project 11: Blockage of Hydraulic Structures</em>. Austalian Institute of Engineers. <a href="https://doi.org/P11/S2/021">https://doi.org/P11/S2/021</a>
</div>
<div id="ref-Witheridge2009" class="csl-entry">
Witheridge, G. (2009). <em>Hydraulic Analysis of the Debris Blockage of Culvert Inlets</em>. Catchments &amp; Creek Pty Ltd.
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="ControlFiles-and-Inputs-1.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="OneD-SWMM-1.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": true,
"facebook": true,
"twitter": true,
"linkedin": true,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": false
},
"fontsettings": false,
"edit": null,
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "section"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
