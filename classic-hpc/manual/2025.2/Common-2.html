<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>7.2 Common Functionality | TUFLOW Classic/HPC User Manual Release Candidate 2025.2 </title>
  <meta name="description" content="TUFLOW Classic/HPC User Manual 2025" />
  <meta name="generator" content="bookdown 0.35 and GitBook 2.6.7" />

  <meta property="og:title" content="7.2 Common Functionality | TUFLOW Classic/HPC User Manual Release Candidate 2025.2 " />
  <meta property="og:type" content="book" />
  
  <meta property="og:description" content="TUFLOW Classic/HPC User Manual 2025" />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="7.2 Common Functionality | TUFLOW Classic/HPC User Manual Release Candidate 2025.2 " />
  
  <meta name="twitter:description" content="TUFLOW Classic/HPC User Manual 2025" />
  

<meta name="author" content="RELEASE CANDIDATE     This is an interim manual that accompanies the TUFLOW Classic/HPC 2025.2.0-rc.1 release candidate executable. The information contained within this interim version may vary from the subsequent final version." />



  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  <link rel="shortcut icon" href="images/TUFLOW.ico" type="image/x-icon" />
<link rel="prev" href="Solvers-2.html"/>
<link rel="next" href="HPC-specific-2.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>
<script src="libs/kePrint-0.0.1/kePrint.js"></script>
<link href="libs/lightable-0.0.1/lightable.css" rel="stylesheet" />
<script src="libs/htmlwidgets-1.6.2/htmlwidgets.js"></script>
<script src="libs/plotly-binding-4.10.2/plotly.js"></script>
<script src="libs/typedarray-0.1/typedarray.min.js"></script>
<link href="libs/crosstalk-1.2.0/css/crosstalk.min.css" rel="stylesheet" />
<script src="libs/crosstalk-1.2.0/js/crosstalk.min.js"></script>
<link href="libs/plotly-htmlwidgets-css-2.11.1/plotly-htmlwidgets.css" rel="stylesheet" />
<script src="libs/plotly-main-2.11.1/plotly-latest.min.js"></script>



<style type="text/css">
  
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
</style>
<style type="text/css">
/* Used with Pandoc 2.11+ new --citeproc when CSL is used */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
  margin-bottom: 1em;
}
.hanging div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}
</style>

<link rel="stylesheet" href="css\style.css" type="text/css" />
<link rel="stylesheet" href="css\toc.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="https://docs.tuflow.com/classic-hpc/manual/2025.2/"><img src="images/TUFLOW_2025.2_release-candidate.png"></a></li>

<li class="divider"></li>
<li><a href="index.html#section" id="toc-section"></a></li>
<li class="chapter" data-level="" data-path="overview.html"><a href="overview.html"><i class="fa fa-check"></i>Overview</a>
<ul>
<li class="chapter" data-level="" data-path="overview.html"><a href="overview.html#how-to-use-this-manual"><i class="fa fa-check"></i>How to use this Manual</a>
<ul>
<li class="chapter" data-level="" data-path="overview.html"><a href="overview.html#navigation"><i class="fa fa-check"></i>Navigation</a></li>
<li class="chapter" data-level="" data-path="overview.html"><a href="overview.html#searching"><i class="fa fa-check"></i>Searching</a></li>
<li class="chapter" data-level="" data-path="overview.html"><a href="overview.html#commands"><i class="fa fa-check"></i>Commands</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="overview.html"><a href="overview.html#about-this-manual"><i class="fa fa-check"></i>About this Manual</a></li>
<li class="chapter" data-level="" data-path="overview.html"><a href="overview.html#glossary-and-notation"><i class="fa fa-check"></i>Glossary and Notation</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="contents.html"><a href="contents.html"><i class="fa fa-check"></i>Contents</a>
<ul>
<li class="chapter" data-level="" data-path="contents.html"><a href="contents.html#list-of-figures"><i class="fa fa-check"></i>List of Figures</a></li>
<li class="chapter" data-level="" data-path="contents.html"><a href="contents.html#list-of-tables"><i class="fa fa-check"></i>List of Tables</a></li>
</ul></li>
<li class="chapter" data-level="1" data-path="Introduction-1.html"><a href="Introduction-1.html"><i class="fa fa-check"></i><b>1</b> Introduction</a>
<ul>
<li class="chapter" data-level="1.1" data-path="TUFLOWProducts-2.html"><a href="TUFLOWProducts-2.html"><i class="fa fa-check"></i><b>1.1</b> TUFLOW Products</a>
<ul>
<li class="chapter" data-level="1.1.1" data-path="TUFLOWProducts-2.html"><a href="TUFLOWProducts-2.html#TUFLOW-CLA-3"><i class="fa fa-check"></i><b>1.1.1</b> TUFLOW Classic – 2D Semi-Implicit Solver</a></li>
<li class="chapter" data-level="1.1.2" data-path="TUFLOWProducts-2.html"><a href="TUFLOWProducts-2.html#TUFLOW-HPC-3"><i class="fa fa-check"></i><b>1.1.2</b> TUFLOW HPC – 2D GPU Accelerated Solver</a></li>
<li class="chapter" data-level="1.1.3" data-path="TUFLOWProducts-2.html"><a href="TUFLOWProducts-2.html#TUFLOW1D-3"><i class="fa fa-check"></i><b>1.1.3</b> TUFLOW 1D (ESTRY) – 1D Solver</a></li>
<li class="chapter" data-level="1.1.4" data-path="TUFLOWProducts-2.html"><a href="TUFLOWProducts-2.html#SWMM1D-3"><i class="fa fa-check"></i><b>1.1.4</b> EPA SWMM – 1D Solver</a></li>
<li class="chapter" data-level="1.1.5" data-path="TUFLOWProducts-2.html"><a href="TUFLOWProducts-2.html#AddonModules-3"><i class="fa fa-check"></i><b>1.1.5</b> Add-on Modules</a>
<ul>
<li class="chapter" data-level="1.1.5.1" data-path="TUFLOWProducts-2.html"><a href="TUFLOWProducts-2.html#ADModule-4"><i class="fa fa-check"></i><b>1.1.5.1</b> Advection Dispersion (AD) Module</a></li>
<li class="chapter" data-level="1.1.5.2" data-path="TUFLOWProducts-2.html"><a href="TUFLOWProducts-2.html#TUFLOWCATCH-4"><i class="fa fa-check"></i><b>1.1.5.2</b> TUFLOW CATCH Module</a></li>
<li class="chapter" data-level="1.1.5.3" data-path="TUFLOWProducts-2.html"><a href="TUFLOWProducts-2.html#GPUHardware-4"><i class="fa fa-check"></i><b>1.1.5.3</b> GPU Hardware (GPU) Module</a></li>
<li class="chapter" data-level="1.1.5.4" data-path="TUFLOWProducts-2.html"><a href="TUFLOWProducts-2.html#QDTorM2DModule-4"><i class="fa fa-check"></i><b>1.1.5.4</b> Quadtree or Multiple 2D Domain (M2D) Module</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="1.2" data-path="TUFLOWWebinars-2.html"><a href="TUFLOWWebinars-2.html"><i class="fa fa-check"></i><b>1.2</b> TUFLOW Webinars</a></li>
<li class="chapter" data-level="1.3" data-path="ModellingEnvironment-2.html"><a href="ModellingEnvironment-2.html"><i class="fa fa-check"></i><b>1.3</b> Modelling Environment</a></li>
<li class="chapter" data-level="1.4" data-path="LimitationsandRecommendations-2.html"><a href="LimitationsandRecommendations-2.html"><i class="fa fa-check"></i><b>1.4</b> Limitations and Recommendations</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="GettingStarted-1.html"><a href="GettingStarted-1.html"><i class="fa fa-check"></i><b>2</b> Getting Started</a>
<ul>
<li class="chapter" data-level="2.1" data-path="HowtoBuildYourFirstModel-2.html"><a href="HowtoBuildYourFirstModel-2.html"><i class="fa fa-check"></i><b>2.1</b> How to Build Your First Model</a>
<ul>
<li class="chapter" data-level="2.1.1" data-path="HowtoBuildYourFirstModel-2.html"><a href="HowtoBuildYourFirstModel-2.html#TutorialModels-3"><i class="fa fa-check"></i><b>2.1.1</b> Tutorial Models</a></li>
<li class="chapter" data-level="2.1.2" data-path="HowtoBuildYourFirstModel-2.html"><a href="HowtoBuildYourFirstModel-2.html#ExampleModels-3"><i class="fa fa-check"></i><b>2.1.2</b> Example Models</a></li>
<li class="chapter" data-level="2.1.3" data-path="HowtoBuildYourFirstModel-2.html"><a href="HowtoBuildYourFirstModel-2.html#DemonstrationModels-3"><i class="fa fa-check"></i><b>2.1.3</b> Demonstration Models</a></li>
<li class="chapter" data-level="2.1.4" data-path="HowtoBuildYourFirstModel-2.html"><a href="HowtoBuildYourFirstModel-2.html#LicenceFreeDemoMode-3"><i class="fa fa-check"></i><b>2.1.4</b> Licence Free Demo Mode</a></li>
<li class="chapter" data-level="2.1.5" data-path="HowtoBuildYourFirstModel-2.html"><a href="HowtoBuildYourFirstModel-2.html#eLearningModules-3"><i class="fa fa-check"></i><b>2.1.5</b> eLearning Modules</a></li>
<li class="chapter" data-level="2.1.6" data-path="HowtoBuildYourFirstModel-2.html"><a href="HowtoBuildYourFirstModel-2.html#InstructorLedTUFLOWTrainingCourses-3"><i class="fa fa-check"></i><b>2.1.6</b> Instructor Led TUFLOW Training Courses</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="TheTUFLOWModellingConcept-2.html"><a href="TheTUFLOWModellingConcept-2.html"><i class="fa fa-check"></i><b>2.2</b> The TUFLOW Modelling Concept</a>
<ul>
<li class="chapter" data-level="2.2.1" data-path="TheTUFLOWModellingConcept-2.html"><a href="TheTUFLOWModellingConcept-2.html#Notepad-3"><i class="fa fa-check"></i><b>2.2.1</b> Notepad++</a></li>
<li class="chapter" data-level="2.2.2" data-path="TheTUFLOWModellingConcept-2.html"><a href="TheTUFLOWModellingConcept-2.html#QGISTUFLOWViewer-3"><i class="fa fa-check"></i><b>2.2.2</b> QGIS / TUFLOW Viewer</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="InstallingandRunningTUFLOW-2.html"><a href="InstallingandRunningTUFLOW-2.html"><i class="fa fa-check"></i><b>2.3</b> Installing and Running TUFLOW</a>
<ul>
<li class="chapter" data-level="2.3.1" data-path="InstallingandRunningTUFLOW-2.html"><a href="InstallingandRunningTUFLOW-2.html#TUFLOWDownloadsandInstallation-3"><i class="fa fa-check"></i><b>2.3.1</b> TUFLOW Downloads and Installation</a></li>
<li class="chapter" data-level="2.3.2" data-path="InstallingandRunningTUFLOW-2.html"><a href="InstallingandRunningTUFLOW-2.html#Licencing-3"><i class="fa fa-check"></i><b>2.3.2</b> TUFLOW Licencing</a>
<ul>
<li class="chapter" data-level="2.3.2.1" data-path="InstallingandRunningTUFLOW-2.html"><a href="InstallingandRunningTUFLOW-2.html#Licencing-3rd-Party"><i class="fa fa-check"></i><b>2.3.2.1</b> 3rd Party Software Libraries</a></li>
</ul></li>
<li class="chapter" data-level="2.3.3" data-path="InstallingandRunningTUFLOW-2.html"><a href="InstallingandRunningTUFLOW-2.html#PerformingSimulations-3"><i class="fa fa-check"></i><b>2.3.3</b> Performing Simulations</a></li>
</ul></li>
<li class="chapter" data-level="2.4" data-path="FoldersFileTypesandFileNaming-2.html"><a href="FoldersFileTypesandFileNaming-2.html"><i class="fa fa-check"></i><b>2.4</b> Folders, File Types and File Naming</a>
<ul>
<li class="chapter" data-level="2.4.1" data-path="FoldersFileTypesandFileNaming-2.html"><a href="FoldersFileTypesandFileNaming-2.html#FolderStructure-3"><i class="fa fa-check"></i><b>2.4.1</b> Folder Structure</a></li>
<li class="chapter" data-level="2.4.2" data-path="FoldersFileTypesandFileNaming-2.html"><a href="FoldersFileTypesandFileNaming-2.html#FileTypes-3"><i class="fa fa-check"></i><b>2.4.2</b> File Types</a></li>
<li class="chapter" data-level="2.4.3" data-path="FoldersFileTypesandFileNaming-2.html"><a href="FoldersFileTypesandFileNaming-2.html#NamingConventions-3"><i class="fa fa-check"></i><b>2.4.3</b> Naming Conventions</a></li>
</ul></li>
<li class="chapter" data-level="2.5" data-path="TipsandTricks-2.html"><a href="TipsandTricks-2.html"><i class="fa fa-check"></i><b>2.5</b> Tips and Tricks</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="Fundamentals-1.html"><a href="Fundamentals-1.html"><i class="fa fa-check"></i><b>3</b> Hydraulic Modelling Fundamentals</a>
<ul>
<li class="chapter" data-level="3.1" data-path="Schematisation-2.html"><a href="Schematisation-2.html"><i class="fa fa-check"></i><b>3.1</b> Schematisation</a>
<ul>
<li class="chapter" data-level="3.1.1" data-path="Schematisation-2.html"><a href="Schematisation-2.html#GeneralGuidance-3"><i class="fa fa-check"></i><b>3.1.1</b> General Guidance</a></li>
<li class="chapter" data-level="3.1.2" data-path="Schematisation-2.html"><a href="Schematisation-2.html#OneD2Dor3D-3"><i class="fa fa-check"></i><b>3.1.2</b> Model Dimensions: 1D, 2D or 3D?</a>
<ul>
<li class="chapter" data-level="3.1.2.1" data-path="Schematisation-2.html"><a href="Schematisation-2.html#OneDimensional-4"><i class="fa fa-check"></i><b>3.1.2.1</b> One Dimensional (1D)</a></li>
<li class="chapter" data-level="3.1.2.2" data-path="Schematisation-2.html"><a href="Schematisation-2.html#TwoDimensional-4"><i class="fa fa-check"></i><b>3.1.2.2</b> Two Dimensional (2D)</a></li>
<li class="chapter" data-level="3.1.2.3" data-path="Schematisation-2.html"><a href="Schematisation-2.html#ThreeDimensional-4"><i class="fa fa-check"></i><b>3.1.2.3</b> Three Dimensional (3D)</a></li>
</ul></li>
<li class="chapter" data-level="3.1.3" data-path="Schematisation-2.html"><a href="Schematisation-2.html#Coupled1D2D-3"><i class="fa fa-check"></i><b>3.1.3</b> Coupled 1D-2D</a></li>
<li class="chapter" data-level="3.1.4" data-path="Schematisation-2.html"><a href="Schematisation-2.html#FixedGridorQuadtreeGrid-3"><i class="fa fa-check"></i><b>3.1.4</b> Quadtree Grid</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="ModelResolutionDiscretisation-2.html"><a href="ModelResolutionDiscretisation-2.html"><i class="fa fa-check"></i><b>3.2</b> Model Resolution (Discretisation)</a>
<ul>
<li class="chapter" data-level="3.2.1" data-path="ModelResolutionDiscretisation-2.html"><a href="ModelResolutionDiscretisation-2.html#OneDNetworks-3"><i class="fa fa-check"></i><b>3.2.1</b> 1D Networks</a></li>
<li class="chapter" data-level="3.2.2" data-path="ModelResolutionDiscretisation-2.html"><a href="ModelResolutionDiscretisation-2.html#CellSizes-3"><i class="fa fa-check"></i><b>3.2.2</b> 2D Cell Sizes</a></li>
<li class="chapter" data-level="3.2.3" data-path="ModelResolutionDiscretisation-2.html"><a href="ModelResolutionDiscretisation-2.html#SubGridSamplingSGS-3"><i class="fa fa-check"></i><b>3.2.3</b> Sub-Grid Sampling (SGS)</a>
<ul>
<li class="chapter" data-level="3.2.3.1" data-path="ModelResolutionDiscretisation-2.html"><a href="ModelResolutionDiscretisation-2.html#SGS-benefits-4"><i class="fa fa-check"></i><b>3.2.3.1</b> Benefits of SGS</a></li>
</ul></li>
<li class="chapter" data-level="3.2.4" data-path="ModelResolutionDiscretisation-2.html"><a href="ModelResolutionDiscretisation-2.html#CellSizeResultsConvergence-3"><i class="fa fa-check"></i><b>3.2.4</b> Cell Size Results Convergence</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="SolutionAccuracy-2.html"><a href="SolutionAccuracy-2.html"><i class="fa fa-check"></i><b>3.3</b> Solution Accuracy</a>
<ul>
<li class="chapter" data-level="3.3.1" data-path="SolutionAccuracy-2.html"><a href="SolutionAccuracy-2.html#FluidFlowPhysicalTerms-3"><i class="fa fa-check"></i><b>3.3.1</b> Fluid Flow Physical Terms</a>
<ul>
<li class="chapter" data-level="3.3.1.1" data-path="SolutionAccuracy-2.html"><a href="SolutionAccuracy-2.html#OneDContinuityEquation-4"><i class="fa fa-check"></i><b>3.3.1.1</b> 1D Continuity Equation</a></li>
<li class="chapter" data-level="3.3.1.2" data-path="SolutionAccuracy-2.html"><a href="SolutionAccuracy-2.html#OneDMomentumEquation-4"><i class="fa fa-check"></i><b>3.3.1.2</b> 1D Momentum Equation</a></li>
<li class="chapter" data-level="3.3.1.3" data-path="SolutionAccuracy-2.html"><a href="SolutionAccuracy-2.html#TwoDContinuityEquation-4"><i class="fa fa-check"></i><b>3.3.1.3</b> 2D Continuity Equation</a></li>
<li class="chapter" data-level="3.3.1.4" data-path="SolutionAccuracy-2.html"><a href="SolutionAccuracy-2.html#TwoDMomentumEquation-4"><i class="fa fa-check"></i><b>3.3.1.4</b> 2D Momentum Equation</a></li>
</ul></li>
<li class="chapter" data-level="3.3.2" data-path="SolutionAccuracy-2.html"><a href="SolutionAccuracy-2.html#FormsoftheEquations-3"><i class="fa fa-check"></i><b>3.3.2</b> Forms of the Equations</a>
<ul>
<li class="chapter" data-level="3.3.2.1" data-path="SolutionAccuracy-2.html"><a href="SolutionAccuracy-2.html#DiffusiveWaveEquation-4"><i class="fa fa-check"></i><b>3.3.2.1</b> Diffusive Wave Equation</a></li>
<li class="chapter" data-level="3.3.2.2" data-path="SolutionAccuracy-2.html"><a href="SolutionAccuracy-2.html#KinematicWaveEquation-4"><i class="fa fa-check"></i><b>3.3.2.2</b> Kinematic Wave Equation</a></li>
</ul></li>
<li class="chapter" data-level="3.3.3" data-path="SolutionAccuracy-2.html"><a href="SolutionAccuracy-2.html#NumericalAccuracy-3"><i class="fa fa-check"></i><b>3.3.3</b> Numerical Accuracy</a></li>
</ul></li>
<li class="chapter" data-level="3.4" data-path="TimestepBackground-2.html"><a href="TimestepBackground-2.html"><i class="fa fa-check"></i><b>3.4</b> Timestep</a>
<ul>
<li class="chapter" data-level="3.4.1" data-path="TimestepBackground-2.html"><a href="TimestepBackground-2.html#FixedVersusAdaptiveTimestepping-3"><i class="fa fa-check"></i><b>3.4.1</b> Fixed versus Adaptive Timestepping</a></li>
<li class="chapter" data-level="3.4.2" data-path="TimestepBackground-2.html"><a href="TimestepBackground-2.html#OneDDomainsTimestep-3"><i class="fa fa-check"></i><b>3.4.2</b> TUFLOW 1D (ESTRY) and EPA SWMM</a></li>
<li class="chapter" data-level="3.4.3" data-path="TimestepBackground-2.html"><a href="TimestepBackground-2.html#TUFLOWClassicTimestep-3"><i class="fa fa-check"></i><b>3.4.3</b> TUFLOW Classic 2D</a></li>
<li class="chapter" data-level="3.4.4" data-path="TimestepBackground-2.html"><a href="TimestepBackground-2.html#TUFLOWHPCTimestep-3"><i class="fa fa-check"></i><b>3.4.4</b> TUFLOW HPC 2D</a>
<ul>
<li class="chapter" data-level="3.4.4.1" data-path="TimestepBackground-2.html"><a href="TimestepBackground-2.html#TimesteppingEfficiencyOutput-4"><i class="fa fa-check"></i><b>3.4.4.1</b> Timestep Efficiency Output</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3.5" data-path="SimulationTimes-2.html"><a href="SimulationTimes-2.html"><i class="fa fa-check"></i><b>3.5</b> Simulation Times</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="ControlFiles-and-Inputs-1.html"><a href="ControlFiles-and-Inputs-1.html"><i class="fa fa-check"></i><b>4</b> Control Files and Input Layers</a>
<ul>
<li class="chapter" data-level="4.1" data-path="ControlFiles-2.html"><a href="ControlFiles-2.html"><i class="fa fa-check"></i><b>4.1</b> Control Files</a>
<ul>
<li class="chapter" data-level="4.1.1" data-path="ControlFiles-2.html"><a href="ControlFiles-2.html#Notation-3"><i class="fa fa-check"></i><b>4.1.1</b> Rules and Notation</a></li>
<li class="chapter" data-level="4.1.2" data-path="ControlFiles-2.html"><a href="ControlFiles-2.html#FilePath-3"><i class="fa fa-check"></i><b>4.1.2</b> File Paths</a></li>
<li class="chapter" data-level="4.1.3" data-path="ControlFiles-2.html"><a href="ControlFiles-2.html#Units-3"><i class="fa fa-check"></i><b>4.1.3</b> Units</a></li>
<li class="chapter" data-level="4.1.4" data-path="ControlFiles-2.html"><a href="ControlFiles-2.html#MathOps-3"><i class="fa fa-check"></i><b>4.1.4</b> Mathematical Operations</a></li>
<li class="chapter" data-level="4.1.5" data-path="ControlFiles-2.html"><a href="ControlFiles-2.html#TCF-3"><i class="fa fa-check"></i><b>4.1.5</b> TCF - TUFLOW Control File</a></li>
<li class="chapter" data-level="4.1.6" data-path="ControlFiles-2.html"><a href="ControlFiles-2.html#ECF-3"><i class="fa fa-check"></i><b>4.1.6</b> ECF - ESTRY Control File</a></li>
<li class="chapter" data-level="4.1.7" data-path="ControlFiles-2.html"><a href="ControlFiles-2.html#TBC-3"><i class="fa fa-check"></i><b>4.1.7</b> TBC - TUFLOW Boundary Control File</a></li>
<li class="chapter" data-level="4.1.8" data-path="ControlFiles-2.html"><a href="ControlFiles-2.html#TGC-3"><i class="fa fa-check"></i><b>4.1.8</b> TGC - TUFLOW Geometry Control File</a></li>
<li class="chapter" data-level="4.1.9" data-path="ControlFiles-2.html"><a href="ControlFiles-2.html#QCF-3"><i class="fa fa-check"></i><b>4.1.9</b> QCF - Quadtree Control File</a></li>
<li class="chapter" data-level="4.1.10" data-path="ControlFiles-2.html"><a href="ControlFiles-2.html#TEF-3"><i class="fa fa-check"></i><b>4.1.10</b> TEF - TUFLOW Event File</a></li>
<li class="chapter" data-level="4.1.11" data-path="ControlFiles-2.html"><a href="ControlFiles-2.html#TOC-3"><i class="fa fa-check"></i><b>4.1.11</b> TOC - TUFLOW Operations Control File</a></li>
<li class="chapter" data-level="4.1.12" data-path="ControlFiles-2.html"><a href="ControlFiles-2.html#TRFC-3"><i class="fa fa-check"></i><b>4.1.12</b> TRFC - TUFLOW Rainfall Control File</a></li>
<li class="chapter" data-level="4.1.13" data-path="ControlFiles-2.html"><a href="ControlFiles-2.html#TESF-3"><i class="fa fa-check"></i><b>4.1.13</b> TESF - TUFLOW External Stress File</a></li>
<li class="chapter" data-level="4.1.14" data-path="ControlFiles-2.html"><a href="ControlFiles-2.html#ADCF-3"><i class="fa fa-check"></i><b>4.1.14</b> ADCF - Advection Dispersion Control File</a></li>
<li class="chapter" data-level="4.1.15" data-path="ControlFiles-2.html"><a href="ControlFiles-2.html#TSCF-3"><i class="fa fa-check"></i><b>4.1.15</b> TSCF - TUFLOW SWMM Control File</a></li>
<li class="chapter" data-level="4.1.16" data-path="ControlFiles-2.html"><a href="ControlFiles-2.html#ReadFile-3"><i class="fa fa-check"></i><b>4.1.16</b> Read File</a></li>
<li class="chapter" data-level="4.1.17" data-path="ControlFiles-2.html"><a href="ControlFiles-2.html#Override-3"><i class="fa fa-check"></i><b>4.1.17</b> Override Files</a></li>
</ul></li>
<li class="chapter" data-level="4.2" data-path="Databases-2.html"><a href="Databases-2.html"><i class="fa fa-check"></i><b>4.2</b> Databases</a></li>
<li class="chapter" data-level="4.3" data-path="GISLayers-2.html"><a href="GISLayers-2.html"><i class="fa fa-check"></i><b>4.3</b> Input Layers</a>
<ul>
<li class="chapter" data-level="4.3.1" data-path="GISLayers-2.html"><a href="GISLayers-2.html#GISFormats-3"><i class="fa fa-check"></i><b>4.3.1</b> Input Formats</a></li>
<li class="chapter" data-level="4.3.2" data-path="GISLayers-2.html"><a href="GISLayers-2.html#GISCommands-3"><i class="fa fa-check"></i><b>4.3.2</b> GIS Commands</a>
<ul>
<li class="chapter" data-level="4.3.2.1" data-path="GISLayers-2.html"><a href="GISLayers-2.html#Attributes-4"><i class="fa fa-check"></i><b>4.3.2.1</b> GIS Attribute Interpretation</a></li>
<li class="chapter" data-level="4.3.2.2" data-path="GISLayers-2.html"><a href="GISLayers-2.html#Objects-4"><i class="fa fa-check"></i><b>4.3.2.2</b> GIS Object Interpretation</a></li>
</ul></li>
<li class="chapter" data-level="4.3.3" data-path="GISLayers-2.html"><a href="GISLayers-2.html#GPKG-3"><i class="fa fa-check"></i><b>4.3.3</b> GeoPackage Commands</a>
<ul>
<li class="chapter" data-level="4.3.3.1" data-path="GISLayers-2.html"><a href="GISLayers-2.html#GPKG-input-4"><i class="fa fa-check"></i><b>4.3.3.1</b> GPKG Input Commands</a></li>
<li class="chapter" data-level="4.3.3.2" data-path="GISLayers-2.html"><a href="GISLayers-2.html#GPKG-output-4"><i class="fa fa-check"></i><b>4.3.3.2</b> GPKG Output Commands</a></li>
</ul></li>
<li class="chapter" data-level="4.3.4" data-path="GISLayers-2.html"><a href="GISLayers-2.html#GRID-3"><i class="fa fa-check"></i><b>4.3.4</b> Grid Commands</a></li>
<li class="chapter" data-level="4.3.5" data-path="GISLayers-2.html"><a href="GISLayers-2.html#TIN-3"><i class="fa fa-check"></i><b>4.3.5</b> TIN Commands</a></li>
<li class="chapter" data-level="4.3.6" data-path="GISLayers-2.html"><a href="GISLayers-2.html#RowCol-3"><i class="fa fa-check"></i><b>4.3.6</b> RowCol Commands (Legacy)</a></li>
</ul></li>
<li class="chapter" data-level="4.4" data-path="LayeringData-2.html"><a href="LayeringData-2.html"><i class="fa fa-check"></i><b>4.4</b> Layering Data</a></li>
<li class="chapter" data-level="4.5" data-path="XF-Files-2.html"><a href="XF-Files-2.html"><i class="fa fa-check"></i><b>4.5</b> XF Files</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="OneD-Domains-1.html"><a href="OneD-Domains-1.html"><i class="fa fa-check"></i><b>5</b> 1D Network Domains - ESTRY</a>
<ul>
<li class="chapter" data-level="5.1" data-path="Scheme-2.html"><a href="Scheme-2.html"><i class="fa fa-check"></i><b>5.1</b> Schematisation</a></li>
<li class="chapter" data-level="5.2" data-path="SolutionScheme-2.html"><a href="SolutionScheme-2.html"><i class="fa fa-check"></i><b>5.2</b> Solution Scheme</a></li>
<li class="chapter" data-level="5.3" data-path="OneD-nwk-2.html"><a href="OneD-nwk-2.html"><i class="fa fa-check"></i><b>5.3</b> 1d_nwk Attributes</a></li>
<li class="chapter" data-level="5.4" data-path="Channel-Intro-2.html"><a href="Channel-Intro-2.html"><i class="fa fa-check"></i><b>5.4</b> Channels Overview</a></li>
<li class="chapter" data-level="5.5" data-path="Open-Channel-2.html"><a href="Open-Channel-2.html"><i class="fa fa-check"></i><b>5.5</b> Open Channels</a>
<ul>
<li class="chapter" data-level="5.5.1" data-path="Open-Channel-2.html"><a href="Open-Channel-2.html#I-channels-3"><i class="fa fa-check"></i><b>5.5.1</b> Inertial Channels</a></li>
<li class="chapter" data-level="5.5.2" data-path="Open-Channel-2.html"><a href="Open-Channel-2.html#NI-channels-3"><i class="fa fa-check"></i><b>5.5.2</b> Non-Inertial Channels</a></li>
</ul></li>
<li class="chapter" data-level="5.6" data-path="XS-2.html"><a href="XS-2.html"><i class="fa fa-check"></i><b>5.6</b> Cross-Sections</a>
<ul>
<li class="chapter" data-level="5.6.1" data-path="XS-2.html"><a href="XS-2.html#XS-flags-3"><i class="fa fa-check"></i><b>5.6.1</b> Type “XZ” Optional Flags</a>
<ul>
<li class="chapter" data-level="5.6.1.1" data-path="XS-2.html"><a href="XS-2.html#RR-4"><i class="fa fa-check"></i><b>5.6.1.1</b> Relative Resistance</a></li>
</ul></li>
<li class="chapter" data-level="5.6.2" data-path="XS-2.html"><a href="XS-2.html#HW-flags-3"><i class="fa fa-check"></i><b>5.6.2</b> Type “HW” Optional Flags</a>
<ul>
<li class="chapter" data-level="5.6.2.1" data-path="XS-2.html"><a href="XS-2.html#HW-A-4"><i class="fa fa-check"></i><b>5.6.2.1</b> Flow Area (A)</a></li>
<li class="chapter" data-level="5.6.2.2" data-path="XS-2.html"><a href="XS-2.html#HW-P-4"><i class="fa fa-check"></i><b>5.6.2.2</b> Wetted Perimeter (P)</a></li>
<li class="chapter" data-level="5.6.2.3" data-path="XS-2.html"><a href="XS-2.html#HW-N-4"><i class="fa fa-check"></i><b>5.6.2.3</b> Manning’s n Values (N)</a></li>
<li class="chapter" data-level="5.6.2.4" data-path="XS-2.html"><a href="XS-2.html#HW-F-4"><i class="fa fa-check"></i><b>5.6.2.4</b> Manning’s n Values (F)</a></li>
</ul></li>
<li class="chapter" data-level="5.6.3" data-path="XS-2.html"><a href="XS-2.html#Parallel-Channel-3"><i class="fa fa-check"></i><b>5.6.3</b> Parallel Channel Analysis</a></li>
<li class="chapter" data-level="5.6.4" data-path="XS-2.html"><a href="XS-2.html#Eff-vs-Total-3"><i class="fa fa-check"></i><b>5.6.4</b> Effective Area versus Total Area</a></li>
<li class="chapter" data-level="5.6.5" data-path="XS-2.html"><a href="XS-2.html#XS-Mid-3"><i class="fa fa-check"></i><b>5.6.5</b> Mid Cross-Sections</a></li>
<li class="chapter" data-level="5.6.6" data-path="XS-2.html"><a href="XS-2.html#XS-End-3"><i class="fa fa-check"></i><b>5.6.6</b> End Cross-Sections</a></li>
<li class="chapter" data-level="5.6.7" data-path="XS-2.html"><a href="XS-2.html#Interpolate-XS-3"><i class="fa fa-check"></i><b>5.6.7</b> Interpolated Cross-Section Protocols</a></li>
</ul></li>
<li class="chapter" data-level="5.7" data-path="Structures-2.html"><a href="Structures-2.html"><i class="fa fa-check"></i><b>5.7</b> Structures</a>
<ul>
<li class="chapter" data-level="5.7.1" data-path="Structures-2.html"><a href="Structures-2.html#culverts-pipes-3"><i class="fa fa-check"></i><b>5.7.1</b> Culverts and Pipes</a>
<ul>
<li class="chapter" data-level="5.7.1.1" data-path="Structures-2.html"><a href="Structures-2.html#Blockage-4"><i class="fa fa-check"></i><b>5.7.1.1</b> Blockage Matrix</a></li>
<li class="chapter" data-level="5.7.1.2" data-path="Structures-2.html"><a href="Structures-2.html#blockage-limitations-4"><i class="fa fa-check"></i><b>5.7.1.2</b> Limitations</a></li>
</ul></li>
<li class="chapter" data-level="5.7.2" data-path="Structures-2.html"><a href="Structures-2.html#Bridges-3"><i class="fa fa-check"></i><b>5.7.2</b> Bridges</a>
<ul>
<li class="chapter" data-level="5.7.2.1" data-path="Structures-2.html"><a href="Structures-2.html#BridgeIntro-4"><i class="fa fa-check"></i><b>5.7.2.1</b> Bridges Overview</a></li>
<li class="chapter" data-level="5.7.2.2" data-path="Structures-2.html"><a href="Structures-2.html#XSLoss-4"><i class="fa fa-check"></i><b>5.7.2.2</b> Bridge Cross-Section and Loss Tables</a></li>
<li class="chapter" data-level="5.7.2.3" data-path="Structures-2.html"><a href="Structures-2.html#B-Bridge-4"><i class="fa fa-check"></i><b>5.7.2.3</b> B Bridge Losses Approach</a></li>
<li class="chapter" data-level="5.7.2.4" data-path="Structures-2.html"><a href="Structures-2.html#BB-Bridge-4"><i class="fa fa-check"></i><b>5.7.2.4</b> BB Bridge Losses Approach</a></li>
</ul></li>
<li class="chapter" data-level="5.7.3" data-path="Structures-2.html"><a href="Structures-2.html#BArch-3"><i class="fa fa-check"></i><b>5.7.3</b> Arch Bridge</a>
<ul>
<li class="chapter" data-level="5.7.3.1" data-path="Structures-2.html"><a href="Structures-2.html#BArch-Editor-4"><i class="fa fa-check"></i><b>5.7.3.1</b> Arch Bridge Editor</a></li>
<li class="chapter" data-level="5.7.3.2" data-path="Structures-2.html"><a href="Structures-2.html#BArch-Min-Blc-4"><i class="fa fa-check"></i><b>5.7.3.2</b> Arch Minimum Blockage</a></li>
</ul></li>
<li class="chapter" data-level="5.7.4" data-path="Structures-2.html"><a href="Structures-2.html#Weir-3"><i class="fa fa-check"></i><b>5.7.4</b> Weirs</a>
<ul>
<li class="chapter" data-level="5.7.4.1" data-path="Structures-2.html"><a href="Structures-2.html#Weir-Intro-4"><i class="fa fa-check"></i><b>5.7.4.1</b> Weirs Overview</a></li>
<li class="chapter" data-level="5.7.4.2" data-path="Structures-2.html"><a href="Structures-2.html#W-Weir-4"><i class="fa fa-check"></i><b>5.7.4.2</b> Original Weirs (W)</a></li>
<li class="chapter" data-level="5.7.4.3" data-path="Structures-2.html"><a href="Structures-2.html#Adv-Weir-4"><i class="fa fa-check"></i><b>5.7.4.3</b> Advanced Weirs (WB, WC, WD, WO, WR, WT, WV, WW)</a></li>
<li class="chapter" data-level="5.7.4.4" data-path="Structures-2.html"><a href="Structures-2.html#Submerge-4"><i class="fa fa-check"></i><b>5.7.4.4</b> Advanced Weir Submergence Curves</a></li>
<li class="chapter" data-level="5.7.4.5" data-path="Structures-2.html"><a href="Structures-2.html#Auto-Weir-4"><i class="fa fa-check"></i><b>5.7.4.5</b> Automatically Created Weirs</a></li>
<li class="chapter" data-level="5.7.4.6" data-path="Structures-2.html"><a href="Structures-2.html#VW-Channel-4"><i class="fa fa-check"></i><b>5.7.4.6</b> VW Channels (Variable Geometry Weir)</a></li>
</ul></li>
<li class="chapter" data-level="5.7.5" data-path="Structures-2.html"><a href="Structures-2.html#SP-3"><i class="fa fa-check"></i><b>5.7.5</b> Spillways (SP)</a></li>
<li class="chapter" data-level="5.7.6" data-path="Structures-2.html"><a href="Structures-2.html#SG-3"><i class="fa fa-check"></i><b>5.7.6</b> Sluice Gates (SG)</a></li>
<li class="chapter" data-level="5.7.7" data-path="Structures-2.html"><a href="Structures-2.html#LossAdjustment-3"><i class="fa fa-check"></i><b>5.7.7</b> Adjustment of Contraction and Expansion Losses</a></li>
</ul></li>
<li class="chapter" data-level="5.8" data-path="Special-Channels-2.html"><a href="Special-Channels-2.html"><i class="fa fa-check"></i><b>5.8</b> Special Channels</a>
<ul>
<li class="chapter" data-level="5.8.1" data-path="Special-Channels-2.html"><a href="Special-Channels-2.html#M-Channel-3"><i class="fa fa-check"></i><b>5.8.1</b> M Channels (User Defined Flow Matrix)</a></li>
<li class="chapter" data-level="5.8.2" data-path="Special-Channels-2.html"><a href="Special-Channels-2.html#Q-Channels-3"><i class="fa fa-check"></i><b>5.8.2</b> Q Channels (Upstream Depth-Discharge Relationship)</a></li>
<li class="chapter" data-level="5.8.3" data-path="Special-Channels-2.html"><a href="Special-Channels-2.html#XConnect-3"><i class="fa fa-check"></i><b>5.8.3</b> X Connectors</a></li>
<li class="chapter" data-level="5.8.4" data-path="Special-Channels-2.html"><a href="Special-Channels-2.html#Legacy-Channel-3"><i class="fa fa-check"></i><b>5.8.4</b> Legacy Channels</a></li>
<li class="chapter" data-level="5.8.5" data-path="Special-Channels-2.html"><a href="Special-Channels-2.html#OneD-nwk-3"><i class="fa fa-check"></i><b>5.8.5</b> 1d_nwk Attributes (M, P, Q, SG, SP Channels)</a></li>
</ul></li>
<li class="chapter" data-level="5.9" data-path="OperationalChannels-2.html"><a href="OperationalChannels-2.html"><i class="fa fa-check"></i><b>5.9</b> Operational Channels</a>
<ul>
<li class="chapter" data-level="5.9.1" data-path="OperationalChannels-2.html"><a href="OperationalChannels-2.html#TOC-Logic-3"><i class="fa fa-check"></i><b>5.9.1</b> .toc File Commands and Logic</a>
<ul>
<li class="chapter" data-level="5.9.1.1" data-path="OperationalChannels-2.html"><a href="OperationalChannels-2.html#TOC-Define-4"><i class="fa fa-check"></i><b>5.9.1.1</b> Define Control Command</a></li>
<li class="chapter" data-level="5.9.1.2" data-path="OperationalChannels-2.html"><a href="OperationalChannels-2.html#UserDef-4"><i class="fa fa-check"></i><b>5.9.1.2</b> User Defined Variables</a></li>
<li class="chapter" data-level="5.9.1.3" data-path="OperationalChannels-2.html"><a href="OperationalChannels-2.html#Logic-4"><i class="fa fa-check"></i><b>5.9.1.3</b> Logic Rules</a></li>
<li class="chapter" data-level="5.9.1.4" data-path="OperationalChannels-2.html"><a href="OperationalChannels-2.html#Increment-Operate-4"><i class="fa fa-check"></i><b>5.9.1.4</b> Incremental Operators</a></li>
</ul></li>
<li class="chapter" data-level="5.9.2" data-path="OperationalChannels-2.html"><a href="OperationalChannels-2.html#Pumps-3"><i class="fa fa-check"></i><b>5.9.2</b> Pumps (P and PO)</a></li>
<li class="chapter" data-level="5.9.3" data-path="OperationalChannels-2.html"><a href="OperationalChannels-2.html#QO-3"><i class="fa fa-check"></i><b>5.9.3</b> QO Channels</a></li>
<li class="chapter" data-level="5.9.4" data-path="OperationalChannels-2.html"><a href="OperationalChannels-2.html#RO-3"><i class="fa fa-check"></i><b>5.9.4</b> Gated Drowned Rectangular Culverts (RO)</a></li>
<li class="chapter" data-level="5.9.5" data-path="OperationalChannels-2.html"><a href="OperationalChannels-2.html#SG-SGO-3"><i class="fa fa-check"></i><b>5.9.5</b> Sluice Gates (SG and SGO)</a></li>
<li class="chapter" data-level="5.9.6" data-path="OperationalChannels-2.html"><a href="OperationalChannels-2.html#SPO-3"><i class="fa fa-check"></i><b>5.9.6</b> Spillways with Gates (SPO)</a></li>
<li class="chapter" data-level="5.9.7" data-path="OperationalChannels-2.html"><a href="OperationalChannels-2.html#Weirs-Operational-3"><i class="fa fa-check"></i><b>5.9.7</b> Weirs (WBO, WCO, WDO, WOO, WRO, WTO)</a></li>
<li class="chapter" data-level="5.9.8" data-path="OperationalChannels-2.html"><a href="OperationalChannels-2.html#PFDF-3"><i class="fa fa-check"></i><b>5.9.8</b> Piping and Dam Failure</a>
<ul>
<li class="chapter" data-level="5.9.8.1" data-path="OperationalChannels-2.html"><a href="OperationalChannels-2.html#PF-4"><i class="fa fa-check"></i><b>5.9.8.1</b> Piping Failure (PF)</a></li>
<li class="chapter" data-level="5.9.8.2" data-path="OperationalChannels-2.html"><a href="OperationalChannels-2.html#DF-4"><i class="fa fa-check"></i><b>5.9.8.2</b> Dam Failure (DF)</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="5.10" data-path="Pipes-2.html"><a href="Pipes-2.html"><i class="fa fa-check"></i><b>5.10</b> Pipe Networks</a>
<ul>
<li class="chapter" data-level="5.10.1" data-path="Pipes-2.html"><a href="Pipes-2.html#Pipes-3"><i class="fa fa-check"></i><b>5.10.1</b> Pipes</a></li>
<li class="chapter" data-level="5.10.2" data-path="Pipes-2.html"><a href="Pipes-2.html#Pits-3"><i class="fa fa-check"></i><b>5.10.2</b> Pits</a>
<ul>
<li class="chapter" data-level="5.10.2.1" data-path="Pipes-2.html"><a href="Pipes-2.html#OneD-pit-nwk-4"><i class="fa fa-check"></i><b>5.10.2.1</b> 1d_nwk Pits</a></li>
<li class="chapter" data-level="5.10.2.2" data-path="Pipes-2.html"><a href="Pipes-2.html#OneD-pit-4"><i class="fa fa-check"></i><b>5.10.2.2</b> 1d_pit Pits</a></li>
<li class="chapter" data-level="5.10.2.3" data-path="Pipes-2.html"><a href="Pipes-2.html#Conn-Pits-Nds-4"><i class="fa fa-check"></i><b>5.10.2.3</b> Connecting Pits and Nodes to 2D Domains</a></li>
</ul></li>
<li class="chapter" data-level="5.10.3" data-path="Pipes-2.html"><a href="Pipes-2.html#DD-Database-3"><i class="fa fa-check"></i><b>5.10.3</b> Pit Inlet and Depth/Stage vs Discharge Databases</a>
<ul>
<li class="chapter" data-level="5.10.3.1" data-path="Pipes-2.html"><a href="Pipes-2.html#Xfall-4"><i class="fa fa-check"></i><b>5.10.3.1</b> Road Crossfall Options</a></li>
</ul></li>
<li class="chapter" data-level="5.10.4" data-path="Pipes-2.html"><a href="Pipes-2.html#Manholes-3"><i class="fa fa-check"></i><b>5.10.4</b> Manholes</a>
<ul>
<li class="chapter" data-level="5.10.4.1" data-path="Pipes-2.html"><a href="Pipes-2.html#Auto-MH-4"><i class="fa fa-check"></i><b>5.10.4.1</b> Automatically Assigned Manholes</a></li>
<li class="chapter" data-level="5.10.4.2" data-path="Pipes-2.html"><a href="Pipes-2.html#OneD-mh-4"><i class="fa fa-check"></i><b>5.10.4.2</b> Manually Assigned Manholes (1d_mh Layer)</a></li>
<li class="chapter" data-level="5.10.4.3" data-path="Pipes-2.html"><a href="Pipes-2.html#mh-direction-4"><i class="fa fa-check"></i><b>5.10.4.3</b> Digitising Culverts Connected to Manholes</a></li>
<li class="chapter" data-level="5.10.4.4" data-path="Pipes-2.html"><a href="Pipes-2.html#Engelund-4"><i class="fa fa-check"></i><b>5.10.4.4</b> Engelund Manhole Loss Approach</a></li>
<li class="chapter" data-level="5.10.4.5" data-path="Pipes-2.html"><a href="Pipes-2.html#FixedLoss-4"><i class="fa fa-check"></i><b>5.10.4.5</b> Fixed Manhole Loss Approach</a></li>
<li class="chapter" data-level="5.10.4.6" data-path="Pipes-2.html"><a href="Pipes-2.html#JunctionLoss-4"><i class="fa fa-check"></i><b>5.10.4.6</b> Discussion on Approaches to Modelling Pipe Junction Losses</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="5.11" data-path="Virtual-Pipes-2.html"><a href="Virtual-Pipes-2.html"><i class="fa fa-check"></i><b>5.11</b> Virtual Pipes</a></li>
<li class="chapter" data-level="5.12" data-path="Nodes-2.html"><a href="Nodes-2.html"><i class="fa fa-check"></i><b>5.12</b> Nodes</a>
<ul>
<li class="chapter" data-level="5.12.1" data-path="Nodes-2.html"><a href="Nodes-2.html#Auto-Node-3"><i class="fa fa-check"></i><b>5.12.1</b> Automatically Defined Nodes</a>
<ul>
<li class="chapter" data-level="5.12.1.1" data-path="Nodes-2.html"><a href="Nodes-2.html#AutoStorageWidths-4"><i class="fa fa-check"></i><b>5.12.1.1</b> Storage Calculated Automatically from Channel Widths</a></li>
<li class="chapter" data-level="5.12.1.2" data-path="Nodes-2.html"><a href="Nodes-2.html#AutoStorageANA-4"><i class="fa fa-check"></i><b>5.12.1.2</b> Additional Storage Added from Len_or_ANA Attribute</a></li>
</ul></li>
<li class="chapter" data-level="5.12.2" data-path="Nodes-2.html"><a href="Nodes-2.html#Manual-Node-3"><i class="fa fa-check"></i><b>5.12.2</b> Manually Defined Nodes</a>
<ul>
<li class="chapter" data-level="5.12.2.1" data-path="Nodes-2.html"><a href="Nodes-2.html#NA-Table-4"><i class="fa fa-check"></i><b>5.12.2.1</b> Storage Nodes (User Defined NA Tables)</a></li>
<li class="chapter" data-level="5.12.2.2" data-path="Nodes-2.html"><a href="Nodes-2.html#channel-invert-4"><i class="fa fa-check"></i><b>5.12.2.2</b> Using Nodes to Define Channel Inverts</a></li>
<li class="chapter" data-level="5.12.2.3" data-path="Nodes-2.html"><a href="Nodes-2.html#Nd-Auto-Conn-4"><i class="fa fa-check"></i><b>5.12.2.3</b> Automatically Connecting Nodes to 2D domains</a></li>
</ul></li>
<li class="chapter" data-level="5.12.3" data-path="Nodes-2.html"><a href="Nodes-2.html#Obvert-3"><i class="fa fa-check"></i><b>5.12.3</b> Storage Above Top of Channels</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="6" data-path="OneD-SWMM-1.html"><a href="OneD-SWMM-1.html"><i class="fa fa-check"></i><b>6</b> 1D Network Domains - EPA SWMM</a>
<ul>
<li class="chapter" data-level="6.1" data-path="SWMM-Introduction-2.html"><a href="SWMM-Introduction-2.html"><i class="fa fa-check"></i><b>6.1</b> Introduction</a>
<ul>
<li class="chapter" data-level="6.1.1" data-path="SWMM-Introduction-2.html"><a href="SWMM-Introduction-2.html#TUFLOW-SWMM-Capabilities-3"><i class="fa fa-check"></i><b>6.1.1</b> TUFLOW-SWMM Capabilities</a></li>
<li class="chapter" data-level="6.1.2" data-path="SWMM-Introduction-2.html"><a href="SWMM-Introduction-2.html#SWMM-UserResources-3"><i class="fa fa-check"></i><b>6.1.2</b> Additional SWMM User Resources</a></li>
</ul></li>
<li class="chapter" data-level="6.2" data-path="ModelSetup-2.html"><a href="ModelSetup-2.html"><i class="fa fa-check"></i><b>6.2</b> Model Setup</a>
<ul>
<li class="chapter" data-level="6.2.1" data-path="ModelSetup-2.html"><a href="ModelSetup-2.html#SwmmModel-3"><i class="fa fa-check"></i><b>6.2.1</b> SWMM Model</a></li>
<li class="chapter" data-level="6.2.2" data-path="ModelSetup-2.html"><a href="ModelSetup-2.html#T-SWMM-Sims-3"><i class="fa fa-check"></i><b>6.2.2</b> TUFLOW-SWMM Model Simulation</a></li>
<li class="chapter" data-level="6.2.3" data-path="ModelSetup-2.html"><a href="ModelSetup-2.html#SWMM-ESTRY-Linking-3"><i class="fa fa-check"></i><b>6.2.3</b> Linking SWMM to TUFLOW 2D and ESTRY</a></li>
<li class="chapter" data-level="6.2.4" data-path="ModelSetup-2.html"><a href="ModelSetup-2.html#SWMMSettings-3"><i class="fa fa-check"></i><b>6.2.4</b> SWMM Simulation Option Settings</a></li>
<li class="chapter" data-level="6.2.5" data-path="ModelSetup-2.html"><a href="ModelSetup-2.html#SWMM-BCDB-3"><i class="fa fa-check"></i><b>6.2.5</b> Using the TUFLOW BC Database in SWMM</a></li>
</ul></li>
<li class="chapter" data-level="6.3" data-path="SWMMGISTools-2.html"><a href="SWMMGISTools-2.html"><i class="fa fa-check"></i><b>6.3</b> SWMM GIS Tools</a>
<ul>
<li class="chapter" data-level="6.3.1" data-path="SWMMGISTools-2.html"><a href="SWMMGISTools-2.html#SWMMGPKGFormat-3"><i class="fa fa-check"></i><b>6.3.1</b> GeoPackage File Format</a>
<ul>
<li class="chapter" data-level="6.3.1.1" data-path="SWMMGISTools-2.html"><a href="SWMMGISTools-2.html#SWMMGPKGTables-4"><i class="fa fa-check"></i><b>6.3.1.1</b> GeoPackage File Table Overview</a></li>
<li class="chapter" data-level="6.3.1.2" data-path="SWMMGISTools-2.html"><a href="SWMMGISTools-2.html#SWMMGPGOptionsTable-4"><i class="fa fa-check"></i><b>6.3.1.2</b> GeoPackage Options Table</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="6.4" data-path="SWMMOutputs-2.html"><a href="SWMMOutputs-2.html"><i class="fa fa-check"></i><b>6.4</b> SWMM Outputs</a></li>
<li class="chapter" data-level="6.5" data-path="SWMMInclusionTUFLOW-2.html"><a href="SWMMInclusionTUFLOW-2.html"><i class="fa fa-check"></i><b>6.5</b> SWMM Inclusion in TUFLOW</a>
<ul>
<li class="chapter" data-level="6.5.1" data-path="SWMMInclusionTUFLOW-2.html"><a href="SWMMInclusionTUFLOW-2.html#SWMMLibraryVersion-3"><i class="fa fa-check"></i><b>6.5.1</b> SWMM Library Version</a></li>
<li class="chapter" data-level="6.5.2" data-path="SWMMInclusionTUFLOW-2.html"><a href="SWMMInclusionTUFLOW-2.html#SWMMCode-in-TUFLOW-3"><i class="fa fa-check"></i><b>6.5.2</b> Embedded SWMM Code in TUFLOW</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="7" data-path="TwoD-Domains-1.html"><a href="TwoD-Domains-1.html"><i class="fa fa-check"></i><b>7</b> 2D Domains</a>
<ul>
<li class="chapter" data-level="7.1" data-path="Solvers-2.html"><a href="Solvers-2.html"><i class="fa fa-check"></i><b>7.1</b> Solvers</a>
<ul>
<li class="chapter" data-level="7.1.1" data-path="Solvers-2.html"><a href="Solvers-2.html#HPCTwoDSolver-3"><i class="fa fa-check"></i><b>7.1.1</b> TUFLOW HPC 2D Solver</a></li>
<li class="chapter" data-level="7.1.2" data-path="Solvers-2.html"><a href="Solvers-2.html#CLATwoDSolver-3"><i class="fa fa-check"></i><b>7.1.2</b> TUFLOW Classic 2D Solver</a></li>
<li class="chapter" data-level="7.1.3" data-path="Solvers-2.html"><a href="Solvers-2.html#Schematisation-3"><i class="fa fa-check"></i><b>7.1.3</b> Cell Schematisation</a>
<ul>
<li class="chapter" data-level="7.1.3.1" data-path="Solvers-2.html"><a href="Solvers-2.html#computational-points-4"><i class="fa fa-check"></i><b>7.1.3.1</b> Computational Points</a></li>
</ul></li>
<li class="chapter" data-level="7.1.4" data-path="Solvers-2.html"><a href="Solvers-2.html#turbulence-overview"><i class="fa fa-check"></i><b>7.1.4</b> Turbulence</a>
<ul>
<li class="chapter" data-level="7.1.4.1" data-path="Solvers-2.html"><a href="Solvers-2.html#Dry-Wall-4"><i class="fa fa-check"></i><b>7.1.4.1</b> Dry Wall Treatment</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="7.2" data-path="Common-2.html"><a href="Common-2.html"><i class="fa fa-check"></i><b>7.2</b> Common Functionality</a>
<ul>
<li class="chapter" data-level="7.2.1" data-path="Common-2.html"><a href="Common-2.html#Domain-3"><i class="fa fa-check"></i><b>7.2.1</b> Defining the Domain</a></li>
<li class="chapter" data-level="7.2.2" data-path="Common-2.html"><a href="Common-2.html#CellCodes-3"><i class="fa fa-check"></i><b>7.2.2</b> Active / Inactive Cells</a></li>
<li class="chapter" data-level="7.2.3" data-path="Common-2.html"><a href="Common-2.html#layering-3"><i class="fa fa-check"></i><b>7.2.3</b> Data Layering</a></li>
<li class="chapter" data-level="7.2.4" data-path="Common-2.html"><a href="Common-2.html#SamplingData-3"><i class="fa fa-check"></i><b>7.2.4</b> Sampling of Data Sets</a>
<ul>
<li class="chapter" data-level="7.2.4.1" data-path="Common-2.html"><a href="Common-2.html#traditional-sampling-4"><i class="fa fa-check"></i><b>7.2.4.1</b> Traditional Sampling Approach</a></li>
</ul></li>
<li class="chapter" data-level="7.2.5" data-path="Common-2.html"><a href="Common-2.html#elevations-3"><i class="fa fa-check"></i><b>7.2.5</b> Elevations</a>
<ul>
<li class="chapter" data-level="7.2.5.1" data-path="Common-2.html"><a href="Common-2.html#DEMGrids-3"><i class="fa fa-check"></i><b>7.2.5.1</b> Direct Reading of DEM Grids</a></li>
<li class="chapter" data-level="7.2.5.2" data-path="Common-2.html"><a href="Common-2.html#zsh-4"><i class="fa fa-check"></i><b>7.2.5.2</b> Z Shape Layers (2d_zsh)</a></li>
<li class="chapter" data-level="7.2.5.3" data-path="Common-2.html"><a href="Common-2.html#vzsh-4"><i class="fa fa-check"></i><b>7.2.5.3</b> Variable Z Shape Layer (2d_vzsh)</a></li>
<li class="chapter" data-level="7.2.5.4" data-path="Common-2.html"><a href="Common-2.html#ztin-4"><i class="fa fa-check"></i><b>7.2.5.4</b> 3D TIN Layers (2d_ztin)</a></li>
<li class="chapter" data-level="7.2.5.5" data-path="Common-2.html"><a href="Common-2.html#zln-4"><i class="fa fa-check"></i><b>7.2.5.5</b> 3D Breakline Layers (2d_zln)</a></li>
<li class="chapter" data-level="7.2.5.6" data-path="Common-2.html"><a href="Common-2.html#zpt-4"><i class="fa fa-check"></i><b>7.2.5.6</b> Zpt Layers (2d_zpt)</a></li>
<li class="chapter" data-level="7.2.5.7" data-path="Common-2.html"><a href="Common-2.html#using-multiple-and-points-4"><i class="fa fa-check"></i><b>7.2.5.7</b> Using Multiple Layers and Points Layers</a></li>
</ul></li>
<li class="chapter" data-level="7.2.6" data-path="Common-2.html"><a href="Common-2.html#Materials-2"><i class="fa fa-check"></i><b>7.2.6</b> Land Use (Materials)</a>
<ul>
<li class="chapter" data-level="7.2.6.1" data-path="Common-2.html"><a href="Common-2.html#Bed-Resistance-4"><i class="fa fa-check"></i><b>7.2.6.1</b> Bed Resistance</a></li>
<li class="chapter" data-level="7.2.6.2" data-path="Common-2.html"><a href="Common-2.html#log-law-4"><i class="fa fa-check"></i><b>7.2.6.2</b> Log Law Depth Varying Bed Resistance</a></li>
<li class="chapter" data-level="7.2.6.3" data-path="Common-2.html"><a href="Common-2.html#Materials-File-4"><i class="fa fa-check"></i><b>7.2.6.3</b> Materials File</a></li>
<li class="chapter" data-level="7.2.6.4" data-path="Common-2.html"><a href="Common-2.html#Rainfall-Losses-4"><i class="fa fa-check"></i><b>7.2.6.4</b> Rainfall Losses</a></li>
</ul></li>
<li class="chapter" data-level="7.2.7" data-path="Common-2.html"><a href="Common-2.html#Infiltration-2"><i class="fa fa-check"></i><b>7.2.7</b> Infiltration</a>
<ul>
<li class="chapter" data-level="7.2.7.1" data-path="Common-2.html"><a href="Common-2.html#infiltration-layer-4"><i class="fa fa-check"></i><b>7.2.7.1</b> Infiltration Layer</a></li>
<li class="chapter" data-level="7.2.7.2" data-path="Common-2.html"><a href="Common-2.html#tsoilf-4"><i class="fa fa-check"></i><b>7.2.7.2</b> Soils File (.tsoilf)</a></li>
</ul></li>
<li class="chapter" data-level="7.2.8" data-path="Common-2.html"><a href="Common-2.html#HydraulicStructures-3"><i class="fa fa-check"></i><b>7.2.8</b> Hydraulic Structures</a>
<ul>
<li class="chapter" data-level="7.2.8.1" data-path="Common-2.html"><a href="Common-2.html#HydraulicStructuresIntro-4"><i class="fa fa-check"></i><b>7.2.8.1</b> Introduction</a></li>
<li class="chapter" data-level="7.2.8.2" data-path="Common-2.html"><a href="Common-2.html#bg-layer-4"><i class="fa fa-check"></i><b>7.2.8.2</b> 2D Bridge Structures (2d_bg)</a></li>
<li class="chapter" data-level="7.2.8.3" data-path="Common-2.html"><a href="Common-2.html#lfcsh-4"><i class="fa fa-check"></i><b>7.2.8.3</b> Layered Flow Constrictions (2d_lfcsh Layers)</a></li>
</ul></li>
<li class="chapter" data-level="7.2.9" data-path="Common-2.html"><a href="Common-2.html#cell-mods-3"><i class="fa fa-check"></i><b>7.2.9</b> Cell Modification</a>
<ul>
<li class="chapter" data-level="7.2.9.1" data-path="Common-2.html"><a href="Common-2.html#srf-3"><i class="fa fa-check"></i><b>7.2.9.1</b> Storage Reduction (2d_srf)</a></li>
<li class="chapter" data-level="7.2.9.2" data-path="Common-2.html"><a href="Common-2.html#CWF-4"><i class="fa fa-check"></i><b>7.2.9.2</b> Cell Width Factor (CWF)</a></li>
<li class="chapter" data-level="7.2.9.3" data-path="Common-2.html"><a href="Common-2.html#flc-4"><i class="fa fa-check"></i><b>7.2.9.3</b> Form Loss Coefficient (FLC)</a></li>
<li class="chapter" data-level="7.2.9.4" data-path="Common-2.html"><a href="Common-2.html#mod-conveyance-4"><i class="fa fa-check"></i><b>7.2.9.4</b> Modify Conveyance</a></li>
</ul></li>
<li class="chapter" data-level="7.2.10" data-path="Common-2.html"><a href="Common-2.html#urban-areas-3"><i class="fa fa-check"></i><b>7.2.10</b> Modelling Urban Areas</a>
<ul>
<li class="chapter" data-level="7.2.10.1" data-path="Common-2.html"><a href="Common-2.html#buildings-4"><i class="fa fa-check"></i><b>7.2.10.1</b> Buildings</a></li>
<li class="chapter" data-level="7.2.10.2" data-path="Common-2.html"><a href="Common-2.html#roads-4"><i class="fa fa-check"></i><b>7.2.10.2</b> Roads</a></li>
<li class="chapter" data-level="7.2.10.3" data-path="Common-2.html"><a href="Common-2.html#fences-4"><i class="fa fa-check"></i><b>7.2.10.3</b> Fences and Walls</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="7.3" data-path="HPC-specific-2.html"><a href="HPC-specific-2.html"><i class="fa fa-check"></i><b>7.3</b> TUFLOW HPC Specific</a>
<ul>
<li class="chapter" data-level="7.3.1" data-path="HPC-specific-2.html"><a href="HPC-specific-2.html#Quadtree-3"><i class="fa fa-check"></i><b>7.3.1</b> Quadtree</a>
<ul>
<li class="chapter" data-level="7.3.1.1" data-path="HPC-specific-2.html"><a href="HPC-specific-2.html#qcf-commands-4"><i class="fa fa-check"></i><b>7.3.1.1</b> Quadtree .tcf Commands</a></li>
<li class="chapter" data-level="7.3.1.2" data-path="HPC-specific-2.html"><a href="HPC-specific-2.html#qcf-mandatory-4"><i class="fa fa-check"></i><b>7.3.1.2</b> Quadtree Control File (.qcf) – Mandatory Commands</a></li>
<li class="chapter" data-level="7.3.1.3" data-path="HPC-specific-2.html"><a href="HPC-specific-2.html#qcf-optional-4"><i class="fa fa-check"></i><b>7.3.1.3</b> Quadtree Control File (.qcf) – Optional Commands</a></li>
<li class="chapter" data-level="7.3.1.4" data-path="HPC-specific-2.html"><a href="HPC-specific-2.html#QDT-mesh-4"><i class="fa fa-check"></i><b>7.3.1.4</b> Defining Grid Refinement Polygons</a></li>
</ul></li>
<li class="chapter" data-level="7.3.2" data-path="HPC-specific-2.html"><a href="HPC-specific-2.html#HPC-Turbulence-3"><i class="fa fa-check"></i><b>7.3.2</b> HPC Turbulence</a>
<ul>
<li class="chapter" data-level="7.3.2.1" data-path="HPC-specific-2.html"><a href="HPC-specific-2.html#HPC-Turbulence-4"><i class="fa fa-check"></i><b>7.3.2.1</b> Overview</a></li>
<li class="chapter" data-level="7.3.2.2" data-path="HPC-specific-2.html"><a href="HPC-specific-2.html#Constant-4"><i class="fa fa-check"></i><b>7.3.2.2</b> Constant Eddy Viscosity</a></li>
<li class="chapter" data-level="7.3.2.3" data-path="HPC-specific-2.html"><a href="HPC-specific-2.html#Smagorinsky-4"><i class="fa fa-check"></i><b>7.3.2.3</b> Smagorinsky Approach</a></li>
<li class="chapter" data-level="7.3.2.4" data-path="HPC-specific-2.html"><a href="HPC-specific-2.html#Wu-4"><i class="fa fa-check"></i><b>7.3.2.4</b> Wu Approach</a></li>
</ul></li>
<li class="chapter" data-level="7.3.3" data-path="HPC-specific-2.html"><a href="HPC-specific-2.html#SGS-3"><i class="fa fa-check"></i><b>7.3.3</b> Sub-Grid Sampling (SGS)</a>
<ul>
<li class="chapter" data-level="7.3.3.1" data-path="HPC-specific-2.html"><a href="HPC-specific-2.html#SGS-commands-4"><i class="fa fa-check"></i><b>7.3.3.1</b> SGS Methodology and Commands</a></li>
<li class="chapter" data-level="7.3.3.2" data-path="HPC-specific-2.html"><a href="HPC-specific-2.html#SGS-output-4"><i class="fa fa-check"></i><b>7.3.3.2</b> SGS Output Options</a></li>
</ul></li>
<li class="chapter" data-level="7.3.4" data-path="HPC-specific-2.html"><a href="HPC-specific-2.html#HPC-US-Controlled-3"><i class="fa fa-check"></i><b>7.3.4</b> 2D Upstream Controlled Flow (Weirs and Supercritical Flow)</a></li>
<li class="chapter" data-level="7.3.5" data-path="HPC-specific-2.html"><a href="HPC-specific-2.html#HPC-Infiltration-GW"><i class="fa fa-check"></i><b>7.3.5</b> Infiltration and Groundwater Flow</a>
<ul>
<li class="chapter" data-level="7.3.5.1" data-path="HPC-specific-2.html"><a href="HPC-specific-2.html#HPC-Infiltration-4"><i class="fa fa-check"></i><b>7.3.5.1</b> Infiltration</a></li>
<li class="chapter" data-level="7.3.5.2" data-path="HPC-specific-2.html"><a href="HPC-specific-2.html#HPC-Groundwater-3"><i class="fa fa-check"></i><b>7.3.5.2</b> Groundwater Flow</a></li>
<li class="chapter" data-level="7.3.5.3" data-path="HPC-specific-2.html"><a href="HPC-specific-2.html#HPC-tsoilf-5"><i class="fa fa-check"></i><b>7.3.5.3</b> HPC Soils File (.tsoilf)</a></li>
</ul></li>
<li class="chapter" data-level="7.3.6" data-path="HPC-specific-2.html"><a href="HPC-specific-2.html#NN-3"><i class="fa fa-check"></i><b>7.3.6</b> Non-Newtonian Flow</a>
<ul>
<li class="chapter" data-level="7.3.6.1" data-path="HPC-specific-2.html"><a href="HPC-specific-2.html#Implementation-4"><i class="fa fa-check"></i><b>7.3.6.1</b> Implementation</a></li>
<li class="chapter" data-level="7.3.6.2" data-path="HPC-specific-2.html"><a href="HPC-specific-2.html#NN-Mix-4"><i class="fa fa-check"></i><b>7.3.6.2</b> Non-Newtonian Mixing</a></li>
</ul></li>
<li class="chapter" data-level="7.3.7" data-path="HPC-specific-2.html"><a href="HPC-specific-2.html#HPC-Unsupported-3"><i class="fa fa-check"></i><b>7.3.7</b> Unsupported Features in TUFLOW HPC</a></li>
</ul></li>
<li class="chapter" data-level="7.4" data-path="CLASpecific-2.html"><a href="CLASpecific-2.html"><i class="fa fa-check"></i><b>7.4</b> TUFLOW Classic Specific</a>
<ul>
<li class="chapter" data-level="7.4.1" data-path="CLASpecific-2.html"><a href="CLASpecific-2.html#CLA-Turbulence-3"><i class="fa fa-check"></i><b>7.4.1</b> Classic Turbulence</a>
<ul>
<li class="chapter" data-level="7.4.1.1" data-path="CLASpecific-2.html"><a href="CLASpecific-2.html#CLA-Constant-4"><i class="fa fa-check"></i><b>7.4.1.1</b> Constant</a></li>
<li class="chapter" data-level="7.4.1.2" data-path="CLASpecific-2.html"><a href="CLASpecific-2.html#CLA-Smagorinsky-4"><i class="fa fa-check"></i><b>7.4.1.2</b> Smagorinsky</a></li>
</ul></li>
<li class="chapter" data-level="7.4.2" data-path="CLASpecific-2.html"><a href="CLASpecific-2.html#CLA-US-Controlled-3"><i class="fa fa-check"></i><b>7.4.2</b> 2D Upstream Controlled Flow (Weirs and Supercritical Flow)</a></li>
<li class="chapter" data-level="7.4.3" data-path="CLASpecific-2.html"><a href="CLASpecific-2.html#CLA-mat-3"><i class="fa fa-check"></i><b>7.4.3</b> Land Use (Materials)</a></li>
<li class="chapter" data-level="7.4.4" data-path="CLASpecific-2.html"><a href="CLASpecific-2.html#CLA-2D2D-3"><i class="fa fa-check"></i><b>7.4.4</b> Multiple 2D Domain</a></li>
<li class="chapter" data-level="7.4.5" data-path="CLASpecific-2.html"><a href="CLASpecific-2.html#CLA-Coriolis-3"><i class="fa fa-check"></i><b>7.4.5</b> Coriolis Term</a></li>
<li class="chapter" data-level="7.4.6" data-path="CLASpecific-2.html"><a href="CLASpecific-2.html#LegacyStructs-3"><i class="fa fa-check"></i><b>7.4.6</b> Legacy Structures</a>
<ul>
<li class="chapter" data-level="7.4.6.1" data-path="CLASpecific-2.html"><a href="CLASpecific-2.html#CLA-FC-4"><i class="fa fa-check"></i><b>7.4.6.1</b> 2D Flow Constrictions (2d_fcsh and 2d_fc)</a></li>
<li class="chapter" data-level="7.4.6.2" data-path="CLASpecific-2.html"><a href="CLASpecific-2.html#EnergyLoss-fc-fcsh-4"><i class="fa fa-check"></i><b>7.4.6.2</b> Applying Form (Energy) Loss in 2D FC and FCSH Layers</a></li>
</ul></li>
<li class="chapter" data-level="7.4.7" data-path="CLASpecific-2.html"><a href="CLASpecific-2.html#CLA-Unsupported-3"><i class="fa fa-check"></i><b>7.4.7</b> Unsupported Features in TUFLOW Classic</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="8" data-path="Boundaries-InitialConditions-1.html"><a href="Boundaries-InitialConditions-1.html"><i class="fa fa-check"></i><b>8</b> Boundaries and Initial Conditions</a>
<ul>
<li class="chapter" data-level="8.1" data-path="BCArrangements-2.html"><a href="BCArrangements-2.html"><i class="fa fa-check"></i><b>8.1</b> Recommended BC Arrangements</a></li>
<li class="chapter" data-level="8.2" data-path="BC-Solver-2.html"><a href="BC-Solver-2.html"><i class="fa fa-check"></i><b>8.2</b> Solver Specific Considerations</a>
<ul>
<li class="chapter" data-level="8.2.1" data-path="BC-Solver-2.html"><a href="BC-Solver-2.html#ClassicBC-3"><i class="fa fa-check"></i><b>8.2.1</b> Classic Specific Boundaries / Options</a></li>
<li class="chapter" data-level="8.2.2" data-path="BC-Solver-2.html"><a href="BC-Solver-2.html#ClassicHPC-3"><i class="fa fa-check"></i><b>8.2.2</b> HPC Specific Boundaries / Options</a>
<ul>
<li class="chapter" data-level="8.2.2.1" data-path="BC-Solver-2.html"><a href="BC-Solver-2.html#HPCEnergyOptions-4"><i class="fa fa-check"></i><b>8.2.2.1</b> HPC Energy Options for 2D HT, HQ and QT Boundaries</a></li>
<li class="chapter" data-level="8.2.2.2" data-path="BC-Solver-2.html"><a href="BC-Solver-2.html#HpcHQApproach-4"><i class="fa fa-check"></i><b>8.2.2.2</b> HPC HQ Boundary Approach</a></li>
<li class="chapter" data-level="8.2.2.3" data-path="BC-Solver-2.html"><a href="BC-Solver-2.html#HpcHQFilter-4"><i class="fa fa-check"></i><b>8.2.2.3</b> HPC HQ Boundary Stability</a></li>
<li class="chapter" data-level="8.2.2.4" data-path="BC-Solver-2.html"><a href="BC-Solver-2.html#HpcBoundariesOther-4"><i class="fa fa-check"></i><b>8.2.2.4</b> HPC Additional Boundary Options</a></li>
<li class="chapter" data-level="8.2.2.5" data-path="BC-Solver-2.html"><a href="BC-Solver-2.html#HpcQuadtreeParallelInteria-4"><i class="fa fa-check"></i><b>8.2.2.5</b> Quadtree BC Parallel Inertia Approach</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="8.3" data-path="OneDBoundaries-2.html"><a href="OneDBoundaries-2.html"><i class="fa fa-check"></i><b>8.3</b> 1D Boundaries (1d_bc Layers)</a></li>
<li class="chapter" data-level="8.4" data-path="TwoDBoundaries-2.html"><a href="TwoDBoundaries-2.html"><i class="fa fa-check"></i><b>8.4</b> 2D Boundaries (2d_bc, 2d_sa and 2d_rf Layers)</a>
<ul>
<li class="chapter" data-level="8.4.1" data-path="TwoDBoundaries-2.html"><a href="TwoDBoundaries-2.html#BC-Layers-3"><i class="fa fa-check"></i><b>8.4.1</b> Boundary Conditions (2d_bc)</a>
<ul>
<li class="chapter" data-level="8.4.1.1" data-path="TwoDBoundaries-2.html"><a href="TwoDBoundaries-2.html#SlopingLevel-3"><i class="fa fa-check"></i><b>8.4.1.1</b> Sloping Water Level Boundaries</a></li>
<li class="chapter" data-level="8.4.1.2" data-path="TwoDBoundaries-2.html"><a href="TwoDBoundaries-2.html#GT-4"><i class="fa fa-check"></i><b>8.4.1.2</b> Groundwater Boundaries</a></li>
</ul></li>
<li class="chapter" data-level="8.4.2" data-path="TwoDBoundaries-2.html"><a href="TwoDBoundaries-2.html#SA-Layers-3"><i class="fa fa-check"></i><b>8.4.2</b> Source Area Boundaries</a>
<ul>
<li class="chapter" data-level="8.4.2.1" data-path="TwoDBoundaries-2.html"><a href="TwoDBoundaries-2.html#SA-Option-4"><i class="fa fa-check"></i><b>8.4.2.1</b> Source Area Options (2d_sa)</a></li>
<li class="chapter" data-level="8.4.2.2" data-path="TwoDBoundaries-2.html"><a href="TwoDBoundaries-2.html#RFOption-4"><i class="fa fa-check"></i><b>8.4.2.2</b> Rainfall Option (2d_sa_rf)</a></li>
<li class="chapter" data-level="8.4.2.3" data-path="TwoDBoundaries-2.html"><a href="TwoDBoundaries-2.html#TriggerOption-4"><i class="fa fa-check"></i><b>8.4.2.3</b> Trigger Option (2d_sa_tr)</a></li>
<li class="chapter" data-level="8.4.2.4" data-path="TwoDBoundaries-2.html"><a href="TwoDBoundaries-2.html#FlowFeature-4"><i class="fa fa-check"></i><b>8.4.2.4</b> Flow Feature (2d_sa_po)</a></li>
<li class="chapter" data-level="8.4.2.5" data-path="TwoDBoundaries-2.html"><a href="TwoDBoundaries-2.html#OverlappingSA-4"><i class="fa fa-check"></i><b>8.4.2.5</b> Overlapping 2d_sa regions</a></li>
</ul></li>
<li class="chapter" data-level="8.4.3" data-path="TwoDBoundaries-2.html"><a href="TwoDBoundaries-2.html#Rainfall-3"><i class="fa fa-check"></i><b>8.4.3</b> Rainfall Boundaries</a>
<ul>
<li class="chapter" data-level="8.4.3.1" data-path="TwoDBoundaries-2.html"><a href="TwoDBoundaries-2.html#RainfallOverview-4"><i class="fa fa-check"></i><b>8.4.3.1</b> Rainfall Overview</a></li>
<li class="chapter" data-level="8.4.3.2" data-path="TwoDBoundaries-2.html"><a href="TwoDBoundaries-2.html#RainfallConsiderations-4"><i class="fa fa-check"></i><b>8.4.3.2</b> Considerations for Rainfall Modelling</a></li>
<li class="chapter" data-level="8.4.3.3" data-path="TwoDBoundaries-2.html"><a href="TwoDBoundaries-2.html#RF-Global-4"><i class="fa fa-check"></i><b>8.4.3.3</b> Global Rainfall</a></li>
<li class="chapter" data-level="8.4.3.4" data-path="TwoDBoundaries-2.html"><a href="TwoDBoundaries-2.html#RF-Layers-4"><i class="fa fa-check"></i><b>8.4.3.4</b> Rainfall Polygons (2d_rf)</a></li>
<li class="chapter" data-level="8.4.3.5" data-path="TwoDBoundaries-2.html"><a href="TwoDBoundaries-2.html#GriddedRainfall-4"><i class="fa fa-check"></i><b>8.4.3.5</b> Gridded Rainfall</a></li>
<li class="chapter" data-level="8.4.3.6" data-path="TwoDBoundaries-2.html"><a href="TwoDBoundaries-2.html#TRFC-File-4"><i class="fa fa-check"></i><b>8.4.3.6</b> Rainfall Control File (.trfc file)</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="8.5" data-path="bcdbase-2.html"><a href="bcdbase-2.html"><i class="fa fa-check"></i><b>8.5</b> Boundary Condition (BC) Database</a>
<ul>
<li class="chapter" data-level="8.5.1" data-path="bcdbase-2.html"><a href="bcdbase-2.html#bcdbase-Example-3"><i class="fa fa-check"></i><b>8.5.1</b> BC Database Example</a></li>
<li class="chapter" data-level="8.5.2" data-path="bcdbase-2.html"><a href="bcdbase-2.html#BoundaryGenerators-3"><i class="fa fa-check"></i><b>8.5.2</b> TUFLOW Boundary Generators</a></li>
<li class="chapter" data-level="8.5.3" data-path="bcdbase-2.html"><a href="bcdbase-2.html#DelftFEWSBoundary-3"><i class="fa fa-check"></i><b>8.5.3</b> Delft FEWS Boundaries</a></li>
<li class="chapter" data-level="8.5.4" data-path="bcdbase-2.html"><a href="bcdbase-2.html#HECDSS-3"><i class="fa fa-check"></i><b>8.5.4</b> HEC-DSS Boundaries</a></li>
</ul></li>
<li class="chapter" data-level="8.6" data-path="Cyclones-2.html"><a href="Cyclones-2.html"><i class="fa fa-check"></i><b>8.6</b> Cyclones / Hurricanes / Typhoons</a></li>
<li class="chapter" data-level="8.7" data-path="ExternalStress-2.html"><a href="ExternalStress-2.html"><i class="fa fa-check"></i><b>8.7</b> External Stress Boundaries</a></li>
<li class="chapter" data-level="8.8" data-path="InitialConditions-2.html"><a href="InitialConditions-2.html"><i class="fa fa-check"></i><b>8.8</b> Initial Conditions</a>
<ul>
<li class="chapter" data-level="8.8.1" data-path="InitialConditions-2.html"><a href="InitialConditions-2.html#IWL-3"><i class="fa fa-check"></i><b>8.8.1</b> Initial Water Levels (IWL)</a>
<ul>
<li class="chapter" data-level="8.8.1.1" data-path="InitialConditions-2.html"><a href="InitialConditions-2.html#IWL-1D-4"><i class="fa fa-check"></i><b>8.8.1.1</b> 1D Domains</a></li>
<li class="chapter" data-level="8.8.1.2" data-path="InitialConditions-2.html"><a href="InitialConditions-2.html#IWL-2D-4"><i class="fa fa-check"></i><b>8.8.1.2</b> 2D Domains</a></li>
<li class="chapter" data-level="8.8.1.3" data-path="InitialConditions-2.html"><a href="InitialConditions-2.html#IWL-Auto-4"><i class="fa fa-check"></i><b>8.8.1.3</b> Automatic Initial Water Level</a></li>
</ul></li>
<li class="chapter" data-level="8.8.2" data-path="InitialConditions-2.html"><a href="InitialConditions-2.html#IGW-3"><i class="fa fa-check"></i><b>8.8.2</b> Initial Groundwater Levels</a></li>
<li class="chapter" data-level="8.8.3" data-path="InitialConditions-2.html"><a href="InitialConditions-2.html#RestartFiles-3"><i class="fa fa-check"></i><b>8.8.3</b> Restart Files</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="9" data-path="AD-1.html"><a href="AD-1.html"><i class="fa fa-check"></i><b>9</b> Advection Dispersion</a>
<ul>
<li class="chapter" data-level="9.1" data-path="AD-2D-2.html"><a href="AD-2D-2.html"><i class="fa fa-check"></i><b>9.1</b> 2D Domains</a>
<ul>
<li class="chapter" data-level="9.1.1" data-path="AD-2D-2.html"><a href="AD-2D-2.html#AD-Solution-3"><i class="fa fa-check"></i><b>9.1.1</b> 2D Depth Averaged Equation of Motion</a></li>
<li class="chapter" data-level="9.1.2" data-path="AD-2D-2.html"><a href="AD-2D-2.html#AD-Solution-2"><i class="fa fa-check"></i><b>9.1.2</b> Solution Method (TUFLOW Classic)</a></li>
<li class="chapter" data-level="9.1.3" data-path="AD-2D-2.html"><a href="AD-2D-2.html#AD-Solution-HPC-3"><i class="fa fa-check"></i><b>9.1.3</b> Solution Method (TUFLOW HPC)</a></li>
<li class="chapter" data-level="9.1.4" data-path="AD-2D-2.html"><a href="AD-2D-2.html#AD-Local-3"><i class="fa fa-check"></i><b>9.1.4</b> Local Constituent Transformation</a></li>
<li class="chapter" data-level="9.1.5" data-path="AD-2D-2.html"><a href="AD-2D-2.html#AD-GW-3"><i class="fa fa-check"></i><b>9.1.5</b> Groundwater</a></li>
<li class="chapter" data-level="9.1.6" data-path="AD-2D-2.html"><a href="AD-2D-2.html#AD-Limitations-2D"><i class="fa fa-check"></i><b>9.1.6</b> Limitations</a></li>
</ul></li>
<li class="chapter" data-level="9.2" data-path="AD-1D-2.html"><a href="AD-1D-2.html"><i class="fa fa-check"></i><b>9.2</b> 1D Domains</a>
<ul>
<li class="chapter" data-level="9.2.1" data-path="AD-1D-2.html"><a href="AD-1D-2.html#AD-1D-Solution-3"><i class="fa fa-check"></i><b>9.2.1</b> 1D Cross-Sectional Averaged Equation of Motion</a></li>
<li class="chapter" data-level="9.2.2" data-path="AD-1D-2.html"><a href="AD-1D-2.html#AD-Solution-ESTRY-3"><i class="fa fa-check"></i><b>9.2.2</b> 1D Solution Method (ESTRY)</a></li>
<li class="chapter" data-level="9.2.3" data-path="AD-1D-2.html"><a href="AD-1D-2.html#AD-Limitations-1D"><i class="fa fa-check"></i><b>9.2.3</b> Limitations</a></li>
</ul></li>
<li class="chapter" data-level="9.3" data-path="AD-ModellingProcess-2.html"><a href="AD-ModellingProcess-2.html"><i class="fa fa-check"></i><b>9.3</b> The Modelling Process</a>
<ul>
<li class="chapter" data-level="9.3.1" data-path="AD-ModellingProcess-2.html"><a href="AD-ModellingProcess-2.html#AD-DataInput-3"><i class="fa fa-check"></i><b>9.3.1</b> Data Input Requirements</a></li>
<li class="chapter" data-level="9.3.2" data-path="AD-ModellingProcess-2.html"><a href="AD-ModellingProcess-2.html#AD-Calibration-3"><i class="fa fa-check"></i><b>9.3.2</b> Calibration and Sensitivity</a></li>
<li class="chapter" data-level="9.3.3" data-path="AD-ModellingProcess-2.html"><a href="AD-ModellingProcess-2.html#AD-Model-Res-3"><i class="fa fa-check"></i><b>9.3.3</b> Model Resolution</a></li>
<li class="chapter" data-level="9.3.4" data-path="AD-ModellingProcess-2.html"><a href="AD-ModellingProcess-2.html#AD-Computational-Timestep-3"><i class="fa fa-check"></i><b>9.3.4</b> Computational Timestep</a></li>
<li class="chapter" data-level="9.3.5" data-path="AD-ModellingProcess-2.html"><a href="AD-ModellingProcess-2.html#AD-Example-3"><i class="fa fa-check"></i><b>9.3.5</b> Example AD Models</a></li>
</ul></li>
<li class="chapter" data-level="9.4" data-path="AD-DataInput-2.html"><a href="AD-DataInput-2.html"><i class="fa fa-check"></i><b>9.4</b> Data Input</a>
<ul>
<li class="chapter" data-level="9.4.1" data-path="AD-DataInput-2.html"><a href="AD-DataInput-2.html#AD-SimControlFile-3"><i class="fa fa-check"></i><b>9.4.1</b> Simulation Control File</a>
<ul>
<li class="chapter" data-level="9.4.1.1" data-path="AD-DataInput-2.html"><a href="AD-DataInput-2.html#ADControlFile-4"><i class="fa fa-check"></i><b>9.4.1.1</b> TUFLOW AD Control File (.adcf File)</a></li>
<li class="chapter" data-level="9.4.1.2" data-path="AD-DataInput-2.html"><a href="AD-DataInput-2.html#AD-inputs-4"><i class="fa fa-check"></i><b>9.4.1.2</b> GIS Input File Types and Naming Conventions</a></li>
</ul></li>
<li class="chapter" data-level="9.4.2" data-path="AD-DataInput-2.html"><a href="AD-DataInput-2.html#AD-OneDGeoms-3"><i class="fa fa-check"></i><b>9.4.2</b> 1D Geometries</a></li>
<li class="chapter" data-level="9.4.3" data-path="AD-DataInput-2.html"><a href="AD-DataInput-2.html#ADConstituentProp-3"><i class="fa fa-check"></i><b>9.4.3</b> Specification of Constituent Properties</a></li>
<li class="chapter" data-level="9.4.4" data-path="AD-DataInput-2.html"><a href="AD-DataInput-2.html#ADBoundaryConditions-3"><i class="fa fa-check"></i><b>9.4.4</b> Boundary Conditions</a>
<ul>
<li class="chapter" data-level="9.4.4.1" data-path="AD-DataInput-2.html"><a href="AD-DataInput-2.html#BCDatabase-4"><i class="fa fa-check"></i><b>9.4.4.1</b> Boundary Condition (BC) Database</a></li>
<li class="chapter" data-level="9.4.4.2" data-path="AD-DataInput-2.html"><a href="AD-DataInput-2.html#BCDatabaseExample-4"><i class="fa fa-check"></i><b>9.4.4.2</b> BC Database Example</a></li>
</ul></li>
<li class="chapter" data-level="9.4.5" data-path="AD-DataInput-2.html"><a href="AD-DataInput-2.html#initial-conditions"><i class="fa fa-check"></i><b>9.4.5</b> Initial Conditions</a></li>
<li class="chapter" data-level="9.4.6" data-path="AD-DataInput-2.html"><a href="AD-DataInput-2.html#GW-initial-conditions"><i class="fa fa-check"></i><b>9.4.6</b> Groundwater Initial Conditions</a></li>
<li class="chapter" data-level="9.4.7" data-path="AD-DataInput-2.html"><a href="AD-DataInput-2.html#minimum-dispersion-coefficient"><i class="fa fa-check"></i><b>9.4.7</b> Minimum Dispersion Coefficient</a></li>
</ul></li>
<li class="chapter" data-level="9.5" data-path="AD-DataOutput-2.html"><a href="AD-DataOutput-2.html"><i class="fa fa-check"></i><b>9.5</b> Data Output</a>
<ul>
<li class="chapter" data-level="9.5.1" data-path="AD-DataOutput-2.html"><a href="AD-DataOutput-2.html#AD-LogFiles-3"><i class="fa fa-check"></i><b>9.5.1</b> TUFLOW AD Log Files</a>
<ul>
<li class="chapter" data-level="9.5.1.1" data-path="AD-DataOutput-2.html"><a href="AD-DataOutput-2.html#AD-log-4"><i class="fa fa-check"></i><b>9.5.1.1</b> Simulation Log File</a></li>
<li class="chapter" data-level="9.5.1.2" data-path="AD-DataOutput-2.html"><a href="AD-DataOutput-2.html#ADCFLLogFile-4"><i class="fa fa-check"></i><b>9.5.1.2</b> CFL Log File</a></li>
<li class="chapter" data-level="9.5.1.3" data-path="AD-DataOutput-2.html"><a href="AD-DataOutput-2.html#ADLogMass-4"><i class="fa fa-check"></i><b>9.5.1.3</b> Mass Log File</a></li>
</ul></li>
<li class="chapter" data-level="9.5.2" data-path="AD-DataOutput-2.html"><a href="AD-DataOutput-2.html#AD-CheckFiles-3"><i class="fa fa-check"></i><b>9.5.2</b> Check Files</a></li>
<li class="chapter" data-level="9.5.3" data-path="AD-DataOutput-2.html"><a href="AD-DataOutput-2.html#AD-ResultFiles-3"><i class="fa fa-check"></i><b>9.5.3</b> Result Files</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="10" data-path="DomainLinking-1.html"><a href="DomainLinking-1.html"><i class="fa fa-check"></i><b>10</b> Combining Domains and Solvers</a>
<ul>
<li class="chapter" data-level="10.1" data-path="Linked-1D2D-Models-Intro-2.html"><a href="Linked-1D2D-Models-Intro-2.html"><i class="fa fa-check"></i><b>10.1</b> Introduction</a></li>
<li class="chapter" data-level="10.2" data-path="OneD2dLinking-2.html"><a href="OneD2dLinking-2.html"><i class="fa fa-check"></i><b>10.2</b> 1D and 2D Domain Linking Theory</a>
<ul>
<li class="chapter" data-level="10.2.1" data-path="OneD2dLinking-2.html"><a href="OneD2dLinking-2.html#HXBoundary-3"><i class="fa fa-check"></i><b>10.2.1</b> HX 2D Head Boundary</a></li>
<li class="chapter" data-level="10.2.2" data-path="OneD2dLinking-2.html"><a href="OneD2dLinking-2.html#SXBoundary-3"><i class="fa fa-check"></i><b>10.2.2</b> SX 2D Flow Boundaries</a>
<ul>
<li class="chapter" data-level="10.2.2.1" data-path="OneD2dLinking-2.html"><a href="OneD2dLinking-2.html#SXBoundarySW-4"><i class="fa fa-check"></i><b>10.2.2.1</b> SX 2D Flow Boundary to Surface Water</a></li>
<li class="chapter" data-level="10.2.2.2" data-path="OneD2dLinking-2.html"><a href="OneD2dLinking-2.html#SXBoundaryGW-4"><i class="fa fa-check"></i><b>10.2.2.2</b> SX 2D Flow Boundary to Groundwater</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="10.3" data-path="OneD2DLinking-Estry-2.html"><a href="OneD2DLinking-Estry-2.html"><i class="fa fa-check"></i><b>10.3</b> TUFLOW 1D (ESTRY) to TUFLOW 2D Linking</a>
<ul>
<li class="chapter" data-level="10.3.1" data-path="OneD2DLinking-Estry-2.html"><a href="OneD2DLinking-Estry-2.html#OneD2DESTRYChannel-3"><i class="fa fa-check"></i><b>10.3.1</b> 1D Open Channel and 2D Domain Linking</a></li>
<li class="chapter" data-level="10.3.2" data-path="OneD2DLinking-Estry-2.html"><a href="OneD2DLinking-Estry-2.html#OneD2DESTRYCulverts-3"><i class="fa fa-check"></i><b>10.3.2</b> 1D Structures Embedded within 2D Domains</a></li>
<li class="chapter" data-level="10.3.3" data-path="OneD2DLinking-Estry-2.html"><a href="OneD2DLinking-Estry-2.html#OneD2DESTRYPipeNetwork-3"><i class="fa fa-check"></i><b>10.3.3</b> 1D Pipe Network Pits linked to 2D Domains</a></li>
<li class="chapter" data-level="10.3.4" data-path="OneD2DLinking-Estry-2.html"><a href="OneD2DLinking-Estry-2.html#VirtualPits-3"><i class="fa fa-check"></i><b>10.3.4</b> Virtual Pits linked to 2D Domains</a></li>
<li class="chapter" data-level="10.3.5" data-path="OneD2DLinking-Estry-2.html"><a href="OneD2DLinking-Estry-2.html#GroundwaterLinked-3"><i class="fa fa-check"></i><b>10.3.5</b> TUFLOW 1D (ESTRY) linked to Groundwater</a></li>
</ul></li>
<li class="chapter" data-level="10.4" data-path="OneD2DLinkingSWMM-2.html"><a href="OneD2DLinkingSWMM-2.html"><i class="fa fa-check"></i><b>10.4</b> SWMM to TUFLOW Linking</a>
<ul>
<li class="chapter" data-level="10.4.1" data-path="OneD2DLinkingSWMM-2.html"><a href="OneD2DLinkingSWMM-2.html#OneD2DSWMMCulverts-5"><i class="fa fa-check"></i><b>10.4.1</b> 1D Culvert Connections to 2D Domains</a></li>
<li class="chapter" data-level="10.4.2" data-path="OneD2DLinkingSWMM-2.html"><a href="OneD2DLinkingSWMM-2.html#OneD2DSWMMPipeNetwork-3"><i class="fa fa-check"></i><b>10.4.2</b> 1D Pipe Network Connections to 2D Domains</a></li>
<li class="chapter" data-level="10.4.3" data-path="OneD2DLinkingSWMM-2.html"><a href="OneD2DLinkingSWMM-2.html#OneD2DGWConnections-3"><i class="fa fa-check"></i><b>10.4.3</b> Groundwater Connections to 2D Domains</a></li>
<li class="chapter" data-level="10.4.4" data-path="OneD2DLinkingSWMM-2.html"><a href="OneD2DLinkingSWMM-2.html#OneD2DLinkingSWMM1D-3"><i class="fa fa-check"></i><b>10.4.4</b> SWMM to TUFLOW 1D (ESTRY) Linking</a></li>
</ul></li>
<li class="chapter" data-level="10.5" data-path="OneD2DLinkingFM-2.html"><a href="OneD2DLinkingFM-2.html"><i class="fa fa-check"></i><b>10.5</b> Flood Modeller to TUFLOW Linking</a>
<ul>
<li class="chapter" data-level="10.5.1" data-path="OneD2DLinkingFM-2.html"><a href="OneD2DLinkingFM-2.html#oneD2DFMLinking2D-3"><i class="fa fa-check"></i><b>10.5.1</b> Flood Modeller 1D to TUFLOW 2D Linking</a></li>
<li class="chapter" data-level="10.5.2" data-path="OneD2DLinkingFM-2.html"><a href="OneD2DLinkingFM-2.html#oneD2DFMLinking1D-3"><i class="fa fa-check"></i><b>10.5.2</b> Flood Modeller 1D to TUFLOW 1D (ESTRY) Linking</a></li>
</ul></li>
<li class="chapter" data-level="10.6" data-path="oneD2D12D-2.html"><a href="oneD2D12D-2.html"><i class="fa fa-check"></i><b>10.6</b> 12D-DDA to TUFLOW Linking</a></li>
<li class="chapter" data-level="10.7" data-path="TwoD2DLinking-2.html"><a href="TwoD2DLinking-2.html"><i class="fa fa-check"></i><b>10.7</b> Multiple 2D Domains</a>
<ul>
<li class="chapter" data-level="10.7.1" data-path="TwoD2DLinking-2.html"><a href="TwoD2DLinking-2.html#TwoD2DLinkingQDT-3"><i class="fa fa-check"></i><b>10.7.1</b> Classic’s M2D Feature versus HPC Quadtree</a></li>
<li class="chapter" data-level="10.7.2" data-path="TwoD2DLinking-2.html"><a href="TwoD2DLinking-2.html#TwoD2DLinkingM2D-3"><i class="fa fa-check"></i><b>10.7.2</b> TUFLOW Classic’s Multiple 2D Domains</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="11" data-path="Outputs-1.html"><a href="Outputs-1.html"><i class="fa fa-check"></i><b>11</b> Outputs</a>
<ul>
<li class="chapter" data-level="11.1" data-path="Location-2.html"><a href="Location-2.html"><i class="fa fa-check"></i><b>11.1</b> Output Location</a></li>
<li class="chapter" data-level="11.2" data-path="Map-2.html"><a href="Map-2.html"><i class="fa fa-check"></i><b>11.2</b> Map Outputs</a>
<ul>
<li class="chapter" data-level="11.2.1" data-path="Map-2.html"><a href="Map-2.html#TimeControl-3"><i class="fa fa-check"></i><b>11.2.1</b> Output Time Controls</a></li>
<li class="chapter" data-level="11.2.2" data-path="Map-2.html"><a href="Map-2.html#Format-3"><i class="fa fa-check"></i><b>11.2.2</b> Map Output Formats</a>
<ul>
<li class="chapter" data-level="11.2.2.1" data-path="Map-2.html"><a href="Map-2.html#MeshBased-4"><i class="fa fa-check"></i><b>11.2.2.1</b> Mesh Based Formats</a></li>
<li class="chapter" data-level="11.2.2.2" data-path="Map-2.html"><a href="Map-2.html#Grid-4"><i class="fa fa-check"></i><b>11.2.2.2</b> Grid Based Formats</a></li>
<li class="chapter" data-level="11.2.2.3" data-path="Map-2.html"><a href="Map-2.html#HRGrid-4"><i class="fa fa-check"></i><b>11.2.2.3</b> High-Resolution Grids</a></li>
<li class="chapter" data-level="11.2.2.4" data-path="Map-2.html"><a href="Map-2.html#Combined-4"><i class="fa fa-check"></i><b>11.2.2.4</b> Combined Format</a></li>
<li class="chapter" data-level="11.2.2.5" data-path="Map-2.html"><a href="Map-2.html#GISBased-4"><i class="fa fa-check"></i><b>11.2.2.5</b> GIS Based Format</a></li>
</ul></li>
<li class="chapter" data-level="11.2.3" data-path="Map-2.html"><a href="Map-2.html#DataTypes-3"><i class="fa fa-check"></i><b>11.2.3</b> Map Output Data Types</a>
<ul>
<li class="chapter" data-level="11.2.3.1" data-path="Map-2.html"><a href="Map-2.html#Hazards-4"><i class="fa fa-check"></i><b>11.2.3.1</b> Hazard Data Types</a></li>
</ul></li>
<li class="chapter" data-level="11.2.4" data-path="Map-2.html"><a href="Map-2.html#OneDMap-3"><i class="fa fa-check"></i><b>11.2.4</b> 1D Map Outputs</a>
<ul>
<li class="chapter" data-level="11.2.4.1" data-path="Map-2.html"><a href="Map-2.html#WLL-4"><i class="fa fa-check"></i><b>11.2.4.1</b> Water Level Lines</a></li>
<li class="chapter" data-level="11.2.4.2" data-path="Map-2.html"><a href="Map-2.html#WLLp-4"><i class="fa fa-check"></i><b>11.2.4.2</b> Water Level Line Points</a></li>
<li class="chapter" data-level="11.2.4.3" data-path="Map-2.html"><a href="Map-2.html#WLLtriangles-4"><i class="fa fa-check"></i><b>11.2.4.3</b> Adding Triangles into the 1d_WLL Layer</a></li>
</ul></li>
<li class="chapter" data-level="11.2.5" data-path="Map-2.html"><a href="Map-2.html#OutputZones-3"><i class="fa fa-check"></i><b>11.2.5</b> Output Zones</a></li>
<li class="chapter" data-level="11.2.6" data-path="Map-2.html"><a href="Map-2.html#GaugeLevel-3"><i class="fa fa-check"></i><b>11.2.6</b> Gauge Level Output</a></li>
</ul></li>
<li class="chapter" data-level="11.3" data-path="TimeSeries-2.html"><a href="TimeSeries-2.html"><i class="fa fa-check"></i><b>11.3</b> Time-Series Outputs</a>
<ul>
<li class="chapter" data-level="11.3.1" data-path="TimeSeries-2.html"><a href="TimeSeries-2.html#OneDTS-3"><i class="fa fa-check"></i><b>11.3.1</b> 1D Time-Series Output</a></li>
<li class="chapter" data-level="11.3.2" data-path="TimeSeries-2.html"><a href="TimeSeries-2.html#TwoDTS-3"><i class="fa fa-check"></i><b>11.3.2</b> 2D Time-Series Output</a>
<ul>
<li class="chapter" data-level="11.3.2.1" data-path="TimeSeries-2.html"><a href="TimeSeries-2.html#PlotOutput-4"><i class="fa fa-check"></i><b>11.3.2.1</b> Plot Output</a></li>
<li class="chapter" data-level="11.3.2.2" data-path="TimeSeries-2.html"><a href="TimeSeries-2.html#LongProfile-4"><i class="fa fa-check"></i><b>11.3.2.2</b> Long Profile Output</a></li>
</ul></li>
<li class="chapter" data-level="11.3.3" data-path="TimeSeries-2.html"><a href="TimeSeries-2.html#ReportingLocation-3"><i class="fa fa-check"></i><b>11.3.3</b> Reporting Locations</a></li>
<li class="chapter" data-level="11.3.4" data-path="TimeSeries-2.html"><a href="TimeSeries-2.html#Structure-3"><i class="fa fa-check"></i><b>11.3.4</b> Structure Output</a></li>
</ul></li>
<li class="chapter" data-level="11.4" data-path="Specialised-2.html"><a href="Specialised-2.html"><i class="fa fa-check"></i><b>11.4</b> Specialised Outputs</a>
<ul>
<li class="chapter" data-level="11.4.1" data-path="Specialised-2.html"><a href="Specialised-2.html#Receptors-3"><i class="fa fa-check"></i><b>11.4.1</b> Receptors</a></li>
<li class="chapter" data-level="11.4.2" data-path="Specialised-2.html"><a href="Specialised-2.html#EvaculationRoutes-3"><i class="fa fa-check"></i><b>11.4.2</b> Evacuation Routes</a></li>
</ul></li>
<li class="chapter" data-level="11.5" data-path="ChecksLogs-2.html"><a href="ChecksLogs-2.html"><i class="fa fa-check"></i><b>11.5</b> Check and Log Files</a></li>
<li class="chapter" data-level="11.6" data-path="Commands-2.html"><a href="Commands-2.html"><i class="fa fa-check"></i><b>11.6</b> Output Control Commands</a></li>
</ul></li>
<li class="chapter" data-level="12" data-path="Hardware-1.html"><a href="Hardware-1.html"><i class="fa fa-check"></i><b>12</b> Hardware and Operating System</a>
<ul>
<li class="chapter" data-level="12.1" data-path="OperatingSystems-2.html"><a href="OperatingSystems-2.html"><i class="fa fa-check"></i><b>12.1</b> Operating Systems</a></li>
<li class="chapter" data-level="12.2" data-path="TUFLOWClassic-2.html"><a href="TUFLOWClassic-2.html"><i class="fa fa-check"></i><b>12.2</b> TUFLOW Classic</a></li>
<li class="chapter" data-level="12.3" data-path="TUFLOWHPC-2.html"><a href="TUFLOWHPC-2.html"><i class="fa fa-check"></i><b>12.3</b> TUFLOW HPC (Including Quadtree)</a>
<ul>
<li class="chapter" data-level="12.3.1" data-path="TUFLOWHPC-2.html"><a href="TUFLOWHPC-2.html#HPC-CPU-3"><i class="fa fa-check"></i><b>12.3.1</b> TUFLOW HPC Solver on CPU</a></li>
<li class="chapter" data-level="12.3.2" data-path="TUFLOWHPC-2.html"><a href="TUFLOWHPC-2.html#HPC-GPU-3"><i class="fa fa-check"></i><b>12.3.2</b> TUFLOW HPC Solver on GPU</a></li>
<li class="chapter" data-level="12.3.3" data-path="TUFLOWHPC-2.html"><a href="TUFLOWHPC-2.html#GPUTypes-3"><i class="fa fa-check"></i><b>12.3.3</b> Types of GPU</a></li>
<li class="chapter" data-level="12.3.4" data-path="TUFLOWHPC-2.html"><a href="TUFLOWHPC-2.html#MultipleGPUs-3"><i class="fa fa-check"></i><b>12.3.4</b> Utilising Multiple GPUs for One Model</a></li>
<li class="chapter" data-level="12.3.5" data-path="TUFLOWHPC-2.html"><a href="TUFLOWHPC-2.html#MultipleModelsoneGPU-3"><i class="fa fa-check"></i><b>12.3.5</b> Running Multiple Models on a Single GPU</a></li>
<li class="chapter" data-level="12.3.6" data-path="TUFLOWHPC-2.html"><a href="TUFLOWHPC-2.html#DiffResultsCPUGPU-3"><i class="fa fa-check"></i><b>12.3.6</b> Differences in results between CPU and GPU</a></li>
<li class="chapter" data-level="12.3.7" data-path="TUFLOWHPC-2.html"><a href="TUFLOWHPC-2.html#HPCRAM-3"><i class="fa fa-check"></i><b>12.3.7</b> RAM</a></li>
</ul></li>
<li class="chapter" data-level="12.4" data-path="ProxiesforCPUandGPU-2.html"><a href="ProxiesforCPUandGPU-2.html"><i class="fa fa-check"></i><b>12.4</b> Proxies for CPU and GPU performance</a></li>
<li class="chapter" data-level="12.5" data-path="Virtualisation-2.html"><a href="Virtualisation-2.html"><i class="fa fa-check"></i><b>12.5</b> Virtualisation</a></li>
<li class="chapter" data-level="12.6" data-path="CloudCompute-2.html"><a href="CloudCompute-2.html"><i class="fa fa-check"></i><b>12.6</b> Cloud Compute</a></li>
<li class="chapter" data-level="12.7" data-path="HardwareCommands-2.html"><a href="HardwareCommands-2.html"><i class="fa fa-check"></i><b>12.7</b> Commands</a></li>
</ul></li>
<li class="chapter" data-level="13" data-path="Running-Simulations-1.html"><a href="Running-Simulations-1.html"><i class="fa fa-check"></i><b>13</b> Managing and Starting Simulations</a>
<ul>
<li class="chapter" data-level="13.1" data-path="FileNaming-2.html"><a href="FileNaming-2.html"><i class="fa fa-check"></i><b>13.1</b> File Naming</a></li>
<li class="chapter" data-level="13.2" data-path="SimulationManagement-2.html"><a href="SimulationManagement-2.html"><i class="fa fa-check"></i><b>13.2</b> Simulation Management</a>
<ul>
<li class="chapter" data-level="13.2.1" data-path="SimulationManagement-2.html"><a href="SimulationManagement-2.html#Events-3"><i class="fa fa-check"></i><b>13.2.1</b> Events</a></li>
<li class="chapter" data-level="13.2.2" data-path="SimulationManagement-2.html"><a href="SimulationManagement-2.html#Scenarios-3"><i class="fa fa-check"></i><b>13.2.2</b> Scenarios</a></li>
<li class="chapter" data-level="13.2.3" data-path="SimulationManagement-2.html"><a href="SimulationManagement-2.html#Variables-3"><i class="fa fa-check"></i><b>13.2.3</b> Variables</a></li>
</ul></li>
<li class="chapter" data-level="13.3" data-path="TUFLOWExecDownload-2.html"><a href="TUFLOWExecDownload-2.html"><i class="fa fa-check"></i><b>13.3</b> TUFLOW Executable Download</a>
<ul>
<li class="chapter" data-level="13.3.1" data-path="TUFLOWExecDownload-2.html"><a href="TUFLOWExecDownload-2.html#InstallOverview-3"><i class="fa fa-check"></i><b>13.3.1</b> Overview and Where to Install</a></li>
<li class="chapter" data-level="13.3.2" data-path="TUFLOWExecDownload-2.html"><a href="TUFLOWExecDownload-2.html#iSPdSP-3"><i class="fa fa-check"></i><b>13.3.2</b> Single and Double Precision</a>
<ul>
<li class="chapter" data-level="13.3.2.1" data-path="TUFLOWExecDownload-2.html"><a href="TUFLOWExecDownload-2.html#iSPdSP-Classic"><i class="fa fa-check"></i><b>13.3.2.1</b> TUFLOW Classic</a></li>
<li class="chapter" data-level="13.3.2.2" data-path="TUFLOWExecDownload-2.html"><a href="TUFLOWExecDownload-2.html#iSPdSP-HPC"><i class="fa fa-check"></i><b>13.3.2.2</b> TUFLOW HPC</a></li>
</ul></li>
<li class="chapter" data-level="13.3.3" data-path="TUFLOWExecDownload-2.html"><a href="TUFLOWExecDownload-2.html#CustomingTUFLOW-3"><i class="fa fa-check"></i><b>13.3.3</b> Customising TUFLOW using TUFLOW_USER_DEFINED.dll</a></li>
</ul></li>
<li class="chapter" data-level="13.4" data-path="RunningSims-2.html"><a href="RunningSims-2.html"><i class="fa fa-check"></i><b>13.4</b> Running Simulations</a>
<ul>
<li class="chapter" data-level="13.4.1" data-path="RunningSims-2.html"><a href="RunningSims-2.html#DongleTypesandSetup-3"><i class="fa fa-check"></i><b>13.4.1</b> Dongle Types and Setup</a>
<ul>
<li class="chapter" data-level="13.4.1.1" data-path="RunningSims-2.html"><a href="RunningSims-2.html#DongleAccessProtocols-4"><i class="fa fa-check"></i><b>13.4.1.1</b> Protocols for Accessing Dongles</a></li>
<li class="chapter" data-level="13.4.1.2" data-path="RunningSims-2.html"><a href="RunningSims-2.html#DongleSettingsFile-4"><i class="fa fa-check"></i><b>13.4.1.2</b> TUFLOW_Licence_Settings.lcf File</a></li>
<li class="chapter" data-level="13.4.1.3" data-path="RunningSims-2.html"><a href="RunningSims-2.html#DongleFailure-4"><i class="fa fa-check"></i><b>13.4.1.3</b> Dongle Failure during a Simulation</a></li>
</ul></li>
<li class="chapter" data-level="13.4.2" data-path="RunningSims-2.html"><a href="RunningSims-2.html#StartingaSim-3"><i class="fa fa-check"></i><b>13.4.2</b> Starting a Simulation</a>
<ul>
<li class="chapter" data-level="13.4.2.1" data-path="RunningSims-2.html"><a href="RunningSims-2.html#BatchFileExamples-4"><i class="fa fa-check"></i><b>13.4.2.1</b> Batch File Example and Run Options (Switches)</a></li>
<li class="chapter" data-level="13.4.2.2" data-path="RunningSims-2.html"><a href="RunningSims-2.html#CopyModelBatchFiles-4"><i class="fa fa-check"></i><b>13.4.2.2</b> Copy/Package Model from Batch Files</a></li>
<li class="chapter" data-level="13.4.2.3" data-path="RunningSims-2.html"><a href="RunningSims-2.html#AdvancedBatchFiles-4"><i class="fa fa-check"></i><b>13.4.2.3</b> Advanced Batch Files</a></li>
</ul></li>
<li class="chapter" data-level="13.4.3" data-path="RunningSims-2.html"><a href="RunningSims-2.html#RunningHPC-3"><i class="fa fa-check"></i><b>13.4.3</b> Running TUFLOW HPC</a>
<ul>
<li class="chapter" data-level="13.4.3.1" data-path="RunningSims-2.html"><a href="RunningSims-2.html#HPCGPUCommands-4"><i class="fa fa-check"></i><b>13.4.3.1</b> TUFLOW HPC and GPU Module Commands</a></li>
<li class="chapter" data-level="13.4.3.2" data-path="RunningSims-2.html"><a href="RunningSims-2.html#GPUCompatibility-4"><i class="fa fa-check"></i><b>13.4.3.2</b> Compatible Graphics Cards</a></li>
<li class="chapter" data-level="13.4.3.3" data-path="RunningSims-2.html"><a href="RunningSims-2.html#UpdatingGPUDrivers-4"><i class="fa fa-check"></i><b>13.4.3.3</b> Updating NVIDIA Drivers</a></li>
<li class="chapter" data-level="13.4.3.4" data-path="RunningSims-2.html"><a href="RunningSims-2.html#GPUNVLink-4"><i class="fa fa-check"></i><b>13.4.3.4</b> NVLink – Multi-GPU Performance (HPC Only)</a></li>
<li class="chapter" data-level="13.4.3.5" data-path="RunningSims-2.html"><a href="RunningSims-2.html#GPUTroubleshooting-4"><i class="fa fa-check"></i><b>13.4.3.5</b> Troubleshooting</a></li>
</ul></li>
<li class="chapter" data-level="13.4.4" data-path="RunningSims-2.html"><a href="RunningSims-2.html#Running1D-3"><i class="fa fa-check"></i><b>13.4.4</b> Running TUFLOW 1D Only Simulations</a></li>
</ul></li>
<li class="chapter" data-level="13.5" data-path="TUFLOWExternalSchemes-2.html"><a href="TUFLOWExternalSchemes-2.html"><i class="fa fa-check"></i><b>13.5</b> Using TUFLOW with Flood Modeller, SWMM, XP-SWMM, 12D or from SMS</a>
<ul>
<li class="chapter" data-level="13.5.1" data-path="TUFLOWExternalSchemes-2.html"><a href="TUFLOWExternalSchemes-2.html#SWMMSimulations-3"><i class="fa fa-check"></i><b>13.5.1</b> Using TUFLOW with EPA SWMM</a></li>
<li class="chapter" data-level="13.5.2" data-path="TUFLOWExternalSchemes-2.html"><a href="TUFLOWExternalSchemes-2.html#FMSimulations-3"><i class="fa fa-check"></i><b>13.5.2</b> Using TUFLOW with Flood Modeller</a></li>
<li class="chapter" data-level="13.5.3" data-path="TUFLOWExternalSchemes-2.html"><a href="TUFLOWExternalSchemes-2.html#TwelveDSimulations-3"><i class="fa fa-check"></i><b>13.5.3</b> Using TUFLOW with 12D</a></li>
<li class="chapter" data-level="13.5.4" data-path="TUFLOWExternalSchemes-2.html"><a href="TUFLOWExternalSchemes-2.html#XPSWMMSimulations-3"><i class="fa fa-check"></i><b>13.5.4</b> Using TUFLOW with XP-SWMM</a></li>
<li class="chapter" data-level="13.5.5" data-path="TUFLOWExternalSchemes-2.html"><a href="TUFLOWExternalSchemes-2.html#SMSSimulations-3"><i class="fa fa-check"></i><b>13.5.5</b> Using TUFLOW with SMS</a></li>
</ul></li>
<li class="chapter" data-level="13.6" data-path="OptimisingSims.html"><a href="OptimisingSims.html"><i class="fa fa-check"></i><b>13.6</b> Optimising Startup and Run Times</a>
<ul>
<li class="chapter" data-level="13.6.1" data-path="OptimisingSims.html"><a href="OptimisingSims.html#Improved1DInputs"><i class="fa fa-check"></i><b>13.6.1</b> Improved pre-processing of 1D Model Inputs</a></li>
<li class="chapter" data-level="13.6.2" data-path="OptimisingSims.html"><a href="OptimisingSims.html#SGSParallelProcessing"><i class="fa fa-check"></i><b>13.6.2</b> Parallel Processing for SGS initialisation</a></li>
<li class="chapter" data-level="13.6.3" data-path="OptimisingSims.html"><a href="OptimisingSims.html#OptimisingMultiGPUPerformance"><i class="fa fa-check"></i><b>13.6.3</b> Optimising Multi-GPU Performance (HPC Only)</a></li>
<li class="chapter" data-level="13.6.4" data-path="OptimisingSims.html"><a href="OptimisingSims.html#AutoTerminateOptions-3"><i class="fa fa-check"></i><b>13.6.4</b> Auto Terminate (Simulation End) Options</a></li>
</ul></li>
<li class="chapter" data-level="13.7" data-path="ResultsReplication-3.html"><a href="ResultsReplication-3.html"><i class="fa fa-check"></i><b>13.7</b> Reproducibility of Results</a>
<ul>
<li class="chapter" data-level="13.7.1" data-path="ResultsReplication-3.html"><a href="ResultsReplication-3.html#ResultsReplicationClassic-3"><i class="fa fa-check"></i><b>13.7.1</b> TUFLOW Classic (CPU only)</a></li>
<li class="chapter" data-level="13.7.2" data-path="ResultsReplication-3.html"><a href="ResultsReplication-3.html#ResultsReplicationHPCCPU-3"><i class="fa fa-check"></i><b>13.7.2</b> TUFLOW HPC (incl. Quadtree) on CPU</a></li>
<li class="chapter" data-level="13.7.3" data-path="ResultsReplication-3.html"><a href="ResultsReplication-3.html#ResultsReplicationHPCGPU-3"><i class="fa fa-check"></i><b>13.7.3</b> TUFLOW HPC (incl. Quadtree) on GPU</a></li>
<li class="chapter" data-level="13.7.4" data-path="ResultsReplication-3.html"><a href="ResultsReplication-3.html#ResultsReplicationHPCMultiThread-3"><i class="fa fa-check"></i><b>13.7.4</b> TUFLOW HPC (incl. Quadtree) on multiple GPUs / CPU threads</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="14" data-path="Checks-and-Logs-1.html"><a href="Checks-and-Logs-1.html"><i class="fa fa-check"></i><b>14</b> Checks and Log Files</a>
<ul>
<li class="chapter" data-level="14.1" data-path="ConsoleDisplay-2.html"><a href="ConsoleDisplay-2.html"><i class="fa fa-check"></i><b>14.1</b> Console Window Display</a>
<ul>
<li class="chapter" data-level="14.1.1" data-path="ConsoleDisplay-2.html"><a href="ConsoleDisplay-2.html#Classic-3"><i class="fa fa-check"></i><b>14.1.1</b> TUFLOW Classic</a></li>
<li class="chapter" data-level="14.1.2" data-path="ConsoleDisplay-2.html"><a href="ConsoleDisplay-2.html#HPC-3"><i class="fa fa-check"></i><b>14.1.2</b> TUFLOW HPC</a></li>
<li class="chapter" data-level="14.1.3" data-path="ConsoleDisplay-2.html"><a href="ConsoleDisplay-2.html#ConsoleDisappear-3"><i class="fa fa-check"></i><b>14.1.3</b> The Console Window Does Not Appear</a></li>
<li class="chapter" data-level="14.1.4" data-path="ConsoleDisplay-2.html"><a href="ConsoleDisplay-2.html#QuickEdit-3"><i class="fa fa-check"></i><b>14.1.4</b> Unexpected Simulation Pause (Console Window Quick Edit Mode)</a></li>
<li class="chapter" data-level="14.1.5" data-path="ConsoleDisplay-2.html"><a href="ConsoleDisplay-2.html#ConsoleShortcut-3"><i class="fa fa-check"></i><b>14.1.5</b> Stopping the Console Window</a></li>
<li class="chapter" data-level="14.1.6" data-path="ConsoleDisplay-2.html"><a href="ConsoleDisplay-2.html#ConsoleCustomisation-3"><i class="fa fa-check"></i><b>14.1.6</b> Customisation of Console Window</a></li>
<li class="chapter" data-level="14.1.7" data-path="ConsoleDisplay-2.html"><a href="ConsoleDisplay-2.html#ErrorLevel-3"><i class="fa fa-check"></i><b>14.1.7</b> TUFLOW Windows ERROR LEVEL Reporting</a></li>
</ul></li>
<li class="chapter" data-level="14.2" data-path="MessageBox-2.html"><a href="MessageBox-2.html"><i class="fa fa-check"></i><b>14.2</b> Message Boxes</a></li>
<li class="chapter" data-level="14.3" data-path="SimLog-2.html"><a href="SimLog-2.html"><i class="fa fa-check"></i><b>14.3</b> Simulations .log</a>
<ul>
<li class="chapter" data-level="14.3.1" data-path="SimLog-2.html"><a href="SimLog-2.html#LocalLog-3"><i class="fa fa-check"></i><b>14.3.1</b> Local .log File</a></li>
<li class="chapter" data-level="14.3.2" data-path="SimLog-2.html"><a href="SimLog-2.html#GlobalLog-3"><i class="fa fa-check"></i><b>14.3.2</b> Global .log File</a></li>
</ul></li>
<li class="chapter" data-level="14.4" data-path="SimLogFiles-2.html"><a href="SimLogFiles-2.html"><i class="fa fa-check"></i><b>14.4</b> Simulation Log Files</a>
<ul>
<li class="chapter" data-level="14.4.1" data-path="SimLogFiles-2.html"><a href="SimLogFiles-2.html#TLF-3"><i class="fa fa-check"></i><b>14.4.1</b> TLF</a>
<ul>
<li class="chapter" data-level="14.4.1.1" data-path="SimLogFiles-2.html"><a href="SimLogFiles-2.html#HPCTLF-4"><i class="fa fa-check"></i><b>14.4.1.1</b> HPC TLF and DT</a></li>
</ul></li>
<li class="chapter" data-level="14.4.2" data-path="SimLogFiles-2.html"><a href="SimLogFiles-2.html#TSF-3"><i class="fa fa-check"></i><b>14.4.2</b> TSF</a></li>
<li class="chapter" data-level="14.4.3" data-path="SimLogFiles-2.html"><a href="SimLogFiles-2.html#start-stats-3"><i class="fa fa-check"></i><b>14.4.3</b> Start Stats</a></li>
<li class="chapter" data-level="14.4.4" data-path="SimLogFiles-2.html"><a href="SimLogFiles-2.html#run-stats-3"><i class="fa fa-check"></i><b>14.4.4</b> Run Stats</a></li>
<li class="chapter" data-level="14.4.5" data-path="SimLogFiles-2.html"><a href="SimLogFiles-2.html#Messages-3"><i class="fa fa-check"></i><b>14.4.5</b> Messages</a></li>
<li class="chapter" data-level="14.4.6" data-path="SimLogFiles-2.html"><a href="SimLogFiles-2.html#Workspaces-2"><i class="fa fa-check"></i><b>14.4.6</b> GIS Workspaces</a></li>
</ul></li>
<li class="chapter" data-level="14.5" data-path="EOF-2.html"><a href="EOF-2.html"><i class="fa fa-check"></i><b>14.5</b> 1D Output File</a></li>
<li class="chapter" data-level="14.6" data-path="CheckLayers-2.html"><a href="CheckLayers-2.html"><i class="fa fa-check"></i><b>14.6</b> Check Files</a></li>
<li class="chapter" data-level="14.7" data-path="MB-2.html"><a href="MB-2.html"><i class="fa fa-check"></i><b>14.7</b> Mass Balance Output</a>
<ul>
<li class="chapter" data-level="14.7.1" data-path="MB-2.html"><a href="MB-2.html#def-MB-3"><i class="fa fa-check"></i><b>14.7.1</b> Mass Balance Definitions</a></li>
<li class="chapter" data-level="14.7.2" data-path="MB-2.html"><a href="MB-2.html#OneD-MB-3"><i class="fa fa-check"></i><b>14.7.2</b> TUFLOW 1D Mass Balance</a></li>
<li class="chapter" data-level="14.7.3" data-path="MB-2.html"><a href="MB-2.html#MB-CLA-3"><i class="fa fa-check"></i><b>14.7.3</b> TUFLOW Classic Mass Balance</a></li>
<li class="chapter" data-level="14.7.4" data-path="MB-2.html"><a href="MB-2.html#MB-HPC-3"><i class="fa fa-check"></i><b>14.7.4</b> TUFLOW HPC Mass Balance</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="15" data-path="Viewing-Output-1.html"><a href="Viewing-Output-1.html"><i class="fa fa-check"></i><b>15</b> Viewing Outputs</a>
<ul>
<li class="chapter" data-level="15.1" data-path="Output-Folder-2.html"><a href="Output-Folder-2.html"><i class="fa fa-check"></i><b>15.1</b> Folder Structure</a></li>
<li class="chapter" data-level="15.2" data-path="view-1D-2.html"><a href="view-1D-2.html"><i class="fa fa-check"></i><b>15.2</b> 1D Output</a>
<ul>
<li class="chapter" data-level="15.2.1" data-path="view-1D-2.html"><a href="view-1D-2.html#view-tpc-3"><i class="fa fa-check"></i><b>15.2.1</b> TUFLOW Plot Control file (TPC)</a></li>
<li class="chapter" data-level="15.2.2" data-path="view-1D-2.html"><a href="view-1D-2.html#mm-4"><i class="fa fa-check"></i><b>15.2.2</b> Maximum and Minimum Output</a></li>
<li class="chapter" data-level="15.2.3" data-path="view-1D-2.html"><a href="view-1D-2.html#ccA-4"><i class="fa fa-check"></i><b>15.2.3</b> ccA GIS Layer</a></li>
<li class="chapter" data-level="15.2.4" data-path="view-1D-2.html"><a href="view-1D-2.html#TS-GIS-3"><i class="fa fa-check"></i><b>15.2.4</b> _TS GIS Layer</a></li>
<li class="chapter" data-level="15.2.5" data-path="view-1D-2.html"><a href="view-1D-2.html#Viewing-WLL-4"><i class="fa fa-check"></i><b>15.2.5</b> 1D Water Level Lines (WLL)</a></li>
</ul></li>
<li class="chapter" data-level="15.3" data-path="view-2D-2.html"><a href="view-2D-2.html"><i class="fa fa-check"></i><b>15.3</b> 2D Output</a>
<ul>
<li class="chapter" data-level="15.3.1" data-path="view-2D-2.html"><a href="view-2D-2.html#view-mesh-3"><i class="fa fa-check"></i><b>15.3.1</b> Mesh Output</a></li>
<li class="chapter" data-level="15.3.2" data-path="view-2D-2.html"><a href="view-2D-2.html#view-raster-3"><i class="fa fa-check"></i><b>15.3.2</b> Raster Output</a></li>
<li class="chapter" data-level="15.3.3" data-path="view-2D-2.html"><a href="view-2D-2.html#View-PO-3"><i class="fa fa-check"></i><b>15.3.3</b> Plot Output</a></li>
</ul></li>
<li class="chapter" data-level="15.4" data-path="Post-Process-2.html"><a href="Post-Process-2.html"><i class="fa fa-check"></i><b>15.4</b> Post Processing</a></li>
<li class="chapter" data-level="15.5" data-path="Impact-Map-2.html"><a href="Impact-Map-2.html"><i class="fa fa-check"></i><b>15.5</b> Impact Mapping</a></li>
<li class="chapter" data-level="15.6" data-path="Animations-2.html"><a href="Animations-2.html"><i class="fa fa-check"></i><b>15.6</b> Animations</a></li>
</ul></li>
<li class="chapter" data-level="16" data-path="QualityControl-and-Troubleshooting-1.html"><a href="QualityControl-and-Troubleshooting-1.html"><i class="fa fa-check"></i><b>16</b> Quality Control and Troubleshooting</a>
<ul>
<li class="chapter" data-level="16.1" data-path="ModelHealth-2.html"><a href="ModelHealth-2.html"><i class="fa fa-check"></i><b>16.1</b> Model Health</a>
<ul>
<li class="chapter" data-level="16.1.1" data-path="ModelHealth-2.html"><a href="ModelHealth-2.html#TUFLOWClassicModelHealth-3"><i class="fa fa-check"></i><b>16.1.1</b> TUFLOW Classic</a>
<ul>
<li class="chapter" data-level="16.1.1.1" data-path="ModelHealth-2.html"><a href="ModelHealth-2.html#TUFLOWClassicTimestep-4"><i class="fa fa-check"></i><b>16.1.1.1</b> Timestep</a></li>
</ul></li>
<li class="chapter" data-level="16.1.2" data-path="ModelHealth-2.html"><a href="ModelHealth-2.html#TUFLOWHPCModelHealth-3"><i class="fa fa-check"></i><b>16.1.2</b> TUFLOW HPC</a>
<ul>
<li class="chapter" data-level="16.1.2.1" data-path="ModelHealth-2.html"><a href="ModelHealth-2.html#TUFLOWHPCTimestep-4"><i class="fa fa-check"></i><b>16.1.2.1</b> Timestep</a></li>
</ul></li>
<li class="chapter" data-level="16.1.3" data-path="ModelHealth-2.html"><a href="ModelHealth-2.html#TUFLOWQAIndicators-3"><i class="fa fa-check"></i><b>16.1.3</b> Healthy Model Indicators</a></li>
</ul></li>
<li class="chapter" data-level="16.2" data-path="QATroubleshooting-2.html"><a href="QATroubleshooting-2.html"><i class="fa fa-check"></i><b>16.2</b> Troubleshooting</a>
<ul>
<li class="chapter" data-level="16.2.1" data-path="QATroubleshooting-2.html"><a href="QATroubleshooting-2.html#QAGeneralComments-3"><i class="fa fa-check"></i><b>16.2.1</b> General Comments</a></li>
<li class="chapter" data-level="16.2.2" data-path="QATroubleshooting-2.html"><a href="QATroubleshooting-2.html#tuflowinstability-3"><i class="fa fa-check"></i><b>16.2.2</b> Instability Identification</a>
<ul>
<li class="chapter" data-level="16.2.2.1" data-path="QATroubleshooting-2.html"><a href="QATroubleshooting-2.html#onedinstability-4"><i class="fa fa-check"></i><b>16.2.2.1</b> 1D (ESTRY) Domains</a></li>
<li class="chapter" data-level="16.2.2.2" data-path="QATroubleshooting-2.html"><a href="QATroubleshooting-2.html#ClassicInstability-4"><i class="fa fa-check"></i><b>16.2.2.2</b> TUFLOW Classic</a></li>
<li class="chapter" data-level="16.2.2.3" data-path="QATroubleshooting-2.html"><a href="QATroubleshooting-2.html#HPCInstability-4"><i class="fa fa-check"></i><b>16.2.2.3</b> TUFLOW HPC</a></li>
<li class="chapter" data-level="16.2.2.4" data-path="QATroubleshooting-2.html"><a href="QATroubleshooting-2.html#onedtwodinstability-4"><i class="fa fa-check"></i><b>16.2.2.4</b> 1D/2D Links</a></li>
<li class="chapter" data-level="16.2.2.5" data-path="QATroubleshooting-2.html"><a href="QATroubleshooting-2.html#othertroublshooting-4"><i class="fa fa-check"></i><b>16.2.2.5</b> Other General Troubleshooting Recommendations</a></li>
</ul></li>
<li class="chapter" data-level="16.2.3" data-path="QATroubleshooting-2.html"><a href="QATroubleshooting-2.html#fileaccess-3"><i class="fa fa-check"></i><b>16.2.3</b> File Access</a>
<ul>
<li class="chapter" data-level="16.2.3.1" data-path="QATroubleshooting-2.html"><a href="QATroubleshooting-2.html#xffileaccess-4"><i class="fa fa-check"></i><b>16.2.3.1</b> XF File Access</a></li>
<li class="chapter" data-level="16.2.3.2" data-path="QATroubleshooting-2.html"><a href="QATroubleshooting-2.html#xmdffileaccess-4"><i class="fa fa-check"></i><b>16.2.3.2</b> XMDF File Access</a></li>
<li class="chapter" data-level="16.2.3.3" data-path="QATroubleshooting-2.html"><a href="QATroubleshooting-2.html#gpkgfileaccess-4"><i class="fa fa-check"></i><b>16.2.3.3</b> GPKG File Access</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="16.3" data-path="QAchecklist-2.html"><a href="QAchecklist-2.html"><i class="fa fa-check"></i><b>16.3</b> QA Check List and Simulation Logging</a></li>
<li class="chapter" data-level="16.4" data-path="ExceedingRAM-2.html"><a href="ExceedingRAM-2.html"><i class="fa fa-check"></i><b>16.4</b> Models Exceeding Hardware RAM</a>
<ul>
<li class="chapter" data-level="16.4.1" data-path="ExceedingRAM-2.html"><a href="ExceedingRAM-2.html#ComputerRAM-3"><i class="fa fa-check"></i><b>16.4.1</b> Computer RAM</a></li>
<li class="chapter" data-level="16.4.2" data-path="ExceedingRAM-2.html"><a href="ExceedingRAM-2.html#TUFLOWVersion-3"><i class="fa fa-check"></i><b>16.4.2</b> TUFLOW Version</a></li>
<li class="chapter" data-level="16.4.3" data-path="ExceedingRAM-2.html"><a href="ExceedingRAM-2.html#QAmodeldesign-3"><i class="fa fa-check"></i><b>16.4.3</b> Model Design</a></li>
<li class="chapter" data-level="16.4.4" data-path="ExceedingRAM-2.html"><a href="ExceedingRAM-2.html#memoryusage-3"><i class="fa fa-check"></i><b>16.4.4</b> Memory Usage Reporting</a></li>
<li class="chapter" data-level="16.4.5" data-path="ExceedingRAM-2.html"><a href="ExceedingRAM-2.html#tempmemoryusage-3"><i class="fa fa-check"></i><b>16.4.5</b> Temporary Memory Usage</a></li>
<li class="chapter" data-level="16.4.6" data-path="ExceedingRAM-2.html"><a href="ExceedingRAM-2.html#GPURAM-3"><i class="fa fa-check"></i><b>16.4.6</b> TUFLOW HPC GPU Module and RAM requirements</a></li>
</ul></li>
<li class="chapter" data-level="16.5" data-path="backwardcompatibility-2.html"><a href="backwardcompatibility-2.html"><i class="fa fa-check"></i><b>16.5</b> Past Release Version Backward Compatibility</a></li>
</ul></li>
<li class="chapter" data-level="17" data-path="Utilities-1.html"><a href="Utilities-1.html"><i class="fa fa-check"></i><b>17</b> Utilities</a>
<ul>
<li class="chapter" data-level="17.1" data-path="GIS-Utilities-2.html"><a href="GIS-Utilities-2.html"><i class="fa fa-check"></i><b>17.1</b> GIS Based Utilities</a>
<ul>
<li class="chapter" data-level="17.1.1" data-path="GIS-Utilities-2.html"><a href="GIS-Utilities-2.html#QGIS-Plugin-3"><i class="fa fa-check"></i><b>17.1.1</b> QGIS TUFLOW Plugin</a></li>
<li class="chapter" data-level="17.1.2" data-path="GIS-Utilities-2.html"><a href="GIS-Utilities-2.html#ArcGIS-Toolbar-3"><i class="fa fa-check"></i><b>17.1.2</b> ArcGIS Pro Toolbar</a></li>
<li class="chapter" data-level="17.1.3" data-path="GIS-Utilities-2.html"><a href="GIS-Utilities-2.html#ArcMap-Toolbox-3"><i class="fa fa-check"></i><b>17.1.3</b> ArcMap Toolbox</a></li>
<li class="chapter" data-level="17.1.4" data-path="GIS-Utilities-2.html"><a href="GIS-Utilities-2.html#MiTools-3"><i class="fa fa-check"></i><b>17.1.4</b> MiTools</a></li>
</ul></li>
<li class="chapter" data-level="17.2" data-path="Console-2.html"><a href="Console-2.html"><i class="fa fa-check"></i><b>17.2</b> Console Utilities</a>
<ul>
<li class="chapter" data-level="17.2.1" data-path="Console-2.html"><a href="Console-2.html#Processing-Utilites-3"><i class="fa fa-check"></i><b>17.2.1</b> Pre and Post Processing</a></li>
<li class="chapter" data-level="17.2.2" data-path="Console-2.html"><a href="Console-2.html#Convert-Utilties-3"><i class="fa fa-check"></i><b>17.2.2</b> Convert to TUFLOW</a></li>
<li class="chapter" data-level="17.2.3" data-path="Console-2.html"><a href="Console-2.html#Syntax-Highlighting-3"><i class="fa fa-check"></i><b>17.2.3</b> Textfile Syntax Highlighting</a></li>
<li class="chapter" data-level="17.2.4" data-path="Console-2.html"><a href="Console-2.html#PyTUFLOW-3"><i class="fa fa-check"></i><b>17.2.4</b> PyTUFLOW</a></li>
<li class="chapter" data-level="17.2.5" data-path="Console-2.html"><a href="Console-2.html#Excel-3"><i class="fa fa-check"></i><b>17.2.5</b> Excel Macros</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="18" data-path="Features-and-Changes-1.html"><a href="Features-and-Changes-1.html"><i class="fa fa-check"></i><b>18</b> Default Changes</a>
<ul>
<li class="chapter" data-level="18.1" data-path="backward-compat-2025-0.html"><a href="backward-compat-2025-0.html"><i class="fa fa-check"></i><b>18.1</b> 2025.0 Release</a></li>
<li class="chapter" data-level="18.2" data-path="backward-compat-2023-03.html"><a href="backward-compat-2023-03.html"><i class="fa fa-check"></i><b>18.2</b> 2023-03 Release</a></li>
<li class="chapter" data-level="18.3" data-path="backward-compat-2020-10.html"><a href="backward-compat-2020-10.html"><i class="fa fa-check"></i><b>18.3</b> 2020-10 Release</a></li>
<li class="chapter" data-level="18.4" data-path="backward-compat-2020-01.html"><a href="backward-compat-2020-01.html"><i class="fa fa-check"></i><b>18.4</b> 2020-01 Release</a></li>
<li class="chapter" data-level="18.5" data-path="backward-compat-2018-03.html"><a href="backward-compat-2018-03.html"><i class="fa fa-check"></i><b>18.5</b> 2018-03 Release</a></li>
<li class="chapter" data-level="18.6" data-path="backward-compat-2017-09.html"><a href="backward-compat-2017-09.html"><i class="fa fa-check"></i><b>18.6</b> 2017-09 Release</a></li>
<li class="chapter" data-level="18.7" data-path="backward-compat-2016-03.html"><a href="backward-compat-2016-03.html"><i class="fa fa-check"></i><b>18.7</b> 2016-03 Release</a></li>
<li class="chapter" data-level="18.8" data-path="backward-compat-2013-12.html"><a href="backward-compat-2013-12.html"><i class="fa fa-check"></i><b>18.8</b> 2013-12 Release</a></li>
<li class="chapter" data-level="18.9" data-path="backward-compat-2012-05.html"><a href="backward-compat-2012-05.html"><i class="fa fa-check"></i><b>18.9</b> 2012-05 Release</a></li>
<li class="chapter" data-level="18.10" data-path="backward-compat-2011-09.html"><a href="backward-compat-2011-09.html"><i class="fa fa-check"></i><b>18.10</b> 2011-09 Release</a></li>
<li class="chapter" data-level="18.11" data-path="backward-compat-2010-10.html"><a href="backward-compat-2010-10.html"><i class="fa fa-check"></i><b>18.11</b> 2010-10 Release</a></li>
<li class="chapter" data-level="18.12" data-path="backward-compat-2009-07.html"><a href="backward-compat-2009-07.html"><i class="fa fa-check"></i><b>18.12</b> 2009-07 Release</a></li>
<li class="chapter" data-level="18.13" data-path="backward-compat-2008-08.html"><a href="backward-compat-2008-08.html"><i class="fa fa-check"></i><b>18.13</b> 2008-08 Release</a></li>
<li class="chapter" data-level="18.14" data-path="backward-compat-2007-07.html"><a href="backward-compat-2007-07.html"><i class="fa fa-check"></i><b>18.14</b> 2007-07 Release</a></li>
<li class="chapter" data-level="18.15" data-path="backward-compat-2006-06.html"><a href="backward-compat-2006-06.html"><i class="fa fa-check"></i><b>18.15</b> 2006-06 Release</a></li>
<li class="chapter" data-level="18.16" data-path="pre-2006-06.html"><a href="pre-2006-06.html"><i class="fa fa-check"></i><b>18.16</b> Pre 2006-06 Release</a></li>
</ul></li>
<li class="appendix"><span><b>Appendix</b></span></li>
<li class="chapter" data-level="A" data-path="TCFCommands-1.html"><a href="TCFCommands-1.html"><i class="fa fa-check"></i><b>A</b> TCF Commands</a></li>
<li class="chapter" data-level="B" data-path="ECFCommands-1.html"><a href="ECFCommands-1.html"><i class="fa fa-check"></i><b>B</b> ECF Commands</a></li>
<li class="chapter" data-level="C" data-path="TGCCommands-1.html"><a href="TGCCommands-1.html"><i class="fa fa-check"></i><b>C</b> TGC Commands</a></li>
<li class="chapter" data-level="D" data-path="TBCCommands-1.html"><a href="TBCCommands-1.html"><i class="fa fa-check"></i><b>D</b> TBC Commands</a></li>
<li class="chapter" data-level="E" data-path="TOCCommands-1.html"><a href="TOCCommands-1.html"><i class="fa fa-check"></i><b>E</b> TOC Commands</a></li>
<li class="chapter" data-level="F" data-path="TRFCCommands-1.html"><a href="TRFCCommands-1.html"><i class="fa fa-check"></i><b>F</b> TRFC Commands</a></li>
<li class="chapter" data-level="G" data-path="TESFCommands-1.html"><a href="TESFCommands-1.html"><i class="fa fa-check"></i><b>G</b> TESF Commands</a></li>
<li class="chapter" data-level="H" data-path="QCFCommands-1.html"><a href="QCFCommands-1.html"><i class="fa fa-check"></i><b>H</b> QCF Commands</a></li>
<li class="chapter" data-level="I" data-path="TSCFCommands-1.html"><a href="TSCFCommands-1.html"><i class="fa fa-check"></i><b>I</b> TSCF Commands</a></li>
<li class="chapter" data-level="J" data-path="ADCFCommands-1.html"><a href="ADCFCommands-1.html"><i class="fa fa-check"></i><b>J</b> ADCF Commands</a></li>
<li class="chapter" data-level="K" data-path="TEFCommands-1.html"><a href="TEFCommands-1.html"><i class="fa fa-check"></i><b>K</b> TEF Commands</a></li>
<li class="chapter" data-level="L" data-path="SWMMGeopackage-1.html"><a href="SWMMGeopackage-1.html"><i class="fa fa-check"></i><b>L</b> SWMM GeoPackage Format</a>
<ul>
<li class="chapter" data-level="L.1" data-path="SWMMGPKGLayerList-2.html"><a href="SWMMGPKGLayerList-2.html"><i class="fa fa-check"></i><b>L.1</b> SWMM GeoPackage Layer List</a></li>
<li class="chapter" data-level="L.2" data-path="SWMMGPKGLayerDes-2.html"><a href="SWMMGPKGLayerDes-2.html"><i class="fa fa-check"></i><b>L.2</b> SWMM GeoPackage Layer Descriptions</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
<li class="divider"></li>
<li><a href="https://docs.tuflow.com/classic-hpc/manual/2025.2/"><img src="images/WQFooter.jpg" style="width:246px;height:10px;"></a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./"><h0 style="color:rgb(226,1,119);">TUFLOW Classic/HPC User Manual Release Candidate 2025.2 </h0></a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<p class="wmark before"></p>
<div id="Common-2" class="section level2 hasAnchor" number="7.2">
<h2><span class="header-section-number">7.2</span> Common Functionality<a href="Common-2.html#Common-2" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>The following sections are the same (or mostly so) between TUFLOW HPC and TUFLOW Classic.</p>
<div id="Domain-3" class="section level3 hasAnchor" number="7.2.1">
<h3><span class="header-section-number">7.2.1</span> Defining the Domain<a href="Common-2.html#Domain-3" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Each fixed grid 2D domain is treated as a rectangle at any orientation. The orientation and dimensions of each 2D domain are defined using .tgc file commands. For the orientation it is recommended that the X-axis falls between 90° and –90° of East due to some post-processing software only operating within this range.</p>
<p>Several options are available for setting the 2D domains grid location and orientation. The options are:</p>
<ul>
<li>Using a four-sided polygon in a GIS layer to define the 2D grid orientation and dimensions (see <a href="TGCCommands-1.html#tgcReadGISLocation">Read GIS Location</a>).<br />
</li>
<li>Using a line (two vertices only) in a 2d_loc GIS layer (attributes shown in Table <a href="Common-2.html#tab:tab-LocationAttribute">7.1</a>) to define the origin (first point of line) and orientation (based on the second point of the line) of the X-axis (see <a href="TGCCommands-1.html#tgcReadGISLocation">Read GIS Location</a>), and <a href="TGCCommands-1.html#tgcGridSizeNM">Grid Size (N,M)</a> or <a href="TGCCommands-1.html#tgcGridSizeXY">Grid Size (X,Y)</a> to set the 2D grid X and Y dimensions.<br />
</li>
<li>Using <a href="TGCCommands-1.html#tgcOrigin">Origin</a>, <a href="TGCCommands-1.html#tgcOrientation">Orientation</a> or <a href="TGCCommands-1.html#tgcOrientationAngle">Orientation Angle</a>, and <a href="TGCCommands-1.html#tgcGridSizeNM">Grid Size (N,M)</a> or <a href="TGCCommands-1.html#tgcGridSizeXY">Grid Size (X,Y)</a>. No GIS layers are required for this option. This option is used in <a href="https://wiki.tuflow.com/Tutorial_M01#2D_Domain">TUFLOW Tutorial Module 1</a>.</li>
<li>Using a DEM to set the size and location of a 2D domain (see <a href="TGCCommands-1.html#tgcReadGridLocation">Read Grid Location</a>). This option is useful where the model extent is the same as the DEM.</li>
</ul>
<p>It is recommended during the initial model build process, to view the <a href="https://wiki.tuflow.com/Check_Files_2d_dom">_dom_check</a> file to ensure that the model domain is set up as intended.</p>
<p>Note, if using the TUFLOW HPC Quadtree functionality, the 2D domain is set up in the Quadtree Control File (.qcf), see Section <a href="HPC-specific-2.html#qcf-mandatory-4">7.3.1.2</a>.</p>
<table>
<caption>
<span id="tab:tab-LocationAttribute">Table 7.1: </span><strong>Location (2d_loc) Attribute Descriptions</strong>
</caption>
<thead>
<tr>
<th style="text-align:right;font-weight: bold;color: WHITE !important;background-color: #1ABDC9 !important;">
No
</th>
<th style="text-align:left;font-weight: bold;color: WHITE !important;background-color: #1ABDC9 !important;">
Default GIS Attribute Name
</th>
<th style="text-align:left;font-weight: bold;color: WHITE !important;background-color: #1ABDC9 !important;">
Description
</th>
<th style="text-align:left;font-weight: bold;color: WHITE !important;background-color: #1ABDC9 !important;">
Type
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right;">
1
</td>
<td style="text-align:left;">
Comment
</td>
<td style="text-align:left;">
Optional field for entering comments. Not used.
</td>
<td style="text-align:left;">
Char(250)
</td>
</tr>
</tbody>
</table>
<p>After establishing the domain’s origin, orientation and extent, the .tgc command <a href="TGCCommands-1.html#tgcCellSize">Cell Size</a> is used to define the domain’s fixed grid resolution. For example, the below command in the .tgc sets the cell size to 10m (or 10ft is using <tcmd><a href="TCFCommands-1.html#tcfUnits">Units</a></tcmd><teq> == </teq><tblk> US Customary</tblk>):</p>
<p><tcmd><a href="TGCCommands-1.html#tgcCellSize">Cell Size</a></tcmd><teq> == </teq><tblk>10</tblk></p>
<p>Note, it is not necessary to specify domain dimensions that are an exact multiple of the domain’s <a href="TGCCommands-1.html#tgcCellSize">Cell Size</a> (e.g. when using the <a href="TGCCommands-1.html#tgcGridSizeXY">Grid Size (X,Y)</a> command).</p>
<p>Within this computational domain, 2D cells can be set to be active or inactive, as described in Section <a href="Common-2.html#CellCodes-3">7.2.2</a>. The redundant (inactive) areas around the edges of the domain’s bounding rectangle are automatically removed from the computation. However, when allocating memory for processing of the arrays this is still accounted for. To determine the redundant area, search the TUFLOW log file (.tlf) for “redundant”, as shown in Figure <a href="Common-2.html#fig:fig-redundant-perimeter">7.4</a>. If the redundant value is large, revising the model domain dimensions will reduce the memory usage during startup.</p>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:fig-redundant-perimeter"></span>
<img src="images/redundant_perimeter.png" alt="Redundant Perimeter Sections Reported in the TLF"  />
<p class="caption">
Figure 7.4: Redundant Perimeter Sections Reported in the TLF
</p>
</div>
</div>
<div id="CellCodes-3" class="section level3 hasAnchor" number="7.2.2">
<h3><span class="header-section-number">7.2.2</span> Active / Inactive Cells<a href="Common-2.html#CellCodes-3" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Each 2D cell is assigned a code to indicate its role. The available code types are listed in Table <a href="Common-2.html#tab:tab-CellCodes">7.2</a>. The default value is one (1) for active (i.e. the cell can be wet or dry during a simulation).</p>
<p>Commands used to modify the cell codes are:</p>
<ul>
<li><a href="TGCCommands-1.html#tgcSetCode">Set Code</a> in the .tgc file. This option sets the cell codes for the entire domain.</li>
<li><a href="TGCCommands-1.html#tgcReadGISCode">Read GIS Code</a> in the .tgc file. This option sets the cell codes based on the value in 2d_code input polygons, see Table <a href="Common-2.html#tab:tab-CodeAttribute">7.3</a>.</li>
<li><a href="TGCCommands-1.html#tgcReadGridCode">Read Grid Code</a> in the .tgc file. This option sets the cell codes based on the values of an input raster grid.</li>
<li><a href="TGCCommands-1.html#tgcReadGISCode">Read GIS Code BC</a> in the .tgc file. This option sets the cell codes from the 2d_bc input polygon. The Type attribute must be set to “CD” and the code value is taken from the 2d_bc f attribute, see Table <a href="TwoDBoundaries-2.html#tab:tab-ConditionsAttribute">8.6</a>.</li>
</ul>
<p><strong>Note when using the <a href="TGCCommands-1.html#tgcReadGISCode">Read GIS Code</a> command, code values are extracted from objects in a 2d_code layer (see Table <a href="Common-2.html#tab:tab-CodeAttribute">7.3</a>). When using the <a href="TGCCommands-1.html#tgcReadGISCode">Read GIS Code BC</a>, code values are extracted from objects in a 2d_bc layer (see Table <a href="TwoDBoundaries-2.html#tab:tab-ConditionsAttribute">8.6</a>). Confusing the two GIS layer types and commands will result in <a href="https://wiki.tuflow.com/TUFLOW_Message_2320">WARNING 2320</a> message being issued.</strong></p>
<p>A typical approach is to set all the cells to be inactive using <tcmd><a href="TGCCommands-1.html#tgcSetCode">Set Code</a></tcmd><teq> == </teq><tblk>0</tblk> and then read a GIS layer defining the active cells with <tcmd><a href="TGCCommands-1.html#tgcReadGISCode">Read GIS Code</a></tcmd><teq> == </teq><tblk>&lt;layer&gt;</tblk>. The GIS layer regions would have the attribute set to 1 for active. For example:</p>
<p><tcmd>Set Code</tcmd><teq> == </teq><tblk>0</tblk><tgrn> ! Set all cells to inactive (i.e. Code 0)<tgrn><br />
<tcmd>Read GIS Code</tcmd><teq> == </teq><tblk>..\model\gis\2d_code_M01_002.shp</tblk> ! Reads in a polygon that sets cells to active (i.e. Code 1)<tgrn></p>
<p>Boundary Cells are automatically set to 2 along external boundaries and links (e.g. HX, HS, HT, QT boundaries). This code value of 2 (see Table <a href="Common-2.html#tab:tab-CellCodes">7.2</a>), is output in the TUFLOW grid check file and a value of 2 should not be used in input commands. The <a href="https://wiki.tuflow.com/Check_Files_2d_grd">_grd_check</a> file can be used to view the active cells (and their code values e.g. 1, 2 or -1) within the domain.</p>
<p>For TUFLOW Classic models containing multiple 2D domains (see Section <a href="TwoD2DLinking-2.html#TwoD2DLinkingM2D-3">10.7.2</a>), a useful option for setting the cell codes is the INVERT flag (see <a href="TGCCommands-1.html#tgcReadGISCode">Read GIS Code Invert</a> or <a href="TGCCommands-1.html#tgcReadGISCode">Read GIS Code BC Invert</a>), which allows the same code layer/polygons to be used for activate and deactivate regions in multiple 2D domains using a single GIS input.</p>
<!--EFC to PAR: I think we can delete this paragraph? I've added Read GRID Code in the above bullet points. The second command can't be used with SGS or Quadtree, and I've never actually seen anyone use it?-->
<!--PAR: yes remove.-->
<!--Other useful commands include [Read GRID Code](#tgcReadGrid), which
allows for the assigning of cell codes from a raster grid and [Set Code
and Clean Zpt](#tgcSetCodeandCleanZpt), which assigns cells as active or
inactive based on whether an elevation has been assigned to the cell. Set Code
and Clean Zpt is not available for either SGS models or Quadtree models.-->
<p>TUFLOW automatically strips any redundant rows and columns around the active area of the model to reduce simulation times. This is described in Section <a href="Common-2.html#Domain-3">7.2.1</a>.</p>
<!-- EFC to PAR: is the note in the null cells row still relevant?-->
<!--PAR: no remove-->
<!--EFC:removed-->
<table>
<caption>
<span id="tab:tab-CellCodes">Table 7.2: </span><strong>Cell Codes</strong>
</caption>
<thead>
<tr>
<th style="text-align:left;font-weight: bold;color: WHITE !important;background-color: #1ABDC9 !important;">
Type
</th>
<th style="text-align:right;font-weight: bold;color: WHITE !important;background-color: #1ABDC9 !important;">
Code
</th>
<th style="text-align:left;font-weight: bold;color: WHITE !important;background-color: #1ABDC9 !important;">
Description
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
Inactive Cells
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:left;">
<p>Inactive cells are cells that are totally removed from the computation. Maximising the area of inactive cells reduces computation time and output file sizes.</p>
<p>For a fixed grid 2D domain, inactive cells still consume memory during a simulation, as these domains are stored on a row column rectangular grid.</p>
For a quadtree grid, inactive cells will consume temporary memory (CPU RAM) during model startup, but do not consume memory (CPU or GPU) during the simulation.
</td>
</tr>
<tr>
<td style="text-align:left;">
Active Cells
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:left;">
Active cells are cells that can wet and dry during a simulation.
</td>
</tr>
<tr>
<td style="text-align:left;">
Boundary Cells
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:left;">
<p>Boundary cells indicate cells that are an external boundary (including some types of 1D/2D dynamic links). There should be an active cell on one side and an inactive or null cell on the other at an external boundary. If an external boundary is digitised inside an active area (i.e. not along the active area boundary), water can flow in both directions either side of the boundary line (only in rare situations would the modeller require this).</p>
<b>Note:</b> It is not necessary to manually specify boundary cells. Boundary lines are digitised in GIS layer(s) and TUFLOW automatically assigns the boundary code to the cells (see Section <a href="TwoDBoundaries-2.html#BC-Layers-3">8.4.1</a> and <a href="TBCCommands-1.html#tbcReadGISBC">Read GIS BC</a>).
</td>
</tr>
<tr>
<td style="text-align:left;">
Null Cells
</td>
<td style="text-align:right;">
-1
</td>
<td style="text-align:left;">
<p>Inactive cells used to deactivate cells within the active domain. Null cells may be preferred to inactive cells as they are not excluded from the output mesh structure (eg. not excluded from the XMDF mesh). For two simulations to be compared in some post-processers (eg. SMS), they must have exactly the same mesh. For example, if an area in a model is removed (e.g. filling part of a floodplain), use null cells or raise the ground elevations in preference to using inactive cells so that the two simulations can be compared.</p>
Setting null cells is not supported when using the TUFLOW HPC Quadtree (see Section <a href="HPC-specific-2.html#Quadtree-3">7.3.1</a>) functionality.
</td>
</tr>
</tbody>
</table>
<table>
<caption>
<span id="tab:tab-CodeAttribute">Table 7.3: </span><strong>2D Code (2d_code) Attribute Descriptions</strong>
</caption>
<thead>
<tr>
<th style="text-align:right;font-weight: bold;color: WHITE !important;background-color: #1ABDC9 !important;">
No
</th>
<th style="text-align:left;font-weight: bold;color: WHITE !important;background-color: #1ABDC9 !important;">
Default GIS Attribute Name
</th>
<th style="text-align:left;font-weight: bold;color: WHITE !important;background-color: #1ABDC9 !important;">
Description
</th>
<th style="text-align:left;font-weight: bold;color: WHITE !important;background-color: #1ABDC9 !important;">
Type
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right;">
1
</td>
<td style="text-align:left;">
Code
</td>
<td style="text-align:left;">
The code value (see Table <a href="Common-2.html#tab:tab-CellCodes">7.2</a>) to be assigned to cells falling on or within the object.
</td>
<td style="text-align:left;">
Integer
</td>
</tr>
</tbody>
</table>
</div>
<div id="layering-3" class="section level3 hasAnchor" number="7.2.3">
<h3><span class="header-section-number">7.2.3</span> Data Layering<a href="Common-2.html#layering-3" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<!--EFC: Bill wanted this section, not sure what the best way to explain this is. I think putting in a picture that shows data layering? -->
<!--EFC to PAR: what would this section contain that the 'layering of elevation data' section doesn't already?-->
<!-- PAR to EFC: keep super high level here, mention elevations / land use / soils-->
<!--done-->
<p>TUFLOW models are set up using data layering. This is an important, and very useful concept.</p>
<p>Commands are applied in sequential order; and it is possible to override previous information with new data to modify the model in selected areas. For topography modifications, this is extremely useful where a base dataset exists, over which areas need to be modified to represent other scenarios such as a proposed development. This eliminates or minimises data duplication. This concept of layering datasets may also be applied to other GIS , including (but not limited to) 2d_mat, 2d_code and 2d_soil layers. For example, setting all cell codes inactive, then reading in a GIS polygon covering the active cells (as discussed in Section <a href="Common-2.html#CellCodes-3">7.2.2</a>).</p>
<p>Figure <a href="Common-2.html#fig:fig-data-layering">7.5</a> shows a visual representation of how TUFLOW interprets the following set of .tgc commands:</p>
<p><tcmd>Read Grid Zpts</tcmd><teq> == </teq><tblk>grid\DEM_5m.tif</tblk><br />
<tcmd>Read Grid Zpts</tcmd><teq> == </teq><tblk>grid\Bathy_1m.tif</tblk><br />
<tcmd>Read GIS Z Shape</tcmd><teq> == </teq><tblk>gis\2d_zsh_building.shp</tblk><br />
The command lower in the TGC will take precedence over a command above where data overlaps and the command has the same functional purpose (eg. topography definition). The DEM_5m layer is read in first. The elevations are then replaced by the overlapping Bathy_1m layer. A 2D Z Shape (2d_zsh_buildings) is then read in which raises all elevations inside the polygon by 5m. The result is shown in the <a href="https://wiki.tuflow.com/Check_Files_2d_DEM_Z">DEM_Z</a>. The <a href="https://wiki.tuflow.com/Check_Files_2d_DEM_Z">DEM_Z</a> is a check file representing the elevation data that TUFLOW has used for the hydraulic calculations. For more information on check files see Section <a href="CheckLayers-2.html#CheckLayers-2">14.6</a>.</p>
<!--PAR: make colours more obvious in DEM_Z + less jarring in bathy-->
<!--done-->
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:fig-data-layering"></span>
<img src="images/data-layering.png" alt="Visual Representation of Data Layering in TUFLOW"  />
<p class="caption">
Figure 7.5: Visual Representation of Data Layering in TUFLOW
</p>
</div>
<p>Data layering is discussed in further detail for elevation updates in Section <a href="Common-2.html#elevations-3">7.2.5</a>.</p>
</div>
<div id="SamplingData-3" class="section level3 hasAnchor" number="7.2.4">
<h3><span class="header-section-number">7.2.4</span> Sampling of Data Sets<a href="Common-2.html#SamplingData-3" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<!-- EFC to PAR: we spoke about sampling of datasets all as one in the old section, not sure how to split it up now that SGS is this was in the old section. What are your thoughts on this set up?-->
<p>To setup the boundary of the 2D grid and assign data values to the cells from DEMs, TINs, land-use polygons, soil polygons and so forth, these data layers need to sampled, interrogated or interpolated. There are two approaches to sampling datasets in TUFLOW:</p>
<ul>
<li>Traditional approach (Section <a href="Common-2.html#traditional-sampling-4">7.2.4.1</a>)</li>
<li>Sub-Grid Sampling (SGS) approach - recommended (Section <a href="HPC-specific-2.html#SGS-3">7.3.3</a>)</li>
</ul>
<p>The traditional approach by 2D solvers is to sample a single value at the 2D cell centre (ZC). TUFLOW also supports sampling values, for some data types, at the centre of each cell side (ZV and ZU) and the corner of the cell (ZH). The cell side sampling for example, enables a cell side to be set to the height of a levee that is narrower in width than the 2D cell. Subsequently controlling when water can move from adjacent cells depending on the water level relative to the levee crest elevation. The traditional sampling approach is explained in Section <a href="Common-2.html#traditional-sampling-4">7.2.4.1</a>.</p>
<p>As of the 2020-01 TUFLOW release, TUFLOW HPC supports the sampling of elevations at sub-grid locations, referred to as Sub-Grid Sampling (SGS). The TUFLOW Classic solver does not support SGS due to the nature of the implicit solution and preferred use of a fixed timestep. The many benefits of using SGS are detailed in Section <a href="ModelResolutionDiscretisation-2.html#SubGridSamplingSGS-3">3.2.3</a>, implementing the SGS approach is described in Section <a href="HPC-specific-2.html#SGS-3">7.3.3</a>.</p>
<div id="traditional-sampling-4" class="section level4 hasAnchor" number="7.2.4.1">
<h4><span class="header-section-number">7.2.4.1</span> Traditional Sampling Approach<a href="Common-2.html#traditional-sampling-4" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Topographically, the cell is treated as having a flat horizontal bed at a height set to the cell centre (ZC) elevation, and the cell faces as having flat, rectangular shaped sides at a height set to the cell mid-side (ZU and ZV) sampled elevations as illustrated in Figure <a href="Common-2.html#fig:fig-image66">7.6</a>. Using the traditional sampling approach, the topography of a cell is treated as follows:</p>
<ul>
<li>The cell volume is represented as a square bucket with a flat horizontal bed, and simply calculated as the cell centre depth times the cell area.<br />
</li>
<li>The flow area across a cell face used for the momentum and mass balance equations is simply represented as a rectangular section (i.e. cell side centre depth times the cell width).<br />
</li>
<li>The bed resistance term in the momentum equation (e.g. Manning’s equation) uses the Resistance Radius approach (i.e. the cell face radius value as used in Manning’s equation is set to the depth and the cell width or cell size is used for the wetted perimeter).</li>
</ul>
<!-- CDH I disagree, this isn't true. land-use is sampled at cell sizes. I assume soils are sampled at the cell centre only. I've commented the sentence out.  

The sampling of materials (land-use), soil and other data types is
performed in a similar manner. -->
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:fig-image66"></span>
<img src="images/image66a.png" alt="2D Cell Topography - Traditional Approach"  />
<p class="caption">
Figure 7.6: 2D Cell Topography - Traditional Approach
</p>
</div>
</div>
</div>
<div id="elevations-3" class="section level3 hasAnchor" number="7.2.5">
<h3><span class="header-section-number">7.2.5</span> Elevations<a href="Common-2.html#elevations-3" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>2D domain elevations are defined in the .tgc file. As mentioned in Section <a href="Common-2.html#layering-3">7.2.3</a>, a powerful feature of TUFLOW is its capacity to build the 2D elevations from any number of GIS layers and/or TINs. The typical approach adopted is as follows:</p>
<ol style="list-style-type: decimal">
<li>All elevations in the model start with an un-initialised value of 99999. TUFLOW will output an error if any elevations of 99999 (or higher) occur after the processing of the elevations. This is to indicate that elevations in active cells have not been initialised or set.</li>
<li>A default elevation is specified first in the .tgc file using <a href="TGCCommands-1.html#tgcSetZpt">Set Zpt</a>. An inundation free elevation is usually specified. If your elevation data sets are intended to cover your entire active area this step can be omitted so as to trigger the error described above in case elevation data are unintentionally missing (e.g. unintended null areas in a DEM or accidental omission of a layer).</li>
<li>The elevations read directly from a DEM using <a href="TGCCommands-1.html#tgcReadGridZpts">Read Grid Zpts</a>, or read from TIN in the SMS, 12D or LandXML TIN formats (see <a href="TGCCommands-1.html#tgcReadTINZpts">Read TIN Zpts</a>).</li>
<li>If there are areas where data is either missing or erroneous, these can easily be corrected via interpolation using <a href="TGCCommands-1.html#tgcReadGISZShape">Read GIS Z Shape</a> regions or polygons. This is achieved by digitising a polygon around the missing or erroneous data. TUFLOW interpolates elevations across the region based on the existing Zpts around the perimeter of the polygon. An example is shown in Section <a href="Common-2.html#zsh-4">7.2.5.2</a>. Missing or erroneous data often occurs with aerial surveys where the sampling is in areas of thick vegetation, water or where post processing has poorly filtered the removal of elevated objects (e.g. buildings).</li>
<li>Sometimes there is a need to remove cut and fill works from the topography. For example, model calibration often requires the removal of infrastructure, such as levees, road embankments and developments that may not have existed at the time of the historic event to back date the topography within the model. This is easily done using <a href="TGCCommands-1.html#tgcReadGISZShape">Read GIS Z Shape</a> by simply digitising polygons around the various features.</li>
<li>The base elevations set up in the previous step(s) can be modified to represent hydraulic controls, proposed works, failure of a flood defence wall, etc. Some examples are:
<ul>
<li>The crests of road/rail embankments, levees, fences and other solid obstructions are easily inserted using <a href="TGCCommands-1.html#tgcReadGISZLine">Read GIS Z Line</a>, <a href="TGCCommands-1.html#tgcReadGISZShape">Read GIS Z Shape</a> or <a href="TGCCommands-1.html#tgcReadGISZHXLine">Read GIS Z HX Line</a>. <a href="TGCCommands-1.html#tgcReadGISZShape">Read GIS Z Shape</a> is particularly powerful as 3D lines can be given a thickness making it very easy to quickly raise, or lower, elevations along a road alignment or a diversion channel where the width of the embankment/channel is wider than the 2D cell size.<br />
</li>
<li>The proposed cut and fill for a development or other works can be incorporated using <a href="TGCCommands-1.html#tgcReadGISZpts">Read GIS Zpts</a>, <a href="TGCCommands-1.html#tgcReadGISZShape">Read GIS Z Shape</a>, <a href="TGCCommands-1.html#tgcReadTINZpts">Read TIN Zpts</a> or <a href="TGCCommands-1.html#tgcCreateTINZpts">Create TIN Zpts</a>. These powerful commands can set elevations based on regions. Within regions TINs can be generated from points and lines, and the perimeter of the TIN can be automatically merged with the existing Zpts. A TIN of the cut and fill produced by SMS or 12D can be read directly into TUFLOW using <a href="TGCCommands-1.html#tgcReadGISZpts">Read GIS Zpts</a>.<br />
</li>
</ul></li>
<li>If there is a need to simulate the failure of a flood defence wall or road/rail embankment, or the collapse of fences, <a href="TGCCommands-1.html#tgcReadGISVariableZShape">Read GIS Variable Z Shape</a> can be used to control the collapse of the embankment or fences over time. The collapse can be triggered to occur at a specified time, when a water level reached somewhere within the model, or based on the water level difference between two locations.</li>
</ol>
<p>A 2D domain’s Zpts are built up using one or more of the commands shown in Table <a href="Common-2.html#tab:tab-ZptCommands">7.4</a> and discussed in the following sections.</p>
<!-- PAR to EFC: can we re-order this so the common ones are at the top and and make it clear which ones such as read rowcol are legacy, not sure how to mark this have done Read RowCol in the spreadsheet by starting the description with "Legacy Command:" -->
<!-- EFC to PAR: yes, can we also move this to the end of the elvatins section? feels weird having it up here?-->
<!--EFC: moved-->
<!--PAR to EFC: move read tin up to under read grid-->
<!-- done-->
<table>
<caption>
<span id="tab:tab-ZptCommands">Table 7.4: </span><strong>2D Zpt Commands</strong>
</caption>
<thead>
<tr>
<th style="text-align:left;font-weight: bold;color: WHITE !important;background-color: #1ABDC9 !important;">
Command
</th>
<th style="text-align:left;font-weight: bold;color: WHITE !important;background-color: #1ABDC9 !important;">
Description
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
<a href="TGCCommands-1.html#tgcSetZpt">Set Zpt</a>
</td>
<td style="text-align:left;">
Sets all Zpts over the whole 2D domain to the same value. Useful for providing an initial elevation prior to other commands as some Zpts in inactive (land) parts of the model may not receive a value. The default value for all Zpts is 99999. Every Zpt must be assigned a value, essentially making this command mandatory.
</td>
</tr>
<tr>
<td style="text-align:left;">
<a href="TGCCommands-1.html#tgcReadGridZpts">Read Grid Zpts</a>
</td>
<td style="text-align:left;">
Directly interrogates a raster grid (e.g. tif, .flt or .asc) to define Zpt elevations. This command is similar to <a href="TGCCommands-1.html#tgcReadTINZpts">Read TIN Zpts</a> but works on a grid rather than a TIN.
</td>
</tr>
<tr>
<td style="text-align:left;">
<a href="TGCCommands-1.html#tgcReadTINZpts">Read TIN Zpts</a>
</td>
<td style="text-align:left;">
Reading of a TIN to set the Zpt values within the TIN.
</td>
</tr>
<tr>
<td style="text-align:left;">
<a href="TGCCommands-1.html#tgcReadGISZShape">Read GIS Z Shape</a>
</td>
<td style="text-align:left;">
<p>Powerful command to modify Zpt values using points, lines and polygons. Lines can vary in width from just the cell sides (thin), whole cells (thick) or be assigned a width (thickness). TINs are created within the polygons and incorporate elevations from points and lines that fall within the polygon. The perimeter of the polygon can be merged with the current Zpt values in part, or in its entirety.</p>
<a href="TGCCommands-1.html#tgcReadGISZShape">Read GIS Z Shape</a> and <a href="TGCCommands-1.html#tgcCreateTINZpts">Create TIN Zpts</a> are excellent for removing bad data areas and for filling in null areas where the aerial survey has provided poor or no data. Another example is to remove buildings from a DEM.
</td>
</tr>
<tr>
<td style="text-align:left;">
<a href="TGCCommands-1.html#tgcReadGISVariableZShape">Read GIS Variable Z Shape</a>
</td>
<td style="text-align:left;">
Allows the user to define the eroded 3D shape of a section of the 2D domain, specify the period for collapse, and how the collapse is triggered (i.e. at a specified time or when a water level is reached or when a water level difference is exceeded). Raising of the Zpts over time is also permitted (e.g. to model the influence of flood defences during an event or a landslide filling a river).
</td>
</tr>
<tr>
<td style="text-align:left;">
<a href="TGCCommands-1.html#tgcCreateTINZpts">Create TIN Zpts</a>
</td>
<td style="text-align:left;">
Useful for having TUFLOW create a TIN using polygons for TIN boundaries and points and lines within the polygons to create the TIN. If no points are snapped to the perimeter vertices of a polygon, the elevations around the polygon’s perimeter are merged with the current Zpt values. The resulting TIN can optionally be exported to SMS and 12D TIN formats.
</td>
</tr>
<tr>
<td style="text-align:left;">
<a href="TGCCommands-1.html#tgcReadGISZLine">Read GIS Z Line</a>
</td>
<td style="text-align:left;">
This is a legacy feature and it is recommended to use the Z Shape functionality (Section <a href="Common-2.html#zsh-4">7.2.5.2</a>) instead.
</td>
</tr>
<tr>
<td style="text-align:left;">
<a href="TGCCommands-1.html#tgcReadGISZHXLine">Read GIS Z HX Line</a>
</td>
<td style="text-align:left;">
Similar to <a href="TGCCommands-1.html#tgcReadGISZLine">Read GIS Z Line</a>, but uses HX lines and ZP points in a 2d_bc layer (see Table <a href="TwoDBoundaries-2.html#tab:tab-ConditionsAttribute">8.6</a>) to adjust the 2D cell elevations along HX lines.
</td>
</tr>
<tr>
<td style="text-align:left;">
<a href="TGCCommands-1.html#tgcReadGISZpts">Read GIS Zpts</a>
</td>
<td style="text-align:left;">
<p>Typically used for simple modifications of sections of the topography. Examples are filling an area (defined by a region or polygon object) to the same elevation or dredging (lowering) a section of river using <a href="TGCCommands-1.html#tgcReadGISZpts">Read GIS Zpts ADD</a>.</p>
<a href="TGCCommands-1.html#tgcReadGISZShape">Read GIS Z Shape</a> offers greater functionality and may be preferable to using <a href="TGCCommands-1.html#tgcReadGISZpts">Read GIS Zpts</a> to modify Zpts.
</td>
</tr>
<tr>
<td style="text-align:left;">
<a href="TCFCommands-1.html#tcfMaximumPoints">Maximum Points</a><br />
<a href="TCFCommands-1.html#tcfMaximumVertices">Maximum Vertices</a>
</td>
<td style="text-align:left;">
Use these commands to increase the maximum number of elevation points or maximum number of vertices in a single line or polygon.
</td>
</tr>
<tr>
<td style="text-align:left;">
<a href="TGCCommands-1.html#tgcDefaultLandZ">Default Land Z</a>
</td>
<td style="text-align:left;">
Now rarely used in lieu of <a href="TGCCommands-1.html#tgcSetZpt">Set Zpt</a>.
</td>
</tr>
<tr>
<td style="text-align:left;">
<a href="TGCCommands-1.html#tgcInterpolateZC">Interpolate ZC</a><br />
<a href="TGCCommands-1.html#tgcInterpolateZHC">Interpolate ZHC</a><br />
<a href="TGCCommands-1.html#tgcInterpolateZUV">Interpolate ZUV</a><br />
<a href="TGCCommands-1.html#tgcInterpolateZUVC">Interpolate ZUVC</a><br />
<a href="TGCCommands-1.html#tgcInterpolateZUVH">Interpolate ZUVH</a>
</td>
<td style="text-align:left;">
<p>Allows the interpolation of Zpts from other types of Zpts. Now rarely used as nearly all models assign values directly to all the Zpts. The original TUFLOW code only required input of ZH points, and Interpolate ZUVC provided a tool for interpolating the other Zpts.</p>
<p>Models with “bumpy” terrain, such as that from airborne laser surveys, might benefit from using Interpolate ZHC or Interpolate ZUV.</p>
Models through urban areas where the DTM includes the buildings may benefit from using Interpolate ZC ALL LOWER, which reduces the amount of cells that become blocked out due to high ZC elevations from buildings.
</td>
</tr>
<tr>
<td style="text-align:left;">
<a href="TGCCommands-1.html#tgcZC">ZC</a> <teq>==</teq> MIN(ZU,ZV)
</td>
<td style="text-align:left;">
Rarely used. Sets the ZC (cell centre elevation) to the lower of the ZU and ZV (cell sides).
</td>
</tr>
</tbody>
</table>
<div id="DEMGrids-3" class="section level4 hasAnchor" number="7.2.5.1">
<h4><span class="header-section-number">7.2.5.1</span> Direct Reading of DEM Grids<a href="Common-2.html#DEMGrids-3" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>The use of the .tgc command <a href="TGCCommands-1.html#tgcReadGridZpts">Read Grid Zpts</a> allows TUFLOW to directly interrogate (point inspect) a DEM to set the Zpt elevations. This command is similar to <a href="TGCCommands-1.html#tgcReadTINZpts">Read TIN Zpts</a> but works on a grid rather than a TIN.</p>
<p>Grid formats currently supported are:</p>
<ul>
<li>GeoTIFF (.tif)</li>
<li>Geopackage raster (.gpkg)</li>
<li>Binary grid format (.flt/.hdr)</li>
<li>ESRI ASCII Grid format (.asc)</li>
</ul>
<p>Nearly all GIS software will support one of the above grid formats.</p>
<p>The GeoTIFF format is the default output format and preferred input format. It is faster to read and write compared to the .flt and .asc formats, and also supports compression. The format of grids can be converted (e.g. from .flt to .tif), the <a href="https://wiki.tuflow.com/Raster_Format_Conversion_Using_gdal_translate">TUFLOW Wiki Raster Format Conversion</a> details how to do this.</p>
<p>Like other .tgc commands, the command <a href="TGCCommands-1.html#tgcReadGridZpts">Read Grid Zpts</a> can be specified multiple times. An option to specify ADD, MIN or MAX in the same way as for other similar commands is also available.</p>
<p>Clip regions can be specified as a second argument in the command <a href="TGCCommands-1.html#tgcReadGridZpts">Read Grid Zpts</a> (and also <a href="TGCCommands-1.html#tgcReadTINZpts">Read TIN Zpts</a>) by reading in a GIS layer containing one or more polygons to clip the area of Zpts to be inspected. For example, the command below will only assign elevations to Zpts that lie inside polygons within the 2d_clip_DEM layer:</p>
<p><tcmd><a href="TGCCommands-1.html#tgcReadGridZpts">Read Grid Zpts</a> </tcmd><teq>==</teq><tblk> grid\DEM_M01.tif | DEM\2d_clip_DEM.shp</tblk></p>
<p>The attributes of the clip layer are not used, and only polygons are processed. As such, any of the TUFLOW empty files can be used as the template for this layer. Polygons can have holes in them if required.</p>
<p>This is particularly useful for clipping out a TIN or DEM due to unwanted or irregular triangulation around the periphery, especially for secondary TINs/DEMs of proposed developments lying within the primary TIN/DEM.</p>
<p><strong>Note: For your base Zpts from the primary DEM or TIN, do not clip this with your active 2d_code layer as this will cause problems with Zpts along any external 2d_bc boundaries. If no clip layer is specified, the <a href="TGCCommands-1.html#tgcReadGridZpts">Read Grid Zpts</a> or <a href="TGCCommands-1.html#tgcReadTINZpts">Read TIN Zpts</a> commands assign all Zpts falling within the Grid / TIN an elevation irrespective of whether a cell is active or inactive.</strong></p>
<p>When reading grids into TUFLOW, the same interpolation approach occurs for all formats. The procedure TUFLOW follows is:</p>
<ul>
<li>The DEM elevation is assumed to be in the centre of the DEM grid cell (pixel), as shown by the four red circles in the picture below.</li>
<li>A midpoint vertex (green circle) is defined in the middle of the four DEM elevations.</li>
<li>The elevation of the midpoint vertex (green circle) is equal to the average of the four DEM elevations (red circles).</li>
<li>The DEM grid cell centre points (red circles) and midpoint vertex (green circle) are used to create a TIN.</li>
<li>Elevations within the TIN are interpolated from the associated TIN points. For example, a Zpt is included in the image below as a yellow point. The elevation assigned to that Zpt is the planar (linear) interpolation of the surrounding three elevation points associated with the top TIN triangle in the image.</li>
</ul>
<center>
<img src="images/InterpolationExample.png"  style="width:2.6in;height:2.4in"/>
</center>
</div>
<div id="zsh-4" class="section level4 hasAnchor" number="7.2.5.2">
<h4><span class="header-section-number">7.2.5.2</span> Z Shape Layers (2d_zsh)<a href="Common-2.html#zsh-4" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p><a href="TGCCommands-1.html#tgcReadGISZShape">Read GIS Z Shape</a> provides flexibility for manipulating Zpt values by combining various 2d_zsh GIS layer geometries and attribute options. This includes the ability to represent 3D breaklines and TINs. Tables <a href="Common-2.html#tab:tab-ZShapeAttributePoint">7.5</a>, <a href="Common-2.html#tab:tab-ZShapeAttributeLine">7.6</a> and <a href="Common-2.html#tab:tab-ZShapeAttributePolygon">7.7</a> describe the attributes and options available for each geometry (point, line and polygon). Example use cases are provided in Section <a href="Common-2.html#zshExamples-5">7.2.5.2.2</a>.</p>
<p>Zpt values are primarily modified using 2d_zsh polygon and line geometries. Additional flexibility is available when they are grouped with points, lines and other attribute options. 2d_zsh points do not directly modify Zpt values. Instead, they assign elevations to lines and polygons or help define TINs when used with a polygon. Line behaviour depends on classification. Lines are considered Thin, Thick or Wide based on the Shape_Width_or_dMax attribute value (see Table <a href="Common-2.html#tab:tab-ZShapeAttributeLine">7.6</a>).</p>
<p>The following describes how each geometry modifies Zpt values:</p>
<ol style="list-style-type: decimal">
<li><strong>Polygons:</strong>
<ul>
<li>All polygons are triangulated using the process described for <a href="TGCCommands-1.html#tgcCreateTINZpts">Create TIN Zpts</a> in Section <a href="Common-2.html#ztin-4">7.2.5.4</a>. However, there are two key differences when applying this process to Z shape (2d_zsh) layers:
<ul>
<li>If a line is to be used for TIN generation, “TIN” must be specified for the Shape_Options attribute (see Table <a href="Common-2.html#tab:tab-ZShapeAttributeLine">7.6</a>).</li>
<li>Merge polygon handling differs slightly. For <a href="TGCCommands-1.html#tgcCreateTINZpts">Create TIN Zpts</a>, polygon vertices without defined elevations from snapped points are automatically merged. For <a href="TGCCommands-1.html#tgcReadGISZShape">Read GIS Z Shape</a> polygon layers, vertices can be assigned a special value of -99999 via a snapped point, allowing elevations to be interpolated from neighbouring defined vertices (see Table <a href="Common-2.html#tab:tab-ZShapeAttributePoint">7.5</a>).</li>
</ul></li>
<li>As shown in Figure <a href="Common-2.html#fig:fig-ZptPoly">7.7</a>:
<ul>
<li>The processed TIN triangulation polygons can be viewed in the <a href="https://wiki.tuflow.com/Check_Files_2d_sh_obj">_sh_obj_check</a> layer.</li>
<li>Elevations of all control Zpts (ZC, ZH, ZU and ZV) within the polygon are modified based on the TIN triangulation.</li>
</ul></li>
<li>When Sub-Grid Sampling (SGS) is enabled (with TUFLOW HPC) – see Section <a href="HPC-specific-2.html#SGS-TopoUpdates-5">7.3.3.1.2</a>:
<ul>
<li>The 2d_zsh polygon modifies all SGS sample points within the polygon extent, based on the TIN triangulation (see Section <a href="HPC-specific-2.html#SGS-TopoUpdates-5">7.3.3.1.2</a>).</li>
<li>If a crest is included in the modified topography and is not aligned exactly with a cell face, lower elevation values may be sampled in the SGS cell face width vs depth curve, potentially allowing water to leak at a lower elevation (see Section <a href="HPC-specific-2.html#SGS-Advanced-5">7.3.3.1.3</a> – <a href="TCFCommands-1.html#tcfSGSBreaklineDetectionDelta">SGS Breakline Detection Delta</a>). To avoid this, 2d_zsh breaklines with RIDGE or MAX specified for the Shape_Options attribute (see Table <a href="Common-2.html#tab:tab-ZShapeAttributeLine">7.6</a>) should be added along the polygon or TIN crest to enforce the elevations.</li>
</ul></li>
<li>When Quadtree is enabled (with TUFLOW HPC) – see Section <a href="HPC-specific-2.html#QDT-mesh-4">7.3.1.4</a>:
<ul>
<li>For 2d_zsh polygons with merged elevations at undefined vertices extending across multiple quadtree nested layers, it is recommended to review the <a href="https://wiki.tuflow.com/Check_Files_2d_zsh_zpt">_zsh_zpt</a> check file to ensure appropriate representation. <a href="https://wiki.tuflow.com/TUFLOW_Message_2934">CHECK/WARNING 2934</a> will be written in this instance.</li>
</ul></li>
</ul></li>
</ol>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:fig-ZptPoly"></span>
<img src="images/zptModPolygon.png" alt="Example of 2d_zsh polygon with Zpt modification" width="80%" />
<p class="caption">
Figure 7.7: Example of 2d_zsh polygon with Zpt modification
</p>
</div>
<ol start="2" style="list-style-type: decimal">
<li><strong>Thin and Thick Lines:</strong>
<ul>
<li>Line type is determined by the Shape_Width_or_dMax attribute value (see Table <a href="Common-2.html#tab:tab-ZShapeAttributeLine">7.6</a>):
<ul>
<li>Thin lines have a value of zero (0).</li>
<li>Thick lines have a value greater than zero (0) and less than or equal to 1.5 times the 2D <a href="TGCCommands-1.html#tgcCellSize">Cell Size</a>.</li>
</ul></li>
<li>As shown in Figure <a href="Common-2.html#fig:fig-ZptThinThick">7.8</a>:
<ul>
<li>Thin lines modify cell faces (ZH, ZU and ZV Zpts) where the line intersects the ends of the model cell’s imaginary “cross-hairs” that extend from cell mid-sides to mid-side.</li>
<li>Thick lines modify entire cells (ZC, ZH, ZU and ZV control Zpts) along the line. The cells are selected if the thick line intersects any part of a cell’s imaginary “cross-hairs” that extend from cell mid-sides to mid-sides.</li>
<li>The MIN or GULLY Shape_Options (see Table <a href="Common-2.html#tab:tab-ZShapeAttributeLine">7.6</a>) override the line type and define a path through the cell face and cell centre (ZU, ZV and ZC control Zpts only), lowering Zpt values only if the new value is lower than the current value to ensure a connected flow path.<br />
<strong>Note:</strong> The GULLY option is not intended to accurately represent the shape of a waterway and is not recommended for use with SGS, as it can overestimate conveyance. See Section <a href="HPC-specific-2.html#SGS-3">7.3.3</a> and the <a href="https://wiki.tuflow.com/Quadtree_and_Sub-Grid_Sampling_FAQ#Why_shouldn.27t_I_use_Z_Shape_gully.2Fmin_lines_with_SGS_models.3F">TUFLOW Wiki Quadtree and SGS FAQ page</a> for more details.</li>
<li>Elevations assigned to control Zpts selected by either a thin or thick line are based on the perpendicular intersection of that Zpt with the line. If there is no perpendicular intersection, the nearest vertex on the line is used.</li>
</ul></li>
<li>From the 2023-03 release onwards, TUFLOW HPC applies the full weir equation in the 2D domain along thin and thick breaklines using the advanced weir formulation (see Section <a href="Structures-2.html#Adv-Weir-4">5.7.4.3</a>). Default weir flow parameters can be adjusted separately for thin and thick breaklines – see Section <a href="HPC-specific-2.html#HPC-US-Controlled-3">7.3.4</a>.</li>
<li>When Sub-Grid Sampling (SGS) is enabled (with TUFLOW HPC) – see Section <a href="HPC-specific-2.html#SGS-TopoUpdates-5">7.3.3.1.2</a>:
<ul>
<li>The 2d_zsh line modifies elevations based on the cell’s control Zpts (unlike polygons, which directly modify all SGS sampled elevations), as described in Section <a href="HPC-specific-2.html#SGS-Advanced-5">7.3.3.1.3</a> – <a href="TCFCommands-1.html#tcfSGSZShapeLineApproach">SGS Z Shape Line Approach</a>.</li>
<li>By default, thin lines apply a gradient along the cell face using side and corner Zpts (ZH, ZU and ZV), while thick lines apply a sloping cell area for the cell volumes using ZC, ZU, ZV and ZH Zpts.</li>
<li>Use of the MIN or GULLY Shape_Options (see Table <a href="Common-2.html#tab:tab-ZShapeAttributeLine">7.6</a>) is not recommended, as it can overestimate conveyance – see Section <a href="HPC-specific-2.html#HPC-US-Controlled-3">7.3.4</a>.</li>
<li>It is strongly recommended to add MAX or RIDGE lines (see Table <a href="Common-2.html#tab:tab-ZShapeAttributeLine">7.6</a>) for every hydraulic control (e.g. levees (artificial or natural), road or rail embankments) to reduce “leakiness” caused by SGS sampling. See Section <a href="HPC-specific-2.html#SGS-Advanced-5">7.3.3.1.3</a> – <a href="TCFCommands-1.html#tcfSGSBreaklineDetectionDelta">SGS Breakline Detection Delta</a>.</li>
</ul></li>
<li>When Quadtree is enabled (with TUFLOW HPC):
<ul>
<li>A modified cell “cross-hair” selection approach, referred to as the “spider web” approach, is applied. Instead of using cross-hairs, this method draws imaginary lines from the cell centre to each connected cell face, ensuring continuous cell selection.</li>
</ul></li>
</ul></li>
</ol>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:fig-ZptThinThick"></span>
<img src="images/zptModThinThick.png" alt="Example of 2d_zsh GULLY, thin and thick line Zpt modification" width="80%" />
<p class="caption">
Figure 7.8: Example of 2d_zsh GULLY, thin and thick line Zpt modification
</p>
</div>
<ol start="3" style="list-style-type: decimal">
<li><strong>Wide Lines:</strong>
<ul>
<li>Wide lines have a Shape_Width_or_dMax (see Table <a href="Common-2.html#tab:tab-ZShapeAttributeLine">7.6</a>) value greater than 1.5 times the 2D <a href="TGCCommands-1.html#tgcCellSize">Cell Size</a>.</li>
<li>As shown in Figure <a href="Common-2.html#fig:fig-ZptWide">7.9</a>, a buffer polygon is created around the line, extending to a distance of half the Shape_Width_or_dMax value (on either side of the line). All control Zpts (ZC, ZH, ZU and ZV) within the buffer polygon are assigned elevations based on a perpendicular intersection with the line and the interpolated line elevation at that intersection. This buffer polygon is written to the <a href="https://wiki.tuflow.com/Check_Files_2d_sh_obj">_sh_obj_check</a> layer.</li>
<li>When Sub-Grid Sampling (SGS) is enabled (with TUFLOW HPC) – see Section <a href="HPC-specific-2.html#SGS-TopoUpdates-5">7.3.3.1.2</a>:
<ul>
<li>The 2d_zsh line will modify elevations based on the cell’s control Zpts (rather than directly modifying all sampled SGS elevations as for polygons), as described in Section <a href="HPC-specific-2.html#SGS-TopoUpdates-5">7.3.3.1.2</a> and Section <a href="HPC-specific-2.html#SGS-Advanced-5">7.3.3.1.3</a> – <a href="TCFCommands-1.html#tcfSGSZShapeLineApproach">SGS Z Shape Line Approach</a>.</li>
<li>By default, wide lines apply a gradient along the cell face using the side and corner Zpts (ZH, ZU and ZV), and a sloping cell area for the cell volumes (using ZC, ZU, ZV and ZH Zpts). SGS points are sampled from these.</li>
<li>For partially selected cells at the buffer’s boundary, a sloping cell area is determined based on the cell’s modified Zpts within the buffer and the unmodified Zpts outside the buffer, and all SGS sample points will be updated within the partially selected cells.</li>
<li>It is recommended to consider alternative TIN based modification methods via <a href="TGCCommands-1.html#tgcReadGISZShape">Read GIS Z Shape</a> 2d_zsh polygons or <a href="TGCCommands-1.html#tgcCreateTINZpts">Create TIN Zpts</a> to improve representation.</li>
</ul></li>
</ul></li>
</ol>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:fig-ZptWide"></span>
<img src="images/zptModWide.png" alt="Example of 2d_zsh wide line Zpt modification" width="80%" />
<p class="caption">
Figure 7.9: Example of 2d_zsh wide line Zpt modification
</p>
</div>
<table>
<caption>
<span id="tab:tab-ZShapeAttributePoint">Table 7.5: </span><strong>2D Z Shape (2d_zsh) Point Attribute Descriptions</strong>
</caption>
<thead>
<tr>
<th style="text-align:right;font-weight: bold;color: WHITE !important;background-color: #1ABDC9 !important;">
No. 
</th>
<th style="text-align:left;font-weight: bold;color: WHITE !important;background-color: #1ABDC9 !important;">
Default GIS Attribute Name
</th>
<th style="text-align:left;font-weight: bold;color: WHITE !important;background-color: #1ABDC9 !important;">
Description
</th>
<th style="text-align:left;font-weight: bold;color: WHITE !important;background-color: #1ABDC9 !important;">
Type
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right;">
1
</td>
<td style="text-align:left;">
Z
</td>
<td style="text-align:left;">
<p>Elevation of the point. Points are only used to assign elevations along lines and polygon perimeters, or for the creation of TINs within polygons. They do not modify Zpts directly.</p>
<p>An elevation of -99999 has a special meaning when the point is snapped to a vertex of a polygon. The -99999 indicates to ignore the elevation at that vertex and of any automatically inserted vertices between that vertex and the two neighbouring vertices. Instead the elevations are based on the elevations of the neighbouring vertices. If a neighbouring vertex also has a -99999 point snapped to it, the next vertex is used, and so on. This feature is very useful, as illustrated in the example above.</p>
Note: This special meaning does not apply to points snapped to lines, only to polygons. For lines that have at least one point snapped to a vertex, any remaining vertices where no points are snapped will be interpolated by default.
</td>
<td style="text-align:left;">
Float
</td>
</tr>
<tr>
<td style="text-align:right;">
2
</td>
<td style="text-align:left;">
dZ
</td>
<td style="text-align:left;">
Change in elevation of the Z attribute of the 2d_zsh object at the point (does not change the Zpt elevations directly). To leave Z unchanged, set to zero. Useful for easily adjusting the height of the shape object without having to change the original Z value. For example, if the Z attribute has been set to 5mAHD, a dZ value of 0.1m will raise the point’s Z elevation to 5.1mAHD.
</td>
<td style="text-align:left;">
Float
</td>
</tr>
<tr>
<td style="text-align:right;">
3
</td>
<td style="text-align:left;">
Shape_Width_or_dMax
</td>
<td style="text-align:left;">
Not used.
</td>
<td style="text-align:left;">
Float
</td>
</tr>
<tr>
<td style="text-align:right;">
4
</td>
<td style="text-align:left;">
Shape_Options
</td>
<td style="text-align:left;">
Not used.
</td>
<td style="text-align:left;">
Char(20)
</td>
</tr>
</tbody>
</table>
<table>
<caption>
<span id="tab:tab-ZShapeAttributeLine">Table 7.6: </span><strong>2D Z Shape (2d_zsh) Line Attribute Descriptions</strong>
</caption>
<thead>
<tr>
<th style="text-align:right;font-weight: bold;color: WHITE !important;background-color: #1ABDC9 !important;">
No. 
</th>
<th style="text-align:left;font-weight: bold;color: WHITE !important;background-color: #1ABDC9 !important;">
Default GIS Attribute Name
</th>
<th style="text-align:left;font-weight: bold;color: WHITE !important;background-color: #1ABDC9 !important;">
Description
</th>
<th style="text-align:left;font-weight: bold;color: WHITE !important;background-color: #1ABDC9 !important;">
Type
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right;">
1
</td>
<td style="text-align:left;">
Z
</td>
<td style="text-align:left;">
<p>Elevation of the line if no points are snapped to the line.</p>
<p>If the ADD option is specified, the value entered is used to increase (positive Z values) or decrease (negative Z values) the elevation of the Zpt values by the amount specified (i.e. a value of 0.5 will raise existing Zpt values by 0.5m).</p>
Otherwise ignored.
</td>
<td style="text-align:left;">
Float
</td>
</tr>
<tr>
<td style="text-align:right;">
2
</td>
<td style="text-align:left;">
dZ
</td>
<td style="text-align:left;">
<p>Ignored if the Z attribute is specified.</p>
If point(s) (with the Z attribute set) are snapped to the line, this attribute behaves as described in Table <a href="Common-2.html#tab:tab-ZShapeAttributePoint">7.5</a>.
</td>
<td style="text-align:left;">
Float
</td>
</tr>
<tr>
<td style="text-align:right;">
3
</td>
<td style="text-align:left;">
Shape_Width_or_dMax
</td>
<td style="text-align:left;">
<p>No TIN: Provided TIN is not specified for the Shape_Options attribute, this attribute specifies the width (thickness) of the breakline in metres. If equal to zero, only the elevations along the cell sides and corners are adjusted (i.e. a thin breakline). If less than or equal to 1.5 times the 2D <a href="TGCCommands-1.html#tgcCellSize">Cell Size</a>, a line of whole cells is adjusted (i.e. a thick line). Otherwise all Zpts within a distance of half Shape_Width_or_dMax are adjusted.</p>
TIN: If TIN is specified for the Shape_Options attribute, this attribute controls the maximum distance between automatically added intermediate vertices. If set to zero, half the 2D domain’s <a href="TGCCommands-1.html#tgcCellSize">Cell Size</a> is used. If less than zero no intermediate vertices are inserted.
</td>
<td style="text-align:left;">
Float
</td>
</tr>
<tr>
<td style="text-align:right;">
4
</td>
<td style="text-align:left;">
Shape_Options
</td>
<td style="text-align:left;">
<p>ADD: Add the shape’s Z attribute value to the current Zpts. If ADD is specified, any automatic merging around the region perimeter is ignored (to merge the perimeter with existing Zpts when using the ADD option, specify a value of zero for the Z and dZ attributes for the region).</p>
<p>MAX, RIDGE or RAISE: Only changes a Zpt elevation if the Z Shape elevation at the Zpt is higher.</p>
<p>MIN, GULLY or LOWER: Only changes a Zpt elevation if the Z Shape elevation at the Zpt is lower.</p>
TIN: Indicates the line is only to be used for of generation of TINS from polygons (only sections of TIN lines that fall within the polygon(s) are used).
</td>
<td style="text-align:left;">
Char(20)
</td>
</tr>
</tbody>
</table>
<table>
<caption>
<span id="tab:tab-ZShapeAttributePolygon">Table 7.7: </span><strong>2D Z Shape (2d_zsh) Polygon Attribute Descriptions</strong>
</caption>
<thead>
<tr>
<th style="text-align:right;font-weight: bold;color: WHITE !important;background-color: #1ABDC9 !important;">
No. 
</th>
<th style="text-align:left;font-weight: bold;color: WHITE !important;background-color: #1ABDC9 !important;">
Default GIS Attribute Name
</th>
<th style="text-align:left;font-weight: bold;color: WHITE !important;background-color: #1ABDC9 !important;">
Description
</th>
<th style="text-align:left;font-weight: bold;color: WHITE !important;background-color: #1ABDC9 !important;">
Type
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right;">
1
</td>
<td style="text-align:left;">
Z
</td>
<td style="text-align:left;">
<p>If the NO MERGE option is specified, used to set the elevation of the polygon perimeter if there are no points snapped to the perimeter.</p>
<p>If the ADD option is specified, the value entered is used to increase (positive Z values) or decrease (negative Z values) the elevation of the Zpt values by the amount specified.</p>
Otherwise ignored.
</td>
<td style="text-align:left;">
Float
</td>
</tr>
<tr>
<td style="text-align:right;">
2
</td>
<td style="text-align:left;">
dZ
</td>
<td style="text-align:left;">
<p>If the Z attribute and NO MERGE option is specified, this attribute behaves as described in Table <a href="Common-2.html#tab:tab-ZShapeAttributePoint">7.5</a>.</p>
<p>If the Z attribute is not specified and the NO MERGE option is specified, this attribute behaves as described in Table <a href="Common-2.html#tab:tab-ZShapeAttributePoint">7.5</a>, however Z is assumed to be zero (0).</p>
Otherwise ignored.
</td>
<td style="text-align:left;">
Float
</td>
</tr>
<tr>
<td style="text-align:right;">
3
</td>
<td style="text-align:left;">
Shape_Width_or_dMax
</td>
<td style="text-align:left;">
<p>The maximum distance between intermediate points inserted around the polygon’s perimeter to interpolate elevations from the current Zpts. If set to zero, half the 2D <a href="TGCCommands-1.html#tgcCellSize">Cell Size</a> is used. If less than zero no intermediate vertices are inserted.</p>
Not used if the NO MERGE or ADD options are specified.
</td>
<td style="text-align:left;">
Float
</td>
</tr>
<tr>
<td style="text-align:right;">
4
</td>
<td style="text-align:left;">
Shape_Options
</td>
<td style="text-align:left;">
<p>ADD: Add the shape’s Z attribute value to the current Zpts. If ADD is specified, any automatic merging around the region perimeter is ignored (to merge the perimeter with existing Zpts when using the ADD option, specify a value of zero for the Z and dZ attributes for the region).</p>
<p>MAX, RIDGE or RAISE: Only changes a Zpt elevation if the Z Shape elevation at the Zpt is higher.</p>
<p>MIN, GULLY or LOWER: Only changes a Zpt elevation if the Z Shape elevation at the Zpt is lower.</p>
<p>MERGE (default): The elevations at perimeter vertices that do not have an elevation point snapped to them are merged with the current Zpt values. This option will be applied if MERGE ALL or NO MERGE are not specified.</p>
<p>MERGE ALL: Ignores elevations from any points snapped to the perimeter and merges all perimeter vertices with the current Zpt values.</p>
NO MERGE: When there are no points snapped to the perimeter, does not merge the perimeter elevations with the current Zpt values, and sets the elevation from the Z attribute.
</td>
<td style="text-align:left;">
Char(20)
</td>
</tr>
</tbody>
</table>
<div id="zshOrder-5" class="section level5 hasAnchor" number="7.2.5.2.1">
<h5><span class="header-section-number">7.2.5.2.1</span> Order of Processing<a href="Common-2.html#zshOrder-5" class="anchor-section" aria-label="Anchor link to header"></a></h5>
<p>When a mixture of different geometries and attribute options occurs within the same 2d_zsh GIS layer to control how Zpt values are modified, the order in which they are processed follows the below protocols:</p>
<ol style="list-style-type: decimal">
<li>Polygons are processed first, in the order that they occur in the 2d_zsh GIS layer.</li>
<li>Wide lines are processed second, in the order that they occur in the 2d_zsh GIS layer. If the buffer polygons of two wide lines overlap each other, the latter one prevails (i.e. the modifications do not compound). In this situation, it is recommended to separate the two wide lines into two different 2d_zsh GIS layers.</li>
<li>Thin and thick lines are processed last, depending on the Shape_Options attribute (see Table <a href="Common-2.html#tab:tab-ZShapeAttributeLine">7.6</a>), in the following order:
<ul>
<li>All ADD lines are processed first.</li>
<li>Next, lines with no Shape_Options specified (i.e. NULL) – these will modify all Zpts affected by the line.</li>
<li>Then, lines with GULLY, LOWER or MIN.</li>
<li>Finally, lines with RIDGE, RAISE or MAX.</li>
<li>If there are multiple lines with the same Shape_Options, they are processed in the order that they appear in the 2d_zsh GIS layer.</li>
</ul></li>
</ol>
<p>The priority can be further controlled by using different 2d_zsh layers and controlling the order in which layers are listed and subsequently processed in the .tgc file (with latter occurrences of the <a href="TGCCommands-1.html#tgcReadGISZShape">Read GIS Z Shape</a> command building on any previous modifications).</p>
<p>The same Zpts may be modified numerous times through the application of separate 2d_zsh layers or GIS objects that may overlap, with the latter occurrence prevailing based on the above processing protocols. Each sequential modification builds upon the last change. Where this occurs, the <a href="https://wiki.tuflow.com/Check_Files_2d_zpt">_2d_zpt_check</a> will include multiple separate objects stacked at the same Zpt location, which detail each sequential change from the previous modified elevation assigned from all objects in all 2d_zsh layers.</p>
</div>
<div id="zshExamples-5" class="section level5 hasAnchor" number="7.2.5.2.2">
<h5><span class="header-section-number">7.2.5.2.2</span> Examples<a href="Common-2.html#zshExamples-5" class="anchor-section" aria-label="Anchor link to header"></a></h5>
<p>Some examples of using <a href="TGCCommands-1.html#tgcReadGISZShape">Read GIS Z Shape</a> are given below. Models set up using these topography update features are provided in the <a href="https://wiki.tuflow.com/TUFLOW_Example_Models#Topography_Features">Topography Features Example Model Dataset</a> on the TUFLOW Wiki.</p>
<details>
<summary>
<strong>Example 1: Triangulating Elevations over a Null Area.</strong> Expand to find out more.
</summary>
<p>The image below shows an example of a DEM that is missing data over a small area within the 2D domain. Gaps in DEM coverage can sometimes occur over water bodies and occasionally between the tiles of ALS or LiDAR data received from a third-party provider. An example of using the MERGE topography update feature is provided in the <a href="https://wiki.tuflow.com/Tutorial_M02">TUFLOW Tutorial Module 2</a></p>
<table>
<colgroup>
<col style="width: 39%" />
<col style="width: 60%" />
</colgroup>
<tbody>
<tr class="odd">
<td>
<img src="images/image83.png"
style="width:2.51in;height:2.27in" />
</td>
<td>
<p>
The .tgc command <a href="TGCCommands-1.html#tgcSetZpt">Set Zpt</a> may be used to quickly and easily assign elevations to Zpts within these areas, however the limitations of the command mean the same elevation will be assigned to all null Zpts across the entire 2D domain. This may not be suitable in situations where there are multiple gaps in coverage or where the gap is located on steep terrain.
</p>
<p>
<a href="TGCCommands-1.html#tgcReadGISZShape">Read GIS Z Shape</a> with 2d_zsh polygons may instead be used to triangulate Zpt values based on the Zpt elevations of the polygon perimeter.
</p>
</td>
</tr>
<tr class="odd">
<td>
<img src="images/image84.png"
style="width:2.57in;height:2.31in" />
</td>
<td>
<p>
Import in an empty 2d_zsh GIS layer, and digitise a polygon around the gap in coverage as shown. Ensure there is a reasonable buffer around the null area. The attributes of the polygon may be left blank. Alternatively, a value may be entered in the Shape_Width_or_dMax attribute to control the maximum distance between intermediate points inserted around the polygon’s perimeter to interpolate elevations. When left blank, this distance is half the 2D cell’s size.
</p>
</td>
</tr>
<tr class="odd">
<td>
<img src="images/image85.png"
style="width:2.42994in;height:2.3in" />
</td>
<td>
<p>
This image shows the resulting <a href="https://wiki.tuflow.com/Check_Files_2d_DEM_Z">_DEM_Z</a> check file. The <a href="https://wiki.tuflow.com/Check_Files_2d_zsh_zpt">_zsh_zpt_check</a> layer can be used to view the final Zpt elevation assigned.
</p>
</td>
</tr>
</tbody>
</table>
</details>
<details>
<summary>
<strong>Example 2: Use of the NO MERGE and ADD Shape Options.</strong> Expand to find out more.
</summary>
<p>The 2d_zsh NO MERGE option can be used to assign a single elevation to all Zpts within the 2d_zsh polygon (read by the <a href="TGCCommands-1.html#tgcReadGISZShape">Read GIS Z Shape</a> command). An example of using the NO MERGE topography update feature is provided in <a href="https://wiki.tuflow.com/Tutorial_M02">TUFLOW Tutorial Module 2</a>. This may be useful to set the elevation of a polygon to a known finished floor level of a proposed development. Digitise a polygon within an empty 2d_zsh GIS layer, and populate the Z attribute of the 2d_zsh polygon with the desired elevation. Set the Shape_Options attribute to NO MERGE. The example below will assign an elevation of 42.1mAHD to all Zpts located within the 2d_zsh polygon.</p>
<center>
<img src="images/image86.png" />
</center>
<p>Note that if the NO MERGE option is omitted and no points are snapped to the perimeter of the polygon, the Z attribute will be ignored and the Zpt elevations will be triangulated based on the Zpt elevations of the polygon perimeter.</p>
<p>Alternatively, to raise the polygon by a fixed value (i.e. to represent the slab height of a building) enter this value in the Z attribute and set the Shape_Options to ADD. An example of using the ADD topography update feature is also provided in <a href="https://wiki.tuflow.com/Tutorial_M02">TUFLOW Tutorial Module 2</a>.</p>
<center>
<img src="images/image87.png"  />
</center>
<p>TUFLOW will add the value entered in the Z attribute to the existing Zpt elevations within the polygon. The entry within the figure will raise Zpt elevations by 0.15m. The use of a negative value will lower the Zpt elevations by the value of the Z attribute. The <a href="https://wiki.tuflow.com/Check_Files_2d_zsh_zpt">_zsh_zpt_check</a> layer can be used to view the elevation points (Zpts) that have been modified.</p>
</details>
<details>
<summary>
<strong>Example 3: Raising an Embankment.</strong> Expand to find out more.
</summary>
<p>The ADD option may also be used when the 2d_zsh object has been digitised as a line. An example of using the ADD topography update feature is provided in <a href="https://wiki.tuflow.com/Tutorial_M02">TUFLOW Tutorial Module 2</a>. Populate the Z attribute with the amount the embankment is to be raised by. Populate the Shape_Options attribute with ADD as shown in the second figure of Example 2 above. This will raise the existing Zpt elevations by the value of the Z attribute. By default, TUFLOW will assume a thin line, and only alter the ZH, ZU and ZV Zpt elevations of a cell. The Shape_Width_or_dMax attribute may be optionally specified to represent a thick or a wide line (refer to Section <a href="Common-2.html#zsh-4">7.2.5.2</a>).</p>
<p>Alternatively, if a 3D breakline has been digitised, the dZ attribute on the snapped points may be used to raise or lower the embankment. The dZ attribute increases or decreases the elevation of the point’s Z attribute by the amount of dZ. In the example below, a 3D breakline has been created by snapping points to either end of the line. The elevations along the line are determined by a linear interpolation of the Z attribute of the points. Entering a positive dZ value at each point will raise the elevations at the points by the amount of dZ at each point (0.2m for one of the points in the figure below). The elevations along the line are then interpolated based on these revised values. The <a href="https://wiki.tuflow.com/Check_Files_2d_zsh_zpt">_zsh_zpt_check</a> layer can be used to view the final Zpt elevation assigned.</p>
<center>
<img src="images/image88.png" /><img src="images/image89.png" />
</center>
</details>
<details>
<summary>
<strong>Example 4: Removing ridges from a poorly triangulated DEM.</strong> Expand to find out more.
</summary>
<table>
<colgroup>
<col style="width: 39%" />
<col style="width: 60%" />
</colgroup>
<tbody>
<tr class="odd">
<td>
<img src="images/image90.png"
style="width:2.93in;height:2.65in" />
</td>
<td>
<p>
The image shows two false ridges indicated by the H letters. These were caused by a poor triangulation by the TIN software used to create the DEM. These ridges caused unrealistic flow patterns, as shown by the velocity vectors.
</p>
<p>
Note, the blue cells at the bottom are the downstream boundary cells.
</p>
</td>
</tr>
<tr class="even">
<td>
<img src="images/image91.png"
style="width:2.93in;height:2.65in" />
</td>
<td>
This image is of the <a href="https://wiki.tuflow.com/Check_Files_2d_DEM_Z">DEM_Z</a> and <a href="https://wiki.tuflow.com/Check_Files_2d_zpt">_zpt_check</a> check file layers
from the TUFLOW simulation. This is how TUFLOW interprets the DEM data. The false ridges are clearly shown.
</td>
</tr>
<tr class="odd">
<td>
<img src="images/image92.png"
style="width:2.95in;height:2.66in" />
</td>
<td>
<p>
To remove the ridges, import an empty 2d_zsh layer, and digitise a polygon around the ridges as shown. By default (i.e. using the default attribute values), the elevations assigned around the perimeter of the polygon are interpolated from the current Zpt values.
</p>
<p>
One problem with this approach is that the elevations along the right-hand side (i.e. along the edge of the floodplain between Locations A and B) are interpolated from the high Zpts along this boundary.
</p>
</td>
</tr>
<tr class="even">
<td>
<img src="images/image93.png"
style="width:2.92in;height:2.64in" />
</td>
<td>
To solve this problem, digitise points either into the 2d_zsh layer or into another 2d_zsh…_P (points) layer that snap to the vertices of the polygon where the high elevations occur. Assign a Z attribute of -99999 to each point, as shown in the image. The -99999 indicates to not interpolate an elevation from the existing Zpts. Instead, the elevations at Locations A and B are used to interpolate elevations at vertices where -99999 has been assigned.
</td>
</tr>
<tr class="odd">
<td>
<img src="images/image94.png"
style="width:2.93in;height:2.64in" />
</td>
<td>
Use <a href="TGCCommands-1.html#tgcReadGISZShape">Read GIS Z Shape</a> to process the polygon and points and generate the TIN as shown in the image. The TIN can be viewed by importing the <a href="https://wiki.tuflow.com/Check_Files_2d_sh_obj">_sh_obj_check</a> GIS layer.
</td>
</tr>
<tr class="even">
<td>
<img src="images/image95.png"
style="width:2.97in;height:2.68in" />
</td>
<td>
This image shows the new <a href="https://wiki.tuflow.com/Check_Files_2d_DEM_Z">DEM_Z</a> check file after the above 2d_zsh layer has been applied. As can be seen, the ridges have been removed and the flow patterns are now realistic.
</td>
</tr>
</tbody>
</table>
</details>
<details>
<summary>
<strong>Example 5: Highway Embankment Removal Example.</strong> Expand to find out more.
</summary>
<p>The figures below demonstrate a case where a new highway, present in the DEM, needed to be removed because the calibration flood events occurred before the highway was built. To remove the highway, a 2d_zsh polygon was digitised around the highway. All attributes were left as their defaults and no elevation points were required.</p>
<p>To reflect the topography of the original (pre-highway) terrain, a 2d_zsh line and point feature were added (using the method described in Example 3 above). Either <a href="TGCCommands-1.html#tgcReadGISZShape">Read GIS Z Shape</a> or <a href="TGCCommands-1.html#tgcCreateTINZpts">Create TIN Zpts</a> can be used to apply this topographic modification.</p>
<center>
<img src="images/zshape-highway-removal.png"/>
</center>
</details>
</div>
</div>
<div id="vzsh-4" class="section level4 hasAnchor" number="7.2.5.3">
<h4><span class="header-section-number">7.2.5.3</span> Variable Z Shape Layer (2d_vzsh)<a href="Common-2.html#vzsh-4" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>TUFLOW 2D model topography can be varied over time to simulate breaching of embankments, raising of flood defences during an event, or the filling of a river due to a landslide, by using <a href="TGCCommands-1.html#tgcReadGISVariableZShape">Read GIS Variable Z Shape</a>. The 2d_vzsh layer is used to define the final topographic shape at the end of the topography change period. As summary of the GIS layer attributes is provided in Table <a href="Common-2.html#tab:tab-twoDVariable">7.8</a>. The first four attributes of 2d_vzsh are the same as the 2d_zsh layer. They are used to define the finished state of the variable geometry. Additional attributes have been added to allow the user to define how/when the breach commences and for how long. The breach/fill can be triggered using a number of methods:</p>
<ul>
<li>At a specified time (example provided in <a href="https://wiki.tuflow.com/Tutorial_M10#Part_1_-_2D_Variable_Geometry_Time_Trigger">TUFLOW Tutorial Module 10 - Part 1</a>);<br />
</li>
<li>When the water level reaches a specified height at a specified (trigger) location (example provided in <a href="https://wiki.tuflow.com/Tutorial_M10#Part_2_-_2D_Variable_Geometry_Water_Level_Trigger">TUFLOW Tutorial Module 10 - Part 2</a>); or<br />
</li>
<li>When the water level difference between two triggers exceeds a specified amount.</li>
</ul>
<p>Variable Z Shapes can be restored once or repeatedly. Examples would be a breach of a flood defence wall or levee that is reinstated 6 hours later, or a sand bar of a creek entrance that repeatedly opens and closes. To use the restore feature, two additional attributes Restore_Interval and Restore_Period are required as described below in Table <a href="Common-2.html#tab:tab-twoDVariable">7.8</a>. For a single restoration event, only these two additional attributes are required. To restore repeatedly, “REPEAT” must be specified in the Shape Options in column 4. Repeated restoration is only possible for the water level and water level difference trigger methods, as a time trigger will not be able to be reached on a second occasion.</p>
<p>Note, this variable geometry feature should be used instead of the 2d_bc VG option (unless the rate of change of the erosion/fill is non-linear) as 2d_vzsh layers are easier to define and manage.</p>
<table>
<caption>
<span id="tab:tab-twoDVariable">Table 7.8: </span><strong>2D Variable Z-Shape (2d_vzsh) Attribute Descriptions</strong>
</caption>
<thead>
<tr>
<th style="text-align:right;font-weight: bold;color: WHITE !important;background-color: #1ABDC9 !important;">
No. 
</th>
<th style="text-align:left;font-weight: bold;color: WHITE !important;background-color: #1ABDC9 !important;">
Default GIS Attribute Name
</th>
<th style="text-align:left;font-weight: bold;color: WHITE !important;background-color: #1ABDC9 !important;">
Description
</th>
<th style="text-align:left;font-weight: bold;color: WHITE !important;background-color: #1ABDC9 !important;">
Type
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right;">
1
</td>
<td style="text-align:left;">
Z
</td>
<td style="text-align:left;">
<p><b>Point:</b> Same as for Table <a href="Common-2.html#tab:tab-ZShapeAttributePoint">7.5</a>.</p>
<p><b>Line:</b> Same as for Table <a href="Common-2.html#tab:tab-ZShapeAttributeLine">7.6</a>.</p>
<b>Polygon:</b> Same as for Table <a href="Common-2.html#tab:tab-ZShapeAttributePolygon">7.7</a>.
</td>
<td style="text-align:left;">
Float
</td>
</tr>
<tr>
<td style="text-align:right;">
2
</td>
<td style="text-align:left;">
dZ
</td>
<td style="text-align:left;">
<p><b>Point:</b> Same as for Table <a href="Common-2.html#tab:tab-ZShapeAttributePoint">7.5</a>.</p>
<p><b>Line:</b> Same as for Table <a href="Common-2.html#tab:tab-ZShapeAttributeLine">7.6</a>. The exception is for a thin line, for which the final elevations along the line can be set to dZ metres above the current Zpt values.</p>
<p>For example, if a thin line represents a fence that is being collapsed, and the finished height of the collapsed fence is to be 0.2m above existing ground levels, specify a dZ value of 0.2. Note this only applies if the NO MERGE Shape_Options has not been specified.</p>
<b>Polygon:</b> Same as for Table <a href="Common-2.html#tab:tab-ZShapeAttributePolygon">7.7</a>.
</td>
<td style="text-align:left;">
Float
</td>
</tr>
<tr>
<td style="text-align:right;">
3
</td>
<td style="text-align:left;">
Shape_Width_or_dMax
</td>
<td style="text-align:left;">
<p><b>Point:</b> Same as for Table <a href="Common-2.html#tab:tab-ZShapeAttributePoint">7.5</a>.</p>
<p><b>Line:</b> Same as for Table <a href="Common-2.html#tab:tab-ZShapeAttributeLine">7.6</a>.</p>
<b>Polygon:</b> Same as for Table <a href="Common-2.html#tab:tab-ZShapeAttributePolygon">7.7</a>.
</td>
<td style="text-align:left;">
Float
</td>
</tr>
<tr>
<td style="text-align:right;">
4
</td>
<td style="text-align:left;">
Shape_Options
</td>
<td style="text-align:left;">
<p><b>Point:</b></p>
<p>TRIGGER or TRIGGER 1D: Indicates the point is not an elevation point, but a trigger location. The trigger must be given a name using the Trigger_1 attribute. TRIGGER 1D is required if a 1D node water level is used to trigger a 2D variable Z-Shape. The trigger point must be snapped to the 1D node or channel end in the 2d_vzsh layer to achieve this.</p>
<p><b>Line or Polygon:</b> Same as for Table <a href="Common-2.html#tab:tab-ZShapeAttributeLine">7.6</a> (line) or Table <a href="Common-2.html#tab:tab-ZShapeAttributeLine">7.6</a> (polygon). Except the ADD option is not supported.</p>
<p>REPEAT: Specify this option for the variable Z shape to repeatedly function indefinitely based on the below trigger and restore attributes.</p>
<p><b>Thin Line:</b></p>
<p>NO MERGE: For thin lines (Shape_Width_or_dMax = 0), the final elevations along the line are as specified. If NO MERGE is not specified for a thin line, the final elevations are set to be the same as the current Zpt values plus the dZ value.</p>
REPEAT: Specify this option for the variable Z shape to repeatedly function indefinitely based on the below trigger and restore attributes.
</td>
<td style="text-align:left;">
Char(20)
</td>
</tr>
<tr>
<td style="text-align:right;">
5
</td>
<td style="text-align:left;">
Trigger_1
</td>
<td style="text-align:left;">
<p><b>Point:</b> If Shape_Options is set to TRIGGER or TRIGGER 1D, enter the name of the trigger location. The name can contain any characters and can include spaces. Otherwise not used.</p>
<p><b>Line or Polygon:</b> To commence the failure at a specified time leave blank.</p>
<p>To commence failure based on reaching a water level elsewhere in the model, enter the name of the trigger location.</p>
<b>Thin Line:</b> For thin lines there are two special options as follows. Specify DEPTH to have the failure commence once the depth of water adjacent to the cell side exceeds the amount specified for Trigger_Value. Specify DEPTH DIFF to have the failure commence once the difference in water level across the cell side exceeds the amount specified for Trigger_Value.
</td>
<td style="text-align:left;">
Char(20)
</td>
</tr>
<tr>
<td style="text-align:right;">
6
</td>
<td style="text-align:left;">
Trigger_2
</td>
<td style="text-align:left;">
<p><b>Point:</b> Not used.</p>
<b>Line or Polygon:</b> The name of a second trigger location (only needed if the breach is to be initiated on a water level difference between two trigger locations).
</td>
<td style="text-align:left;">
Char(20)
</td>
</tr>
<tr>
<td style="text-align:right;">
7
</td>
<td style="text-align:left;">
Trigger_Value
</td>
<td style="text-align:left;">
<p><b>Point:</b> Not used.</p>
<p><b>Line or Polygon:</b> If Trigger_1 is blank, the simulation time in hours that the breach is to commence.</p>
<p>If Trigger_1 is specified and Trigger_2 is left blank, the water level at Trigger_1 that needs to be reached to trigger the failure.</p>
<p>If both Trigger_1 and Trigger_2 are specified, the water level difference between Trigger_1 and Trigger_2 that needs to be exceeded to trigger the failure. The water level difference is taken as the absolute of the difference between Trigger_1 and Trigger_2, so there is no need to specify a negative value.</p>
<p><b>Thin Line:</b></p>
<p>If “DEPTH” is specified for Trigger_1, the depth in metres adjacent to the cell side that needs to be exceeded to trigger the failure at the cell side.</p>
<p>If “DEPTH DIFF” is specified for Trigger_1, the water level difference in metres across the cell side that needs to be exceeded to trigger the failure.</p>
For all of the above options the length units are metres if modelling in SI units, or feet, if using <tcmd><a href="TCFCommands-1.html#tcfUnits">Units</a> </tcmd><teq>==</teq><tblk> US Customary</tblk>.
</td>
<td style="text-align:left;">
Float
</td>
</tr>
<tr>
<td style="text-align:right;">
8
</td>
<td style="text-align:left;">
Period
</td>
<td style="text-align:left;">
<p><b>Point:</b> Not used.</p>
<b>Line or Polygon:</b> Time in hours over which the variation in Zpt elevations occurs.
</td>
<td style="text-align:left;">
Float
</td>
</tr>
<tr>
<td style="text-align:right;">
9
</td>
<td style="text-align:left;">
Restore_Interval
</td>
<td style="text-align:left;">
<p>The time in hours between when the variable Z shape has finished altering the geometry and when to start restoring the Zpts back to their original values.</p>
<b>Note:</b> “REPEAT” must be specified in Column 4 to allow repeated triggering and restoration of the Variable Z Shape (for the water level and water level difference options), otherwise restoration will only occur once.
</td>
<td style="text-align:left;">
Float
</td>
</tr>
<tr>
<td style="text-align:right;">
10
</td>
<td style="text-align:left;">
Restore_Period
</td>
<td style="text-align:left;">
Time in hours over which the variation in Zpt elevations occurs to restore the Zpts back to their original values.
</td>
<td style="text-align:left;">
Float
</td>
</tr>
</tbody>
</table>
<p><strong>Example 1: Variable Z Shape Example: Breaching of an Embankment</strong></p>
<p>The image below shows an example of a 2d_vzsh layer. The solid magenta line is the polygon, the magenta dashed lines are lines used to enforce TIN breaklines, and the four magenta points all have an elevation of 41.0m. The Shape_Options attribute for the polygon was set to MIN (this means that the Zpt elevation can only be lowered (i.e. eroded), and the dashed lines have Shape_Options of TIN (to indicate that they are to be used for TIN generation, and not for Z lines). The vertices of the polygon that do not have a point snapped to them will be automatically assigned an elevation based on the existing Zpt values. The polygon vertices with the points snapped to them are assigned the elevation of the point (in this case, all at 41.0m). The elevation of the dashed lines will be constant at 41m as they are snapped to the 41m points.</p>
<p>The only other object in the layer is the yellow pin point labelled A. This is a trigger point. Its only attribute values are: TRIGGER for the Shape_Options attribute; and A for the Trigger_1 attribute. This sets the point as a trigger point and the “A” is the name of the trigger point. The magenta polygon also has attribute values of: A for Trigger_1 (this indicates that the erosion trigger is based on the water level at Trigger Location A); a Trigger_Value of 42.0 (i.e. when the water level at location A reaches 42m, start the erosion); and a Period value of 1.0 indicating that the erosion takes one hour to complete.</p>
<center>
<img src="images/image96.png"
style="width:5.33627in;height:3.23684in" />
</center>
<p>The final eroded Zpt values are based on the TIN created by TUFLOW (the grey triangles in the image below). The central section will be horizontal at 41m, sloping up either end to elevations based on the road level. The <a href="https://wiki.tuflow.com/Check_Files_2d_vzsh">_vzsh_zpt_check</a> layer is useful to view the Zpts affected by the variable Z shape. This layer is also shown in the image below. The green triangles indicate that the Zpt level is to be eroded, and the crosses indicate no change (this is because of the MIN Shape_Options). The final eroded Zpt values are labelled in the image below. Other useful attributes are also available in this layer.</p>
<center>
<img src="images/image97.jpeg" style="width:5.43972in;height:3.04408in"
alt="ZSH Example 2" />
</center>
<p>The images below show the modelled breach which occurs using the example above. Each image is in half hour intervals. The colour shading is of the elevations (specify ZH as a <a href="TCFCommands-1.html#tcfMapOutputDataTypes">Map Output Data Types</a> to view the changes in ground level over time).</p>
<center>
<img src="images/image98.png" style="width:2.96in;height:2.07in" />
<img src="images/image99.png" style="width:2.96in;height:2.07in" />
</center>
<center>
<img src="images/image100.png"
style="width:2.98237in;height:2.09378in" />
<img src="images/image101.png" style="width:2.96in;height:2.08in" />
</center>
</div>
<div id="ztin-4" class="section level4 hasAnchor" number="7.2.5.4">
<h4><span class="header-section-number">7.2.5.4</span> 3D TIN Layers (2d_ztin)<a href="Common-2.html#ztin-4" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<!-- PAR to EFC: remove first example, replace with text and link to example models.  Second example move to 2d zsh section. Update so 3 panels rather than 4 panels-->
<!--done-->
<p>TINs (triangulations) of elevation points and 3D lines within a polygon can be carried out using <a href="TGCCommands-1.html#tgcCreateTINZpts">Create TIN Zpts</a>. This is particularly useful for modifying the Zpt elevations where there have been, or are proposed, changes to the base DEM Zpt values.</p>
<p>Note, for large datasets it is likely to be much more efficient to use GIS or 3D surface modelling software to triangulate the data, and read triangulated data in a supported format (see <a href="TGCCommands-1.html#tgcReadTINZpts">Read TIN Zpts</a>) or to convert to raster (see <a href="TGCCommands-1.html#tgcReadGridZpts">Read Grid Zpts</a>).</p>
<p>The protocols applied to the <a href="TGCCommands-1.html#tgcCreateTINZpts">Create TIN Zpts</a> command are:</p>
<ol style="list-style-type: decimal">
<li>A TIN is created for each polygon in the 2d_ztin layer.<br />
</li>
<li>Any points found within a polygon are used when generating the TIN.<br />
</li>
<li>Any lines are converted to points, and those points falling within the polygon are used for the TIN creation. Lines are converted to points as follows:
<ol style="list-style-type: decimal">
<li>All vertices (nodes) of the line are converted to points.<br />
</li>
<li>The dMax attribute is used to insert additional vertices between the line’s vertices. For example, if dMax is set to 10, then additional intermediate vertices are inserted at least every 10 metres (or feet if using <tcmd><a href="TCFCommands-1.html#tcfUnits">Units</a></tcmd><teq> == </teq><tblk> US Customary</tblk>) between the existing vertices where the distance between the existing vertices exceeds this value. If the dMax attribute does not exist or is zero, half the 2D domain’s <a href="TGCCommands-1.html#tgcCellSize">Cell Size</a> is used as the dMax value.<br />
</li>
<li>If there are any points snapped to the line’s vertices, the elevations of these points are used to set the elevations at all the vertices generated along the line. In this way, a 3D breakline effect can be produced within the TIN. If there are no points snapped to the line, the line’s Z attribute elevation is used giving the effect of a horizontal line.<br />
</li>
</ol></li>
<li>The perimeter of the polygon/TIN can either be merged with the current Zpt values or have its own values as follows:
<ol style="list-style-type: decimal">
<li>If there are no points snapped to the perimeter of the polygon, the elevations of the polygon’s perimeter vertices, and of any automatically inserted vertices, are based on the current Zpt values (i.e. the Zpt values assigned by any prior commands).<br />
</li>
<li>If there are one or more points snapped to the polygon’s perimeter vertices, the perimeter is not merged with the Zpt values, and the elevations of the snapped points are used to assign elevations to the perimeter vertices and any automatically inserted vertices.<br />
</li>
<li>The frequency of any automatically inserted points around the perimeter is controlled by the dMax attribute. If the dMax attribute does not exist or is zero, half the 2D domain’s <a href="TGCCommands-1.html#tgcCellSize">Cell Size</a> is used.</li>
</ol></li>
</ol>
<p>The 2025 release introduced a new method “Method B” as beta functionality for triangulating TINs that applies to any of the commands that build a TIN, such as <a href="TGCCommands-1.html#tgcCreateTINZpts">Create TIN Zpts</a> and <a href="TGCCommands-1.html#tgcReadGISZShape">Read GIS Z Shape</a> commands. The new method can be applied using the <a href="TCFCommands-1.html#tcfTINTriangulationApproach">TIN Triangulation Approach</a> command. “Method A” is the original triangulation approach. Method B uses the same inputs as Method A and creates the same input points and elevations, however, creates the triangles differently. While Method A adds additional vertices to lines to encourage edges to follow breaklines, these are strongly enforced using Method B. Method B also generates more balanced triangles avoiding long skinny triangles or clumps of triangles.</p>
<p>Models using the <a href="TGCCommands-1.html#tgcCreateTINZpts">Create TIN Zpts</a> functionality are provided in the <a href="https://wiki.tuflow.com/TUFLOW_Example_Models#Topography_Features">Static Topography Updates Example Model Dataset</a> on the TUFLOW Wiki.</p>
<p>A useful quality control option of <a href="TGCCommands-1.html#tgcCreateTINZpts">Create TIN Zpts</a> is the WRITE TIN option. This will write a TIN to either the SMS TIN or SMS 2DM format depending on the setting of <a href="TCFCommands-1.html#tcfTINOutputFormat">TIN Output Format</a>. If this option is specified, a SMS .tin or .2dm file is written for each TIN generated, and the triangles are written to the <a href="https://wiki.tuflow.com/Check_Files_2d_sh_obj">_sh_obj_check</a> layer. This means that the TIN can be cross-checked, viewed, and edited and modified in SMS (tin or 2dm) or QGIS (2dm). <a href="TGCCommands-1.html#tgcReadTINZpts">Read TIN Zpts</a> can be used to assign Zpt elevations from the modified SMS TIN.</p>
<p>A second argument to specify a GIS layer containing one or more polygons to clip the area of Zpts to be inspected can be used with the <a href="TGCCommands-1.html#tgcReadTINZpts">Read TIN Zpts</a> command. Refer to Section <a href="Common-2.html#DEMGrids-3">7.2.5.1</a> for more information.</p>
<table>
<caption>
<span id="tab:tab-TinAttribute">Table 7.9: </span><strong>2D Tin (2d_ztin) Attribute Descriptions</strong>
</caption>
<thead>
<tr>
<th style="text-align:right;font-weight: bold;color: WHITE !important;background-color: #1ABDC9 !important;">
No. 
</th>
<th style="text-align:left;font-weight: bold;color: WHITE !important;background-color: #1ABDC9 !important;">
Default GIS Attribute Name
</th>
<th style="text-align:left;font-weight: bold;color: WHITE !important;background-color: #1ABDC9 !important;">
Description
</th>
<th style="text-align:left;font-weight: bold;color: WHITE !important;background-color: #1ABDC9 !important;">
Type
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right;">
1
</td>
<td style="text-align:left;">
Z
</td>
<td style="text-align:left;">
<p><b>Point:</b> Elevation of the point.</p>
<p><b>Line:</b> Elevation of the line. Ignored if there are any points snapped to the line’s vertices.</p>
<b>Polygon:</b> Not used.
</td>
<td style="text-align:left;">
Float
</td>
</tr>
<tr>
<td style="text-align:right;">
2
</td>
<td style="text-align:left;">
dMax
(optional)
</td>
<td style="text-align:left;">
<p><b>Point:</b> Not used.</p>
<p><b>Line:</b> Maximum distance between automatically created intermediate vertices. If set to zero or this attribute does not exist, half the 2D domain’s <a href="TGCCommands-1.html#tgcCellSize">Cell Size</a> is used. If less than zero no intermediate vertices are inserted.</p>
<b>Polygon:</b> Same as for Line above.
</td>
<td style="text-align:left;">
Float
</td>
</tr>
</tbody>
</table>
<!--EFC to PAR: how much to we need to update below? Still refers to mif. Would it be equivalent if I change to shp?-->
<!--PAR to EFC: remove entire example-->
<!-- CAD package export out a TIN and use read tin rather than this example. Change to -->
<!--
**Example 1: Haul Road Example of Using Create TIN Zpts**

The images and text below illustrate an example of using [Create TIN
Zpts](#tgcCreateTINZpts) to easily incorporate a proposed haul road into
a TUFLOW model. [Read GIS Z Shape](#tgcReadGISZShape) can also be used in
a similar manner. The data for this example was provided courtesy of
[Hatch](https://www.hatch.com/).

The image below shows the base DEM and a layer of points provided from a
civil design CAD package in XYZ format. The points represent a proposed
haul road to be built across the floodplain.

<center><img src="images/image74.png" style="width:6in;height:3.63542in" /></center>

The points were copied into a MapInfo layer named
2d_ztin_haul_road_pts.tab, with the only attribute being the Elevation
attribute that contains the Z values. A new layer was created and named
2d_ztin_haul_road.tab, and the polygon shown as the black solid line in
the image below was digitised. Note the polygon does not need to snap to
any of the points and can be digitised roughly. Alternatively, the
points and polygon can be placed in the same layer if desired.

<center><img src="images/image75.png" style="width:6in;height:3.63542in" /></center>

[Create TIN Zpts](#tgcCreateTINZpts) == 2d_ztin_haul_road.shp was used
to have TUFLOW create a TIN within the polygon as shown in the image
below and override the DEM Zpt values.

<center><img src="images/image76.png" style="width:6in;height:3.63542in" /></center>

The image below is of a DEM created from the TUFLOW Zpts with the
polygon shown in grey. As can be seen the haul road TIN has merged
seamlessly with the existing Zpts from the base DEM.

<center><img src="images/image77.png" style="width:6in;height:3.63542in" /></center>

The WRITE TIN option (see [Create TIN Zpts](#tgcCreateTINZpts)) can be
used to write the TUFLOW TIN as a SMS .tin file. This file can be opened
in SMS for viewing and editing the TIN. The image below shows the haul
road TIN in 3D. If the TIN is modified, [Read TIN Zpts](#tgcReadTINZpts)
can be used to read the TIN back into TUFLOW.

<center><img src="images/image78.png"
style="width:6.29167in;height:3.96875in" /></center>
-->
</div>
<div id="zln-4" class="section level4 hasAnchor" number="7.2.5.5">
<h4><span class="header-section-number">7.2.5.5</span> 3D Breakline Layers (2d_zln)<a href="Common-2.html#zln-4" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>This is a legacy feature and it is recommended to use the Z Shape functionality (Section <a href="Common-2.html#zsh-4">7.2.5.2</a>) instead. For details on this feature see <a href="TGCCommands-1.html#tgcReadGISZLine">Read GIS Z Line</a> in Appendix <a href="TGCCommands-1.html#TGCCommands-1">C</a>.</p>
</div>
<div id="zpt-4" class="section level4 hasAnchor" number="7.2.5.6">
<h4><span class="header-section-number">7.2.5.6</span> Zpt Layers (2d_zpt)<a href="Common-2.html#zpt-4" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>This is a legacy feature, to define base elevations it is recommended to use the <a href="TGCCommands-1.html#tgcReadGridZpts">Read Grid Zpts</a> functionality (Section <a href="Common-2.html#DEMGrids-3">7.2.5.1</a>) instead. For details on this legacy feature see <a href="TGCCommands-1.html#tgcReadRowColZpts">Read RowCol Zpts</a> in Appendix <a href="TGCCommands-1.html#TGCCommands-1">C</a>.</p>
<p>Similarly, <a href="TGCCommands-1.html#tgcReadGISZpts">Read GIS Zpts</a> is also a legacy command. It is recommended to use the Z Shape functionality (Section <a href="Common-2.html#zsh-4">7.2.5.2</a>) instead of it.</p>
</div>
<div id="using-multiple-and-points-4" class="section level4 hasAnchor" number="7.2.5.7">
<h4><span class="header-section-number">7.2.5.7</span> Using Multiple Layers and Points Layers<a href="Common-2.html#using-multiple-and-points-4" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>GIS layers used for <a href="TGCCommands-1.html#tgcReadGISZShape">Read GIS Z Shape</a>, <a href="TGCCommands-1.html#tgcReadGISVariableZShape">Read GIS Variable Z Shape</a>, <a href="TGCCommands-1.html#tgcCreateTINZpts">Create TIN Zpts</a>, <a href="TGCCommands-1.html#tgcReadGISLayeredFCShape">Read GIS Layered FC Shape</a>, <a href="TGCCommands-1.html#tgcReadGISZLine">Read GIS Z Line</a> (legacy), <a href="TGCCommands-1.html#tgcReadGISZHXLine">Read GIS Z HX Line</a> (legacy) and <a href="TGCCommands-1.html#tgcReadGISFCShape">Read GIS FC Shape</a> (legacy) can be split into more than one layer to better manage the variety of data these commands sometimes require.</p>
<p>For example, one layer may contain the elevation points, another the TIN lines and polygons and another the 3D Z lines. This is useful in terms of managing the data, and especially when interrogating and/or viewing the data in GIS. It is a requirement of the shapefile format that the different geometries (points, lines and regions) are in separate shapefiles. The TUFLOW empty template files include the following filename suffixes to differentiate which files are suitable for point, line or region features.</p>
<ul>
<li>_P for point features (e.g. 2d_zsh_M03_002_P.shp)<br />
</li>
<li>_L for line features (e.g. 2d_zsh_M03_002_L.shp)<br />
</li>
<li>_R for region or polygon features (e.g. 2d_zsh_M03_002_R.shp)</li>
</ul>
<p>This is optional for MapInfo users; the different geometries can occur in the same MapInfo file or can be separated if preferred.</p>
<p>A maximum of nine (9) layers per command line is allowed, and each layer is separated by a vertical bar (“|”). For example, to read a Z Shape layer which has both line and points, the command may be:</p>
<p><tcmd><a href="TGCCommands-1.html#tgcReadGISZShape">Read GIS Z Shape</a></tcmd><teq> == </teq><tblk>gis\2d_zsh_M03_002_L.shp | gis\2d_zsh_M03_002_P.shp</tblk></p>
<p>If using the GeoPackage format &amp;&amp; is also used to specify more than one layer from a common database in the same command line. An example is provided below. See Section <a href="GISLayers-2.html#GPKG-3">4.3.3</a> for further details.</p>
<p><tcmd><a href="TGCCommands-1.html#tgcReadGISZShape">Read GIS Z Shape</a></tcmd><teq> ==</teq> <tblk>gis\2d_zsh_R.gpkg | gis\2d_zsh_002.gpkg &gt;&gt; 2d_zsh_L &amp;&amp; 2d_zsh_P</tblk></p>
<div id="point-only-5" class="section level5 hasAnchor" number="7.2.5.7.1">
<h5><span class="header-section-number">7.2.5.7.1</span> Point Only Layers<a href="Common-2.html#point-only-5" class="anchor-section" aria-label="Anchor link to header"></a></h5>
<p>To minimise the number of attributes, some/all points may optionally be placed into a separate layer with less attributes as discussed below. This simplifies the datasets making them easier to manage and interrogate.</p>
<p>A layer is treated as a separate points layer if:</p>
<ol style="list-style-type: decimal">
<li>It has less attributes than the minimum required for the command. For most commands there is only one attribute for the points layer (i.e. Elevation or Z) as described in Table <a href="Common-2.html#tab:tab-twoDZAttribute">7.10</a>. The exception is <a href="TGCCommands-1.html#tgcReadGISFCShape">Read GIS FC Shape</a>, which requires the first two attributes. This option requires that the points layer be defined within the command line syntax. For example: <tcmd><a href="TGCCommands-1.html#tgcReadGISZShape">Read GIS Z Shape</a></tcmd><teq> == </teq><tblk>gis\2d_zsh_M03_002_L.shp | gis\2d_zsh_M03_002_P.shp</tblk><br />
</li>
<li>The points file uses the same filename as the associated line or region file with the addition of “_pts” as a suffix to its filename (for example 2d_zsh_M03_002_pts.shp will be automatically associated with the line file 2d_zsh_M03_002.shp). This option is supported for backward compatibility; however, it’s recommended that this option not be used (it is preferable to enter the filename of the second layer so that it is clear as to which layers are being used). <tcmd><a href="TGCCommands-1.html#tgcReadGISZShape">Read GIS Z Shape</a></tcmd><teq> == </teq><tblk>gis\2d_zsh_M03_002.shp</tblk></li>
</ol>
<p>The data processing logic for points layers is outlined below:</p>
<ol style="list-style-type: decimal">
<li>The specified layer, 2d_zsh_M03_002.shp, is opened. This layer may or may not contain elevation points. If any elevation points exist they are used.<br />
</li>
<li>A separate points layer can optionally be used to specify additional points or all of the points. The layer can be specified in one of two ways:
<ol style="list-style-type: decimal">
<li>Entering the pathname of the points layer after the main layer. A “|” must be used to separate the two layers. The points layer must be the second layer specified. For example:<br />
<tcmd><a href="TGCCommands-1.html#tgcReadGISZShape">Read GIS Z Shape</a></tcmd><teq> == </teq><tblk>gis\2d_zsh_M03_002_L.shp | gis\2d_zsh_M03_002_P.shp </tblk></li>
<li>Alternatively, name the points layer the same as the main layer, but with a “_pts” extension. If a layer exists with the “_pts” extension, TUFLOW automatically assumes this layer is associated with the main layer and includes all points within this layer when applying the above commands. For this example, the layer would be named 2d_zsh_M03_002_L_pts.shp.<br />
</li>
</ol></li>
<li>The first approach (i) above prevails over the second (ii) if both apply.<br />
</li>
<li>If neither (i) or (ii) apply, TUFLOW assumes there is no separate points layer.</li>
</ol>
<p>Multiple points layers can be specified. The points layer can be referenced in any location except for the first layer within the command line entry. For example, the below syntax will produce an error due to the points file being the first entry.</p>
<p><strong>Incorrect:<br />
</strong><tcmd><a href="TGCCommands-1.html#tgcReadGISZShape">Read GIS Z Shape</a></tcmd><teq> == </teq><tblk>
gis\2d_zsh_M03_002<mark>_P</mark>.shp |
gis\2d_zsh_M03_002<mark>_L</mark>.shp</tblk></p>
<p><strong>Correct:<br />
</strong><tcmd><a href="TGCCommands-1.html#tgcReadGISZShape">Read GIS Z Shape</a></tcmd><teq> == </teq><tblk>
gis\2d_zsh_M03_002<mark>_L</mark>.shp |
gis\2d_zsh_M03_002<mark>_P</mark>.shp</tblk></p>
<table>
<caption>
<span id="tab:tab-twoDZAttribute">Table 7.10: </span><strong>2D Z (2d_z_) Attribute Descriptions</strong>
</caption>
<thead>
<tr>
<th style="text-align:right;font-weight: bold;color: WHITE !important;background-color: #1ABDC9 !important;">
No. 
</th>
<th style="text-align:left;font-weight: bold;color: WHITE !important;background-color: #1ABDC9 !important;">
Default GIS Attribute Name
</th>
<th style="text-align:left;font-weight: bold;color: WHITE !important;background-color: #1ABDC9 !important;">
Description
</th>
<th style="text-align:left;font-weight: bold;color: WHITE !important;background-color: #1ABDC9 !important;">
Type
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right;">
1
</td>
<td style="text-align:left;">
Z
</td>
<td style="text-align:left;">
Elevation (or change in elevation for ADD option) of the point.
</td>
<td style="text-align:left;">
Float
</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div id="Materials-2" class="section level3 hasAnchor" number="7.2.6">
<h3><span class="header-section-number">7.2.6</span> Land Use (Materials)<a href="Common-2.html#Materials-2" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div id="Bed-Resistance-4" class="section level4 hasAnchor" number="7.2.6.1">
<h4><span class="header-section-number">7.2.6.1</span> Bed Resistance<a href="Common-2.html#Bed-Resistance-4" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>The bed resistance values for 2D domains are created by using GIS layer polygons or rasters of different bed resistance zones. The default and recommended bed resistance formulation is Manning’s n. Manning’s n values can be varied with depth (as user specified curve or using the Log Law formula (see Section <a href="Common-2.html#mat-csv-5">7.2.6.3.1</a>)) or varied with velocity-depth product (VxD).</p>
<p>For TUFLOW Classic, bed resistance can also be set to use either Manning’s M values (1/n) or Chezy coefficients using the <a href="TCFCommands-1.html#tcfBedResistanceValues">Bed Resistance Values</a> command in the .tcf file. As this is a TUFLOW Classic feature only, it is further discussed in Section <a href="CLASpecific-2.html#CLA-mat-3">7.4.3</a>.</p>
<p>The recommended approach is to use materials to define how the bed roughness varies over the model. Each material is defined by a positive integer ID which represents a different roughness category. GIS layers of land-use or vegetation often make excellent material layers. Examples of different material categories are river in-bank, bank vegetation, pasture, maintained grass, roads, buildings, forest, mangroves, etc. Each material is assigned a constant Manning’s n value, depth or VxD varying Manning’s n. The material layer can also be used to set rainfall losses (if using direct rainfall - see Section <a href="TwoDBoundaries-2.html#Rainfall-3">8.4.3</a>), fraction impervious, storage area and land-use hazard categories (see Section <a href="Common-2.html#mat-csv-5">7.2.6.3.1</a>).</p>
<p>Material/roughness values are used by TUFLOW during conveyance calculations at the cell mid-sides (refer to Section <a href="Solvers-2.html#Solvers-2">7.1</a> and <a href="Solvers-2.html#Schematisation-3">7.1.3</a>). However, rainfall losses and fraction impervious are applied to the cell and not cell sides, and materials ID values are sampled at both cell mid-sides and cell centres.</p>
<p>The most common approach is to digitise one or more 2d_mat materials layers (see Table <a href="Common-2.html#tab:tab-twoDMaterials">7.11</a>) and assign Manning’s n values to the materials using <a href="TCFCommands-1.html#tcfReadMaterialsFile">Read Materials File</a>. This approach allows the easy adjustment of Manning’s n values, for example during model
calibration or sensitivity testing.</p>
<p>When creating the base 2d_mat layer, it is common practice to not digitise the most common or the most difficult to digitise material, and instead use the following data layering of commands in the .tgc file (see Section <a href="ControlFiles-2.html#TGC-3">4.1.8</a>).</p>
<ul>
<li>Use <a href="TGCCommands-1.html#tgcSetMat">Set Mat</a> to set the most common material to all cells in a 2D domain.<br />
</li>
<li>Use <a href="TGCCommands-1.html#tgcReadGISMat">Read GIS Mat</a> or <a href="TGCCommands-1.html#tgcReadGridMat">Read Grid Mat</a> to allocate the remaining material values.</li>
</ul>
<p>The <a href="TGCCommands-1.html#tgcReadGISMat">Read GIS Mat</a> and <a href="TGCCommands-1.html#tgcReadGridMat">Read Grid Mat</a> commands may be used as many times as required to further modify the materials in parts of a 2D domain. Each subsequent dataset will overwrite the preceding assigned material value, as described in Section <a href="Common-2.html#layering-3">7.2.3</a>.</p>
<p>The default material value is zero. As a material value of zero is not allowed, every cell and cell-side must be assigned a material value using <a href="TGCCommands-1.html#tgcSetMat">Set Mat</a>, <a href="TGCCommands-1.html#tgcReadGISMat">Read GIS Mat</a> and/or <a href="TGCCommands-1.html#tgcReadGridMat">Read Grid Mat</a> in the .tgc file (it is good practice to always set a default materials value using the <a href="TGCCommands-1.html#tgcSetMat">Set Mat</a> as the first material command in the .tgc file). The assigned material ID values do not need to be continuous but must be within the range 1 to 32,767.</p>
<table>
<caption>
<span id="tab:tab-twoDMaterials">Table 7.11: </span><strong>2D Materials (2d_mat) Attribute Descriptions</strong>
</caption>
<thead>
<tr>
<th style="text-align:right;font-weight: bold;color: WHITE !important;background-color: #1ABDC9 !important;">
No. 
</th>
<th style="text-align:left;font-weight: bold;color: WHITE !important;background-color: #1ABDC9 !important;">
Default GIS Attribute Name
</th>
<th style="text-align:left;font-weight: bold;color: WHITE !important;background-color: #1ABDC9 !important;">
Description
</th>
<th style="text-align:left;font-weight: bold;color: WHITE !important;background-color: #1ABDC9 !important;">
Type
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right;">
1
</td>
<td style="text-align:left;">
Material
</td>
<td style="text-align:left;">
The material ID value referenced within a Materials File (see Section <a href="Common-2.html#Materials-File-4">7.2.6.3</a>).
</td>
<td style="text-align:left;">
Integer
</td>
</tr>
</tbody>
</table>
</div>
<div id="log-law-4" class="section level4 hasAnchor" number="7.2.6.2">
<h4><span class="header-section-number">7.2.6.2</span> Log Law Depth Varying Bed Resistance<a href="Common-2.html#log-law-4" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>At very shallow depths the Manning’s n value and/or equation may not be a reliable estimate of bed resistance. The Log Law or “Law of the Wall” approach offers a theoretically based derivation of resistance based on a bed shear analysis. This relationship along with benchmarking against flume test results was used by <span class="citation">Boyte (<a href="references.html#ref-Boyte2014">2014</a>)</span> to derive the following equation that varies Manning’s n with depth based on the roughness height of the surface:</p>
<p><span class="math display" id="eq:equ-law-of-wall-1">\[\begin{equation}
n = \frac{\kappa y^{\frac{1}{6}}}{\sqrt{g}\left[\ln\left( \frac{y}{z_{0}} \right) - 1 \right]}
\tag{7.5}
\end{equation}\]</span></p>
<p><span class="math display" id="eq:equ-law-of-wall-2">\[\begin{equation}
z_{0} = \ \frac{k_{s}}{30} + \frac{0.11\nu}{U_{f}}
\tag{7.6}
\end{equation}\]</span></p>
<p>Where:</p>
<ul>
<li><span class="math inline">\(k_s\)</span> is the roughness height in m<br />
</li>
<li><span class="math inline">\(\kappa\)</span> is typically in the range 0.38 to 0.42 (recommend 0.4)<br />
</li>
<li><span class="math inline">\(y\)</span> is depth<br />
</li>
<li><span class="math inline">\(\nu\)</span> is the kinematic viscosity and is set to 10<sup>-6</sup> m<sup>2</sup>/s<br />
</li>
<li><span class="math inline">\(U_f\)</span> is the friction velocity defined as <span class="math inline">\(\sqrt{Sgy}\)</span> where <span class="math inline">\(y\)</span> approximates <span class="math inline">\(A/P\)</span> and <span class="math inline">\(S\)</span> is the water surface slope</li>
</ul>
<p>Equation <a href="Common-2.html#eq:equ-law-of-wall-1">(7.5)</a> becomes singular as <span class="math inline">\(\ln\left( \frac{y}{z_{0}} \right)\)</span> approaches 1, and asymptotes to zero as depth becomes large. It is necessary to apply sensible limits for the resulting <span class="math inline">\(n\)</span> under these circumstances. For depths such that <span class="math inline">\(\ln\left( \frac{y}{z_{0}} \right) &lt; 1.000001\)</span> the Manning’s n is set to <span class="math inline">\(n = 10\)</span>. For all other cases, the resulting value for <span class="math inline">\(n\)</span> is bounded to be in range <span class="math inline">\(n_{limit} &lt; n &lt; 10.\)</span></p>
<p>Figure <a href="Common-2.html#fig:fig-image102">7.10</a> illustrates how the equivalent Manning’s n varies with depth using the log law for a roughness height of 10mm (0.01m) that would be applicable to a small pebble bed. The different series are the variations in the slope, <span class="math inline">\(S\)</span>, where 0.001 is 0.1% slope, 0.02 is 2% slope and 0.1 is a 10% slope. As can be seen there is a significant variation in Manning’s n below 2cm (0.02m) and a trend to a n value of around 0.018, with only a minor variation due to slope.</p>
<p>In terms of applying a limiting n value, if, for example, <span class="math inline">\(n_{limit}\)</span> was set to 0.02, then the Manning’s n value would not fall below 0.02.</p>
<p>Figure <a href="Common-2.html#fig:fig-image103">7.11</a> shows a comparison using the Log Law versus a constant Manning’s n value <span class="citation">(<a href="references.html#ref-Boyte2014">Boyte, 2014</a>)</span>. The thesis investigated the use of the Law of the Wall for direct rainfall modelling using TUFLOW. The flow depths in this example range from 4 to 20cm and the roughness height, <span class="math inline">\(k_s\)</span>, was 3cm.</p>
<p>The Log Law Depth Varying Bed Resistance is activated by entering special characters in the 2nd column of the Materials File. See Section <a href="Common-2.html#Materials-File-4">7.2.6.3</a> and Table <a href="Common-2.html#tab:tab-MaterialsFormat">7.12</a>.</p>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:fig-image102"></span>
<img src="images/image102.jpeg" alt="Example of Log Law Variation of Manning’s n with Depth" width="60%" />
<p class="caption">
Figure 7.10: Example of Log Law Variation of Manning’s n with Depth
</p>
</div>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:fig-image103"></span>
<img src="images/image103.jpeg" alt="Example of Log Law versus Constant Manning’s n with Depth" width="60%" />
<p class="caption">
Figure 7.11: Example of Log Law versus Constant Manning’s n with Depth
</p>
</div>
</div>
<div id="Materials-File-4" class="section level4 hasAnchor" number="7.2.6.3">
<h4><span class="header-section-number">7.2.6.3</span> Materials File<a href="Common-2.html#Materials-File-4" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Materials file(s) contain information on a material’s roughness and, optionally, rainfall losses if using direct rainfall. The file is referenced within the .tcf file using <a href="TCFCommands-1.html#tcfReadMaterialsFile">Read Materials File</a> and can be in one of two formats (.csv or .tmf). The .csv format is the recommended of the two options. It supports all functionality. The .tmf format does not. For example, the log law bed resistance option is only available via the .csv format. The .csv format also supports curves of Manning’s n versus depth.</p>
<p>More than one materials file may be specified by repeat occurrences of the command <a href="TCFCommands-1.html#tcfReadMaterialsFile">Read Materials File</a> however, most models will use only a single materials file. Any combination of .tmf and .csv files can be used and up to 1,000 materials are allowed in total.</p>
<p>If a second argument is provided with <a href="TCFCommands-1.html#tcfReadMaterialsFile">Read Materials File</a>, this value is used to factor all Manning’s n values. For example, the following command increasing all Manning’s n values by 10%:</p>
<p><tcmd><a href="TCFCommands-1.html#tcfReadMaterialsFile">Read Materials File</a></tcmd><teq> == </teq><tblk>My_Materials.tmf | 1.1</tblk></p>
<div id="mat-csv-5" class="section level5 hasAnchor" number="7.2.6.3.1">
<h5><span class="header-section-number">7.2.6.3.1</span> .csv Format<a href="Common-2.html#mat-csv-5" class="anchor-section" aria-label="Anchor link to header"></a></h5>
<p>The .csv format materials file is a comma delimited text file containing Manning’s n and other information for different materials (e.g. land-uses).
The format is intended to be generated from an Excel file database of materials and associated data in a similar manner to BC databases (with the option of using the Excel TUFLOW Macro .xlam macros to export to the .csv format - the Excel TUFLOW Tools.xlam can be downloaded from <a href="https://www.tuflow.com/downloads/#utilities">here</a>). The .csv can also be written from text editor if preferred.</p>
<p>The format of the materials.csv file is described in Table <a href="Common-2.html#tab:tab-MaterialsFormat">7.12</a>.</p>
<p>Note: The .csv format offers access to all materials features, whereas the .tmf format does not.</p>
<table>
<caption>
<span id="tab:tab-MaterialsFormat">Table 7.12: </span><strong>Materials .csv File Format</strong>
</caption>
<thead>
<tr>
<th style="text-align:right;font-weight: bold;color: WHITE !important;background-color: #1ABDC9 !important;">
No. 
</th>
<th style="text-align:left;font-weight: bold;color: WHITE !important;background-color: #1ABDC9 !important;">
Description
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right;">
1
</td>
<td style="text-align:left;">
Mat (Material ID) number, which must be an integer.
</td>
</tr>
<tr>
<td style="text-align:right;">
2
</td>
<td style="text-align:left;">
<p>Contains information on the bed resistance values (usually Manning’s n). The options available are:</p>
<ul>
<li>Single n value (the n value is assumed constant at all water depths).</li>
<li>Two pairs of depth and n values (see the y<sub>1</sub>, n<sub>1</sub>, y<sub>2</sub>, n<sub>2</sub> option described in Table <a href="Common-2.html#tab:tab-MaterialsFile">7.13</a> for the .tmf format (i.e. Columns 5 to 8). The values must be separated by commas.</li>
<li>A .csv file containing n vs depth values. By default, when the n vs depth values are read they are assumed to be in the first two columns of the .csv file containing the curve’s data. However, you can specify the columns to be used by placing the column label after the .csv filename using a vertical bar “|” to separate the column label from the .csv filename. If only one column label is given, this is assumed to be the depth column and the next column must contain the Manning’s n values. As for boundary data, TUFLOW searches down the rows until it finds the first numeric values and will start reading from this row until a row is found with no more numeric values. To view how the n values vary with depth over time, use the “n” option for <a href="TCFCommands-1.html#tcfMapOutputDataTypes">Map Output Data Types</a>.</li>
<li>If the first four characters are “VxD:” the Manning’s n values for the material will be varied according the velocity times depth product, rather than depth. The VxD versus n values are provided in the same manner as for depths described above. Note that the Manning’s n value never increases during the simulation, it can only remain the same or decrease. This feature was provided to allow the user to reduce Manning’s n with increasing VxD to represent the “stripping” of river banks in high VxD areas, and then keeping the reduced Manning’s n as the flood recedes, hence why the n value cannot increase once decreased during the simulation. VxD was used in preference for simply V to avoid reducing n values at very shallow depths (but high velocities) when the flood first inundates the 2D cells.</li>
<li>If the first four characters are “Log:” the bed resistance as defined by the theoretically derived log law for shallow flows is applied. Three numbers are required after the “Log:” in space or comma delimited format. These are: Ks (roughness height), Kappa (0.3 to 0.4) and the limiting Manning’s n value. See Section <a href="Common-2.html#log-law-4">7.2.6.2</a> for more information.
</td>
</tr>
<tr>
<td style="text-align:right;">
3
</td>
<td style="text-align:left;">
Sets the rainfall loss parameters using the initial loss/continuing loss option. The initial/continuing loss is entered as two comma delimited numbers in a similar manner to the third and fourth column values in the .tmf format. See Table <a href="Common-2.html#tab:tab-MaterialsFile">7.13</a>. Refer to Section <a href="Common-2.html#Rainfall-Losses-4">7.2.6.4</a>.
</td>
</tr>
<tr>
<td style="text-align:right;">
4
</td>
<td style="text-align:left;">
Reserved.
</td>
</tr>
<tr>
<td style="text-align:right;">
5
</td>
<td style="text-align:left;">
Defines the Storage Reduction Factor (SRF) value. If no fifth column entry exists, no SRF is applied. The default is an SRF of 0 (i.e. no change in storage). See Section <a href="Common-2.html#srf-3">7.2.9.1</a> for more information.
</td>
</tr>
<tr>
<td style="text-align:right;">
6
</td>
<td style="text-align:left;">
Defines the Fraction Impervious of the overlying material type. The value entered should be a number from 0.0 to 1.0 where 0.0 is fully pervious and 1.0 is fully impervious. The default is a value of 0.0, assuming that the overlying material is 100% pervious. This feature is used to influence the amount of water that is infiltrated into the ground with the soil infiltration feature. Refer to Section <a href="Common-2.html#Infiltration-2">7.2.7</a> for more information.</li>
</ul>
<b>Note: This option works with the Soli Infiltration feature (see Section <a href="Common-2.html#Infiltration-2">7.2.7</a>). It does not apply to materials rainfall losses (Column No 3 above) when applying direct rainfall (see Section <a href="TwoDBoundaries-2.html#Rainfall-3">8.4.3</a>).</b>
</td>
</tr>
</tbody>
</table>
<p>An example of a materials.csv is provided in Figure <a href="Common-2.html#fig:fig-image104">7.12</a>. To give a description of the material, this must be done after all inputs for that material and must be preceded by a “!” or “#”.</p>
<p>In the example shown in Figure <a href="Common-2.html#fig:fig-image104">7.12</a>:</p>
<ul>
<li>Material 1 has a constant n value of 0.03 and no rainfall loss parameters.<br />
</li>
<li>Material 5 varies n with depth using the four y<sub>1</sub>, n<sub>1</sub>, y<sub>2</sub>, n<sub>2</sub> values (as per .tmf format approach) and no rainfall loss parameters.<br />
</li>
<li>Materials 11 and 12 use depth vaying n sourced from a file called Grass.csv. As only one column label has been specified, the y values must occur under that label and the n values must occur in the next adjoining column (see Figure <a href="Common-2.html#fig:fig-image105">7.13</a>). An IL of 10mm and CL of 2mm/h for both materials will be used for any direct rainfall.<br />
</li>
<li>Materials 21 and 22 use depth vaying n sourced from a file called Trees.csv. As two column labels have been specified, the y and n values must occur under the specified labels (see <a href="Common-2.html#fig:fig-image105">7.13</a>). An IL of 20mm and CL of 2mm/h for Material 21, and 25 and 2 for Material 22, will be used.<br />
</li>
<li>Material 31 uses the log law approach (Section <a href="Common-2.html#log-law-4">7.2.6.2</a>) with a roughness height of 0.01m, Kappa value of 0.4 and limiting Manning’s n of 0.02. IL = 0mm and CL = 0mm. The fraction impervious value is set to 1.0 (fully impervious).</li>
<li>Material 32 use depth vaying n sourced from a file called Buildings.csv. In Buildings.csv Column A is used for y values and Column B for n values. IL = 0 and CL = 0. The storage reduction factor is set to 0.3 (30% reduction in storage) and the fraction impervious value is set to 1 (fully impervious).</li>
</ul>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:fig-image104"></span>
<img src="images/image104b.png" alt="Example of Materials .csv File Format"  />
<p class="caption">
Figure 7.12: Example of Materials .csv File Format
</p>
</div>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:fig-image105"></span>
<img src="images/image105a.png" alt="Example of the Grass.csv file read into the Materials.csv"  />
<p class="caption">
Figure 7.13: Example of the Grass.csv file read into the Materials.csv
</p>
</div>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:fig-image106"></span>
<img src="images/image106a.png" alt="Example of the Trees.csv file read into the Materials.csv"  />
<p class="caption">
Figure 7.14: Example of the Trees.csv file read into the Materials.csv
</p>
</div>
</div>
<div id="tmf-5" class="section level5 hasAnchor" number="7.2.6.3.2">
<h5><span class="header-section-number">7.2.6.3.2</span> .tmf Format<a href="Common-2.html#tmf-5" class="anchor-section" aria-label="Anchor link to header"></a></h5>
<p>The .tmf format is a text file containing Manning’s n and other information for different materials (e.g. land-uses). The file can contain comments using the “#” and/or “!” comment characters at any location. When comment characters are specified, the remainder of the line is ignored. The format of the materials .tmf file is described in Table <a href="Common-2.html#tab:tab-MaterialsFile">7.13</a>. The first two columns are mandatory and must be specified. All other columns are optional. A maximum of 100 different materials can be specified in this format.</p>
<p>Note: The .tmf format does not offer all materials functionality, whereas the .csv format in the above section does.</p>
<table>
<caption>
<span id="tab:tab-MaterialsFile">Table 7.13: </span><strong>Materials .tmf File Format</strong>
</caption>
<thead>
<tr>
<th style="text-align:right;font-weight: bold;color: WHITE !important;background-color: #1ABDC9 !important;">
No. 
</th>
<th style="text-align:left;font-weight: bold;color: WHITE !important;background-color: #1ABDC9 !important;">
Description
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right;">
1
</td>
<td style="text-align:left;">
Mat (Material ID) number, which must be an integer.
</td>
</tr>
<tr>
<td style="text-align:right;">
2
</td>
<td style="text-align:left;">
<p>Manning’s n value.</p>
<b>Note, if the four values in columns 5 to 8 are specified, the Manning’s n value in this column is ignored and not used.</b>
</td>
</tr>
<tr>
<td style="text-align:right;">
3
</td>
<td style="text-align:left;">
Sets the initial loss if using a direct rainfall boundary (via <a href="TBCCommands-1.html#tbcReadGISRF">Read GIS RF</a> or <a href="TCFCommands-1.html#tcfRainfallControlFile">Rainfall Control File</a>). Refer to Section <a href="Common-2.html#Rainfall-Losses-4">7.2.6.4</a>. This does not apply to <a href="TBCCommands-1.html#tbcGlobalRainfallBC">Global Rainfall BC</a>. The units are mm, or if <tcmd><a href="TCFCommands-1.html#tcfUnits">Units</a></tcmd> <teq>==</teq><tblk> US Customary</tblk> inches.
</td>
</tr>
<tr>
<td style="text-align:right;">
4
</td>
<td style="text-align:left;">
Sets the continuing loss rate if using a direct rainfall boundary (via <a href="TBCCommands-1.html#tbcReadGISRF">Read GIS RF</a> or <a href="TCFCommands-1.html#tcfRainfallControlFile">Rainfall Control File</a>). Refer to Section <a href="Common-2.html#Rainfall-Losses-4">7.2.6.4</a>. This does not apply to <a href="TBCCommands-1.html#tbcGlobalRainfallBC">Global Rainfall BC</a>. The units are mm/hr, or if <tcmd><a href="TCFCommands-1.html#tcfUnits">Units</a></tcmd> <teq>==</teq><tblk> US Customary</tblk> inches/hr.
</td>
</tr>
<tr>
<td style="text-align:right;">
5
</td>
<td style="text-align:left;">
y<sub>1</sub> – The depth below which the Manning’s n value n1 (column 6) is applied.
</td>
</tr>
<tr>
<td style="text-align:right;">
6
</td>
<td style="text-align:left;">
n<sub>1</sub> –The Manning’s n value applied below depth y<sub>1</sub> (column 5).
</td>
</tr>
<tr>
<td style="text-align:right;">
7
</td>
<td style="text-align:left;">
y<sub>2</sub> – The depth above which the Manning’s n value n<sub>2</sub> (column 8) is applied.
</td>
</tr>
<tr>
<td style="text-align:right;">
8
</td>
<td style="text-align:left;">
<p>n<sub>2</sub> –The Manning’s n value applied above depth y<sub>2</sub> (column 7).</p>
Between y<sub>1</sub> and y<sub>2</sub>, the Manning’s n value is interpolated between n<sub>1</sub> and n<sub>2</sub> according to <a href="TCFCommands-1.html#tcfBedResistanceDepthInterpolation">Bed Resistance Depth Interpolation</a>. When specifying values for columns 5 to 8, initial and continuing loss values must be specified in columns 3 and 4 as described above (use zero values if not using direct rainfall).
</td>
</tr>
<tr>
<td style="text-align:right;">
9
</td>
<td style="text-align:left;">
Reserved.
</td>
</tr>
<tr>
<td style="text-align:right;">
10
</td>
<td style="text-align:left;">
Defines the Storage Reduction Factor (SRF) value. The default is an SRF of 0. Enter 0 to ensure there is no change in 2D cell storage for the material type. See Section <a href="Common-2.html#srf-3">7.2.9.1</a> for more information.
</td>
</tr>
<tr>
<td style="text-align:right;">
11
</td>
<td style="text-align:left;">
<p>Defines the fraction impervious of the overlying material type. The value entered should be a number from 0.0 to 1.0 where 0.0 is fully pervious and 1.0 is fully impervious. The default is a value of 0.0, assuming that the overlying material is 100% pervious. This feature is used to influence the amount of water that is infiltrated into the ground with the soil infiltration feature. Refer to Section <a href="Common-2.html#Infiltration-2">7.2.7</a> for more information.</p>
<b>Note: This option works with the Soli Infiltration feature (see Section <a href="Common-2.html#Infiltration-2">7.2.7</a>). It does not apply to materials rainfall losses (Column No 3 above) when applying direct rainfall (see Section <a href="TwoDBoundaries-2.html#Rainfall-3">8.4.3</a>).</b>
</td>
</tr>
</tbody>
</table>
<p>The .tmf file format is shown in the examples below. See <a href="TGCCommands-1.html#tgcSetMat">Set Mat</a>, <a href="TGCCommands-1.html#tgcReadGISMat">Read GIS Mat</a> and <a href="TGCCommands-1.html#tgcReadGridMat">Read Grid Mat</a> for assigning the material IDs to the 2D domains. These material values may also be used to define bed resistance values across 1D XZ cross-sections (see Section <a href="XS-2.html#RR-M-5">5.6.1.1.2</a>).</p>
<ol>
<tgrn>! Comments and blank lines are allowed in this file</tgrn><br />
<tgrn>! First value is the Mat value, Second is the Manning’s n value</tgrn><br />
<tblk>1, 0.03</tblk><tgrn>! waterways</tgrn><br />
<tblk>2, 0.08</tblk><tgrn>! river banks</tgrn><br />
<tblk>11, 0.06</tblk><tgrn>! grazing land</tgrn><br />
<tblk>12, 0.04</tblk><tgrn>! parks and gardens</tgrn><br />
<tblk>13, 0.15</tblk><tgrn>! sugar cane</tgrn><br />
<tblk>14, 0.12</tblk><tgrn>! natural forest</tgrn><br />
<tblk>15, 0.02</tblk><tgrn>! roads</tgrn>
</ol>
<p>To include the initial loss (mm) and the continuing loss rate (mm/h) optionally enter a third and fourth value as shown below. If an IL is specified, a CL must also be specified otherwise an ERROR occurs. Both can be omitted, in which case, they are both set to zero.</p>
<ol>
<tblk>1, 0.03</tblk><tgrn>! waterways</tgrn><br />
<tblk>2, 0.08, 20, 2</tblk><tgrn>! river banks</tgrn><br />
<tblk>11, 0.06, 20, 2</tblk><tgrn>! grazing land</tgrn><br />
<tblk>12, 0.04, 5, 1.5</tblk><tgrn>! parks and gardens</tgrn><br />
<tblk>13, 0.15, 10, 2</tblk><tgrn>! sugar cane</tgrn><br />
<tblk>14, 0.12, 30, 2.5</tblk><tgrn>! natural forest</tgrn><br />
<tblk>15, 0.02, 2, 0</tblk><tgrn>! roads</tgrn>
</ol>
<p>To vary n values with depth (m) using two pairs of values optionally enter values in the fifth to eighth columns as shown below in lines 2 and 3 (Materials 2 and 11) below. IL and CL values must be entered (use zero if not relevant). If depth varying manning’s n is not used, column 5 to 8 should be left blank, not set to zero.</p>
<ol>
<tblk>1, 0.03</tblk><tgrn>! waterways</tgrn><br />
<tblk>2, 0.08, 20, 2, 0.3, 0.15, 0.5, 0.08</tblk><tgrn>! river banks with long grass 0.3m high</tgrn><br />
<tblk>11, 0.06, 20, 2, 0.1, 0.1, 0.15, 0.06</tblk><tgrn>! grazing land</tgrn><br />
<tblk>12, 0.04, 5, 1.5</tblk><tgrn>! parks and gardens</tgrn><br />
<tblk>13, 0.15, 10, 2</tblk><tgrn>! sugar cane</tgrn><br />
<tblk>14, 0.12, 30, 2.5</tblk><tgrn>! natural forest</tgrn><br />
<tblk>15, 0.02, 2, 0</tblk><tgrn>! roads</tgrn>
</ol>
<p>To reduce the storage of cells, enter a SRF value in the tenth column as shown in line 7 for Material 15 below. The example shown reduces the storage of all cells with Material ID of 15 by 20%. Note that a value of -1 has been entered for the ninth column as this field has been reserved. If not used, specify 0 to ensure no change in storage for the material.</p>
<ol>
<tblk>1, 0.03</tblk><tgrn>! waterways</tgrn><br />
<tblk>2, 0.08, 20, 2, 0.3, 0.15, 0.5, 0.08</tblk><tgrn>! river banks with long grass 0.3m high</tgrn><br />
<tblk>11, 0.06, 20, 2, 0.1, 0.1, 0.15, 0.06</tblk><tgrn>! grazing land</tgrn><br />
<tblk>12, 0.04, 5, 1.5</tblk><tgrn>! parks and gardens</tgrn><br />
<tblk>13, 0.15, 10, 2</tblk><tgrn>! sugar cane</tgrn><br />
<tblk>14, 0.12, 30, 2.5</tblk><tgrn>! natural forest</tgrn><br />
<tblk>15, 0.02, 2, 0, , , , , -1, 0.2</tblk><tgrn>! roads with width reduced by 20%</tgrn>
</ol>
<p>To specify a fraction impervious, enter a value between 0.0 and 1.0 in the eleventh column as shown in line 4 for Material 12 below. The example shown partially restricts the rate of infiltration by applying a fraction impervious of 0.1 or 10%.</p>
<ol>
<tblk>1, 0.03</tblk><tgrn>! waterways</tgrn><br />
<tblk>2, 0.08, 20, 2, 0.3, 0.15, 0.5, 0.08</tblk><tgrn>! river banks with long grass 0.3m high</tgrn><br />
<tblk>11, 0.06, 20, 2, 0.1, 0.1, 0.15, 0.06</tblk><tgrn>! grazing land</tgrn><br />
<tblk>12, 0.04, 5, 1.5, , , , , -1, 0, 0.1</tblk><tgrn>! parks and gardens (10% impervious)</tgrn><br />
<tblk>13, 0.15, 10, 2</tblk><tgrn>! sugar cane</tgrn><br />
<tblk>14, 0.12, 30, 2.5</tblk><tgrn>! natural forest</tgrn><br />
<tblk>15, 0.02, 2, 0, , , , , -1, 0.2</tblk><tgrn>! roads with width reduced by 20%</tgrn>
</ol>
</div>
</div>
<div id="Rainfall-Losses-4" class="section level4 hasAnchor" number="7.2.6.4">
<h4><span class="header-section-number">7.2.6.4</span> Rainfall Losses<a href="Common-2.html#Rainfall-Losses-4" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Rainfall losses applied through the Materials file (.tmf or .csv format) remove the loss depth from the rainfall before it is applied as a boundary on the 2D cells. Rainfall losses are ideal for modelling situations in which water is prevented from reaching the ground, such as through the interception by trees.</p>
<p><strong>Note that the ILCL rainfall losses are different to the ILCL infiltration losses that can be applied using the .tsoilf file (refer to Section <a href="Common-2.html#tsoilf-4">7.2.7.2</a>).</strong> The ILCL soil infiltration losses will infiltrate ponded water into the ground. It is possible to use both methods in the same simulation – for example, rainfall that doesn’t reach the ground would be modelled as a material IL/CL (applied as a loss to the rainfall) and infiltration into the ground as IL/CL via soil types. The log file (see Section <a href="SimLogFiles-2.html#TLF-3">14.4.1</a>) will report the material and soil properties separately as shown in the example below:</p>
<p>Example Material Properties:</p>
<ol>
<tgrn>#4 - Material 4:</tgrn><br />
<tblk>Fixed Manning’s n = 0.030<br />
IL = 1.0mm, CL = 0.0mm/h<br />
Landuse Hazard ID not set.<br />
SRF (Storage Reduction Factor) = 0.<br />
Fraction Impervious = 0. <tblk>
</ol>
<p>Example Soil Properties:</p>
<ol>
<tgrn>#1 - Soil 1 [based on pre-defined soil type SAND]:</tgrn><br />
<tblk>Suction = 49.5 mm<br />
HydCond = 117.8 mm/hr<br />
Porosity = 0.417<br />
Initial Moisture = 0.2<br />
Soil Capacity = 0.217 </tblk>
</ol>
<p>Specifying the “fraction impervious” on the material allows the materials and the soils to be independent (i.e. the same soil can be present under both road and forest). <strong>This fraction impervious only applies to the infiltration into the soil, not to the Materials file rainfall losses.</strong></p>
</div>
</div>
<div id="Infiltration-2" class="section level3 hasAnchor" number="7.2.7">
<h3><span class="header-section-number">7.2.7</span> Infiltration<a href="Common-2.html#Infiltration-2" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Four methods are available to infiltrate water from the surface into the ground:</p>
<ul>
<li>Green-Ampt (GA) - Section <a href="Common-2.html#GA-5">7.2.7.1.1</a>;<br />
</li>
<li>Horton (HO) - Section <a href="Common-2.html#HO-5">7.2.7.1.2</a>;<br />
</li>
<li>Initial Loss/Continuing Loss (ILCL) - Section <a href="Common-2.html#ILCL-5">7.2.7.1.3</a>; and</li>
<li>SCS Curve Number (SCS) (HPC only) - see Section <a href="HPC-specific-2.html#SCS-4">7.3.5.1.1</a>.</li>
</ul>
<p>When using TUFLOW HPC, it is possible to model multiple vertical groundwater layers, as well as enable horizontal flow of groundwater. As these features are only available in TUFLOW HPC, they are discussed in Section <a href="HPC-specific-2.html#HPC-Groundwater-3">7.3.5.2</a>.</p>
<p>The first three methods mentioned above (GA, HO, and ILCL) monitor the amount of water infiltrated and if the ground becomes saturated, infiltration ceases. With these methods the amount of water that can be infiltrated depends on:</p>
<ul>
<li>The infiltration approach and soil parameters used for the top most (infiltration) soil layer.<br />
</li>
<li>The number, thickness, porosities, and initial moisture of the groundwater layers.<br />
</li>
<li>The fraction impervious value of the overlying material layer.</li>
</ul>
<p>The cumulative infiltration data is stored and computed at cell centres. As such all soil data and groundwater layer geometry is sampled from the GIS / Grid layers at cell centres. Likewise the material “fraction impervious” data is sampled at cell centres (unlike the Manning’s values which are sampled at face
centres).</p>
<p>The following .tgc commands are used to set the ID for the soil type referenced in the TUFLOW soils file (.tsoilf) (Section <a href="Common-2.html#tsoilf-4">7.2.7.2</a>):</p>
<ul>
<li><a href="TGCCommands-1.html#tgcSetSoil">Set Soil</a>;<br />
</li>
<li><a href="TGCCommands-1.html#tgcReadGISSoil">Read GIS Soil</a>; and<br />
</li>
<li><a href="TGCCommands-1.html#tgcReadGridSoil">Read Grid Soil</a>.</li>
</ul>
<p>Each of these commands has the option of specifying which soil layer(s) the command applies to. Note that 2D infiltration is activated by the occurrence of one of these commands. If none of the commands exists for a 2D domain, soil infiltration does not occur for that domain.</p>
<p>If soils are specified, the soil ID for each cell are written to the <a href="https://wiki.tuflow.com/Check_Files_2d_grd">_grd_check</a> layer. The .tlf file contains the parameters for each Soil
ID.</p>
<div id="infiltration-layer-4" class="section level4 hasAnchor" number="7.2.7.1">
<h4><span class="header-section-number">7.2.7.1</span> Infiltration Layer<a href="Common-2.html#infiltration-layer-4" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Only wet 2D cells can infiltrate water into the ground. If using soil infiltration with a single groundwater layer, the default groundwater depth is infinite. The depth (thickness) of the groundwater layer can be set globally using the following commands:</p>
<ul>
<li><a href="TGCCommands-1.html#tgcSetSoilThickness">Set Soil Thickness</a><br />
</li>
<li><a href="TGCCommands-1.html#tgcSetSoilBaseElevation">Set Soil Base Elevation</a></li>
</ul>
<p>They can also be set spatially with the following GIS and Grid commands:</p>
<ul>
<li><a href="TGCCommands-1.html#tgcReadGISSoilThickness">Read GIS Soil Thickness</a><br />
</li>
<li><a href="TGCCommands-1.html#tgcReadGISSoilBaseElevation">Read GIS Soil Base Elevation</a></li>
<li><a href="TGCCommands-1.html#tgcReadGridSoilThickness">Read Grid Soil Thickness</a></li>
<li><a href="TGCCommands-1.html#tgcReadGridSoilBaseElevation">Read Grid Soil Base Elevation</a></li>
</ul>
<p>The soil thickness sets the layer depth from the surface elevation. The soil base elevation sets the absolute elevation of the bottom of the layer. If both methods are specified for a given grid cell, the highest of the two will be adopted. The input units should be in metres or feet. To set an initial groundwater level within the soil layer, see Section <a href="InitialConditions-2.html#IGW-3">8.8.2</a>.</p>
<p>In releases prior to 2023-03, the groundwater level (or depth) was set to represent a water table. For backward compatibility, it is still possible to the set a water table, using these commands:</p>
<ul>
<li><a href="TGCCommands-1.html#tgcSetGWD">Set GWD</a> or <a href="TGCCommands-1.html#tgcSetGWL">Set GWL</a></li>
<li><a href="TGCCommands-1.html#tgcReadGISGWD">Read GIS GWD</a> or <a href="TGCCommands-1.html#tgcReadGISGWL">Read GIS GWL</a></li>
<li><a href="TGCCommands-1.html#tgcReadGridGWD">Read Grid GWD</a> or <a href="TGCCommands-1.html#tgcReadGridGWL">Read Grid GWL</a></li>
</ul>
<p>The amount of water that enters the soil is also dependent on the fraction impervious value of the overlying material layer. The default is that the overlying material is 100% pervious (i.e. 0% impervious). However, if, for example, a concrete parking lot overlies a sandy soil, the imperviousness of the parking lot can be specified as 100% (i.e. totally), or 90% (i.e. partially) restrict the rate of infiltration. This is described in the materials file in Section <a href="Common-2.html#Materials-2">7.2.6</a>.</p>
<p>If using TUFLOW HPC’s SGS functionality (Section <a href="HPC-specific-2.html#SGS-3">7.3.3</a>), cells can be considered “partially wet”. This necessitated options for factoring down the rate of infiltration into the topmost groundwater layer, the methods are discussed in Section <a href="HPC-specific-2.html#SGS-Advanced-5">7.3.3.1.3</a>.</p>
<div id="GA-5" class="section level5 hasAnchor" number="7.2.7.1.1">
<h5><span class="header-section-number">7.2.7.1.1</span> Green-Ampt (GA)<a href="Common-2.html#GA-5" class="anchor-section" aria-label="Anchor link to header"></a></h5>
<p>The Green-Ampt approach varies the rate of infiltration over time based on the soil’s hydraulic conductivity, suction, porosity and initial moisture content. The method assumes that as water begins to infiltrate into the soil, a line develops differentiating between the “dry” soil (with moisture content<span class="math inline">\(\ \theta_{i}\)</span>) and the “wet” soil (with moisture content equal to the porosity of the soil <em>η</em>). As the infiltrated water continues to move through the soil profile in a vertical direction, the soil moisture changes instantly from the initial content to a saturated state. This concept is presented in Figure <a href="Common-2.html#fig:fig-image109">7.15</a>.</p>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:fig-image109"></span>
<img src="images/image109a.png" alt="Green-Ampt Model Concept[^2]"  />
<p class="caption">
Figure 7.15: Green-Ampt Model Concept<a href="#fn2" class="footnote-ref" id="fnref2"><sup>2</sup></a>
</p>
</div>
<p>The basic form of the Green-Ampt equation is expressed as follows:</p>
<p><span class="math display" id="eq:equ-GA">\[\begin{equation}
f(t) = K\left( 1 + \ \frac{\mathrm{\Delta}\theta\left( \varphi + h_{0} \right)}{F(t)} \right)
\tag{7.7}
\end{equation}\]</span></p>
<p>Where:</p>
<ul>
<li><span class="math inline">\(t\)</span> = time<br />
</li>
<li><span class="math inline">\(K\)</span> = saturated hydraulic conductivity<br />
</li>
<li><span class="math inline">\(\mathrm{\Delta}\theta\)</span> = defined as the soil capacity (the difference between the saturated and initial moisture content)<br />
</li>
<li><span class="math inline">\(\varphi\)</span> = soil suction head<br />
</li>
<li><span class="math inline">\(h_{0}\)</span> = depth of ponded water<br />
</li>
<li><span class="math inline">\(F(t)\)</span> = cumulative infiltration calculated from:</li>
</ul>
<p><span class="math display" id="eq:green-ampt-infiltration">\[\begin{equation}
F(t) - \ \mathrm{\Delta}\theta\left( \varphi + h_{0} \right)\ln\left( 1\  + \ \frac{F(t)}{\mathrm{\Delta}\theta\left( \varphi + h_{0} \right)} \right) = Kt
\tag{7.8}
\end{equation}\]</span></p>
<p>The <a href="https://wiki.tuflow.com/Green-Ampt_Infiltration_Parameters">TUFLOW Wiki Green-Ampt Infiltration Parameters</a> provides a detail description of the various Green-Ampt parameters, including how each influences the soil infiltration behaviour.</p>
<p>Models using the Green-Ampt infiltration loss approach are provided in the <a href="https://wiki.tuflow.com/TUFLOW_Example_Models#Soil_Options">Soil Options Example Model Dataset</a> on the TUFLOW Wiki.</p>
<p>United States Department of Agriculture (USDA) soil types have been hardwired into TUFLOW and are presented in Table <a href="Common-2.html#tab:tab-GreenAmpt">7.14</a>, along with the soil parameters. Alternatively, it is possible to define a customised soil type by specifying user defined values as shown in Table <a href="Common-2.html#tab:tab-tsoilf">7.15</a>.</p>
<table>
<caption>
<span id="tab:tab-GreenAmpt">Table 7.14: </span><strong>USDA Soil types for the Green-Ampt Infiltration Method</strong>
</caption>
<thead>
<tr>
<th style="text-align:left;font-weight: bold;color: WHITE !important;background-color: #1ABDC9 !important;">
USDA Soil Type
</th>
<th style="text-align:center;font-weight: bold;color: WHITE !important;background-color: #1ABDC9 !important;">
Suction (mm)
</th>
<th style="text-align:center;font-weight: bold;color: WHITE !important;background-color: #1ABDC9 !important;">
Suction (inches)
</th>
<th style="text-align:center;font-weight: bold;color: WHITE !important;background-color: #1ABDC9 !important;">
Hydraulic Conductivity (mm/hr)
</th>
<th style="text-align:center;font-weight: bold;color: WHITE !important;background-color: #1ABDC9 !important;">
Hydraulic Conductivity (in/hr)
</th>
<th style="text-align:center;font-weight: bold;color: WHITE !important;background-color: #1ABDC9 !important;">
Porosity (Fraction)
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
Clay
</td>
<td style="text-align:center;">
316.3
</td>
<td style="text-align:center;">
12.453
</td>
<td style="text-align:center;">
0.3
</td>
<td style="text-align:center;">
0.012
</td>
<td style="text-align:center;">
0.385
</td>
</tr>
<tr>
<td style="text-align:left;">
Silty Clay
</td>
<td style="text-align:center;">
292.2
</td>
<td style="text-align:center;">
11.504
</td>
<td style="text-align:center;">
0.5
</td>
<td style="text-align:center;">
0.020
</td>
<td style="text-align:center;">
0.423
</td>
</tr>
<tr>
<td style="text-align:left;">
Sandy Clay
</td>
<td style="text-align:center;">
239.0
</td>
<td style="text-align:center;">
9.409
</td>
<td style="text-align:center;">
0.6
</td>
<td style="text-align:center;">
0.024
</td>
<td style="text-align:center;">
0.321
</td>
</tr>
<tr>
<td style="text-align:left;">
Clay Loam
</td>
<td style="text-align:center;">
208.8
</td>
<td style="text-align:center;">
8.220
</td>
<td style="text-align:center;">
1.0
</td>
<td style="text-align:center;">
0.039
</td>
<td style="text-align:center;">
0.309
</td>
</tr>
<tr>
<td style="text-align:left;">
Silty Clay Loam
</td>
<td style="text-align:center;">
273.0
</td>
<td style="text-align:center;">
10.748
</td>
<td style="text-align:center;">
1.0
</td>
<td style="text-align:center;">
0.039
</td>
<td style="text-align:center;">
0.432
</td>
</tr>
<tr>
<td style="text-align:left;">
Sandy Clay Loam
</td>
<td style="text-align:center;">
218.5
</td>
<td style="text-align:center;">
8.602
</td>
<td style="text-align:center;">
1.5
</td>
<td style="text-align:center;">
0.059
</td>
<td style="text-align:center;">
0.330
</td>
</tr>
<tr>
<td style="text-align:left;">
Silt Loam
</td>
<td style="text-align:center;">
166.8
</td>
<td style="text-align:center;">
6.567
</td>
<td style="text-align:center;">
3.4
</td>
<td style="text-align:center;">
0.134
</td>
<td style="text-align:center;">
0.486
</td>
</tr>
<tr>
<td style="text-align:left;">
Loam
</td>
<td style="text-align:center;">
88.9
</td>
<td style="text-align:center;">
3.500
</td>
<td style="text-align:center;">
7.6
</td>
<td style="text-align:center;">
0.299
</td>
<td style="text-align:center;">
0.434
</td>
</tr>
<tr>
<td style="text-align:left;">
Sandy Loam
</td>
<td style="text-align:center;">
110.1
</td>
<td style="text-align:center;">
4.335
</td>
<td style="text-align:center;">
10.9
</td>
<td style="text-align:center;">
0.429
</td>
<td style="text-align:center;">
0.412
</td>
</tr>
<tr>
<td style="text-align:left;">
Loamy Sand
</td>
<td style="text-align:center;">
61.3
</td>
<td style="text-align:center;">
2.413
</td>
<td style="text-align:center;">
29.9
</td>
<td style="text-align:center;">
1.177
</td>
<td style="text-align:center;">
0.401
</td>
</tr>
<tr>
<td style="text-align:left;">
Sand
</td>
<td style="text-align:center;">
49.5
</td>
<td style="text-align:center;">
1.949
</td>
<td style="text-align:center;">
117.8
</td>
<td style="text-align:center;">
4.638
</td>
<td style="text-align:center;">
0.417
</td>
</tr>
</tbody>
</table>
<p>The Green-Ampt approach is appropriate for simulating single rainfall events where the evapotranspiration and gravity-driven drainage is not significant. The 2023-03 release introduced functionality in TUFLOW HPC to allow for horizontal movement of soil water (Section <a href="HPC-specific-2.html#hhc-5">7.3.5.2.1</a>), to extend TUFLOW’s capacity to conduct long term simulations with multiple rainfall events. This means, ideally, the initial soil moisture and the cumulative infiltration must be ‘reset’ before each rainfall event. The 2023-03 release implemented a simple change to the Green-Ampt equation to consider the changing initial soil moisture and the cumulative infiltration.</p>
<p><span class="math display" id="eq:equ-GA2">\[\begin{equation}
f(t) = K\left( 1 + \ \frac{\phi\left( \varphi + h_{0} \right)}{h_{soil}} \right)
\tag{7.9}
\end{equation}\]</span></p>
<p>Where:</p>
<ul>
<li><span class="math inline">\(\phi\)</span> = porosity of the soil<br />
</li>
<li><span class="math inline">\(h_{soil}\)</span> = Soil water depth.</li>
</ul>
<p>The initial moisture is no longer used to set <span class="math inline">\(\mathrm{\Delta}\theta\)</span> (the difference between the saturated and initial moisture content) in Equation <a href="Common-2.html#eq:equ-GA">(7.7)</a>, and the cumulative infiltration is replaced by the soil water depth at the time rainfall event.</p>
<p>These two approaches produce slightly different results for the infiltration rate with the Green-Ampt method. If the previous approach is required, and the model has only one soil layer and no horizontal advection, then it can be selected by using the <tcmd><a href="TCFCommands-1.html#tcfDefaults">Defaults</a> </tcmd><teq>==</teq><tblk> Pre 2023</tblk> command.</p>
</div>
<div id="HO-5" class="section level5 hasAnchor" number="7.2.7.1.2">
<h5><span class="header-section-number">7.2.7.1.2</span> Horton (HO)<a href="Common-2.html#HO-5" class="anchor-section" aria-label="Anchor link to header"></a></h5>
<p>The Horton approach to infiltration uses the following equation:</p>
<p><span class="math display" id="eq:equ-HO">\[\begin{equation}
{f = f}_{c} + \left( f_{0} - f_{c} \right)e^{- kt}
\tag{7.10}
\end{equation}\]</span></p>
<p>Where:</p>
<ul>
<li><span class="math inline">\(f_0\)</span> is the initial infiltration rate in mm/hr or inches/hr (if using <tcmd><a href="TCFCommands-1.html#tcfUnits">Units</a></tcmd><teq> == </teq><tblk> US Customary</tblk>)<br />
</li>
<li><span class="math inline">\(f_c\)</span> is the final (indefinite) infiltration rate<br />
</li>
<li><span class="math inline">\(t\)</span> is time in hours (period of time that the cell is wet)<br />
</li>
<li><span class="math inline">\(k\)</span> is the Horton decay rate.</li>
</ul>
<p>If an initial loss (IL) is specified, the initial loss is applied first, followed by the Horton infiltration. Figure <a href="Common-2.html#fig:fig-image110">7.16</a> shows an example of how the infiltration rate varies over time for <span class="math inline">\(f_0\)</span> equal to 3, <span class="math inline">\(f_c\)</span> equal to 1 and <span class="math inline">\(k\)</span> equal to 0.1.</p>
<p>Models using the Horton infiltration loss approach are provided in the <a href="https://wiki.tuflow.com/TUFLOW_Example_Models#Soil_Options">Soil Options Example Model Dataset</a> on the TUFLOW Wiki.</p>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:fig-image110"></span>
<img src="images/image110.jpeg" alt="Example of Horton Infiltration Rate over Time"  />
<p class="caption">
Figure 7.16: Example of Horton Infiltration Rate over Time
</p>
</div>
</div>
<div id="ILCL-5" class="section level5 hasAnchor" number="7.2.7.1.3">
<h5><span class="header-section-number">7.2.7.1.3</span> Initial Loss/Continuing Loss (ILCL)<a href="Common-2.html#ILCL-5" class="anchor-section" aria-label="Anchor link to header"></a></h5>
<p>The Initial Loss/Continuing Loss (IL/CL) method is a more simplistic approach compared to the Green-Ampt and Horton infiltration methods. The IL/CL method infiltrates water based on an initial volume (at any rate) then transitions to a constant rate after the initial loss volume is exceeded.</p>
<p><strong>Note that the IL/CL infiltration is separate to the IL/CL materials values used to generate excess rainfall for direct rainfall simulations (refer to Section <a href="Common-2.html#Rainfall-Losses-4">7.2.6.4</a> for further information).</strong></p>
<p>Models using the IL/CL infiltration loss approach are provided in the <a href="https://wiki.tuflow.com/TUFLOW_Example_Models#Soil_Options">Soil Options Example Model Dataset</a> on the TUFLOW Wiki.</p>
</div>
</div>
<div id="tsoilf-4" class="section level4 hasAnchor" number="7.2.7.2">
<h4><span class="header-section-number">7.2.7.2</span> Soils File (.tsoilf)<a href="Common-2.html#tsoilf-4" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Soils infiltration is applied to the model by defining a soils (.tsoilf) file, which is read into the .tcf using the <a href="TCFCommands-1.html#tcfReadSoilsFile">Read Soils File</a> command. Table <a href="Common-2.html#tab:tab-tsoilf">7.15</a> presents the parameters of the .tsoilf file and Figure <a href="Common-2.html#fig:fig-image111">7.17</a> shows an example of a completed file. A number of example models demonstrating the various soil options are available on the <a href="https://wiki.tuflow.com/TUFLOW_Example_Models#Soil_Options">TUFLOW Wiki Soil Options</a>. The soils (.tsoilf) file is similar to the materials file where you assign a positive integer ID to each soil, define the infiltration method (options are “NONE”, “GA”, “HO” and “ILCL”) followed by the soil parameters as the remaining
values. The Porosity (saturated moisture content), Initial Moisture (fraction of the soil that is initially wet), Max Ponding Depth and Horizontal Hydraulic Conductivity are all optional with default values of 1.0, 0.0, 0.0 and 0.0 respectively.</p>
<p><strong>Note: Table <a href="Common-2.html#tab:tab-tsoilf">7.15</a> does not include the additional attributes in regards to horizontal advection or the two addiitonal soil types available if using TUFLOW HPC (SCS and convection). For these attributes, refer to Table <a href="HPC-specific-2.html#tab:tab-tsoilf-hpc">7.27</a> instead. </strong></p>
<table>
<caption>
<span id="tab:tab-tsoilf">Table 7.15: </span>Soil File (.tsoilf) Parameters
</caption>
<thead>
<tr>
<th style="text-align:right;font-weight: bold;color: WHITE !important;background-color: #1ABDC9 !important;">
Column No. 
</th>
<th style="text-align:left;font-weight: bold;color: WHITE !important;background-color: #1ABDC9 !important;">
No Intriltration
</th>
<th style="text-align:left;font-weight: bold;color: WHITE !important;background-color: #1ABDC9 !important;">
Green-Ampt
</th>
<th style="text-align:left;font-weight: bold;color: WHITE !important;background-color: #1ABDC9 !important;">
Green-Ampt
</th>
<th style="text-align:left;font-weight: bold;color: WHITE !important;background-color: #1ABDC9 !important;">
Horton
</th>
<th style="text-align:left;font-weight: bold;color: WHITE !important;background-color: #1ABDC9 !important;">
Initial/Continuing Loss
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right;">
1
</td>
<td style="text-align:left;">
Soil ID
</td>
<td style="text-align:left;">
Soil ID
</td>
<td style="text-align:left;">
Soil ID
</td>
<td style="text-align:left;">
Soil ID
</td>
<td style="text-align:left;">
Soil ID
</td>
</tr>
<tr>
<td style="text-align:right;">
2
</td>
<td style="text-align:left;">
NONE
</td>
<td style="text-align:left;">
GA
</td>
<td style="text-align:left;">
GA
</td>
<td style="text-align:left;">
HO
</td>
<td style="text-align:left;">
ILCL
</td>
</tr>
<tr>
<td style="text-align:right;">
3
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
USDA Soil Type (see Table <a href="Common-2.html#tab:tab-GreenAmpt">7.14</a>) (mandatory)
</td>
<td style="text-align:left;">
Suction (mm or inches) (mandatory)
</td>
<td style="text-align:left;">
Initial Loss (mm or inches) (mandatory)
</td>
<td style="text-align:left;">
Initial Loss (mm or inches) (mandatory)
</td>
</tr>
<tr>
<td style="text-align:right;">
4
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
Initial Moisture (Fraction) (optional)
</td>
<td style="text-align:left;">
Hydraulic Conductivity (mm/h or in/h) (mandatory)
</td>
<td style="text-align:left;">
Initial Loss Rate (<span class="math inline">\(f_0\)</span>) (mm/h or in/h) (mandatory)
</td>
<td style="text-align:left;">
Continuing Loss (mm/h or in/h) (mandatory)
</td>
</tr>
<tr>
<td style="text-align:right;">
5
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
Max Ponding Depth (m or ft) (optional)
</td>
<td style="text-align:left;">
Porosity (Fraction) (mandatory)
</td>
<td style="text-align:left;">
Final Loss Rate (<span class="math inline">\(f_c\)</span>) (mm/h or in/h) (mandatory)
</td>
<td style="text-align:left;">
Porosity (Fraction) (optional)
</td>
</tr>
<tr>
<td style="text-align:right;">
6
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
Initial Moisture (Fraction) (optional)
</td>
<td style="text-align:left;">
Exponential Decay Rate (k) (<span class="math inline">\(h^{-1}\)</span>) (mandatory)
</td>
<td style="text-align:left;">
Initial Moisture (Fraction) (optional)
</td>
</tr>
<tr>
<td style="text-align:right;">
7
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
Max Ponding Depth (m or ft) (optional)
</td>
<td style="text-align:left;">
Porosity (Fraction) (optional)
</td>
<td style="text-align:left;">
</td>
</tr>
<tr>
<td style="text-align:right;">
8
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
Initial Moisture (Fraction) (optional)
</td>
<td style="text-align:left;">
</td>
</tr>
</tbody>
</table>
<p>Note for the Green-Ampt method:</p>
<ul>
<li>the initial moisture and porosity values in Table <a href="Common-2.html#tab:tab-tsoilf">7.15</a> above are fractions. The soil capacity is defined as the difference between the saturated moisture content (porosity) and the initial moisture content, hence the initial moisture should not exceed the porosity otherwise the soil capacity is set to zero and no infiltration will occur for that soil type. A <a href="https://wiki.tuflow.com/TUFLOW_Message_2508">WARNING 2508</a> is issued if this occurs.<br />
</li>
<li>the max ponding depth value is an optional value that can be used, if desired, to set a limit for the depth of ponded water (<span class="math inline">\(h_0\)</span>) value used in the Green-Ampt Equation <a href="Common-2.html#eq:equ-GA">(7.7)</a>. The minimum of the water depth and the max ponding depth value is used as the <span class="math inline">\(h_0\)</span> value. The default max ponding depth value is 0, to be consistent with the basic form of the Green-Ampt equation, as hydrology models do not necessarily have a depth calculated at cells.</li>
</ul>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:fig-image111"></span>
<img src="images/image111.png" alt=" Example Soils .tsoilf File Format"  />
<p class="caption">
Figure 7.17:  Example Soils .tsoilf File Format
</p>
</div>
<p>One or more soils need to be specified globally and/or via GIS layers/raster grids to activate the infiltration feature. The first attribute of the GIS layer/s must be the Soil ID referenced within the .tsoilf file, in the same way that a 2d_mat layer references a Material ID stored within the materials .tmf or .csv file.</p>
<table>
<caption>
<span id="tab:tab-SoilAttribute">Table 7.16: </span><strong>2D Soil (2d_soil) GIS Attribute Descriptions</strong>
</caption>
<thead>
<tr>
<th style="text-align:right;font-weight: bold;color: WHITE !important;background-color: #1ABDC9 !important;">
No. 
</th>
<th style="text-align:left;font-weight: bold;color: WHITE !important;background-color: #1ABDC9 !important;">
Default GIS Attribute Name
</th>
<th style="text-align:left;font-weight: bold;color: WHITE !important;background-color: #1ABDC9 !important;">
Description
</th>
<th style="text-align:left;font-weight: bold;color: WHITE !important;background-color: #1ABDC9 !important;">
Type
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right;">
1
</td>
<td style="text-align:left;">
Soil
</td>
<td style="text-align:left;">
The soil ID value referenced within a Soils File (see Table <a href="Common-2.html#tab:tab-tsoilf">7.15</a>).
</td>
<td style="text-align:left;">
Integer
</td>
</tr>
</tbody>
</table>
<p>Each soil type can have a different infiltration method and infiltration parameters assigned to it, including a no infiltration option, as shown in Table <a href="Common-2.html#tab:tab-tsoilf">7.15</a>. Other parameters that can optionally be set are:</p>
<ul>
<li>The imperviousness of the surface (see Fraction Impervious parameter within the materials definition in Table <a href="Common-2.html#tab:tab-MaterialsFile">7.13</a> or Table <a href="Common-2.html#tab:tab-MaterialsFormat">7.12</a>); and<br />
</li>
<li>Groundwater or impervious level beneath the ground surface (refer to Section <a href="InitialConditions-2.html#IGW-3">8.8.2</a>).</li>
</ul>
<p>The current limit to the number of soils types is 1,000 for TUFLOW Classic simulations and 255 for TUFLOW HPC simulations.</p>
</div>
</div>
<div id="HydraulicStructures-3" class="section level3 hasAnchor" number="7.2.8">
<h3><span class="header-section-number">7.2.8</span> Hydraulic Structures<a href="Common-2.html#HydraulicStructures-3" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div id="HydraulicStructuresIntro-4" class="section level4 hasAnchor" number="7.2.8.1">
<h4><span class="header-section-number">7.2.8.1</span> Introduction<a href="Common-2.html#HydraulicStructuresIntro-4" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<!--PAR to EFC: don't talk in detail about method D, suggest to use 2d_bg instead. The loss approach is the same-->
<!--EFC: Method D removed. SHG recalled that we decided not to mention it at all-->
<p>Bridges, box culverts and other structures that constrict flow can be modelled in 2D directly, rather than using 1D elements, provided the flow width of the structure is of a similar or larger size than the 2D cell size. Cells are modified in their height (invert and obvert) and width. For bridges, additional losses associated with piers and flow reaching the underside of the deck are specified. For box culverts, the additional resistance for vertical walls is specified. Additional form losses (energy head losses) can be specified for all flow constrictions.</p>
<p>Weir flow (across levees and other embankments) is modelled in 2D domains by default, this is handled differently between TUFLOW Classic and TUFLOW HPC. Refer to Sections <a href="CLASpecific-2.html#CLA-US-Controlled-3">7.4.2</a> and <a href="HPC-specific-2.html#HPC-US-Controlled-3">7.3.4</a> respectively.</p>
<p>Modelling hydraulic structures in 2D domains must be carried out with a good understanding of the limitations of different approaches and the different flow regimes possible. The modeller must understand why and where the energy losses occur when assigning form losses to a 2D cell or contraction and expansion losses to a 1D element <span class="citation">(<a href="references.html#ref-Syme2001b">Syme, 2001b</a>)</span>.</p>
<p>It is important to note that contraction and expansion losses associated with structures are modelled differently in 1D and 2D schemes. 1D schemes rely on applying form loss coefficients, as they cannot simulate the horizontal or vertical changes in velocity direction and speed. 2D schemes model these horizontal changes and do not require the introduction of form losses to the same extent as that required for 1D schemes. 2D schemes still however require the introduction of additional form losses since they do not model losses in the vertical or fine-scale horizontal effects (such as around a bridge pier). See <span class="citation">Syme (<a href="references.html#ref-Syme2001b">2001b</a>)</span> for further details.</p>
<p>The following webinars by Bill Syme and Greg Collecutt (two TUFLOW Developers) discuss the theory behind the energy losses and affluxes modelling associated with hydraulic structures.</p>
<ul>
<li><a href="https://www.tuflow.com/library/webinars/#structures">Modelling Energy Losses at Structures</a></li>
<li><a href="https://www.tuflow.com/library/webinars/#nov2022_hydraulic_modelling_bridge">1D, 2D &amp; 3D Hydraulic Modelling of Bridges</a></li>
</ul>
<p>Additionally, <a href="https://wiki.tuflow.com/TUFLOW_2D_Hydraulic_Structures">the 2D Hydralic Structures Wiki Page</a> contains information regarding 2D hydraulic structures, including theory, setup and Frequently Asked Questions (FAQs).</p>
<p>It is recommended that the losses through a structure be validated through:</p>
<ul>
<li>Calibration to recorded information (if available).</li>
<li>Cross-checked using desktop calculations based on theory and/or standard publications (e.g. “Hydraulics of Bridge Waterways” <span class="citation">(<a href="references.html#ref-Bradley1978">Bradley, 1978</a>)</span> or “Guide to Bridge Technology Part 8, Hydraulic Design of Waterway Structures” <span class="citation">(<a href="references.html#ref-Austroads2018">Austroads, 2018</a>)</span>.</li>
<li>Crosschecked with results using other hydraulic software.</li>
</ul>
<p>To validate structure flows and energy losses:</p>
<ul>
<li>Specify time-series output (PO) lines of flow (Q_) and flow area (QA) across the structure (see Section <a href="TimeSeries-2.html#TwoDTS-3">11.3.2</a>). Upstream and downstream water levels may also be specified using PO points or extracted from the map (e.g. XMDF) output.<br />
</li>
<li>Using the upstream and downstream water levels, determine whether flow is upstream or downstream controlled and estimate the flow using theoretical equations or other methods.<br />
</li>
<li>Using publications such as “Hydraulics of Bridge Waterways” <span class="citation">(<a href="references.html#ref-Bradley1978">Bradley, 1978</a>)</span> or “Guide to Bridge Technology Part 8, Hydraulic Design of Waterway Structures” <span class="citation">(<a href="references.html#ref-Austroads2018">Austroads, 2018</a>)</span>, determine the energy loss coefficient and compare this with the total energy loss calculated in the model. The total energy loss is given below. Clearly, any energy losses associated with bed resistance (e.g. Manning’s equation) need to be allowed for by subtracting this term from the calculated head difference <span class="math inline">\({(h}_{1} - h_{2})\)</span>.<br />
<span class="math display" id="eq:energy-loss-head-diff">\[\begin{equation}
\zeta_{total} = {(h}_{1} - h_{2})\frac{2g}{V^{2}}
\tag{7.11}
\end{equation}\]</span><br />
Where:
<ul>
<li><span class="math inline">\(\zeta_{total}\)</span> = total energy loss<br />
</li>
<li><span class="math inline">\(h_{1}\)</span> = upstream head<br />
</li>
<li><span class="math inline">\(h_{2}\)</span> = downstream head<br />
</li>
<li><span class="math inline">\(V\)</span> = depth and width averaged velocity (i.e. <span class="math inline">\(\frac{Q\_}{QA}\)</span>)</li>
</ul></li>
</ul>
<p>Table <a href="Common-2.html#tab:tab-ModellingApproaches">7.17</a> lists the recommended approaches for modelling 1D and 2D structures using TUFLOW. This is discussed further in the following paragraphs.</p>
<table>
<caption>
<span id="tab:tab-ModellingApproaches">Table 7.17: </span><strong>Hydraulic Structure Modelling Approaches</strong>
</caption>
<thead>
<tr>
<th style="text-align:left;font-weight: bold;color: WHITE !important;background-color: #1ABDC9 !important;">
Structure
</th>
<th style="text-align:left;font-weight: bold;color: WHITE !important;background-color: #1ABDC9 !important;">
1D Approach
</th>
<th style="text-align:left;font-weight: bold;color: WHITE !important;background-color: #1ABDC9 !important;">
2D Approach
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
Box Culvert<br />
(For culverts with a steep slope, use a 1D element)
</td>
<td style="text-align:left;">
OK
</td>
<td style="text-align:left;">
OK
</td>
</tr>
<tr>
<td style="text-align:left;">
Circular Culvert
</td>
<td style="text-align:left;">
OK
</td>
<td style="text-align:left;">
N/A
</td>
</tr>
<tr>
<td style="text-align:left;">
Bridge
</td>
<td style="text-align:left;">
OK
</td>
<td style="text-align:left;">
OK
</td>
</tr>
<tr>
<td style="text-align:left;">
Weirs
</td>
<td style="text-align:left;">
OK
</td>
<td style="text-align:left;">
OK
</td>
</tr>
</tbody>
</table>
<p><strong>1D Approach</strong></p>
<p>1D structures are discussed in Section <a href="Structures-2.html#Structures-2">5.7</a>. 1D modelling is the preferred approach where the total structure width is less than one or two 2D cells. Entry and/or exit losses are defined for each structure. Testing has shown that these losses may need to be reduced where the structure width is significant compared with the cell size <span class="citation">(<a href="references.html#ref-Syme2001b">Syme, 2001b</a>)</span>.</p>
<p>1D structures can be linked to the 2D domain using either an SX or HX connection, as outlined in (see Section <a href="OneD2dLinking-2.html#OneD2dLinking-2">10.2</a>). The influence of these connection types on the modelled flow behaviour is shown in Figure <a href="Common-2.html#fig:fig-image114">7.20</a>.</p>
<p><strong>SX Link:</strong> Momentum is not transferred into or out of the 1D element to/from the 2D domain. “Suppressed” flow patterns in the 2D domain occur at the structure outlet when using 1D elements, especially if the structure width is significant compared with the cell size. The water tends to spread, rather than jet out, as there is no inertia across the link. The effect of this is illustrated in Figure <a href="Common-2.html#fig:fig-image113">7.19</a>, which shows the effect on flow patterns and the preservation of inertia across 1D/2D links when modelling a structure. Figure <a href="Common-2.html#fig:fig-image113">7.19</a> (red velocity arrows) is that using SX links, whilst Figure <a href="Common-2.html#fig:fig-image112">7.18</a> (green arrows) is that using a fully 2D solution. As can be seen, using a SX link the water tends to spread from the structure outlet, as opposed to forming a jet as in the fully 2D solution which is conserving momentum. When using the SX link, a jet like effect can be created using “wing walls” in the 2D domain at the structure outlet by assigning flood free elevations to the ZU and ZV Zpts either side of where the 1D element discharges into the 2D domain.</p>
<p><strong>HX Link:</strong> Momentum is not transferred into or out of the 1D element to/from the 2D domain, however the velocity field across the HX link is assumed to be undisturbed. Provided the HX link is appropriately located (i.e. perpendicular to the flow field) this produces the effect of preserving momentum, as illustrated by the dark blue arrows (Figure <a href="Common-2.html#fig:fig-image114">7.20</a>). Use of HX links at a structure may require a smaller 1D timestep than that required by a SX link.</p>
<p><strong>2D Approach</strong></p>
<p>2D representation of structures is preferred where the total structure width is greater than one or two 2D cells. The flow area must be adequately represented by the 2D Zpts and any adjustments to cell widths (see Section <a href="Common-2.html#lfcsh-4">7.2.8.3</a> and <a href="Common-2.html#bg-layer-4">7.2.8.2</a>. The head drop across the structure during different flow regimes should be validated against other methods and/or literature. Some additional form losses are normally required to achieve correct head drop (see <span class="citation">Syme (<a href="references.html#ref-Syme2001b">2001b</a>)</span>). Momentum is transferred through the structure as shown in the top image (green arrows) in Figure <a href="Common-2.html#fig:fig-image112">7.18</a>, providing more realistic flow patterns than using a 1D element with a SX link, as illustrated by the middle image (red arrows) in Figure <a href="Common-2.html#fig:fig-image113">7.19</a>.</p>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:fig-image112"></span>
<img src="images/image112.png" alt="Flow patterns using 2D FC cells (i.e. a fully 2D solution)"  />
<p class="caption">
Figure 7.18: Flow patterns using 2D FC cells (i.e. a fully 2D solution)
</p>
</div>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:fig-image113"></span>
<img src="images/image113.png" alt="Flow patterns using a 1D element connected to 2D SX links"  />
<p class="caption">
Figure 7.19: Flow patterns using a 1D element connected to 2D SX links
</p>
</div>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:fig-image114"></span>
<img src="images/image114.png" alt="Flow patterns using a 1D element connected to 2D HX links"  />
<p class="caption">
Figure 7.20: Flow patterns using a 1D element connected to 2D HX links
</p>
</div>
</div>
<div id="bg-layer-4" class="section level4 hasAnchor" number="7.2.8.2">
<h4><span class="header-section-number">7.2.8.2</span> 2D Bridge Structures (2d_bg)<a href="Common-2.html#bg-layer-4" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Modelling bridge structures in the 2D domain is possible using the BG Shape input layer (2d_bg). The 2d_bg layer facilitates the modelling of bridge structures based on research on energy losses <span class="citation">(<a href="references.html#ref-BridgeDeckAfflux">Collecutt et al., 2022</a>)</span>. This method is similar to the Layered Flow Constrictions (described below in Section <a href="Common-2.html#lfcsh-4">7.2.8.3</a>), however, some key updates have been made. The layers in a 2d_bg are called the “pier layer” and the “super structure layer”, which
consists of the “deck layer” and the “rail layer”.</p>
<p>Bridges can be defined as either a line or polygon GIS feature using the .tgc command <a href="TGCCommands-1.html#tgcReadGISBGShape">Read GIS BG Shape</a>. The layer attribute description is provided in Figure <a href="Common-2.html#fig:fig-2DBGAttributes">7.21</a> and Table <a href="Common-2.html#tab:tab-BridgeShapeAttributeDescriptions">7.18</a>.</p>
<p>Points can be used to spatially vary the bridge soffit, deck depth and rail depth, with the BG Shape points input layer (2d_bg_pts). The layer attribute description is provided in Table <a href="Common-2.html#tab:tab-BridgePointAttributeDescriptions">7.19</a>. This can be used to model an arch bridge or sloping deck. The point objects can be placed in a separate layer to the line or polygon GIS features.</p>
<p>The 2d_bg layer adjusts the FLC value in the vertical as follows:</p>
<p><span class="math display" id="eq:flc-value-vertical">\[\begin{equation}
\zeta_{total} = \left( \zeta_{pier} + \zeta_{SuperS}\frac{y_{SuperS}}{D_{IP}} \right)\frac{(y_{pier} + y_{SuperS})}{y_{total}}
\tag{7.12}
\end{equation}\]</span></p>
<p>Where:</p>
<ul>
<li><span class="math inline">\(\zeta_{pier}\)</span> = FLC of the pier layer.<br />
</li>
<li><span class="math inline">\(\zeta_{SuperS}\)</span> = FLC to the superstructure layer.<br />
</li>
<li><span class="math inline">\(y_{SuperS}\)</span> = depth of water in the superstructure layer (cannot exceed <span class="math inline">\(D_{IP}\)</span>).<br />
</li>
<li><span class="math inline">\(D_{IP}\)</span> = depth to the inflection point from the bridge soffit.<br />
</li>
<li><span class="math inline">\(y_{pier}\)</span> = depth of water in the pier layer (cannot exceed <span class="math inline">\(D_{pier}\)</span>).<br />
</li>
<li><span class="math inline">\(D_{pier}\)</span> = depth of the pier layer, i.e. from the bed elevation to the bridge soffit.<br />
</li>
<li><span class="math inline">\(\zeta_{total}\)</span> = overall form loss coefficient applied.</li>
</ul>
<p>The vertical distribution of the form loss coefficient has the following characteristics:</p>
<ul>
<li><p>Water level below the deck layer: The same result as the 2d_lfcsh approaches, i.e. a constant form loss based on that specified for the pier layer (<span class="math inline">\(\zeta_{pier}\)</span>) is applied.<br />
</p></li>
<li><p>Water level between the deck soffit and the inflection point: The FLC value is linearly increased from <span class="math inline">\(\zeta_{pier}\)</span> to <span class="math inline">\(\zeta_{pier} + \zeta_{SuperS}\)</span>. The observations from the CFD and the field measurement indicate the inflection point is located around 1.6 times the bridge deck depth above the bridge soffit. The “Inflection Depth” (<span class="math inline">\(D_{IP}\)</span>) is assumed as:<br />
<span class="math display" id="eq:inflection-depth">\[\begin{equation}
D_{IP} = {IPf}_{SuperS}D_{deck}\phi_{Deck}
\tag{7.13}
\end{equation}\]</span>
Where:</p>
<ul>
<li><span class="math inline">\({IPf}_{SuperS}\)</span> = a factor to set the elevation of the inflection point. (IP). Default is 1.6.<br />
</li>
<li><span class="math inline">\(D_{deck}\)</span> = depth of the bridge deck layer.<br />
</li>
<li><span class="math inline">\(\phi_{Deck}\)</span> = blockage of the bridge deck layer.</li>
</ul>
<p><br>
Note that the effect of partial blockage at the rail layer can be considered by adding the rail layer depth (<span class="math inline">\(D_{Rail}\)</span>) to the inflection depth proportionally based on the rail layer blockage (<span class="math inline">\(\phi_{Rail}\)</span>):
<span class="math display" id="eq:inflection-depth2">\[\begin{equation}
D_{IP} = {IPf}_{SuperS}\left( D_{deck}\phi_{Deck} + D_{Rail}\phi_{Rail} \right)
\tag{7.14}
\end{equation}\]</span>
Where:</p>
<ul>
<li><span class="math inline">\(D_{Rail}\)</span> = depth of the rail layer.<br />
</li>
<li><span class="math inline">\(\phi_{Rail}\)</span> = blockage of the rail layer.</li>
</ul>
<p><br></p></li>
<li><p>Above the inflection point the FLC gradually reduces with increasing depth (in a similar manner to the 2D Layered Flow Constrictions METHOD B and METHOD C approaches). This is to simulate the transition to drowned flow and tendency to zero energy losses with increasing depth over the bridge deck.</p></li>
</ul>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:fig-2DBGAttributes"></span>
<img src="images/image117.jpeg" alt="2D BG Shape Attributes and Vertical Distribution of Form Loss Coefficient" width="80%" />
<p class="caption">
Figure 7.21: 2D BG Shape Attributes and Vertical Distribution of Form Loss Coefficient
</p>
</div>
<p>The 2023-03-AD build implemented three extra approaches to adjust the FLC value between in the deck soffit and the inflection point:</p>
<p><tcmd><a href="TCFCommands-1.html#tcfBGFLCDefaultApproach">BG FLC Default Approach</a></tcmd><teq> == </teq><tblk>{LINEAR} | LINEAR-CONSTANT | PARABOLIC | INVERTED-PARABOLIC </tblk></p>
<ul>
<li>LINEAR: the default option introduced above. The depth averaged FLC value is linearly increased from the bottom of the bridge deck to the inflection point. After the inflection point it gradually reduces.</li>
<li>LINEAR-CONSTANT: the depth averaged FLC is linearly increased from the bottom of the bridge deck to the top of the bridge deck. Between the top of the bridge deck and the inflection point, the FLC is kept constant. After the inflection point it gradually reduces.</li>
<li>PARABOLIC: the depth averaged FLC is increased using a parabolic function from the bottom of the bridge deck to the inflection point. After the inflection point it gradually reduces.</li>
<li>INVERTED-PARABOLIC: the depth averaged FLC is increased using an inverted parabolic function from the bottom of the bridge deck to the inflection point. After the inflection point it gradually reduces.</li>
</ul>
<p>This approach can be changed for individual BG structure using the Options attribute (see Table <a href="Common-2.html#tab:tab-BridgeShapeAttributeDescriptions">7.18</a>). The vertical profiles of the depth averaged FLC values applied by the four methods are illustrated in the figure below:</p>
<center>
<div class="figure"><span style="display:block;" id="fig:fig-BGFLCApproach"></span>
<div class="plotly html-widget html-fill-item-overflow-hidden html-fill-item" id="htmlwidget-87d26a7c2fa9661a20b0" style="width:80%;height:480px;"></div>
<script type="application/json" data-for="htmlwidget-87d26a7c2fa9661a20b0">{"x":{"visdat":{"10d81a7a141c":["function () ","plotlyVisDat"]},"cur_data":"10d81a7a141c","attrs":{"10d81a7a141c":{"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"name":"LINEAR","y":[0,2,2.1000000000000001,2.2000000000000002,2.2999999999999998,2.3999999999999999,2.5,2.6000000000000001,2.7000000000000002,2.7999999999999998,2.8999999999999999,3,3.1000000000000001,3.2000000000000002,3.2999999999999998,3.3999999999999999,3.5,3.6000000000000001,3.7999999999999998,4,4.2000000000000002,4.4000000000000004,4.5999999999999996,4.7999999999999998,5,5.2000000000000002,5.4000000000000004,5.5999999999999996,5.7999999999999998],"x":[0.10000000000000001,0.10000000000000001,0.12500000000000003,0.15000000000000005,0.17499999999999996,0.19999999999999998,0.22500000000000001,0.25,0.27500000000000002,0.29999999999999993,0.32499999999999996,0.34999999999999998,0.375,0.40000000000000002,0.42499999999999993,0.44999999999999996,0.47500000000000009,0.50000000000000011,0.47368421052631593,0.45000000000000012,0.42857142857142866,0.40909090909090917,0.39130434782608708,0.37500000000000011,0.3600000000000001,0.34615384615384626,0.33333333333333343,0.32142857142857156,0.31034482758620702],"hovertemplate":"%{y:.2f}<extra><\/extra>","line":{"color":"rgb(26,189,201)"},"type":"scatter","mode":"lines","inherit":true},"10d81a7a141c.1":{"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"name":"LINEAR-CONSTANT","y":[0,2,2.1000000000000001,2.2000000000000002,2.2999999999999998,2.3999999999999999,2.5,2.6000000000000001,2.7000000000000002,2.7999999999999998,2.8999999999999999,3,3.1000000000000001,3.2000000000000002,3.2999999999999998,3.3999999999999999,3.5,3.6000000000000001,3.7999999999999998,4,4.2000000000000002,4.4000000000000004,4.5999999999999996,4.7999999999999998,5,5.2000000000000002,5.4000000000000004,5.5999999999999996,5.7999999999999998],"x":[0.10000000000000001,0.10000000000000001,0.14000000000000004,0.18000000000000008,0.21999999999999995,0.26000000000000001,0.30000000000000004,0.34000000000000008,0.38000000000000012,0.41999999999999993,0.45999999999999996,0.5,0.5,0.5,0.5,0.5,0.5,0.5,0.47368421052631593,0.45000000000000012,0.42857142857142866,0.40909090909090917,0.39130434782608708,0.37500000000000011,0.3600000000000001,0.34615384615384626,0.33333333333333343,0.32142857142857156,0.31034482758620702],"hovertemplate":"%{y:.2f}<extra><\/extra>","line":{"color":"rgb(0,85,129)"},"type":"scatter","mode":"lines","inherit":true},"10d81a7a141c.2":{"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"name":"PARABOLIC","y":[0,2,2.1000000000000001,2.2000000000000002,2.2999999999999998,2.3999999999999999,2.5,2.6000000000000001,2.7000000000000002,2.7999999999999998,2.8999999999999999,3,3.1000000000000001,3.2000000000000002,3.2999999999999998,3.3999999999999999,3.5,3.6000000000000001,3.7999999999999998,4,4.2000000000000002,4.4000000000000004,4.5999999999999996,4.7999999999999998,5,5.2000000000000002,5.4000000000000004,5.5999999999999996,5.7999999999999998],"x":[0.10000000000000001,0.10000000000000001,0.1484375,0.19375000000000009,0.23593749999999991,0.27500000000000002,0.31093749999999998,0.34375,0.37343750000000009,0.40000000000000002,0.42343750000000002,0.44374999999999998,0.4609375,0.47499999999999998,0.48593750000000002,0.49375000000000002,0.49843749999999998,0.5,0.47368421052631593,0.45000000000000012,0.42857142857142866,0.40909090909090917,0.39130434782608708,0.37500000000000011,0.3600000000000001,0.34615384615384626,0.33333333333333343,0.32142857142857156,0.31034482758620702],"hovertemplate":"%{y:.2f}<extra><\/extra>","line":{"color":"rgb(79,86,80)"},"type":"scatter","mode":"lines","inherit":true},"10d81a7a141c.3":{"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"name":"INVERTED-PARABOLIC","y":[0,2,2.1000000000000001,2.2000000000000002,2.2999999999999998,2.3999999999999999,2.5,2.6000000000000001,2.7000000000000002,2.7999999999999998,2.8999999999999999,3,3.1000000000000001,3.2000000000000002,3.2999999999999998,3.3999999999999999,3.5,3.6000000000000001,3.7999999999999998,4,4.2000000000000002,4.4000000000000004,4.5999999999999996,4.7999999999999998,5,5.2000000000000002,5.4000000000000004,5.5999999999999996,5.7999999999999998],"x":[0.10000000000000001,0.10000000000000001,0.10156250000000001,0.10625000000000001,0.11406249999999998,0.125,0.13906250000000001,0.15625000000000003,0.17656250000000007,0.19999999999999996,0.22656249999999997,0.25624999999999998,0.2890625,0.32500000000000007,0.36406249999999996,0.40624999999999989,0.45156249999999998,0.5,0.47368421052631593,0.45000000000000012,0.42857142857142866,0.40909090909090917,0.39130434782608708,0.37500000000000011,0.3600000000000001,0.34615384615384626,0.33333333333333343,0.32142857142857156,0.31034482758620702],"hovertemplate":"%{y:.2f}<extra><\/extra>","line":{"color":"rgb(226,1,119)"},"type":"scatter","mode":"lines","inherit":true}},"layout":{"margin":{"b":40,"l":60,"t":25,"r":10},"xaxis":{"domain":[0,1],"automargin":true,"title":"Depth Averaged FLC","range":[0,0.59999999999999998]},"yaxis":{"domain":[0,1],"automargin":true,"title":"Depth","range":[0,5]},"hovermode":"closest","showlegend":true},"source":"A","config":{"modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false,"displayModeBar":true,"displaylogo":false},"data":[{"name":"LINEAR","y":[0,2,2.1000000000000001,2.2000000000000002,2.2999999999999998,2.3999999999999999,2.5,2.6000000000000001,2.7000000000000002,2.7999999999999998,2.8999999999999999,3,3.1000000000000001,3.2000000000000002,3.2999999999999998,3.3999999999999999,3.5,3.6000000000000001,3.7999999999999998,4,4.2000000000000002,4.4000000000000004,4.5999999999999996,4.7999999999999998,5,5.2000000000000002,5.4000000000000004,5.5999999999999996,5.7999999999999998],"x":[0.10000000000000001,0.10000000000000001,0.12500000000000003,0.15000000000000005,0.17499999999999996,0.19999999999999998,0.22500000000000001,0.25,0.27500000000000002,0.29999999999999993,0.32499999999999996,0.34999999999999998,0.375,0.40000000000000002,0.42499999999999993,0.44999999999999996,0.47500000000000009,0.50000000000000011,0.47368421052631593,0.45000000000000012,0.42857142857142866,0.40909090909090917,0.39130434782608708,0.37500000000000011,0.3600000000000001,0.34615384615384626,0.33333333333333343,0.32142857142857156,0.31034482758620702],"hovertemplate":["%{y:.2f}<extra><\/extra>","%{y:.2f}<extra><\/extra>","%{y:.2f}<extra><\/extra>","%{y:.2f}<extra><\/extra>","%{y:.2f}<extra><\/extra>","%{y:.2f}<extra><\/extra>","%{y:.2f}<extra><\/extra>","%{y:.2f}<extra><\/extra>","%{y:.2f}<extra><\/extra>","%{y:.2f}<extra><\/extra>","%{y:.2f}<extra><\/extra>","%{y:.2f}<extra><\/extra>","%{y:.2f}<extra><\/extra>","%{y:.2f}<extra><\/extra>","%{y:.2f}<extra><\/extra>","%{y:.2f}<extra><\/extra>","%{y:.2f}<extra><\/extra>","%{y:.2f}<extra><\/extra>","%{y:.2f}<extra><\/extra>","%{y:.2f}<extra><\/extra>","%{y:.2f}<extra><\/extra>","%{y:.2f}<extra><\/extra>","%{y:.2f}<extra><\/extra>","%{y:.2f}<extra><\/extra>","%{y:.2f}<extra><\/extra>","%{y:.2f}<extra><\/extra>","%{y:.2f}<extra><\/extra>","%{y:.2f}<extra><\/extra>","%{y:.2f}<extra><\/extra>"],"line":{"color":"rgb(26,189,201)"},"type":"scatter","mode":"lines","marker":{"color":"rgba(31,119,180,1)","line":{"color":"rgba(31,119,180,1)"}},"error_y":{"color":"rgba(31,119,180,1)"},"error_x":{"color":"rgba(31,119,180,1)"},"xaxis":"x","yaxis":"y","frame":null},{"name":"LINEAR-CONSTANT","y":[0,2,2.1000000000000001,2.2000000000000002,2.2999999999999998,2.3999999999999999,2.5,2.6000000000000001,2.7000000000000002,2.7999999999999998,2.8999999999999999,3,3.1000000000000001,3.2000000000000002,3.2999999999999998,3.3999999999999999,3.5,3.6000000000000001,3.7999999999999998,4,4.2000000000000002,4.4000000000000004,4.5999999999999996,4.7999999999999998,5,5.2000000000000002,5.4000000000000004,5.5999999999999996,5.7999999999999998],"x":[0.10000000000000001,0.10000000000000001,0.14000000000000004,0.18000000000000008,0.21999999999999995,0.26000000000000001,0.30000000000000004,0.34000000000000008,0.38000000000000012,0.41999999999999993,0.45999999999999996,0.5,0.5,0.5,0.5,0.5,0.5,0.5,0.47368421052631593,0.45000000000000012,0.42857142857142866,0.40909090909090917,0.39130434782608708,0.37500000000000011,0.3600000000000001,0.34615384615384626,0.33333333333333343,0.32142857142857156,0.31034482758620702],"hovertemplate":["%{y:.2f}<extra><\/extra>","%{y:.2f}<extra><\/extra>","%{y:.2f}<extra><\/extra>","%{y:.2f}<extra><\/extra>","%{y:.2f}<extra><\/extra>","%{y:.2f}<extra><\/extra>","%{y:.2f}<extra><\/extra>","%{y:.2f}<extra><\/extra>","%{y:.2f}<extra><\/extra>","%{y:.2f}<extra><\/extra>","%{y:.2f}<extra><\/extra>","%{y:.2f}<extra><\/extra>","%{y:.2f}<extra><\/extra>","%{y:.2f}<extra><\/extra>","%{y:.2f}<extra><\/extra>","%{y:.2f}<extra><\/extra>","%{y:.2f}<extra><\/extra>","%{y:.2f}<extra><\/extra>","%{y:.2f}<extra><\/extra>","%{y:.2f}<extra><\/extra>","%{y:.2f}<extra><\/extra>","%{y:.2f}<extra><\/extra>","%{y:.2f}<extra><\/extra>","%{y:.2f}<extra><\/extra>","%{y:.2f}<extra><\/extra>","%{y:.2f}<extra><\/extra>","%{y:.2f}<extra><\/extra>","%{y:.2f}<extra><\/extra>","%{y:.2f}<extra><\/extra>"],"line":{"color":"rgb(0,85,129)"},"type":"scatter","mode":"lines","marker":{"color":"rgba(255,127,14,1)","line":{"color":"rgba(255,127,14,1)"}},"error_y":{"color":"rgba(255,127,14,1)"},"error_x":{"color":"rgba(255,127,14,1)"},"xaxis":"x","yaxis":"y","frame":null},{"name":"PARABOLIC","y":[0,2,2.1000000000000001,2.2000000000000002,2.2999999999999998,2.3999999999999999,2.5,2.6000000000000001,2.7000000000000002,2.7999999999999998,2.8999999999999999,3,3.1000000000000001,3.2000000000000002,3.2999999999999998,3.3999999999999999,3.5,3.6000000000000001,3.7999999999999998,4,4.2000000000000002,4.4000000000000004,4.5999999999999996,4.7999999999999998,5,5.2000000000000002,5.4000000000000004,5.5999999999999996,5.7999999999999998],"x":[0.10000000000000001,0.10000000000000001,0.1484375,0.19375000000000009,0.23593749999999991,0.27500000000000002,0.31093749999999998,0.34375,0.37343750000000009,0.40000000000000002,0.42343750000000002,0.44374999999999998,0.4609375,0.47499999999999998,0.48593750000000002,0.49375000000000002,0.49843749999999998,0.5,0.47368421052631593,0.45000000000000012,0.42857142857142866,0.40909090909090917,0.39130434782608708,0.37500000000000011,0.3600000000000001,0.34615384615384626,0.33333333333333343,0.32142857142857156,0.31034482758620702],"hovertemplate":["%{y:.2f}<extra><\/extra>","%{y:.2f}<extra><\/extra>","%{y:.2f}<extra><\/extra>","%{y:.2f}<extra><\/extra>","%{y:.2f}<extra><\/extra>","%{y:.2f}<extra><\/extra>","%{y:.2f}<extra><\/extra>","%{y:.2f}<extra><\/extra>","%{y:.2f}<extra><\/extra>","%{y:.2f}<extra><\/extra>","%{y:.2f}<extra><\/extra>","%{y:.2f}<extra><\/extra>","%{y:.2f}<extra><\/extra>","%{y:.2f}<extra><\/extra>","%{y:.2f}<extra><\/extra>","%{y:.2f}<extra><\/extra>","%{y:.2f}<extra><\/extra>","%{y:.2f}<extra><\/extra>","%{y:.2f}<extra><\/extra>","%{y:.2f}<extra><\/extra>","%{y:.2f}<extra><\/extra>","%{y:.2f}<extra><\/extra>","%{y:.2f}<extra><\/extra>","%{y:.2f}<extra><\/extra>","%{y:.2f}<extra><\/extra>","%{y:.2f}<extra><\/extra>","%{y:.2f}<extra><\/extra>","%{y:.2f}<extra><\/extra>","%{y:.2f}<extra><\/extra>"],"line":{"color":"rgb(79,86,80)"},"type":"scatter","mode":"lines","marker":{"color":"rgba(44,160,44,1)","line":{"color":"rgba(44,160,44,1)"}},"error_y":{"color":"rgba(44,160,44,1)"},"error_x":{"color":"rgba(44,160,44,1)"},"xaxis":"x","yaxis":"y","frame":null},{"name":"INVERTED-PARABOLIC","y":[0,2,2.1000000000000001,2.2000000000000002,2.2999999999999998,2.3999999999999999,2.5,2.6000000000000001,2.7000000000000002,2.7999999999999998,2.8999999999999999,3,3.1000000000000001,3.2000000000000002,3.2999999999999998,3.3999999999999999,3.5,3.6000000000000001,3.7999999999999998,4,4.2000000000000002,4.4000000000000004,4.5999999999999996,4.7999999999999998,5,5.2000000000000002,5.4000000000000004,5.5999999999999996,5.7999999999999998],"x":[0.10000000000000001,0.10000000000000001,0.10156250000000001,0.10625000000000001,0.11406249999999998,0.125,0.13906250000000001,0.15625000000000003,0.17656250000000007,0.19999999999999996,0.22656249999999997,0.25624999999999998,0.2890625,0.32500000000000007,0.36406249999999996,0.40624999999999989,0.45156249999999998,0.5,0.47368421052631593,0.45000000000000012,0.42857142857142866,0.40909090909090917,0.39130434782608708,0.37500000000000011,0.3600000000000001,0.34615384615384626,0.33333333333333343,0.32142857142857156,0.31034482758620702],"hovertemplate":["%{y:.2f}<extra><\/extra>","%{y:.2f}<extra><\/extra>","%{y:.2f}<extra><\/extra>","%{y:.2f}<extra><\/extra>","%{y:.2f}<extra><\/extra>","%{y:.2f}<extra><\/extra>","%{y:.2f}<extra><\/extra>","%{y:.2f}<extra><\/extra>","%{y:.2f}<extra><\/extra>","%{y:.2f}<extra><\/extra>","%{y:.2f}<extra><\/extra>","%{y:.2f}<extra><\/extra>","%{y:.2f}<extra><\/extra>","%{y:.2f}<extra><\/extra>","%{y:.2f}<extra><\/extra>","%{y:.2f}<extra><\/extra>","%{y:.2f}<extra><\/extra>","%{y:.2f}<extra><\/extra>","%{y:.2f}<extra><\/extra>","%{y:.2f}<extra><\/extra>","%{y:.2f}<extra><\/extra>","%{y:.2f}<extra><\/extra>","%{y:.2f}<extra><\/extra>","%{y:.2f}<extra><\/extra>","%{y:.2f}<extra><\/extra>","%{y:.2f}<extra><\/extra>","%{y:.2f}<extra><\/extra>","%{y:.2f}<extra><\/extra>","%{y:.2f}<extra><\/extra>"],"line":{"color":"rgb(226,1,119)"},"type":"scatter","mode":"lines","marker":{"color":"rgba(214,39,40,1)","line":{"color":"rgba(214,39,40,1)"}},"error_y":{"color":"rgba(214,39,40,1)"},"error_x":{"color":"rgba(214,39,40,1)"},"xaxis":"x","yaxis":"y","frame":null}],"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.20000000000000001,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
<p class="caption">
Figure 7.22: Depth Averaged FLC Applied Using Four Adjustment Approaches
</p>
</div>
</center>
<p>Other key features of the BG layer that are different from the Layered
Flow Constriction are:</p>
<ul>
<li>The BG layer does not apply geometry updates. This not only offers simplicity, but also is a desirable option considering that the size of TIN polygons used to modify the bridge bed elevations are often different from the size of polygon used to select BG cell faces.<br />
</li>
<li>For a line layer a “Deck_Width” value of zero sets the layer as a thin line. It selects one row of faces in the direction of flow, and the FLC value is applied to the faces unchanged. A “Deck_Width” value larger than zero sets the layer as a thick line that selects a whole cell, i.e. two faces in the direction of flow. The FLC values at the faces are divided by two. The wide line feature is not supported by the BG layer. BG polygon shapes are recommended if more than 3 rows of faces must be selected.<br />
</li>
<li>For a polygon layer, the “Deck_Width” defines the bridge width in the predominant direction of flow. This value is used to distribute the total FLC value to the selected faces, i.e.:<br />
<span class="math display" id="eq:zeta-face">\[\begin{equation}
\zeta_{face} = \left( \frac{\zeta_{total}}{Deck\_Width} \right) \times Cell\ Size
\tag{7.15}
\end{equation}\]</span>
This means users no longer need to convert the FLC value to “form loss per metre”, which is required by the Layered Flow Constrictions polygons.</li>
</ul>
<p>The overall blockage of the face is calculated using the same method as the Layered Flow Constriction:</p>
<p><span class="math display" id="eq:overall-blockage-face">\[\begin{equation}
\phi_{total} = \frac{{(y}_{pier}\phi_{pier} + y_{deck}\phi_{deck} + y_{rail}\phi_{rail})}{y_{total}}
\tag{7.16}
\end{equation}\]</span></p>
<p>Where:</p>
<ul>
<li><span class="math inline">\(\phi_{n}\)</span> = layer n blockage.<br />
</li>
<li><span class="math inline">\(y_{n}\)</span> = layer n water depth (set to zero if dry and cannot exceed depth of layer).<br />
</li>
<li><span class="math inline">\(\phi_{total}\)</span> = overall cell face blockage applied.</li>
</ul>
<p>The FLC value applies an energy loss across 2D cell faces as:</p>
<p><span class="math display" id="eq:flc-energy-loss1">\[\begin{equation}
\mathrm{\Delta}h = \zeta_{total}\frac{V^{2}}{2g}
\tag{7.17}
\end{equation}\]</span></p>
<p>where <span class="math inline">\(V\)</span> is the 2D cell face velocity in the presence of the blockage. When setting the blockage values, considerations need to be taken into account whether the source of the FLC value is based on the approach velocity (the velocity in the absence of piers blockage) or structure velocity (the velocity with area blocked out by the piers). For example, Hydraulics of Bridge Waterways <span class="citation">(<a href="references.html#ref-Bradley1978">Bradley, 1978</a>)</span> or Guide to Bridge Technology <span class="citation">(<a href="references.html#ref-Austroads2018">Austroads, 2018</a>)</span> derives FLC value based on the cross-sectional averaged velocity in the absence of piers, and thus it is recommended to set the Layer 1 blockage value as zero (0). For more information, please see the <a href="https://wiki.tuflow.com/TUFLOW_2D_Hydraulic_Structures">TUFLOW Wiki 2D Hydraulic Structures</a> page.</p>
<p>Models using 2D bridge structures are provided in the <a href="https://wiki.tuflow.com/TUFLOW_Example_Models#2D_Structures">2D Structures Example Model Dataset</a> on the TUFLOW Wiki.</p>
<table>
<caption>
<span id="tab:tab-BridgeShapeAttributeDescriptions">Table 7.18: </span><strong>2D Bridge Shape (2d_bg) Attribute Descriptions</strong>
</caption>
<thead>
<tr>
<th style="text-align:right;font-weight: bold;color: WHITE !important;background-color: #1ABDC9 !important;">
No. 
</th>
<th style="text-align:left;font-weight: bold;color: WHITE !important;background-color: #1ABDC9 !important;">
Default GIS Attribute Name
</th>
<th style="text-align:left;font-weight: bold;color: WHITE !important;background-color: #1ABDC9 !important;">
Description
</th>
<th style="text-align:left;font-weight: bold;color: WHITE !important;background-color: #1ABDC9 !important;">
Type
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right;">
1
</td>
<td style="text-align:left;">
ID
</td>
<td style="text-align:left;">
Unique identifier up to 32 characters in length. It may contain any character except for quotes and commas, and cannot be blank. As a general rule, spaces and special characters (e.g. “\”) should be avoided, although they are accepted.
</td>
<td style="text-align:left;">
Char(32)
</td>
</tr>
<tr>
<td style="text-align:right;">
2
</td>
<td style="text-align:left;">
Options
</td>
<td style="text-align:left;">
This attribute can be used to overwrite the global setting specified with the .tcf command <a href="TCFCommands-1.html#tcfBGFLCDefaultApproach">BG FLC Default Approach</a> to change FLC calulation method individually.
</td>
<td style="text-align:left;">
Char(32)
</td>
</tr>
<tr>
<td style="text-align:right;">
3
</td>
<td style="text-align:left;">
Pier_pBlockage
</td>
<td style="text-align:left;">
<p>The percentage blockage of the pier Layer. For example, enter ‘5’ for a blockage of 5%.</p>
Note: there is no need to apply a blockage value if the FLC is estimated based on the approach velocity (the velocity in the absence of piers). For more discussion, please see the <a href="https://wiki.tuflow.com/TUFLOW_2D_Hydraulic_Structures">TUFLOW Wiki</a> page on the 2D Hydraulic Structures.
</td>
<td style="text-align:left;">
Float
</td>
</tr>
<tr>
<td style="text-align:right;">
4
</td>
<td style="text-align:left;">
Pier_FLC
</td>
<td style="text-align:left;">
Pier layer total form loss coefficient.
</td>
<td style="text-align:left;">
Float
</td>
</tr>
<tr>
<td style="text-align:right;">
5
</td>
<td style="text-align:left;">
Deck_Soffit
</td>
<td style="text-align:left;">
The elevation of the bridge soffit (m or ft).
</td>
<td style="text-align:left;">
Float
</td>
</tr>
<tr>
<td style="text-align:right;">
6
</td>
<td style="text-align:left;">
Deck_Depth
</td>
<td style="text-align:left;">
The thickness of the bridge deck (m or ft).
</td>
<td style="text-align:left;">
Float
</td>
</tr>
<tr>
<td style="text-align:right;">
7
</td>
<td style="text-align:left;">
Deck_Width
</td>
<td style="text-align:left;">
<p><b>Line:</b></p>
<p>If equal to zero, sets the layer as a thin line and selects one row of faces in the direction of flow. The FLC value is applied to the faces unchanged.</p>
<p>If larger than zero, sets the layer as a thick line that selects a whole cell, i.e. two faces in the direction of flow. The FLC value at the faces is the total FLC divided by two.</p>
<p><b>Polygon:</b></p>
Defines the bridge width in the predominant direction of flow (m or ft). This value is used to distribute the total FLC value to the selected faces. The FLC applied at cell faces is calculated using equation <a href="Common-2.html#eq:zeta-face">(7.15)</a>.
</td>
<td style="text-align:left;">
Float
</td>
</tr>
<tr>
<td style="text-align:right;">
8
</td>
<td style="text-align:left;">
Deck_pBlockage
</td>
<td style="text-align:left;">
The percentage blockage of the deck layer. Enter ‘100’ for a solid bridge deck obstruction.
</td>
<td style="text-align:left;">
Float
</td>
</tr>
<tr>
<td style="text-align:right;">
9
</td>
<td style="text-align:left;">
Rail_Depth
</td>
<td style="text-align:left;">
The depth of the rail layer (m or ft).
</td>
<td style="text-align:left;">
Float
</td>
</tr>
<tr>
<td style="text-align:right;">
10
</td>
<td style="text-align:left;">
Rail_pBlockage
</td>
<td style="text-align:left;">
The percentage blockage of the rail layer.
</td>
<td style="text-align:left;">
Float
</td>
</tr>
<tr>
<td style="text-align:right;">
11
</td>
<td style="text-align:left;">
SuperS_FLC
</td>
<td style="text-align:left;">
<p>A postive SuperS_FLC specifes the combined form loss coefficient for the deck and the rail layers. Two layers are treated as a single “superstructure” layer in this new bridge method.</p>
<p>If the SuperS_FLC attribute is left blank, and <a href="TCFCommands-1.html#tcfBlankBGFLCApproach">Blank BG FLC Approach</a> is set to Method A or B, superstructure FLC is generated automatically. See Section <a href="Common-2.html#bg-autoFLC-4">7.2.8.2.1</a>.</p>
If a negative SuperS_FLC value is specified, the absolute value of SuperS_FLC is taken as a calibration factor, and is applied as a multiplier to the automatically generated superstructure FLC. If the SuperS_FLC attribute is blank, a multiplier of one is used.
</td>
<td style="text-align:left;">
Float
</td>
</tr>
<tr>
<td style="text-align:right;">
12
</td>
<td style="text-align:left;">
SuperS_Ipf
</td>
<td style="text-align:left;">
A factor to set the elevation of the inflection point (IP) at which the transition from pressure flow to drowned flow commences. The default value is 1.6.
</td>
<td style="text-align:left;">
Char(64)
</td>
</tr>
</tbody>
</table>
<table>
<caption>
<span id="tab:tab-BridgePointAttributeDescriptions">Table 7.19: </span><strong>2D Bridge Shape Points (2d_bg_pts) Attribute Descriptions</strong>
</caption>
<thead>
<tr>
<th style="text-align:right;font-weight: bold;color: WHITE !important;background-color: #1ABDC9 !important;">
No. 
</th>
<th style="text-align:left;font-weight: bold;color: WHITE !important;background-color: #1ABDC9 !important;">
Default GIS Attribute Name
</th>
<th style="text-align:left;font-weight: bold;color: WHITE !important;background-color: #1ABDC9 !important;">
Description
</th>
<th style="text-align:left;font-weight: bold;color: WHITE !important;background-color: #1ABDC9 !important;">
Type
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right;">
1
</td>
<td style="text-align:left;">
Deck_Soffit
</td>
<td style="text-align:left;">
The elevation of the bridge soffit (m or ft).
</td>
<td style="text-align:left;">
Float
</td>
</tr>
<tr>
<td style="text-align:right;">
2
</td>
<td style="text-align:left;">
Deck_Depth
</td>
<td style="text-align:left;">
The thickness of the bridge deck (m or ft).
</td>
<td style="text-align:left;">
Float
</td>
</tr>
<tr>
<td style="text-align:right;">
3
</td>
<td style="text-align:left;">
Rail_Depth
</td>
<td style="text-align:left;">
The depth of the rail layer (m or ft).
</td>
<td style="text-align:left;">
Float
</td>
</tr>
<tr>
<td style="text-align:right;">
4
</td>
<td style="text-align:left;">
R1
</td>
<td style="text-align:left;">
Reserved for future use.
</td>
<td style="text-align:left;">
Float
</td>
</tr>
<tr>
<td style="text-align:right;">
5
</td>
<td style="text-align:left;">
R2
</td>
<td style="text-align:left;">
Reserved for future use.
</td>
<td style="text-align:left;">
Float
</td>
</tr>
<tr>
<td style="text-align:right;">
6
</td>
<td style="text-align:left;">
R3
</td>
<td style="text-align:left;">
Reserved for future use.
</td>
<td style="text-align:left;">
Float
</td>
</tr>
</tbody>
</table>
<div id="bg-autoFLC-4" class="section level5 hasAnchor" number="7.2.8.2.1">
<h5><span class="header-section-number">7.2.8.2.1</span> Automatic Generation of Superstructure FLC<a href="Common-2.html#bg-autoFLC-4" class="anchor-section" aria-label="Anchor link to header"></a></h5>
<p>The 2023-03-AD build implemented a feature to automatically generate the superstructure FLC value based on the CFD benchmarking study <span class="citation">(<a href="references.html#ref-BridgeDeckAfflux">Collecutt et al., 2022</a>)</span> if the SuperS_FLC attribute is left blank and <a href="TCFCommands-1.html#tcfBlankBGFLCApproach">Blank BG FLC Approach</a> is set to Method A or B.</p>
<p><tcmd><a href="TCFCommands-1.html#tcfBlankBGFLCApproach">Blank BG FLC Approach</a></tcmd><teq> == </teq><tblk>{NONE} | METHOD A | METHOD B </tblk></p>
<ul>
<li>NONE: The default approach, i.e. the superstructure FLC must be specified manually.<br />
</li>
<li>METHOD A: The blank superstructure FLC values will be calculated based on the ratio of the depth of the pier layer (<span class="math inline">\(D_{Pier}\)</span> in the equations above) and the thickness of the super structure layer:<br />
<span class="math display" id="eq:supers-total-depth">\[\begin{equation}
T_{SuperS}  = D_{Deck}{Blockage}_{Deck} + D_{Rail}{Blockage}_{Rail}
\tag{7.18}
\end{equation}\]</span><br />
</li>
<li>METHOD B: The blank superstructure FLC values will be calculated based on the ratio of the depth of the pier layer (<span class="math inline">\(D_{Pier}\)</span>) and the thickness of the deck layer:<br />
<span class="math display" id="eq:deck-only-depth">\[\begin{equation}
T_{SuperS} = D_{Deck}{Blockage}_{Deck}
\tag{7.19}
\end{equation}\]</span></li>
</ul>
<p>With Method A and B, the superstructure FLC value is linearly interpolated within the <span class="math inline">\(D_{Pier}\)</span>/<span class="math inline">\(T_{SuperS}\)</span> range of 1~10 and capped at 0.6 and 0.16 outside this range, as shown in the Figure <a href="Common-2.html#fig:fig-CFDBridgeFLC">7.23</a>.</p>
<p>If a negative SuperS_FLC value is specified, the absolute value of SuperS_FLC is taken as a calibration factor, and is applied as a multiplier to the automatically generated superstructure FLC. If the SuperS_FLC attribute is blank, a multiplier of one is used.</p>
<center>
<div class="figure"><span style="display:block;" id="fig:fig-CFDBridgeFLC"></span>
<div class="plotly html-widget html-fill-item-overflow-hidden html-fill-item" id="htmlwidget-5ac4f103463d1d59beda" style="width:50%;height:480px;"></div>
<script type="application/json" data-for="htmlwidget-5ac4f103463d1d59beda">{"x":{"visdat":{"10d86c6b3697":["function () ","plotlyVisDat"]},"cur_data":"10d86c6b3697","attrs":{"10d86c6b3697":{"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"name":"Category 1","y":[0.59999999999999998,0.59999999999999998,0.41999999999999998,0.28000000000000003,0.20000000000000001,0.16,0.16],"x":[-10,1,2,4,6,10,20],"hovertemplate":"%{y:.2f}<extra><\/extra>","line":{"color":"rgb(26,189,201)"},"point":{"color":"rgb(26,189,201)"},"type":"scatter","markers":"true","inherit":true}},"layout":{"margin":{"b":40,"l":60,"t":25,"r":10},"xaxis":{"domain":[0,1],"automargin":true,"title":"D<sub>Pier<\/sub>/T<sub>SuperS<\/sub>","range":[0,12]},"yaxis":{"domain":[0,1],"automargin":true,"title":"FLC","range":[0,0.69999999999999996]},"hovermode":"closest","showlegend":false},"source":"A","config":{"modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false,"displayModeBar":true,"displaylogo":false},"data":[{"name":"Category 1","y":[0.59999999999999998,0.59999999999999998,0.41999999999999998,0.28000000000000003,0.20000000000000001,0.16,0.16],"x":[-10,1,2,4,6,10,20],"hovertemplate":["%{y:.2f}<extra><\/extra>","%{y:.2f}<extra><\/extra>","%{y:.2f}<extra><\/extra>","%{y:.2f}<extra><\/extra>","%{y:.2f}<extra><\/extra>","%{y:.2f}<extra><\/extra>","%{y:.2f}<extra><\/extra>"],"line":{"color":"rgb(26,189,201)"},"point":{"color":"rgb(26,189,201)"},"type":"scatter","markers":"true","mode":"markers+lines","marker":{"color":"rgba(31,119,180,1)","line":{"color":"rgba(31,119,180,1)"}},"error_y":{"color":"rgba(31,119,180,1)"},"error_x":{"color":"rgba(31,119,180,1)"},"xaxis":"x","yaxis":"y","frame":null}],"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.20000000000000001,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
<p class="caption">
Figure 7.23: <strong>CFD benchmarking study of FLC vs <span class="math inline">\(D_{Pier}\)</span>/<span class="math inline">\(T_{SuperS}\)</span> ratio (<span class="math inline">\(h_{B}\)</span>/<span class="math inline">\(T\)</span> in the original paper)</strong>
</p>
</div>
</center>
</div>
</div>
<div id="lfcsh-4" class="section level4 hasAnchor" number="7.2.8.3">
<h4><span class="header-section-number">7.2.8.3</span> Layered Flow Constrictions (2d_lfcsh Layers)<a href="Common-2.html#lfcsh-4" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<!-- PAR: have reworded as previously we said it is similar to FCs, but these had not been introduced yet-->
<p>Layered flow constrictions allow losses and blockages to be varied with water depth. This provides the opportunity to model the flow under and over a bridge deck, or a pipeline crossing a waterway.</p>
<p><strong>Note: The 2023-03-AA release introduced the 2d_bg layer, see <a href="Common-2.html#bg-layer-4">2D Bridge Structures</a>. It is recommended that it be used for representation of bridges. Prior to this, bridges were commonly modelled using a 2d_lfcsh.</strong></p>
<p>Four vertical layers within a layered flow constriction (not GIS layers) are represented. The lower three layers each have their own attributes. Each layer is assigned its own percentage blockage and form loss coefficient. The top (fourth) layer assumes the flow in Layer 4 is unimpeded. Within the same shape, the invert of the bed, and thickness of each layer can vary in 3D.</p>
<p>For example, the layers of a bridge structure could be defined as follows.</p>
<ul>
<li><strong>Layer 1:</strong> Beneath the bridge deck. Might be 5% blocked due to the bridge piers and have a small form loss for the energy losses associated with the piers.<br />
</li>
<li><strong>Layer 2:</strong> The bridge deck. This would be 100% blocked and the form loss coefficient would increase due to the additional energy losses associated with flow surcharging the deck.<br />
</li>
<li><strong>Layer 3:</strong> The bridge rails. These might be anything from 100% blocked (solid concrete rails) to 10% blocked (very open rails). Some form losses would be specified depending on the type of rails.<br />
</li>
<li><strong>Layer 4:</strong> Flow over the top of the rails - flow is assumed to be unimpeded.</li>
</ul>
<p>Layered flow constrictions function by adjusting the flow width of the 2D cell so as to represent the combination of blockages of the four layers. When the flow is only within Layer 1, only the attributes of Layer 1 are applied. As the water level rises into Layer 2, the influence of the Layer 2 attributes increase as the water continues to rise. Similarly, for Layer 3 and Layer 4.</p>
<p>The cell side flow width is calculated by summing the flow areas of each layer (including the effects of layer blockages) and dividing by the water depth.</p>
<p>As of the 2020-10 release three options are available to specify the method in which form losses are applied:</p>
<ul>
<li><strong>METHOD A</strong> (CUMULATE in releases prior to 2020-10): Accumulates losses through each of the layers in the 2d_lfcsh as the depth of water increases.<br />
</li>
<li><strong>METHOD B</strong> (PORTION in releases prior to 2020-10) – the default: Proportions the losses through each of the layers in the 2d_lfcsh based on the depth of water.</li>
<li><strong>METHOD C</strong>: Combines the METHOD A and METHOD B approaches by utilising METHOD A through to the top of Layer 3 and METHOD B above Layer 3.<br />
</li>
<li><strong>METHOD D</strong>: Allows the modeller to control the depth at which the losses start to reduce when the flow transitions between pressure flow and drowned flow. This approach is the same used by the 2d_bg layer (introduced in the 2023-03 release), and is discussed in Section <a href="Common-2.html#bg-layer-4">7.2.8.2</a>. It is recommended to use the 2d_bg layer as it has the benefit of a simplified attribute table, for easier user input.</li>
</ul>
<p>The following .tcf command can be used to set the default method to be applied to all structures in the model:</p>
<p><tcmd><a href="TCFCommands-1.html#tcfLayeredFLCDefaultApproach">Layered FLC Default Approach</a></tcmd><teq> == </teq><tblk>[ METHOD A | {METHOD B} | METHOD C | METHOD D ]</tblk></p>
<p>To specify the method on a structure by structure basis, populate the Shape_Options attribute (refer to Table <a href="Common-2.html#tab:tab-LayeredFlow">7.20</a>) with either “Method A”, “Method B” (the default), “Method C” or “Method D”.</p>
<p>Whilst the default approach of using METHOD B is unchanged for backward compatibility purposes, it is recommended the new approaches of METHOD C or the TUFLOW HPC’s 2d_bg layer approach be considered as they are shown to emulate behaviour from CFD modelling more closely for pressurised flow conditions <span class="citation">(<a href="references.html#ref-BridgeDeckAfflux">Collecutt et al., 2022</a>)</span>.</p>
<p>Detailed explanation outlining how the losses are applied is provided in the following sections.</p>
<p><strong>METHOD A</strong></p>
<p>If the form loss method has been set to METHOD A (CUMULATE), the losses are accumulated as the water level rises through the layers according to the following equation. This approach was replaced as the default setting for the 2016-03 release due to it producing inconsistent results where the bridge is substantially overtopped (drowned out) with a large percentage of the flow occurring through Layer 4, and the overall energy loss reducing with increasing water depth once the structure is submerged.</p>
<p><span class="math display" id="eq:formloss-methoda">\[\begin{equation}
\zeta_{total} = \zeta_{1} + \zeta_{2}\frac{y_{2}}{D_{2}} + \zeta_{3}\frac{y_{3}}{D_{3}}
\tag{7.20}
\end{equation}\]</span></p>
<p>Where:</p>
<ul>
<li><span class="math inline">\(\zeta_{n}\)</span> = layer n FLC<br />
</li>
<li><span class="math inline">\(D_{n}\)</span> = depth of layer n<br />
</li>
<li><span class="math inline">\(y_{n}\)</span> = layer n water depth (set to zero if dry and cannot exceed depth of layer)<br />
</li>
<li><span class="math inline">\(\zeta_{total}\)</span> = overall form loss coefficient applied</li>
</ul>
<p><strong>METHOD B</strong></p>
<p>If the form loss method has been set to METHOD B (PORTION), the losses are applied pro-rata according to the depth of water in each layer using the equation below. Note that Layer 4 (e.g. above the bridge deck rails) is always assumed to contribute a zero FLC. If a layer is not flooded the depth for that layer, <em>y<sub>n</sub></em>, is set to zero.</p>
<p><span class="math display" id="eq:formloss-methodb">\[\begin{equation}
\zeta_{total} = \frac{{(y}_{1}\zeta_{1} + y_{2}\zeta_{2} + y_{3}\zeta_{3})}{y_{total}}
\tag{7.21}
\end{equation}\]</span></p>
<p><span class="math display" id="eq:total-formloss-methodb">\[\begin{equation}
y_{total} = y_{1} + y_{2} + y_{3} + y_{4}
\tag{7.22}
\end{equation}\]</span></p>
<p>Where:</p>
<ul>
<li><span class="math inline">\(\zeta_{n}\)</span> = layer n FLC<br />
</li>
<li><span class="math inline">\(y_{n}\)</span> = layer n water depth (set to zero if dry and cannot exceed depth of layer)<br />
</li>
<li><span class="math inline">\(\zeta_{total}\)</span> = overall form loss coefficient applied</li>
</ul>
<p><strong>METHOD C</strong></p>
<p>METHOD C effectively combines the METHOD A (CUMULATE) and METHOD B (PORTION) approaches by utilising METHOD A through to the top of Layer 3 and METHOD B above Layer 3. METHOD C adjusts the FLC value in the vertical as follows.</p>
<ul>
<li><p>Water level below Layer 2: The same result as for all other approaches (i.e. a form loss based on that specified for Layer 1 is applied). This is typically used for the energy losses associated with bridge piers.<br />
</p></li>
<li><p>Water level below top of Layer 3: Same approach as for METHOD A.<br />
</p></li>
<li><p>Water level above Layer 3: Gradually reduces the energy loss with increasing depth by proportioning with depth. The energy loss is calculated as that accumulated from Layers 1 to 3 pro-rated by the depth of Layers 1 to 3, plus no losses pro-rated by the depth above the Layer 3.<br />
<span class="math display" id="eq:formloss-methodc">\[\begin{equation}
\zeta_{total} = \left( \zeta_{1} + \zeta_{2}\frac{y_{2}}{D_{2}} + \zeta_{3}\frac{y_{3}}{D_{3}} \right)\frac{{(y}_{1} + y_{2} + y_{3})}{y_{total}}
\tag{7.23}
\end{equation}\]</span><br />
<span class="math display" id="eq:total-formloss-methodc">\[\begin{equation}
y_{total} = y_{1} + y_{2} + y_{3} + y_{4}
\tag{7.24}
\end{equation}\]</span></p>
<p>Where:</p>
<ul>
<li><span class="math inline">\(\zeta_{n}\)</span> = layer n FLC<br />
</li>
<li><span class="math inline">\(y_{n}\)</span> = layer n water depth (set to zero if dry and cannot exceed depth of layer)<br />
</li>
<li><span class="math inline">\(\zeta_{total}\)</span> = overall form loss coefficient applied<br />
</li>
<li><span class="math inline">\(D_{n}\)</span> = layer n thickness</li>
</ul></li>
</ul>
<!-- PAR to EFC, given this is the case should we remove this and steer people to 2d_bg?-->
<!--
METHOD D is similar to METHOD C but allows the modeller to control the
depth at which the losses start to reduce when the flow transitions
between pressure flow and drowned flow. METHOD D was a beta feature in
the 2020-10 Release, see the [2020-10 Release
Notes](https://downloads.tuflow.com/TUFLOW/Releases/2020-10/TUFLOW%20Release%20Notes.2020-10-AD.pdf)
for more information. As of the 2023-03 release it is replaced by the 2d_bg layer, which has GIS
attributes altered for clarity.  

The overall blockage of the face is calculated using the same method
regardless of the FLC approach:

\begin{equation}
\phi_{total} = \frac{{(y}_{1}\phi_{1} + y_{2}\phi_{2} + y_{3}\phi_{3})}{y_{total}}
(\#eq:formloss-methodd)
\end{equation}

Where:

$\phi_{n}$ = layer n blockage  
$y_{n}$ = layer n water depth (set to zero if dry and cannot exceed
depth of layer)  
$\phi_{total}$ = overall cell face blockage applied-->
<p>Regardless of the FLC approach, the FLC value applies an energy loss across 2D cell faces as:</p>
<p><span class="math display" id="eq:flc-energy-loss2">\[\begin{equation}
\mathrm{\Delta}h = \zeta_{total}\frac{V^{2}}{2g}
\tag{7.25}
\end{equation}\]</span></p>
<p>where <em>V</em> is the 2D cell face velocity in the presence of the blockage. When setting the blockage values, considerations need to be taken into account whether the source of the FLC value is based on the approach velocity (the velocity in the absence of piers blockage) or structure velocity (the velocity with area blocked out by the piers). For example, Hydraulics of Bridge Waterways <span class="citation">(<a href="references.html#ref-Bradley1978">Bradley, 1978</a>)</span> or Guide to Bridge Technology <span class="citation">(<a href="references.html#ref-Austroads2018">Austroads, 2018</a>)</span> derives FLC values based on the cross-sectional averaged velocity in the absence of piers, and thus it is recommended to set the Layer 1 blockage value as zero (0). For more information, please see the <a href="https://wiki.tuflow.com/TUFLOW_2D_Hydraulic_Structure">TUFLOW Wiki 2D Hydraulic Structures</a> page.</p>
<!--The L2_FLC attribute value refers to the energy loss caused by pressure
flow against the Layer 2 and 3 combined (i.e. the bridge deck and
rails), and the L3_FLC attribute value is used to set the inflection
point (IP) at which the transition from pressure flow to drowned flow
commences. (These attributes have now been labelled as L2_or_L23_FLC and
L3_FLC_or_fIP if empty files are created.) L3_FLC is specified as a
factor of the combined depths of Layers 2 and 3, with observations thus
far indicating this inflection point is around 1.5 to 2 times the depth
of the bridge deck (assuming no rails). The effect of partial blockage
(e.g. 20% blockage of Layer 3 representing the bridge deck rails) is to
reduce the inflection point proportionally by the blockage amount.

METHOD D adjusts the FLC value in the vertical as follows:

- Water level below Layer 2: The same result as for all other
  approaches, i.e. a form loss based on that specified for Layer 1 is
  applied. This is typically used for the energy losses associated with
  bridge piers.  
- Water level between invert of Layer 2 and below the Inflection Depth
  measured from the invert of Layer 2. The Inflection Depth and total
  energy loss are calculated as follows:

\begin{equation}
D_{IP} = f_{IP}\left( D_{2}{Blockage}_{2} + D_{3}{Blockage}_{3} \right)
(\#eq:inflection-depth-methodd)
\end{equation}

\begin{equation}
\zeta_{total} = \left( \zeta_{1} + \zeta_{2}\frac{y_{I}}{D_{IP}} \right)\frac{(y_{1} + y_{Inflection})}{y_{total}}
(\#eq:total-inflection-depth-methodd)
\end{equation}

Where:

- $D_{IP}$ = Inflection Depth discussed above.  
- $f_{IP}$ = Factor entered into the L3_FLC attribute to set the inflection point. 
- $D_{n}$ = layer n thickness  
- ${Blockage}_{n}$ = <span class="mark">???</span>  
- $\zeta_{total}$ = overall form loss coefficient applied  
- $\zeta_{n}$ = layer n FLC  
- $y_{n}$ = layer n water depth (set to zero if dry and cannot exceed depth of layer)  
- $y_{Inflection}$ = water depth above the invert of Layer 2 up to (but not exceeding) the Inflection Depth ($D_{IP}$)  
- $y_{total}$ = <span class="mark">???</span>

Above the Inflection Point the energy gradually reduces with
increasing depth in a similar manner to METHOD B and METHOD C to
simulate the transition to drowned flow and tendency to zero energy
losses with increasing depth over the bridge deck.

As of the 2023-03 release the 2d_bg (see   <u>Section 6.11.4</u>) is recommended to be used to model bridge
structures. This method is similar to METHOD D, with the GIS layer
attributes adjusted for easier user input.
-->
<p>Layered FC shapes are defined as either a line or polygon GIS objects using the .tgc command <a href="TGCCommands-1.html#tgcReadGISLayeredFCShape">Read GIS Layered FC Shape</a>. The file attribute description is provided in Table <a href="Common-2.html#tab:tab-LayeredFlow">7.20</a>.</p>
<p>Points can be used to vary the invert of the bed, and thickness of each layer in 3D. In this case, four attributes are required as outlined in Table <a href="Common-2.html#tab:tab-ShapePoint">7.21</a>. This can for example be used to model an arched bridge or sloping deck. The point objects can be placed in a separate layer to the line or polygon GIS features.</p>
<p>Please note, overlapping flow constriction inputs is not supported.</p>
<p>Models using layered FC shapes are provided in the <a href="https://wiki.tuflow.com/TUFLOW_Example_Models#2D_Structures">2D Structures Example Model Dataset</a> on the TUFLOW Wiki.</p>
<table>
<caption>
<span id="tab:tab-LayeredFlow">Table 7.20: </span>Layered Flow Constriction Shape (2d_lfcsh) Attribute Descriptions
</caption>
<thead>
<tr>
<th style="text-align:right;font-weight: bold;color: WHITE !important;background-color: #1ABDC9 !important;">
No. 
</th>
<th style="text-align:left;font-weight: bold;color: WHITE !important;background-color: #1ABDC9 !important;">
Default GIS Attribute Name
</th>
<th style="text-align:left;font-weight: bold;color: WHITE !important;background-color: #1ABDC9 !important;">
Description
</th>
<th style="text-align:left;font-weight: bold;color: WHITE !important;background-color: #1ABDC9 !important;">
Type
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right;">
1
</td>
<td style="text-align:left;">
Invert
</td>
<td style="text-align:left;">
<p>Performs same function as described for the Z attribute in Tables <a href="Common-2.html#tab:tab-ZShapeAttributePoint">7.5</a> (point), <a href="Common-2.html#tab:tab-ZShapeAttributeLine">7.6</a> (line) and <a href="Common-2.html#tab:tab-ZShapeAttributePolygon">7.7</a> (polygon) and is applied to the Invert elevation values. To leave the Zpt levels unchanged (i.e. use the existing Zpt elevations), enter a value of 99999.</p>
<p><b>Point:</b> Not used.</p>
<p><b>Line:</b> Invert of constriction (m above datum). If points are snapped to the line, set to 99999 and the invert specified in the points layer is used.</p>
<p><b>Polygon:</b> Used to set the elevation of the polygon perimeter only if NO MERGE option is specified and there are no points snapped to the perimeter. If points are snapped to the perimeter, set to 99999 and the invert specified in the points layer is used.</p>
Otherwise ignored and the Zpt elevations within the polygon will be adjusted by triangulated around the perimeter at every half-cell size.
</td>
<td style="text-align:left;">
Float
</td>
</tr>
<tr>
<td style="text-align:right;">
2
</td>
<td style="text-align:left;">
dZ
</td>
<td style="text-align:left;">
Performs same function as described for dZ in Table <a href="Common-2.html#tab:tab-ZShapeAttributePoint">7.5</a> and is applied to the Invert elevation values.
</td>
<td style="text-align:left;">
Float
</td>
</tr>
<tr>
<td style="text-align:right;">
3
</td>
<td style="text-align:left;">
Shape_Width_or_dMax
</td>
<td style="text-align:left;">
<p><b>Point:</b> Same as for Table <a href="Common-2.html#tab:tab-ZShapeAttributePoint">7.5</a>.</p>
<p><b>Line:</b> Same as for Table <a href="Common-2.html#tab:tab-ZShapeAttributeLine">7.6</a>.</p>
<b>Polygon:</b> Same as for Table <a href="Common-2.html#tab:tab-ZShapeAttributePolygon">7.7</a>.
</td>
<td style="text-align:left;">
Float
</td>
</tr>
<tr>
<td style="text-align:right;">
4
</td>
<td style="text-align:left;">
Shape_Options
</td>
<td style="text-align:left;">
<p><b>Point:</b> Same as for Table <a href="Common-2.html#tab:tab-ZShapeAttributePoint">7.5</a>.</p>
<p><b>Line or Polygon:</b> Same as for Tables <a href="Common-2.html#tab:tab-ZShapeAttributeLine">7.6</a> (line) and <a href="Common-2.html#tab:tab-ZShapeAttributePolygon">7.7</a> (polygon). Additional options for <tcmd><a href="TCFCommands-1.html#tcfLayeredFLCDefaultApproach">Layered FLC Default Approach</a></tcmd>, this will overwrite the global setting specified with the .tcf command.</p>
<ul>
<li><p>METHOD A (CUMULATE in releases prior to 2020-10): Accumulates losses through each of the layers in the 2d_lfcsh as the depth of water increases.</p></li>
<li><p>METHOD B (PORTION in releases prior to 2020-10): Proportions the losses through each of the layers in the 2d_lfcsh based on the depth of water.</p></li>
<li><p>METHOD C: Combines the METHOD A and METHOD B approaches by utilising METHOD A through to the top of Layer 3 and METHOD B above Layer 3.</p></li>
<li><p>METHOD D: Allows the modeller to control the depth at which the losses start to reduce when the flow transitions between pressure flow and drowned flow. From the 2023-03-AA release and onwards it is recommended to use the 2d_bg layer, see Section <a href="Common-2.html#bg-layer-4">7.2.8.2</a>.</p>
</td>
<td style="text-align:left;">
<p>Char(20)</p>
</td>
</tr>
<tr>
<td style="text-align:right;">
<p>5</p>
</td>
<td style="text-align:left;">
<p>L1_Obvert</p>
</td>
<td style="text-align:left;">
<p>The obvert (soffit) of Layer 1.</p>
</td>
<td style="text-align:left;">
<p>Float</p>
</td>
</tr>
<tr>
<td style="text-align:right;">
<p>6</p>
</td>
<td style="text-align:left;">
<p>L1_pBlockage</p>
</td>
<td style="text-align:left;">
<p>The percentage blockage of Layer 1. For example, enter 5 for a blockage of 5%.</p>
</td>
<td style="text-align:left;">
<p>Float</p>
</td>
</tr>
<tr>
<td style="text-align:right;">
<p>7</p>
</td>
<td style="text-align:left;">
<p>L1_FLC</p>
</td>
<td style="text-align:left;">
<p>Layer 1 form loss coefficient. Used for modelling fine-scale “micro” contraction/expansion losses not picked up by the change in the 2D domain’s velocity patterns (e.g. bridge pier losses, vena-contracta losses, 3<sup>rd</sup> (vertical) dimension etc.).</p></li>
</ul>
<p>This parameter should be used as a calibration parameter.</p>
<p><b>So that this attribute is independent of 2D cell size, it has different treatment depending on the object it is attached to as follows:</b></p>
<ul>
<li><b>Line:</b> The FLC value is the total form loss.
The FLC value is automatically adjusted and applied to cell faces based on the width of the line:
<ul>
<li>For thin lines, the FLC value is applied to the cell faces unchanged.<br />
</li>
<li>For thick (whole cell) lines, the FLC value is divided by two (two cell faces in the direction of flow).<br />
</li>
<li>For wide lines, the FLC value applied to all cell faces is calculated by the total FLC value divided by the line’s width and multiplied by the cell size.</li>
</ul></li>
<li><b>Polygon:</b> FLC is the form loss per unit length.
The FLC applied at cell faces is automatically adjusted to be the form loss per unit length multiplied by the cell size.
To calculate the form loss per unit length, divide the total form loss for the structure by the length of travel in the direction of flow (i.e. bridge width). The unit of length is metres, or feet if using <tcmd><a href="TCFCommands-1.html#tcfUnits">Units</a></tcmd> <teq>==</teq><tblk> US Customary</tblk>.</li>
</ul>
<p><b>If a negative FLC value is specified, the absolute value is taken and applied unadjusted to all cell faces affected by the line or polygon. Note, this is not cell size independent, and if the 2D cell size is changed, this attribute also needs to be changed.</b></p>
<p>The form loss coefficient is applied as an energy loss based on the dynamic head equation <a href="Common-2.html#eq:flc-energy-loss2">(7.25)</a> below where <span class="math inline">\(\displaystyle \zeta_{a}\)</span> is the FLC value.</p>
<span class="math display">\[\Delta h = \zeta_{a}\:\frac{V^2}{2g}\]</span>
</td>
<td style="text-align:left;">
Float
</td>
</tr>
<tr>
<td style="text-align:right;">
8
</td>
<td style="text-align:left;">
L2_Depth
</td>
<td style="text-align:left;">
The depth of Layer 2. Depth units are in metres, or feet if using <tcmd><a href="TCFCommands-1.html#tcfUnits">Units</a></tcmd> <teq>==</teq><tblk> US Customary</tblk>.
</td>
<td style="text-align:left;">
Float
</td>
</tr>
<tr>
<td style="text-align:right;">
9
</td>
<td style="text-align:left;">
L2_pBlockage
</td>
<td style="text-align:left;">
The percentage blockage of Layer 2. For example, enter 100 for a solid obstruction such as a bridge deck or pipe.
</td>
<td style="text-align:left;">
Float
</td>
</tr>
<tr>
<td style="text-align:right;">
10
</td>
<td style="text-align:left;">
L2_FLC
</td>
<td style="text-align:left;">
Layer 2 form loss coefficient. See notes for L1_FLC
</td>
<td style="text-align:left;">
Float
</td>
</tr>
<tr>
<td style="text-align:right;">
11
</td>
<td style="text-align:left;">
L3_Depth
</td>
<td style="text-align:left;">
The depth of Layer 3. Depth units are in metres, or feet if using <tcmd><a href="TCFCommands-1.html#tcfUnits">Units</a></tcmd> <teq>==</teq><tblk> US Customary</tblk>.
</td>
<td style="text-align:left;">
Float
</td>
</tr>
<tr>
<td style="text-align:right;">
12
</td>
<td style="text-align:left;">
L3_pBlockage
</td>
<td style="text-align:left;">
The percentage blockage of Layer 3.
</td>
<td style="text-align:left;">
Float
</td>
</tr>
<tr>
<td style="text-align:right;">
13
</td>
<td style="text-align:left;">
L3_FLC
</td>
<td style="text-align:left;">
Layer 3 form loss coefficient. See notes for L1_FLC
</td>
<td style="text-align:left;">
Float
</td>
</tr>
<tr>
<td style="text-align:right;">
14
</td>
<td style="text-align:left;">
Notes
</td>
<td style="text-align:left;">
Optional field for entering comments. Not used.
</td>
<td style="text-align:left;">
Char(40)
</td>
</tr>
</tbody>
</table>
<table>
<caption>
<span id="tab:tab-ShapePoint">Table 7.21: </span>Layered Flow Constriction Shape Point (2d_lfcsh…_pts) Attribute Descriptions
</caption>
<thead>
<tr>
<th style="text-align:right;font-weight: bold;color: WHITE !important;background-color: #1ABDC9 !important;">
No. 
</th>
<th style="text-align:left;font-weight: bold;color: WHITE !important;background-color: #1ABDC9 !important;">
Default GIS Attribute Name
</th>
<th style="text-align:left;font-weight: bold;color: WHITE !important;background-color: #1ABDC9 !important;">
Description
</th>
<th style="text-align:left;font-weight: bold;color: WHITE !important;background-color: #1ABDC9 !important;">
Type
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right;">
1
</td>
<td style="text-align:left;">
Invert
</td>
<td style="text-align:left;">
<p>Invert of constriction (metres above datum, or feet above datum if using <tcmd><a href="TCFCommands-1.html#tcfUnits">Units</a></tcmd> <teq>==</teq><tblk> US Customary</tblk>).</p>
To leave the Zpt levels unchanged (i.e. use the existing Zpt elevations), enter a value of 99999.
</td>
<td style="text-align:left;">
Float
</td>
</tr>
<tr>
<td style="text-align:right;">
2
</td>
<td style="text-align:left;">
L1_Obvert
</td>
<td style="text-align:left;">
The obvert (soffit) of Layer 1.
</td>
<td style="text-align:left;">
Float
</td>
</tr>
<tr>
<td style="text-align:right;">
3
</td>
<td style="text-align:left;">
L2_Depth
</td>
<td style="text-align:left;">
The depth of Layer 2. Depth units are in metres, or feet if using <tcmd><a href="TCFCommands-1.html#tcfUnits">Units</a></tcmd> <teq>==</teq><tblk> US Customary</tblk>.
</td>
<td style="text-align:left;">
Float
</td>
</tr>
<tr>
<td style="text-align:right;">
4
</td>
<td style="text-align:left;">
L3_Depth
</td>
<td style="text-align:left;">
The depth of Layer 3. Depth units are in metres, or feet if using <tcmd><a href="TCFCommands-1.html#tcfUnits">Units</a></tcmd> <teq>==</teq><tblk> US Customary</tblk>.
</td>
<td style="text-align:left;">
Float
</td>
</tr>
</tbody>
</table>
</div>
</div>
<div id="cell-mods-3" class="section level3 hasAnchor" number="7.2.9">
<h3><span class="header-section-number">7.2.9</span> Cell Modification<a href="Common-2.html#cell-mods-3" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<!-- EFC to PAR: I think we should be move this after hydraulic structures. Or even just before modelling urban areas-->
<!--done-->
<div id="srf-3" class="section level4 hasAnchor" number="7.2.9.1">
<h4><span class="header-section-number">7.2.9.1</span> Storage Reduction (2d_srf)<a href="Common-2.html#srf-3" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>The storage of 2D cells may be reduced (e.g. to model hypothetical filling, or reduced storage from buildings), or increased (e.g. for stability). For example, if a cell has a Storage Reduction Factor (SRF) value of 0.1, then its storage (surface area) is reduced by 10%. If the SRF value is less than zero, the storage is increased. The default SRF value is zero (i.e. no change in storage).</p>
<p>SRF values are assigned to cells in one or both of the following ways:</p>
<ol style="list-style-type: decimal">
<li>Using the <a href="TGCCommands-1.html#tgcSetSRF">Set SRF</a> and <a href="TGCCommands-1.html#tgcReadGISSRF">Read GIS SRF</a> .tgc commands. The 2d_srf layer has only one attribute, a float or real value nominally called SRF.<br />
</li>
<li>Assigned to materials .csv/.tmf files as the 5<sup>th</sup> and 10<sup>th</sup> column values respectively (refer to Table <a href="Common-2.html#tab:tab-MaterialsFormat">7.12</a> and Table <a href="Common-2.html#tab:tab-MaterialsFile">7.13</a>).<br />
</li>
<li>Using the .tgc command <a href="TGCCommands-1.html#tgcReadGridSRF">Read Grid SRF</a> to assign SRF values from a raster input grid.</li>
<li>Via SX connections to 1D. The default approach increases the storage in the 2D cells by the average associated 1D node storage. Refer to Section <a href="OneD2dLinking-2.html#SXBoundary-3">10.2.2</a> and .tcf command <a href="TCFCommands-1.html#tcfSXStorageApproach">SX Storage Approach</a>. The applied SRF value is reported in the SRF attribute of the
<a href="https://wiki.tuflow.com/Check_Files_2d_grd">_grd_check</a> layer.</li>
</ol>
<p><strong>Note that a user can apply a combination of material SRF values and <a href="TGCCommands-1.html#tgcReadGISSRF">Read GIS SRF</a> layers. The item that is used by the simulation depends on the order of commands in the .tgc file. The last read input takes precedence. For example, if a cell’s storage is adjusted by layers read in using both the <a href="TGCCommands-1.html#tgcReadGISSRF">Read GIS SRF</a> and <a href="TGCCommands-1.html#tgcReadGISMat">Read GIS Mat</a> commands, though <a href="TGCCommands-1.html#tgcReadGISMat">Read GIS Mat</a> is lower in the .tgc file, it will prevail.</strong></p>
<p>If a large reduction in cell storage is applied, for stability reasons it may be necessary to also reduce the cell conveyance using a higher roughness or cell flow width (see Section <a href="Common-2.html#CWF-4">7.2.9.2</a>). For example, if a 10m cell size model has a SRF value of 0.99, without any SRF the cell area is 100m<sup>2</sup> (10m x 10m), with a SRF of 0.99 this would be reduced to 1m<sup>2</sup>. If no reduction in conveyance for flow entering or leaving the cell is made, a significant volume of flow may enter the cell between timesteps, this would cause the water level in the cell to jump a large amount, potentially leading to oscillations in water levels.</p>
<p>Models using the storage reduction functionality are provided in the <a href="https://wiki.tuflow.com/TUFLOW_Example_Models#Other">Boundary Condition Options Example Model Dataset</a> on the TUFLOW Wiki.</p>
</div>
<div id="CWF-4" class="section level4 hasAnchor" number="7.2.9.2">
<h4><span class="header-section-number">7.2.9.2</span> Cell Width Factor (CWF)<a href="Common-2.html#CWF-4" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>The .tgc commands <a href="TGCCommands-1.html#tgcSetCWF">Set CWF</a>, <a href="TGCCommands-1.html#tgcReadGISCWF">Read GIS CWF</a> and <a href="TGCCommands-1.html#tgcReadGridCWF">Read Grid CWF</a> can be used to adjust the 2D cell flow widths, in the same manner as for 2D flow constrictions (refer to Section <a href="Common-2.html#lfcsh-4">7.2.8.3</a>). The CWF is a factor, for example a value of 0.1 will limit the flow width to 10 percent. The adjusted flow width applies at all depths. When reading from a polygon object in GIS format, any cell sides that fall within the polygon will have the width factor applied. The factor is entered using a 2d_cwf GIS layer (see Table <a href="Common-2.html#tab:tab-CellWidthAttributeDescriptions">7.22</a>). These factors can be reviewed in the <a href="https://wiki.tuflow.com/Check_Files_2d_uvpt">uvpt_check</a> file.</p>
<table>
<caption>
<span id="tab:tab-CellWidthAttributeDescriptions">Table 7.22: </span><strong>Cell Width Factor (2d_cwf) Attribute Descriptions</strong>
</caption>
<thead>
<tr>
<th style="text-align:right;font-weight: bold;color: WHITE !important;background-color: #1ABDC9 !important;">
No. 
</th>
<th style="text-align:left;font-weight: bold;color: WHITE !important;background-color: #1ABDC9 !important;">
Default GIS Attribute Name
</th>
<th style="text-align:left;font-weight: bold;color: WHITE !important;background-color: #1ABDC9 !important;">
Description
</th>
<th style="text-align:left;font-weight: bold;color: WHITE !important;background-color: #1ABDC9 !important;">
Type
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right;">
1
</td>
<td style="text-align:left;">
CWF
</td>
<td style="text-align:left;">
The factor used to adjust 2D cell flow width at all depths (see Section <a href="Common-2.html#CWF-4">7.2.9.2</a>).
</td>
<td style="text-align:left;">
Float
</td>
</tr>
</tbody>
</table>
</div>
<div id="flc-4" class="section level4 hasAnchor" number="7.2.9.3">
<h4><span class="header-section-number">7.2.9.3</span> Form Loss Coefficient (FLC)<a href="Common-2.html#flc-4" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Form loss coefficients can be applied in the .tgc to add an additional energy loss at the 2D cell side (in the same manner as for 2D flow constrictions, see Section <a href="Common-2.html#lfcsh-4">7.2.8.3</a> and <a href="Common-2.html#bg-layer-4">7.2.8.2</a>).</p>
<p>Unlike flow constrictions, the FLC applied using this approach does not vary with depth. The form or energy loss can be applied as fixed values with the .tgc commands <a href="TGCCommands-1.html#tgcSetFLC">Set FLC</a>, <a href="TGCCommands-1.html#tgcReadGISFLC">Read GIS FLC</a> and <a href="TGCCommands-1.html#tgcReadGridFLC">Read Grid FLC</a> or on a form loss per unit length basis with the .tgc commands <a href="TGCCommands-1.html#tgcSetFLCL">Set FLC/L</a>, <a href="TGCCommands-1.html#tgcReadGISFLCL">Read GIS FLC/L</a> and <a href="TGCCommands-1.html#tgcReadGridFLCL">Read Grid FLC/L</a>. For <a href="TGCCommands-1.html#tgcReadGISFLC">Read GIS FLC</a> and <a href="TGCCommands-1.html#tgcReadGISFLCL">Read GIS FLC/L</a>, the form loss coefficient is entered using a 2d_flc GIS layer (see Table <a href="Common-2.html#tab:tab-FLCAttributeDescriptions">7.23</a>).</p>
<p>The advantage to applying the FLC on a per unit length basis is that it makes these inputs independent of the 2D cell size when using regions (polygons). As such, if the 2D cell size is changed, the same energy loss will be applied to both models over the area of the region.</p>
<p>Any cell sides that fall within the polygon will have the additional form loss. These loss can be reviewed within the <a href="https://wiki.tuflow.com/Check_Files_2d_uvpt">uvpt_check</a> file.</p>
<p>Section <a href="Common-2.html#HydraulicStructures-3">7.2.8</a> provides a detailed discussion about the application of additional form losses.</p>
<table>
<caption>
<span id="tab:tab-FLCAttributeDescriptions">Table 7.23: </span><strong>Form Loss Coefficient (2d_flc) Attribute Descriptions</strong>
</caption>
<thead>
<tr>
<th style="text-align:right;font-weight: bold;color: WHITE !important;background-color: #1ABDC9 !important;">
No. 
</th>
<th style="text-align:left;font-weight: bold;color: WHITE !important;background-color: #1ABDC9 !important;">
Default GIS Attribute Name
</th>
<th style="text-align:left;font-weight: bold;color: WHITE !important;background-color: #1ABDC9 !important;">
Description
</th>
<th style="text-align:left;font-weight: bold;color: WHITE !important;background-color: #1ABDC9 !important;">
Type
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right;">
1
</td>
<td style="text-align:left;">
FLC
</td>
<td style="text-align:left;">
The form loss coefficient used to apply additional energy loss at 2D cell sides (see Section <a href="Common-2.html#flc-4">7.2.9.3</a>).
</td>
<td style="text-align:left;">
Float
</td>
</tr>
</tbody>
</table>
</div>
<div id="mod-conveyance-4" class="section level4 hasAnchor" number="7.2.9.4">
<h4><span class="header-section-number">7.2.9.4</span> Modify Conveyance<a href="Common-2.html#mod-conveyance-4" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>The. tgc command <a href="TGCCommands-1.html#tgcReadGISZptsModifyConveyance">Read GIS Zpts Modify Conveyance</a> can be used to modify the elevation of a series of cells based on an increase or decrease in conveyance. Three inputs are required for this operation. These are:</p>
<ol style="list-style-type: decimal">
<li>A GIS layer containing a region / polygon object within which the modification will apply;<br />
</li>
<li>A conveyance multiplication factor; and<br />
</li>
<li>A water level grid.</li>
</ol>
<p>The command syntax is:</p>
<p><tcmd><a href="TGCCommands-1.html#tgcReadGISZptsModifyConveyance">Read GIS Zpts Modify Conveyance</a></tcmd><teq> == </teq><tblk>&lt;gis layer&gt; | &lt;K_factor&gt; | &lt;Water_Level_Grid&gt;</tblk></p>
<p>The terrain levels are adjusted based on the depth of water relative to the water surface provided. The elevations are modified by <span class="math inline">\(depth\left( 1 - f^{\frac{3}{5}} \right)\)</span>, which is effectively a change in conveyance of <span class="math inline">\(K\times f\)</span> where <span class="math inline">\(K\)</span> is conveyance and <span class="math inline">\(f\)</span> is the multiplication factor. For example, f = 1.2 would be a 20% increase in conveyance resulting in a deepening of the waterway. The specified base water level grid is a grid surface in a supported input raster format. The grid does not need to be in the same resolution as the 2D domains, but is typically the _h_Max grid output by TUFLOW from a previous simulation (see Section <a href="Map-2.html#Grid-4">11.2.2.2</a>).</p>
<p>This feature is useful for sensitivity testing the changes in flood behaviour due to a deepening or accretion of a river’s bed based on a change in conveyance.</p>
<p>This command would normally be applied in the .tgc, after all elevation (Zpt) commands as the Zpt adjustment is based on the Zpt elevations processed up until the location of this command in the .tgc file. An example is provided below:</p>
<p><tcmd><a href="TGCCommands-1.html#tgcReadGISZptsModifyConveyance">Read GIS Zpts Modify Conveyance</a></tcmd><teq> == </teq><tblk>gis\2d_mod_river.shp | 0.9 | base_h_Max.tif</tblk></p>
<p>Where:</p>
<ul>
<li>2d_mod_river.shp contains polygons of the areas to be modified, in this case along the river. This can be in any supported vector format (.gpkg, .shp or .mif).<br />
</li>
<li>0.9 is the factor change in conveyance compared to a base case (i.e. 10% decrease in conveyance).<br />
</li>
<li>base_h_Max.tif is a raster grid of the peak water level grid from a base case simulation. It is recommended to copy this grid layer from the results folder and place it somewhere under model\grid\. If this grid layer varies with AEP, it is recommended to use the one .tcf with a Variable to define the AEP, or alternatively a Scenario variable.</li>
</ul>
</div>
</div>
<div id="urban-areas-3" class="section level3 hasAnchor" number="7.2.10">
<h3><span class="header-section-number">7.2.10</span> Modelling Urban Areas<a href="Common-2.html#urban-areas-3" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>The modelling of urbanised floodplains presents many more challenges to hydraulic modellers than those of rural floodplains. It requires careful consideration of the representation of buildings, walls and fences to accurately replicate the overland flow routes. With the advancement of modern computing hardware and software, 2D solutions are increasingly being used over 1D solutions to represent urban areas.</p>
<p>This section of the manual discusses the various methods available in TUFLOW to represent the features within an urban area. It does not aim to identify the most appropriate method, however, discusses the pros and cons to provide the modeller with guidance on selecting the most suitable method for their study.</p>
<p><span class="citation">Syme (<a href="references.html#ref-Syme2008">2008</a>)</span> explores modelling approaches for buildings and fences, it can be found along with other publications in the <a href="https://www.tuflow.com/library/publications/">TUFLOW Library</a>.</p>
<div id="buildings-4" class="section level4 hasAnchor" number="7.2.10.1">
<h4><span class="header-section-number">7.2.10.1</span> Buildings<a href="Common-2.html#buildings-4" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>A number of methods can be used for representing buildings in a TUFLOW 2D model. These are:</p>
<ul>
<li>Utilising a higher bed resistance (roughness);<br />
</li>
<li>Raising the elevation of 2D cells where buildings exist;<br />
</li>
<li>Deactivating the 2D cells (code = 0) where buildings exist;</li>
<li>Reducing the cell storage;<br />
</li>
<li>Restricting the flow using a cell width reduction or additional form loss; or<br />
</li>
<li>Applying a breakline along the upstream faces of buildings.</li>
</ul>
<p>Utilising a high bed resistance parameter for buildings is a commonly used method to encourage the development of preferential flow paths around buildings during urban flooding scenarios. This method is commonly used and preferred over others as it accounts for the storage that the building provides once it becomes inundated <span class="citation">(<a href="references.html#ref-Syme2008">Syme, 2008</a>)</span>. Depth varying roughness is recommended if using this approach in combination with direct rainfall modelling. A low roughness value is recommended at shallow depths, representing the rapid run-off response associated with rainfall on building roofs. High bed roughness is recommended for deeper flows when the building structure impedes overland flow. The application of depth varying roughness is described in Section <a href="Common-2.html#Materials-2">7.2.6</a>.</p>
<p>Buildings may also be “removed” from the 2D domain by categorising the buildings as “Land” cells (see Section <a href="Common-2.html#CellCodes-3">7.2.2</a>) or raising the Zpt elevations above the predicted flood level (see Section <a href="Common-2.html#zsh-4">7.2.5.2</a>). This method may be appropriate when the building/s have been designed to not flood. In this case, care should be taken to ensure the chosen cell size is able to appropriately represent the area of the building and the storage ‘removed’ from the floodplain. Representing buildings in this fashion will not take into account any below ground storage, such as that provided by underground car parks or basement properties. If using a direct rainfall approach (rain on grid), this method is most likely not suitable. Any land (inactive) cells will have no rainfall applied, meaning the flow volume will be incorrect, artificially high cells (e.g. 10m above ground levels) may cause stability issues as flows exit the building.</p>
<p>Flood studies often require the simulation of extreme flood events, where a great number of buildings are expected to become inundated. It may not be appropriate in these cases to “remove” the building entirely from the 2D domain. A more suitable approach may be to raise the Zpt elevations (see Section <a href="Common-2.html#zsh-4">7.2.5.2</a>) of the building polygons to match the finished floor level, thereby specifying the elevation at which the building is able to flood. This may allow for direct rainfall simulations using a modification of the cell elevations.</p>
<p>The use of a thin breakline around the edges of the building can be used to prevent the building becoming a flow path, whilst not removing the storage volume (see Section <a href="Common-2.html#zsh-4">7.2.5.2</a>). For example, three sides of the building could be blocked, this will still allow water to enter the building but not flow through it.</p>
<p>Layered flow constrictions (see Section <a href="Common-2.html#lfcsh-4">7.2.8.3</a>) or Cell Width Factor (see Section <a href="Common-2.html#CWF-4">7.2.9.2</a>) may be used to impede the flow of water as it passes through the building. The sides of 2D cells may be partially blocked to represent obstructions such as internal or external walls. Additionally, a form loss can be applied using form loss coefficients (see Section <a href="Common-2.html#flc-4">7.2.9.3</a>).</p>
<p>A storage reduction factor can also be used to reduce the area in the cell available for water using the SRF options (see Section <a href="Common-2.html#srf-3">7.2.9.1</a>). This can be used in conjunction with the other methods, for example, a building may have the storage reduced by 20% by applying a SRF of 0.2, this could be combined with a Cell Width Factor of 0.8 (20% reduction in flow area through the building).</p>
<p>In the absence of guidelines in the literature it is recommend that the approaches for modelling buildings be sensitivity tested or calibrated, if possible.</p>
</div>
<div id="roads-4" class="section level4 hasAnchor" number="7.2.10.2">
<h4><span class="header-section-number">7.2.10.2</span> Roads<a href="Common-2.html#roads-4" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Roads typically represent the main flow routes through urban areas. The chosen cell size of the 2D domain is a key factor in ensuring an appropriate number of cells have been used to represent the width of the roads, as previously discussed in Section <a href="ModelResolutionDiscretisation-2.html#CellSizes-3">3.2.2</a>. Choosing too coarse a resolution may result in the roads not being accurately represented and minor flow routes not being represented at all. An unnecessarily fine resolution may translate to excessively long simulation times and stability problems if the Courant condition is exceeded. Ideally, it is recommended that the main flow routes be represented with a width of approximately 3-4 cells across. Note, when using the TUFLOW HPC SGS functionality (see Section <a href="HPC-specific-2.html#SGS-3">7.3.3</a>) identification of locations where a breakline should be used to represent a flow control crest may be important. The <a href="TCFCommands-1.html#tcfSGSBreaklineDetectionDelta">SGS Breakline Detection Delta</a> tool (see Section <a href="HPC-specific-2.html#SGS-Advanced-5">7.3.3.1.3</a>) can assist modellers in identifying where breaklines may need to be added.</p>
<p>For overland flood studies where a high proportion of sheet flow is predicted, differentiation between the road and pavement elevations may influence the predicted areas of inundation. A DTM based on LiDAR or ALS data, may not necessarily pick up this detail, and requiring manual modification of the topography using breaklines.</p>
<p>It is possible to apply the Log Law rule for very shallow flow through automatically varying Manning’s n. This is of particularly interest for modelling flow over smooth surfaces such as roads and concrete (see Section <a href="Common-2.html#log-law-4">7.2.6.2</a>).</p>
</div>
<div id="fences-4" class="section level4 hasAnchor" number="7.2.10.3">
<h4><span class="header-section-number">7.2.10.3</span> Fences and Walls<a href="Common-2.html#fences-4" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Fences and walls can cause significant blockages during a flood event, influencing the direction that flood waters take. Walls act to deflect the path of flood waters and if overtopped, may act as weirs. Fences may partially impede the flow of water and can be prone to becoming blocked with debris. There is also the potential for both walls and fences to collapse during a flood event.</p>
<p>Fences and walls are typically included within a TUFLOW model by digitising a series of breaklines. The 2d_zsh GIS layer permits the width of the breakline to be specified (see Section <a href="Common-2.html#zsh-4">7.2.5.2</a>). A “thin” line modifying only the ZU and ZV (cell side) elevations may be preferred to represent fences, in situations where the width of the cell size is notably greater than the width of the obstruction. A “thin” line does not modify the ZC (cell centre) elevations hence has no impact on the cell storage. A “thick” line on the other hand, modifies the ZU, ZV and ZC Zpt elevations and may be more appropriate to represent wider obstructions such as railway embankments.</p>
<p>The 2d_vzsh GIS layer (see Section <a href="Common-2.html#vzsh-4">7.2.5.3</a>) may be used to represent an embankment that collapses during the simulation. The breach may be triggered at a specified time, by the water level at a defined location or the water level difference between two locations exceeding a specified amount.</p>
</div>
</div>
</div>
<div class="footnotes">
<hr />
<ol start="2">
<li id="fn2"><p>Figure courtesy of University of Texas <a href="https://www.caee.utexas.edu/prof/mckinney/ce374k/Overheads/10-Infiltration.pdf#page=20" class="uri">https://www.caee.utexas.edu/prof/mckinney/ce374k/Overheads/10-Infiltration.pdf#page=20</a><a href="Common-2.html#fnref2" class="footnote-back">↩︎</a></p></li>
</ol>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="Solvers-2.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="HPC-specific-2.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": true,
"facebook": true,
"twitter": true,
"linkedin": true,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": false
},
"fontsettings": false,
"edit": null,
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "section"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
