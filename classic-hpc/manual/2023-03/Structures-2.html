<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>1.7 Structures | TUFLOW Classic/HPC User Manual Release Candidate 2025.2 </title>
  <meta name="description" content="TUFLOW Classic/HPC User Manual 2025" />
  <meta name="generator" content="bookdown 0.43 and GitBook 2.6.7" />

  <meta property="og:title" content="1.7 Structures | TUFLOW Classic/HPC User Manual Release Candidate 2025.2 " />
  <meta property="og:type" content="book" />
  
  <meta property="og:description" content="TUFLOW Classic/HPC User Manual 2025" />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="1.7 Structures | TUFLOW Classic/HPC User Manual Release Candidate 2025.2 " />
  
  <meta name="twitter:description" content="TUFLOW Classic/HPC User Manual 2025" />
  

<meta name="author" content="RELEASE CANDIDATE     This is an interim manual that accompanies the TUFLOW Classic/HPC 2025.2.0-rc.1 release candidate executable. The information contained within this interim version may vary from the subsequent final version." />



  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  <link rel="shortcut icon" href="images/TUFLOW.ico" type="image/x-icon" />
<link rel="prev" href="XS-2.html"/>
<link rel="next" href="Special-Channels-2.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>
<script src="libs/kePrint-0.0.1/kePrint.js"></script>
<link href="libs/lightable-0.0.1/lightable.css" rel="stylesheet" />
<link href="libs/htmltools-fill-0.5.8.1/fill.css" rel="stylesheet" />
<script src="libs/htmlwidgets-1.6.2/htmlwidgets.js"></script>
<script src="libs/plotly-binding-4.11.0/plotly.js"></script>
<script src="libs/typedarray-0.1/typedarray.min.js"></script>
<link href="libs/crosstalk-1.2.0/css/crosstalk.min.css" rel="stylesheet" />
<script src="libs/crosstalk-1.2.0/js/crosstalk.min.js"></script>
<link href="libs/plotly-htmlwidgets-css-2.11.1/plotly-htmlwidgets.css" rel="stylesheet" />
<script src="libs/plotly-main-2.11.1/plotly-latest.min.js"></script>



<style type="text/css">
  
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
</style>
<style type="text/css">
/* Used with Pandoc 2.11+ new --citeproc when CSL is used */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
  margin-bottom: 1em;
}
.hanging div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}
</style>

<link rel="stylesheet" href="css\style.css" type="text/css" />
<link rel="stylesheet" href="css\toc.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="https://docs.tuflow.com/classic-hpc/manual/2025.2/"><img src="images/TUFLOW_2025.2_release-candidate.png"></a></li>

<li class="divider"></li>
<li><a href="index.html#section" id="toc-section"></a></li>
<li class="chapter" data-level="" data-path="overview.html"><a href="overview.html"><i class="fa fa-check"></i>Overview</a>
<ul>
<li class="chapter" data-level="" data-path="overview.html"><a href="overview.html#how-to-use-this-manual"><i class="fa fa-check"></i>How to use this Manual</a>
<ul>
<li class="chapter" data-level="" data-path="overview.html"><a href="overview.html#navigation"><i class="fa fa-check"></i>Navigation</a></li>
<li class="chapter" data-level="" data-path="overview.html"><a href="overview.html#searching"><i class="fa fa-check"></i>Searching</a></li>
<li class="chapter" data-level="" data-path="overview.html"><a href="overview.html#commands"><i class="fa fa-check"></i>Commands</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="overview.html"><a href="overview.html#about-this-manual"><i class="fa fa-check"></i>About this Manual</a></li>
<li class="chapter" data-level="" data-path="overview.html"><a href="overview.html#glossary-and-notation"><i class="fa fa-check"></i>Glossary and Notation</a></li>
</ul></li>
<li class="chapter" data-level="1" data-path="OneD-Domains-1.html"><a href="OneD-Domains-1.html"><i class="fa fa-check"></i><b>1</b> 1D Network Domains - ESTRY</a>
<ul>
<li class="chapter" data-level="1.1" data-path="Scheme-2.html"><a href="Scheme-2.html"><i class="fa fa-check"></i><b>1.1</b> Schematisation</a></li>
<li class="chapter" data-level="1.2" data-path="SolutionScheme-2.html"><a href="SolutionScheme-2.html"><i class="fa fa-check"></i><b>1.2</b> Solution Scheme</a></li>
<li class="chapter" data-level="1.3" data-path="OneD-nwk-2.html"><a href="OneD-nwk-2.html"><i class="fa fa-check"></i><b>1.3</b> 1d_nwk Attributes</a></li>
<li class="chapter" data-level="1.4" data-path="Channel-Intro-2.html"><a href="Channel-Intro-2.html"><i class="fa fa-check"></i><b>1.4</b> Channels Overview</a></li>
<li class="chapter" data-level="1.5" data-path="Open-Channel-2.html"><a href="Open-Channel-2.html"><i class="fa fa-check"></i><b>1.5</b> Open Channels</a>
<ul>
<li class="chapter" data-level="1.5.1" data-path="Open-Channel-2.html"><a href="Open-Channel-2.html#I-channels-3"><i class="fa fa-check"></i><b>1.5.1</b> Inertial Channels</a></li>
<li class="chapter" data-level="1.5.2" data-path="Open-Channel-2.html"><a href="Open-Channel-2.html#NI-channels-3"><i class="fa fa-check"></i><b>1.5.2</b> Non-Inertial Channels</a></li>
</ul></li>
<li class="chapter" data-level="1.6" data-path="XS-2.html"><a href="XS-2.html"><i class="fa fa-check"></i><b>1.6</b> Cross-Sections</a>
<ul>
<li class="chapter" data-level="1.6.1" data-path="XS-2.html"><a href="XS-2.html#XS-flags-3"><i class="fa fa-check"></i><b>1.6.1</b> Type “XZ” Optional Flags</a>
<ul>
<li class="chapter" data-level="1.6.1.1" data-path="XS-2.html"><a href="XS-2.html#RR-4"><i class="fa fa-check"></i><b>1.6.1.1</b> Relative Resistance</a></li>
</ul></li>
<li class="chapter" data-level="1.6.2" data-path="XS-2.html"><a href="XS-2.html#HW-flags-3"><i class="fa fa-check"></i><b>1.6.2</b> Type “HW” Optional Flags</a>
<ul>
<li class="chapter" data-level="1.6.2.1" data-path="XS-2.html"><a href="XS-2.html#HW-A-4"><i class="fa fa-check"></i><b>1.6.2.1</b> Flow Area (A)</a></li>
<li class="chapter" data-level="1.6.2.2" data-path="XS-2.html"><a href="XS-2.html#HW-P-4"><i class="fa fa-check"></i><b>1.6.2.2</b> Wetted Perimeter (P)</a></li>
<li class="chapter" data-level="1.6.2.3" data-path="XS-2.html"><a href="XS-2.html#HW-N-4"><i class="fa fa-check"></i><b>1.6.2.3</b> Manning’s n Values (N)</a></li>
<li class="chapter" data-level="1.6.2.4" data-path="XS-2.html"><a href="XS-2.html#HW-F-4"><i class="fa fa-check"></i><b>1.6.2.4</b> Manning’s n Values (F)</a></li>
</ul></li>
<li class="chapter" data-level="1.6.3" data-path="XS-2.html"><a href="XS-2.html#Parallel-Channel-3"><i class="fa fa-check"></i><b>1.6.3</b> Parallel Channel Analysis</a></li>
<li class="chapter" data-level="1.6.4" data-path="XS-2.html"><a href="XS-2.html#Eff-vs-Total-3"><i class="fa fa-check"></i><b>1.6.4</b> Effective Area versus Total Area</a></li>
<li class="chapter" data-level="1.6.5" data-path="XS-2.html"><a href="XS-2.html#XS-Mid-3"><i class="fa fa-check"></i><b>1.6.5</b> Mid Cross-Sections</a></li>
<li class="chapter" data-level="1.6.6" data-path="XS-2.html"><a href="XS-2.html#XS-End-3"><i class="fa fa-check"></i><b>1.6.6</b> End Cross-Sections</a></li>
<li class="chapter" data-level="1.6.7" data-path="XS-2.html"><a href="XS-2.html#Interpolate-XS-3"><i class="fa fa-check"></i><b>1.6.7</b> Interpolated Cross-Section Protocols</a></li>
</ul></li>
<li class="chapter" data-level="1.7" data-path="Structures-2.html"><a href="Structures-2.html"><i class="fa fa-check"></i><b>1.7</b> Structures</a>
<ul>
<li class="chapter" data-level="1.7.1" data-path="Structures-2.html"><a href="Structures-2.html#culverts-pipes-3"><i class="fa fa-check"></i><b>1.7.1</b> Culverts and Pipes</a>
<ul>
<li class="chapter" data-level="1.7.1.1" data-path="Structures-2.html"><a href="Structures-2.html#Blockage-4"><i class="fa fa-check"></i><b>1.7.1.1</b> Blockage Matrix</a></li>
<li class="chapter" data-level="1.7.1.2" data-path="Structures-2.html"><a href="Structures-2.html#blockage-limitations-4"><i class="fa fa-check"></i><b>1.7.1.2</b> Limitations</a></li>
</ul></li>
<li class="chapter" data-level="1.7.2" data-path="Structures-2.html"><a href="Structures-2.html#Bridges-3"><i class="fa fa-check"></i><b>1.7.2</b> Bridges</a>
<ul>
<li class="chapter" data-level="1.7.2.1" data-path="Structures-2.html"><a href="Structures-2.html#BridgeIntro-4"><i class="fa fa-check"></i><b>1.7.2.1</b> Bridges Overview</a></li>
<li class="chapter" data-level="1.7.2.2" data-path="Structures-2.html"><a href="Structures-2.html#XSLoss-4"><i class="fa fa-check"></i><b>1.7.2.2</b> Bridge Cross-Section and Loss Tables</a></li>
<li class="chapter" data-level="1.7.2.3" data-path="Structures-2.html"><a href="Structures-2.html#B-Bridge-4"><i class="fa fa-check"></i><b>1.7.2.3</b> B Bridge Losses Approach</a></li>
<li class="chapter" data-level="1.7.2.4" data-path="Structures-2.html"><a href="Structures-2.html#BB-Bridge-4"><i class="fa fa-check"></i><b>1.7.2.4</b> BB Bridge Losses Approach</a></li>
</ul></li>
<li class="chapter" data-level="1.7.3" data-path="Structures-2.html"><a href="Structures-2.html#BArch-3"><i class="fa fa-check"></i><b>1.7.3</b> Arch Bridge</a>
<ul>
<li class="chapter" data-level="1.7.3.1" data-path="Structures-2.html"><a href="Structures-2.html#BArch-Editor-4"><i class="fa fa-check"></i><b>1.7.3.1</b> Arch Bridge Editor</a></li>
<li class="chapter" data-level="1.7.3.2" data-path="Structures-2.html"><a href="Structures-2.html#BArch-Min-Blc-4"><i class="fa fa-check"></i><b>1.7.3.2</b> Arch Minimum Blockage</a></li>
</ul></li>
<li class="chapter" data-level="1.7.4" data-path="Structures-2.html"><a href="Structures-2.html#Weir-3"><i class="fa fa-check"></i><b>1.7.4</b> Weirs</a>
<ul>
<li class="chapter" data-level="1.7.4.1" data-path="Structures-2.html"><a href="Structures-2.html#Weir-Intro-4"><i class="fa fa-check"></i><b>1.7.4.1</b> Weirs Overview</a></li>
<li class="chapter" data-level="1.7.4.2" data-path="Structures-2.html"><a href="Structures-2.html#W-Weir-4"><i class="fa fa-check"></i><b>1.7.4.2</b> Original Weirs (W)</a></li>
<li class="chapter" data-level="1.7.4.3" data-path="Structures-2.html"><a href="Structures-2.html#Adv-Weir-4"><i class="fa fa-check"></i><b>1.7.4.3</b> Advanced Weirs (WB, WC, WD, WO, WR, WT, WV, WW)</a></li>
<li class="chapter" data-level="1.7.4.4" data-path="Structures-2.html"><a href="Structures-2.html#Submerge-4"><i class="fa fa-check"></i><b>1.7.4.4</b> Advanced Weir Submergence Curves</a></li>
<li class="chapter" data-level="1.7.4.5" data-path="Structures-2.html"><a href="Structures-2.html#Auto-Weir-4"><i class="fa fa-check"></i><b>1.7.4.5</b> Automatically Created Weirs</a></li>
<li class="chapter" data-level="1.7.4.6" data-path="Structures-2.html"><a href="Structures-2.html#VW-Channel-4"><i class="fa fa-check"></i><b>1.7.4.6</b> VW Channels (Variable Geometry Weir)</a></li>
</ul></li>
<li class="chapter" data-level="1.7.5" data-path="Structures-2.html"><a href="Structures-2.html#SP-3"><i class="fa fa-check"></i><b>1.7.5</b> Spillways (SP)</a></li>
<li class="chapter" data-level="1.7.6" data-path="Structures-2.html"><a href="Structures-2.html#SG-3"><i class="fa fa-check"></i><b>1.7.6</b> Sluice Gates (SG)</a></li>
<li class="chapter" data-level="1.7.7" data-path="Structures-2.html"><a href="Structures-2.html#LossAdjustment-3"><i class="fa fa-check"></i><b>1.7.7</b> Adjustment of Contraction and Expansion Losses</a></li>
</ul></li>
<li class="chapter" data-level="1.8" data-path="Special-Channels-2.html"><a href="Special-Channels-2.html"><i class="fa fa-check"></i><b>1.8</b> Special Channels</a>
<ul>
<li class="chapter" data-level="1.8.1" data-path="Special-Channels-2.html"><a href="Special-Channels-2.html#M-Channel-3"><i class="fa fa-check"></i><b>1.8.1</b> M Channels (User Defined Flow Matrix)</a></li>
<li class="chapter" data-level="1.8.2" data-path="Special-Channels-2.html"><a href="Special-Channels-2.html#Q-Channels-3"><i class="fa fa-check"></i><b>1.8.2</b> Q Channels (Upstream Depth-Discharge Relationship)</a></li>
<li class="chapter" data-level="1.8.3" data-path="Special-Channels-2.html"><a href="Special-Channels-2.html#XConnect-3"><i class="fa fa-check"></i><b>1.8.3</b> X Connectors</a></li>
<li class="chapter" data-level="1.8.4" data-path="Special-Channels-2.html"><a href="Special-Channels-2.html#Legacy-Channel-3"><i class="fa fa-check"></i><b>1.8.4</b> Legacy Channels</a></li>
<li class="chapter" data-level="1.8.5" data-path="Special-Channels-2.html"><a href="Special-Channels-2.html#OneD-nwk-3"><i class="fa fa-check"></i><b>1.8.5</b> 1d_nwk Attributes (M, P, Q, SG, SP Channels)</a></li>
</ul></li>
<li class="chapter" data-level="1.9" data-path="OperationalChannels-2.html"><a href="OperationalChannels-2.html"><i class="fa fa-check"></i><b>1.9</b> Operational Channels</a>
<ul>
<li class="chapter" data-level="1.9.1" data-path="OperationalChannels-2.html"><a href="OperationalChannels-2.html#TOC-Logic-3"><i class="fa fa-check"></i><b>1.9.1</b> .toc File Commands and Logic</a>
<ul>
<li class="chapter" data-level="1.9.1.1" data-path="OperationalChannels-2.html"><a href="OperationalChannels-2.html#TOC-Define-4"><i class="fa fa-check"></i><b>1.9.1.1</b> Define Control Command</a></li>
<li class="chapter" data-level="1.9.1.2" data-path="OperationalChannels-2.html"><a href="OperationalChannels-2.html#UserDef-4"><i class="fa fa-check"></i><b>1.9.1.2</b> User Defined Variables</a></li>
<li class="chapter" data-level="1.9.1.3" data-path="OperationalChannels-2.html"><a href="OperationalChannels-2.html#Logic-4"><i class="fa fa-check"></i><b>1.9.1.3</b> Logic Rules</a></li>
<li class="chapter" data-level="1.9.1.4" data-path="OperationalChannels-2.html"><a href="OperationalChannels-2.html#Increment-Operate-4"><i class="fa fa-check"></i><b>1.9.1.4</b> Incremental Operators</a></li>
</ul></li>
<li class="chapter" data-level="1.9.2" data-path="OperationalChannels-2.html"><a href="OperationalChannels-2.html#Pumps-3"><i class="fa fa-check"></i><b>1.9.2</b> Pumps (P and PO)</a></li>
<li class="chapter" data-level="1.9.3" data-path="OperationalChannels-2.html"><a href="OperationalChannels-2.html#QO-3"><i class="fa fa-check"></i><b>1.9.3</b> QO Channels</a></li>
<li class="chapter" data-level="1.9.4" data-path="OperationalChannels-2.html"><a href="OperationalChannels-2.html#RO-3"><i class="fa fa-check"></i><b>1.9.4</b> Gated Drowned Rectangular Culverts (RO)</a></li>
<li class="chapter" data-level="1.9.5" data-path="OperationalChannels-2.html"><a href="OperationalChannels-2.html#SG-SGO-3"><i class="fa fa-check"></i><b>1.9.5</b> Sluice Gates (SG and SGO)</a></li>
<li class="chapter" data-level="1.9.6" data-path="OperationalChannels-2.html"><a href="OperationalChannels-2.html#SPO-3"><i class="fa fa-check"></i><b>1.9.6</b> Spillways with Gates (SPO)</a></li>
<li class="chapter" data-level="1.9.7" data-path="OperationalChannels-2.html"><a href="OperationalChannels-2.html#Weirs-Operational-3"><i class="fa fa-check"></i><b>1.9.7</b> Weirs (WBO, WCO, WDO, WOO, WRO, WTO)</a></li>
<li class="chapter" data-level="1.9.8" data-path="OperationalChannels-2.html"><a href="OperationalChannels-2.html#PFDF-3"><i class="fa fa-check"></i><b>1.9.8</b> Piping and Dam Failure</a>
<ul>
<li class="chapter" data-level="1.9.8.1" data-path="OperationalChannels-2.html"><a href="OperationalChannels-2.html#PF-4"><i class="fa fa-check"></i><b>1.9.8.1</b> Piping Failure (PF)</a></li>
<li class="chapter" data-level="1.9.8.2" data-path="OperationalChannels-2.html"><a href="OperationalChannels-2.html#DF-4"><i class="fa fa-check"></i><b>1.9.8.2</b> Dam Failure (DF)</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="1.10" data-path="Pipes-2.html"><a href="Pipes-2.html"><i class="fa fa-check"></i><b>1.10</b> Pipe Networks</a>
<ul>
<li class="chapter" data-level="1.10.1" data-path="Pipes-2.html"><a href="Pipes-2.html#Pipes-3"><i class="fa fa-check"></i><b>1.10.1</b> Pipes</a></li>
<li class="chapter" data-level="1.10.2" data-path="Pipes-2.html"><a href="Pipes-2.html#Pits-3"><i class="fa fa-check"></i><b>1.10.2</b> Pits</a>
<ul>
<li class="chapter" data-level="1.10.2.1" data-path="Pipes-2.html"><a href="Pipes-2.html#OneD-pit-nwk-4"><i class="fa fa-check"></i><b>1.10.2.1</b> 1d_nwk Pits</a></li>
<li class="chapter" data-level="1.10.2.2" data-path="Pipes-2.html"><a href="Pipes-2.html#OneD-pit-4"><i class="fa fa-check"></i><b>1.10.2.2</b> 1d_pit Pits</a></li>
<li class="chapter" data-level="1.10.2.3" data-path="Pipes-2.html"><a href="Pipes-2.html#Conn-Pits-Nds-4"><i class="fa fa-check"></i><b>1.10.2.3</b> Connecting Pits and Nodes to 2D Domains</a></li>
</ul></li>
<li class="chapter" data-level="1.10.3" data-path="Pipes-2.html"><a href="Pipes-2.html#DD-Database-3"><i class="fa fa-check"></i><b>1.10.3</b> Pit Inlet and Depth/Stage vs Discharge Databases</a>
<ul>
<li class="chapter" data-level="1.10.3.1" data-path="Pipes-2.html"><a href="Pipes-2.html#Xfall-4"><i class="fa fa-check"></i><b>1.10.3.1</b> Road Crossfall Options</a></li>
</ul></li>
<li class="chapter" data-level="1.10.4" data-path="Pipes-2.html"><a href="Pipes-2.html#Manholes-3"><i class="fa fa-check"></i><b>1.10.4</b> Manholes</a>
<ul>
<li class="chapter" data-level="1.10.4.1" data-path="Pipes-2.html"><a href="Pipes-2.html#Auto-MH-4"><i class="fa fa-check"></i><b>1.10.4.1</b> Automatically Assigned Manholes</a></li>
<li class="chapter" data-level="1.10.4.2" data-path="Pipes-2.html"><a href="Pipes-2.html#OneD-mh-4"><i class="fa fa-check"></i><b>1.10.4.2</b> Manually Assigned Manholes (1d_mh Layer)</a></li>
<li class="chapter" data-level="1.10.4.3" data-path="Pipes-2.html"><a href="Pipes-2.html#mh-direction-4"><i class="fa fa-check"></i><b>1.10.4.3</b> Digitising Culverts Connected to Manholes</a></li>
<li class="chapter" data-level="1.10.4.4" data-path="Pipes-2.html"><a href="Pipes-2.html#Engelund-4"><i class="fa fa-check"></i><b>1.10.4.4</b> Engelund Manhole Loss Approach</a></li>
<li class="chapter" data-level="1.10.4.5" data-path="Pipes-2.html"><a href="Pipes-2.html#FixedLoss-4"><i class="fa fa-check"></i><b>1.10.4.5</b> Fixed Manhole Loss Approach</a></li>
<li class="chapter" data-level="1.10.4.6" data-path="Pipes-2.html"><a href="Pipes-2.html#JunctionLoss-4"><i class="fa fa-check"></i><b>1.10.4.6</b> Discussion on Approaches to Modelling Pipe Junction Losses</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="1.11" data-path="Virtual-Pipes-2.html"><a href="Virtual-Pipes-2.html"><i class="fa fa-check"></i><b>1.11</b> Virtual Pipes</a></li>
<li class="chapter" data-level="1.12" data-path="Nodes-2.html"><a href="Nodes-2.html"><i class="fa fa-check"></i><b>1.12</b> Nodes</a>
<ul>
<li class="chapter" data-level="1.12.1" data-path="Nodes-2.html"><a href="Nodes-2.html#Auto-Node-3"><i class="fa fa-check"></i><b>1.12.1</b> Automatically Defined Nodes</a>
<ul>
<li class="chapter" data-level="1.12.1.1" data-path="Nodes-2.html"><a href="Nodes-2.html#AutoStorageWidths-4"><i class="fa fa-check"></i><b>1.12.1.1</b> Storage Calculated Automatically from Channel Widths</a></li>
<li class="chapter" data-level="1.12.1.2" data-path="Nodes-2.html"><a href="Nodes-2.html#AutoStorageANA-4"><i class="fa fa-check"></i><b>1.12.1.2</b> Additional Storage Added from Len_or_ANA Attribute</a></li>
</ul></li>
<li class="chapter" data-level="1.12.2" data-path="Nodes-2.html"><a href="Nodes-2.html#Manual-Node-3"><i class="fa fa-check"></i><b>1.12.2</b> Manually Defined Nodes</a>
<ul>
<li class="chapter" data-level="1.12.2.1" data-path="Nodes-2.html"><a href="Nodes-2.html#NA-Table-4"><i class="fa fa-check"></i><b>1.12.2.1</b> Storage Nodes (User Defined NA Tables)</a></li>
<li class="chapter" data-level="1.12.2.2" data-path="Nodes-2.html"><a href="Nodes-2.html#channel-invert-4"><i class="fa fa-check"></i><b>1.12.2.2</b> Using Nodes to Define Channel Inverts</a></li>
<li class="chapter" data-level="1.12.2.3" data-path="Nodes-2.html"><a href="Nodes-2.html#Nd-Auto-Conn-4"><i class="fa fa-check"></i><b>1.12.2.3</b> Automatically Connecting Nodes to 2D domains</a></li>
</ul></li>
<li class="chapter" data-level="1.12.3" data-path="Nodes-2.html"><a href="Nodes-2.html#Obvert-3"><i class="fa fa-check"></i><b>1.12.3</b> Storage Above Top of Channels</a></li>
</ul></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://docs.tuflow.com/classic-hpc/manual/2025.2/"><img src="images/WQFooter.jpg" style="width:246px;height:10px;"></a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./"><h0 style="color:rgb(226,1,119);">TUFLOW Classic/HPC User Manual Release Candidate 2025.2 </h0></a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<p class="wmark before"></p>
<div id="Structures-2" class="section level2 hasAnchor" number="1.7">
<h2><span class="header-section-number">1.7</span> Structures<a href="Structures-2.html#Structures-2" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Hydraulic structures in the 1D domain are modelled by replacing the momentum equation with standard equations describing the flow through the structure. The structures available are described in the following sections. A discussion on the choice of a 1D or 2D representation of the structure is presented in Section <a href="#srf-3"><strong>??</strong></a>.</p>
<p>A channel is flagged as a hydraulic structure using the Type attribute as described in Table <a href="Channel-Intro-2.html#tab:tab-LineTypes">1.1</a>. Except for culverts, a structure has zero length, i.e. there is no bed resistance. If a non-zero length is applied to a “zero length” structure, this is only used in the calculation of the storage (nodal area).</p>
<div id="culverts-pipes-3" class="section level3 hasAnchor" number="1.7.1">
<h3><span class="header-section-number">1.7.1</span> Culverts and Pipes<a href="Structures-2.html#culverts-pipes-3" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Culvert or pipe channels can be either rectangular, circular (pipe) or irregular in shape. A range of different flow regimes is simulated with flow in either direction. Adverse slopes are accounted for and flow may be subcritical or supercritical. Figure <a href="Structures-2.html#fig:fig-image19">1.4</a>, Figure <a href="Structures-2.html#fig:fig-image20">1.5</a> and Table <a href="Structures-2.html#tab:tab-FlowRegimes">1.6</a> present the different flow regimes which can be modelled. The regimes that occur during a simulation are output to the .eof file next to the velocity and flow output values, and to the _TSF GIS layer (see Sections <a href="#EOF-2"><strong>??</strong></a> and <a href="#TS-GIS-3"><strong>??</strong></a>), and can be displayed on time-series plots in the QGIS TUFLOW Viewer plugin.</p>
<p>For all culvert types the length, upstream and downstream inverts, Manning’s n, bend loss, entrance and exit losses, and number of barrels are entered using the 1d_nwk attributes (see Table <a href="Structures-2.html#tab:tab-CulvertsAttributeDescriptions">1.5</a>). For type “C” circular or type “R” rectangular culverts, the dimensions are also specified within the 1d_nwk attributes. For an “I” irregular shaped culvert, the cross-sectional shape is specified using a 1d_xs GIS layer and the <a href="#ecfReadGISTableLinks">Read GIS Table Links</a> command. The line must be digitised across the 1d_nwk channel line using the mid cross-section approach (refer to Section <a href="XS-2.html#XS-Mid-3">1.6.5</a> and Table <a href="XS-2.html#tab:tab-CrossAttributeDescriptions">1.4</a>). This is the only supported approach for structures such as irregular shaped culverts, bridges, and weirs.</p>
<p>The four culvert coefficients are as follows:</p>
<ul>
<li>The height contraction coefficient for box culverts. Usually 0.6 for square edged entrances to 0.8 for rounded edges. This factor is not used for circular culverts.<br />
</li>
<li>The width contraction coefficient for box culverts. Typically values from 0.9 for sharp edges to 1.0 for rounded edges. This factor is normally set to 1.0 for circular culverts.<br />
</li>
<li>The entry loss coefficient. The standard value for this coefficient is 0.5. Variations to this value may be applied based on manufacturer specifications.<br />
</li>
<li>The exit loss coefficient, normally recommended as 1.0.</li>
</ul>
<p>The calculations of culvert flow and losses are carried out using techniques from “Hydraulic Charts for the Selection of Highway Culverts” and “Capacity Charts for the Hydraulic Design of Highway Culverts”, together with additional information provided in <span class="citation">Henderson (<a href="Nodes-2.html#ref-Henderson1966">1966</a>)</span>. The calculations have been compared and shown to be consistent with manufacturer’s data provided by both “Rocla” and “Armco”.</p>
<p><strong>Note: By default, the entrance and exit losses above are adjusted every timestep according to the approach and departure velocities based on the equations in Section <a href="Structures-2.html#LossAdjustment-3">1.7.7</a>.</strong></p>
<p>For benchmarking of culvert flow to the literature, see “<a href="https://www.tuflow.com/media/4989/2004-tuflow-testing-and-validation-huxley.pdf">TUFLOW Validation and Testing</a>” <span class="citation">(<a href="Nodes-2.html#ref-Huxley2004">Huxley, 2004</a>)</span>.</p>
<table>
<caption>
<span id="tab:tab-CulvertsAttributeDescriptions">Table 1.5: </span><strong>Culverts and Pipes: 1D Model Network (1d_nwk) Attribute Descriptions</strong>
</caption>
<thead>
<tr>
<th style="text-align:right;font-weight: bold;color: WHITE !important;background-color: rgba(26, 189, 201, 255) !important;">
No. 
</th>
<th style="text-align:left;font-weight: bold;color: WHITE !important;background-color: rgba(26, 189, 201, 255) !important;">
Default GIS Attribute Name
</th>
<th style="text-align:left;font-weight: bold;color: WHITE !important;background-color: rgba(26, 189, 201, 255) !important;">
Description
</th>
<th style="text-align:left;font-weight: bold;color: WHITE !important;background-color: rgba(26, 189, 201, 255) !important;">
Type
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right;">
1
</td>
<td style="text-align:left;">
ID
</td>
<td style="text-align:left;">
Unique identifier up to 12 characters in length. It may contain any character except for quotes and commas, and cannot be blank. As a general rule, spaces and special characters (e.g. “\”) should be avoided, although they are accepted. The same ID can be used for a channel and a node, but no two nodes and no two channels can have the same ID.<br />
When automatically creating nodes (default) “.1” and “.2” are added to the channel names for the upstream and downstream node names respectively. IDs over 10 characters long are not recommended as the appending of .1 and .2 can cause duplicate node ID’s to be created.
</td>
<td style="text-align:left;">
Char(12)
</td>
</tr>
<tr>
<td style="text-align:right;">
2
</td>
<td style="text-align:left;">
Type
</td>
<td style="text-align:left;">
<p>The culvert type:</p>
<ul>
<li>“C” for a circular culvert;<br />
</li>
<li>“R” for a rectangular culvert;<br />
</li>
<li>“I” for an irregular shaped culvert</li>
</ul>
Optional type flags may also be used to implement additional flow controls such as unidirectional flow (“U”) or operated flow conditions (“O”). Culvert type details are outlined in Table <a href="Channel-Intro-2.html#tab:tab-LineTypes">1.1</a> and optional flags in Table <a href="Channel-Intro-2.html#tab:tab-LineTypesOptionalFlags">1.2</a> .
</td>
<td style="text-align:left;">
Char(4)
</td>
</tr>
<tr>
<td style="text-align:right;">
3
</td>
<td style="text-align:left;">
Ignore
</td>
<td style="text-align:left;">
If a “T”, “t”, “Y” or “y” is specified, the object will be ignored (T for True and Y for Yes). Any other entry, including a blank field, will treat the object as active.
</td>
<td style="text-align:left;">
Char(1)
</td>
</tr>
<tr>
<td style="text-align:right;">
4
</td>
<td style="text-align:left;">
UCS<br />
(Use Channel Storage at nodes)
</td>
<td style="text-align:left;">
If left blank or set to Yes (“Y” or “y”) or True (“T” or “t”), the storage based on the width of the channel over half the channel length is assigned to both of the two nodes connected to the channel. If set to No (“N” or “n”) or False (“F” or “f”), the channel width does not contribute to the node’s storage. See Section <a href="Nodes-2.html#Nodes-2">1.12</a> for further discussion.
</td>
<td style="text-align:left;">
Char(1)
</td>
</tr>
<tr>
<td style="text-align:right;">
5
</td>
<td style="text-align:left;">
Len_or_ANA
</td>
<td style="text-align:left;">
The length of the culvert in metres. If the length is less than zero, except for the special values below, the length of the line is used.
</td>
<td style="text-align:left;">
Float
</td>
</tr>
<tr>
<td style="text-align:right;">
6
</td>
<td style="text-align:left;">
n_nF_Cd
</td>
<td style="text-align:left;">
<p>The Manning’s n value of the culvert.</p>
If using materials to define the bed resistance from XZ tables (only for Irregular culvert, see Section <a href="XS-2.html#RR-M-5">1.6.1.1.2</a>), n_nF_Cd should be set to one (1) as it becomes a multiplication factor of the materials’ Manning’s n values. It may be adjusted as part of the calibration process.
</td>
<td style="text-align:left;">
Float
</td>
</tr>
<tr>
<td style="text-align:right;">
7
</td>
<td style="text-align:left;">
US_Invert
</td>
<td style="text-align:left;">
<p>The upstream bed or invert elevation of the culvert in metres.</p>
If a culvert invert has a value of -99999 (after any application of node/pit DS_Invert values), the invert is interpolated by searching upstream and downstream for the nearest specified inverts, and the invert is linearly interpolated. <a href="#ecfInterpolateCulvertInverts">Interpolate Culvert Inverts</a> can also be used to switch this feature ON or OFF.
</td>
<td style="text-align:left;">
Float
</td>
</tr>
<tr>
<td style="text-align:right;">
8
</td>
<td style="text-align:left;">
DS_Invert
</td>
<td style="text-align:left;">
Sets the downstream invert of the culvert using the same rules as for described for the US_Invert attribute above.
</td>
<td style="text-align:left;">
Float
</td>
</tr>
<tr>
<td style="text-align:right;">
9
</td>
<td style="text-align:left;">
Form_Loss
</td>
<td style="text-align:left;">
Specifies an additional dynamic head loss coefficient that is applied when the culvert flow is not critical at the inlet. This applies the energy loss appropriately for a ‘minor’ loss using K*V2/2g. Bend loss coefficients (K) are found in many standard hydraulic references. Note, this loss coefficient is not subject to adjustment when using <tcmd><a href="#ecfStructureLosses">Structure Losses</a> </tcmd><teq>==</teq><tblk> ADJUST</tblk>, and is ideally used to model additional energy losses such as bend losses.
</td>
<td style="text-align:left;">
Float
</td>
</tr>
<tr>
<td style="text-align:right;">
10
</td>
<td style="text-align:left;">
pBlockage
</td>
<td style="text-align:left;">
<p><b>C, R Channel Type: </b><br />
The percentage blockage (for 10%, enter 10) of the culvert. For R culverts, the culvert width is reduced by the % Blockage, while for C culverts the pipe diameter is reduced by the square root of the % Blockage. Note that when applying a % Blockage to C culverts, the invert level remains unchanged and only the soffit level is reduced by the calculated decrease in diameter.</p>
<p><b>I Channel Type: </b><br />
Not used.</p>
To apply a blockage to irregular shaped structures, see the skew angle attribute within Table <a href="XS-2.html#tab:tab-CrossAttributeDescriptions">1.4</a>.
</td>
<td style="text-align:left;">
Float
</td>
</tr>
<tr>
<td style="text-align:right;">
11
</td>
<td style="text-align:left;">
Inlet_Type
</td>
<td style="text-align:left;">
Not used.
</td>
<td style="text-align:left;">
Char(256)
</td>
</tr>
<tr>
<td style="text-align:right;">
12
</td>
<td style="text-align:left;">
Conn_1D_2D
</td>
<td style="text-align:left;">
Not used.
</td>
<td style="text-align:left;">
Char(4)
</td>
</tr>
<tr>
<td style="text-align:right;">
13
</td>
<td style="text-align:left;">
Conn_No
</td>
<td style="text-align:left;">
Not used.
</td>
<td style="text-align:left;">
Integer
</td>
</tr>
<tr>
<td style="text-align:right;">
14
</td>
<td style="text-align:left;">
Width_or_Dia
</td>
<td style="text-align:left;">
<p><b>C Channel Type: </b><br />
The pipe diameter in metres.</p>
<p><b>R Channel Type:</b><br />
The box culvert width in metres.</p>
<b>I Channel Type: </b><br />
Not used.
</td>
<td style="text-align:left;">
Float
</td>
</tr>
<tr>
<td style="text-align:right;">
15
</td>
<td style="text-align:left;">
Height_or_WF
</td>
<td style="text-align:left;">
<p><b>R Channel Type: </b><br />
The box culvert height in metres.</p>
<b>C, I, Channel Type: </b><br />
Not used.
</td>
<td style="text-align:left;">
Float
</td>
</tr>
<tr>
<td style="text-align:right;">
16
</td>
<td style="text-align:left;">
Number_of
</td>
<td style="text-align:left;">
The number of culvert barrels. If set to zero, one barrel is assumed.
</td>
<td style="text-align:left;">
Integer
</td>
</tr>
<tr>
<td style="text-align:right;">
17
</td>
<td style="text-align:left;">
HConF_or_WC
</td>
<td style="text-align:left;">
<p><b>I, R Channel Type: </b><br />
The height contraction coefficient for orifice flow at the inlet. Usually 0.6 for square edged entrances to 0.8 for rounded edges. If value exceeds 1.0 or is less than or equal to zero, it is set to 1.0.<br />
Not used for unsubmerged inlet flow conditions or outlet controlled flow regimes.</p>
<b>C Channel Type: </b><br />
Not used.
</td>
<td style="text-align:left;">
Float
</td>
</tr>
<tr>
<td style="text-align:right;">
18
</td>
<td style="text-align:left;">
WConF_or_WEx
</td>
<td style="text-align:left;">
<p>The width contraction coefficient for inlet-controlled flow. Usually 0.9 for sharp edges to 1.0 for rounded edges for R culverts. Normally set to 1.0 for C culverts. If value exceeds 1.0 or is less than or equal to zero, it is set to 1.0 for C and 0.9 for R culverts.</p>
Not used for outlet controlled flow regimes.
</td>
<td style="text-align:left;">
Float
</td>
</tr>
<tr>
<td style="text-align:right;">
19
</td>
<td style="text-align:left;">
EntryC_or_WSa
</td>
<td style="text-align:left;">
The entry loss coefficient for outlet controlled flow (recommended value of 0.5). If value exceeds 1.0, it is set to 1.0. If value is less than zero (0), it is set to zero (0). If <tcmd><a href="#ecfStructureLosses">Structure Losses</a> </tcmd><teq>==</teq><tblk> ADJUST</tblk> (the default) or the A flag is used (see Table <a href="Nodes-2.html#tab:tab-PointObjectTypes">1.30</a>), this value is adjusted according to the approach flow velocity (see Section <a href="Structures-2.html#LossAdjustment-3">1.7.7</a>). If the culvert is discharging out of a manhole, this attribute is ignored and the entry loss used is that determined by the upstream manhole based on the manhole energy losses formulation (see Section <a href="Pipes-2.html#Manholes-3">1.10.4</a>). The entry loss value used in the computation can be viewed over time using the _TSL output layer (see Section <a href="#TS-GIS-3"><strong>??</strong></a>) or the QGIS TUFLOW Viewer plugin.
</td>
<td style="text-align:left;">
Float
</td>
</tr>
<tr>
<td style="text-align:right;">
20
</td>
<td style="text-align:left;">
ExitC_or_WSb
</td>
<td style="text-align:left;">
The exit loss coefficient for outlet controlled flow (recommended value of 1.0). If value exceeds 1.0, it is set to 1.0. If value is less than zero (0), it is set to zero (0). If <tcmd><a href="#ecfStructureLosses">Structure Losses</a> </tcmd><teq>==</teq><tblk> ADJUST</tblk> (the default) or the A flag is used (see Table <a href="Nodes-2.html#tab:tab-PointObjectTypes">1.30</a>), this value is adjusted according to the departure velocity (see Section <a href="Structures-2.html#LossAdjustment-3">1.7.7</a>). If the culvert is discharging into a manhole, this attribute is ignored and the exit loss used is that determined by the downstream manhole based on the manhole energy losses formulation (see Section <a href="Pipes-2.html#Manholes-3">1.10.4</a>). The exit loss value used in the computation can be viewed over time using the _TSL output layer (see Section <a href="#TS-GIS-3"><strong>??</strong></a>) or the QGIS TUFLOW Viewer plugin.
</td>
<td style="text-align:left;">
Float
</td>
</tr>
</tbody>
</table>
<table>
<caption>
<span id="tab:tab-FlowRegimes">Table 1.6: </span><strong>1D Culvert Flow Regime Flags</strong>
</caption>
<thead>
<tr>
<th style="text-align:left;font-weight: bold;color: WHITE !important;background-color: rgba(26, 189, 201, 255) !important;">
Regime
</th>
<th style="text-align:left;font-weight: bold;color: WHITE !important;background-color: rgba(26, 189, 201, 255) !important;">
Description
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
A
</td>
<td style="text-align:left;">
Unsubmerged entrance and exit. Critical flow at entrance. Upstream controlled with the flow control at the inlet.
</td>
</tr>
<tr>
<td style="text-align:left;">
B
</td>
<td style="text-align:left;">
Submerged entrance and unsubmerged exit. Orifice flow at entrance. Upstream controlled with the flow control at the inlet. For circular culverts, not available for <tcmd><a href="#ecfCulvertFlow">Culvert Flow</a> </tcmd><teq>==</teq><tblk> Method A</tblk>.
</td>
</tr>
<tr>
<td style="text-align:left;">
C
</td>
<td style="text-align:left;">
Unsubmerged entrance and exit. Critical flow at exit. Upstream controlled with the flow control at the culvert outlet.
</td>
</tr>
<tr>
<td style="text-align:left;">
D
</td>
<td style="text-align:left;">
Unsubmerged entrance and exit. Sub-critical flow at exit. Downstream controlled.
</td>
</tr>
<tr>
<td style="text-align:left;">
E
</td>
<td style="text-align:left;">
Submerged entrance and unsubmerged exit. Full pipe flow. Upstream controlled with the flow control at the culvert outlet.
</td>
</tr>
<tr>
<td style="text-align:left;">
F
</td>
<td style="text-align:left;">
Submerged entrance and exit. Full pipe flow. Downstream controlled.
</td>
</tr>
<tr>
<td style="text-align:left;">
G
</td>
<td style="text-align:left;">
No flow. Dry or flap-gate active.
</td>
</tr>
<tr>
<td style="text-align:left;">
H
</td>
<td style="text-align:left;">
Submerged entrance and unsubmerged exit. Adverse slope. Downstream controlled.
</td>
</tr>
<tr>
<td style="text-align:left;">
J
</td>
<td style="text-align:left;">
Unsubmerged entrance and exit. Adverse slope. Downstream controlled.
</td>
</tr>
<tr>
<td style="text-align:left;">
K
</td>
<td style="text-align:left;">
Unsubmerged entrance and submerged exit. Critical flow at entrance. Upstream controlled with flow control at the inlet. Hydraulic jump along culvert. Not available for <tcmd><a href="#ecfCulvertFlow">Culvert Flow</a> </tcmd><teq>==</teq><tblk> Method A</tblk>.
</td>
</tr>
<tr>
<td style="text-align:left;">
L
</td>
<td style="text-align:left;">
Submerged entrance and exit. Orifice flow at entrance. Upstream controlled with the flow control at the inlet. Hydraulic jump along culvert. Not available for <tcmd><a href="#ecfCulvertFlow">Culvert Flow</a> </tcmd><teq>==</teq><tblk> Method A</tblk>.
</td>
</tr>
</tbody>
</table>
<center>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:fig-image19"></span>
<img src="images/image19.png" alt="**1D Inlet Control Culvert Flow Regimes**" width="50%" />
<p class="caption">
Figure 1.4: <strong>1D Inlet Control Culvert Flow Regimes</strong>
</p>
</div>
</center>
<center>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:fig-image20"></span>
<img src="images/image20.png" alt="**1D Outlet Control Culvert Flow Regimes**" width="50%" />
<p class="caption">
Figure 1.5: <strong>1D Outlet Control Culvert Flow Regimes</strong>
</p>
</div>
</center>
<div id="Blockage-4" class="section level4 hasAnchor" number="1.7.1.1">
<h4><span class="header-section-number">1.7.1.1</span> Blockage Matrix<a href="Structures-2.html#Blockage-4" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>This feature allows for blockage of culverts to be varied based on the Average Recurrence Interval (ARI) of the flood simulation. This applies to C (circular) and R (rectangular) type culverts. For Australian users, this hydraulic structure blockage option is consistent with Project 11 of <a href="https://arr.ga.gov.au/arr-guideline/revision-projects/project-list">Australian Rainfall &amp; Runoff</a> <span class="citation">(<a href="Nodes-2.html#ref-WeeksWitheridge2013">Weeks et al., 2013</a>)</span>.</p>
<p>Two different blockage methods are available:</p>
<ol style="list-style-type: decimal">
<li>The first method reduces the area in the culvert;<br />
</li>
<li>The second applies a modified energy loss value to account for the blockage.</li>
</ol>
<p>Please refer to <span class="citation">Ollett &amp; Syme (<a href="Nodes-2.html#ref-OllettSyme2016">2016</a>)</span> for background information on the loss approaches.</p>
<p>Each culvert can be assigned a blockage category, which is defined in the 1d_nwk pBlockage attribute as a character field. A matrix of blockage category and percentage blockage for a range of ARIs is defined. Please see Section <a href="Structures-2.html#BlockageImplement-5">1.7.1.1.4</a> for guidance on implementation.</p>
<div id="ReducedArea-5" class="section level5 hasAnchor" number="1.7.1.1.1">
<h5><span class="header-section-number">1.7.1.1.1</span> Reduced Area Method<a href="Structures-2.html#ReducedArea-5" class="anchor-section" aria-label="Anchor link to header"></a></h5>
<p>For the reduced area method, the culvert area is reduced to match the specified blockage in the same manner as varying the pBlockage attribute on the 1d_nwk layer (refer to Table <a href="Structures-2.html#tab:tab-CulvertsAttributeDescriptions">1.5</a>). For example, with a blockage value of 10 the culvert area is reduced by 10%.</p>
</div>
<div id="EnergyLoss-5" class="section level5 hasAnchor" number="1.7.1.1.2">
<h5><span class="header-section-number">1.7.1.1.2</span> Energy Loss Method<a href="Structures-2.html#EnergyLoss-5" class="anchor-section" aria-label="Anchor link to header"></a></h5>
<p>For this method the area of the culvert is not modified, however, an increased entrance energy loss is applied. The modified energy loss is based on the specified culvert entry loss and the blockage ratio as per equation <a href="Structures-2.html#eq:equ-ELM">(1.4)</a> <span class="citation">(<a href="Nodes-2.html#ref-Witheridge2009">Witheridge, 2009</a>)</span>:</p>
<p><span class="math display" id="eq:equ-ELM">\[\begin{equation}
C_{ELC\_ modified} = \left( \frac{1 + \sqrt{C_{ELC}}}{BR} - 1 \right)^{2}
\tag{1.4}
\end{equation}\]</span></p>
<p>Where:</p>
<ul>
<li><span class="math inline">\(C_{ELC\_ modified}\)</span> = Modified culvert entry loss value<br />
</li>
<li><span class="math inline">\(C_{ELC}\)</span> = Specified culvert entry loss value</li>
<li><span class="math inline">\(BR\)</span> = Blockage ratio (area of blocked culvert / area unblocked culvert)</li>
</ul>
<p>When BR is 1 (unblocked), the modified entry loss coefficient becomes the specified entry loss coefficient. The modified coefficients for a range of blockages are provided in Table <a href="Structures-2.html#tab:tab-LossCoefficient">1.7</a>.</p>
<table>
<caption>
<span id="tab:tab-LossCoefficient">Table 1.7: </span><strong>Computed Values of Modified Energy Loss Coefficient</strong>
</caption>
<thead>
<tr>
<th style="text-align:left;font-weight: bold;color: WHITE !important;background-color: rgba(26, 189, 201, 255) !important;">
</th>
<th style="text-align:left;font-weight: bold;color: WHITE !important;background-color: rgba(26, 189, 201, 255) !important;">
</th>
<th style="text-align:left;font-weight: bold;color: WHITE !important;background-color: rgba(26, 189, 201, 255) !important;">
</th>
<th style="text-align:left;font-weight: bold;color: WHITE !important;background-color: rgba(26, 189, 201, 255) !important;">
C<sub>ELC</sub>
</th>
<th style="text-align:left;font-weight: bold;color: WHITE !important;background-color: rgba(26, 189, 201, 255) !important;">
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;font-weight: bold;color: WHITE !important;background-color: rgba(26, 189, 201, 255) !important;width: 10em; max-width: 10em; vertical-align:top;">
</td>
<td style="text-align:left;font-weight: bold;color: WHITE !important;background-color: rgba(26, 189, 201, 255) !important;width: 10em; max-width: 10em; vertical-align:top;">
</td>
<td style="text-align:left;font-weight: bold;color: WHITE !important;background-color: rgba(26, 189, 201, 255) !important;width: 10em; max-width: 10em; vertical-align:top;">
<b>0.3</b>
</td>
<td style="text-align:left;font-weight: bold;color: WHITE !important;background-color: rgba(26, 189, 201, 255) !important;width: 10em; max-width: 10em; vertical-align:top;">
<b>0.5</b>
</td>
<td style="text-align:left;font-weight: bold;color: WHITE !important;background-color: rgba(26, 189, 201, 255) !important;width: 10em; max-width: 10em; vertical-align:top;">
<b>0.7</b>
</td>
</tr>
<tr>
<td style="text-align:left;font-weight: bold;color: WHITE !important;background-color: rgba(26, 189, 201, 255) !important;width: 10em; max-width: 10em; vertical-align:top;">
<b>Specified % Blockage</b>
</td>
<td style="text-align:left;font-weight: bold;color: WHITE !important;background-color: rgba(26, 189, 201, 255) !important;width: 10em; max-width: 10em; vertical-align:top;">
BR
</td>
<td style="text-align:left;font-weight: bold;color: WHITE !important;background-color: rgba(26, 189, 201, 255) !important;width: 10em; max-width: 10em; vertical-align:top;">
</td>
<td style="text-align:left;font-weight: bold;color: WHITE !important;background-color: rgba(26, 189, 201, 255) !important;width: 10em; max-width: 10em; vertical-align:top;">
<b>C<sub>ELC_modified</sub></b>
</td>
<td style="text-align:left;font-weight: bold;color: WHITE !important;background-color: rgba(26, 189, 201, 255) !important;width: 10em; max-width: 10em; vertical-align:top;">
</td>
</tr>
<tr>
<td style="text-align:left;width: 10em; max-width: 10em; vertical-align:top;">
0
</td>
<td style="text-align:left;width: 10em; max-width: 10em; vertical-align:top;">
1
</td>
<td style="text-align:left;width: 10em; max-width: 10em; vertical-align:top;">
0.3
</td>
<td style="text-align:left;width: 10em; max-width: 10em; vertical-align:top;">
0.5
</td>
<td style="text-align:left;width: 10em; max-width: 10em; vertical-align:top;">
0.7
</td>
</tr>
<tr>
<td style="text-align:left;width: 10em; max-width: 10em; vertical-align:top;">
10
</td>
<td style="text-align:left;width: 10em; max-width: 10em; vertical-align:top;">
0.9
</td>
<td style="text-align:left;width: 10em; max-width: 10em; vertical-align:top;">
0.5
</td>
<td style="text-align:left;width: 10em; max-width: 10em; vertical-align:top;">
0.8
</td>
<td style="text-align:left;width: 10em; max-width: 10em; vertical-align:top;">
1.1 
</td>
</tr>
<tr>
<td style="text-align:left;width: 10em; max-width: 10em; vertical-align:top;">
25
</td>
<td style="text-align:left;width: 10em; max-width: 10em; vertical-align:top;">
0.75
</td>
<td style="text-align:left;width: 10em; max-width: 10em; vertical-align:top;">
1.1 
</td>
<td style="text-align:left;width: 10em; max-width: 10em; vertical-align:top;">
1.6
</td>
<td style="text-align:left;width: 10em; max-width: 10em; vertical-align:top;">
2.1
</td>
</tr>
<tr>
<td style="text-align:left;width: 10em; max-width: 10em; vertical-align:top;">
50
</td>
<td style="text-align:left;width: 10em; max-width: 10em; vertical-align:top;">
0.5
</td>
<td style="text-align:left;width: 10em; max-width: 10em; vertical-align:top;">
4.4 
</td>
<td style="text-align:left;width: 10em; max-width: 10em; vertical-align:top;">
5.8
</td>
<td style="text-align:left;width: 10em; max-width: 10em; vertical-align:top;">
7.1
</td>
</tr>
<tr>
<td style="text-align:left;width: 10em; max-width: 10em; vertical-align:top;">
75
</td>
<td style="text-align:left;width: 10em; max-width: 10em; vertical-align:top;">
0.25
</td>
<td style="text-align:left;width: 10em; max-width: 10em; vertical-align:top;">
27
</td>
<td style="text-align:left;width: 10em; max-width: 10em; vertical-align:top;">
34
</td>
<td style="text-align:left;width: 10em; max-width: 10em; vertical-align:top;">
40
</td>
</tr>
<tr>
<td style="text-align:left;width: 10em; max-width: 10em; vertical-align:top;">
90
</td>
<td style="text-align:left;width: 10em; max-width: 10em; vertical-align:top;">
0.1
</td>
<td style="text-align:left;width: 10em; max-width: 10em; vertical-align:top;">
210
</td>
<td style="text-align:left;width: 10em; max-width: 10em; vertical-align:top;">
260
</td>
<td style="text-align:left;width: 10em; max-width: 10em; vertical-align:top;">
300
</td>
</tr>
<tr>
<td style="text-align:left;width: 10em; max-width: 10em; vertical-align:top;">
95
</td>
<td style="text-align:left;width: 10em; max-width: 10em; vertical-align:top;">
0.05
</td>
<td style="text-align:left;width: 10em; max-width: 10em; vertical-align:top;">
900
</td>
<td style="text-align:left;width: 10em; max-width: 10em; vertical-align:top;">
1100
</td>
<td style="text-align:left;width: 10em; max-width: 10em; vertical-align:top;">
1280
</td>
</tr>
<tr>
<td style="text-align:left;width: 10em; max-width: 10em; vertical-align:top;">
100
</td>
<td style="text-align:left;width: 10em; max-width: 10em; vertical-align:top;">
0
</td>
<td style="text-align:left;width: 10em; max-width: 10em; vertical-align:top;">
∞
</td>
<td style="text-align:left;width: 10em; max-width: 10em; vertical-align:top;">
∞
</td>
<td style="text-align:left;width: 10em; max-width: 10em; vertical-align:top;">
∞
</td>
</tr>
</tbody>
</table>
<p>Whilst loss values of greater than 1.0 may appear counter-intuitive, it is appropriate in this situation. In conduit hydraulics there are two types of loss coefficients that are used to represent constrictions, one type being applied to the velocity at the constriction itself (these are always &lt;=1), and the other type which are applied to the full-barrel velocity downstream of the blockage where the loss coefficient may approach infinity. The second type is convenient as the velocity downstream of the blockage is readily available and requires no manipulation of culvert geometry, and follows in principle the same application of valve coefficients. The equation above simply gives the conversion between these two types of loss coefficients.</p>
<p>Note: The minimum blockage ratio is set to 0.001 or 0.1%. This is required to avoid a divide by zero error in the calculations. <strong>This loss method only applies when the culvert is operating under outlet control.</strong> For an inlet control flow regime no energy loss is applied, the reduced area method is used instead.</p>
</div>
<div id="BlockageCmds-5" class="section level5 hasAnchor" number="1.7.1.1.3">
<h5><span class="header-section-number">1.7.1.1.3</span> Blockage Matrix Commands<a href="Structures-2.html#BlockageCmds-5" class="anchor-section" aria-label="Anchor link to header"></a></h5>
<p>The commands available for the Blockage Matrix method are listed in Table <a href="Structures-2.html#tab:tab-MatrixMethod">1.8</a>.</p>
<table>
<caption>
<span id="tab:tab-MatrixMethod">Table 1.8: </span><strong>Commands for the Blockage Matrix Method</strong>
</caption>
<thead>
<tr>
<th style="text-align:left;font-weight: bold;color: WHITE !important;background-color: rgba(26, 189, 201, 255) !important;">
Command
</th>
<th style="text-align:left;font-weight: bold;color: WHITE !important;background-color: rgba(26, 189, 201, 255) !important;">
Description
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
<a href="#tcfBlockageMatrix">Blockage Matrix</a>
</td>
<td style="text-align:left;">
Turns on or off the blockage matrix functionality outlined in this section. The default is for this feature to be off.
</td>
</tr>
<tr>
<td style="text-align:left;">
<a href="#tcfBlockageMatrixFile">Blockage Matrix File</a>
</td>
<td style="text-align:left;">
Specifies a blockage file containing the blockage values for the various blockage categories and ARI values.
</td>
</tr>
<tr>
<td style="text-align:left;">
<a href="#tcfBlockageMethod">Blockage Method</a>
</td>
<td style="text-align:left;">
Specifies whether to use RAM (Reduced Area Method) or ELM (Energy Loss Method). No default approach is applied. This command must be specified if using the blockage matrix functionality.
</td>
</tr>
<tr>
<td style="text-align:left;">
<a href="#tcfBlockageARI">Blockage ARI</a>
</td>
<td style="text-align:left;">
Specifies the ARI for the current simulation. This would typically be defined in an event file (.tef).
</td>
</tr>
<tr>
<td style="text-align:left;">
<a href="#tcfBlockageOverride">Blockage Override</a>
</td>
<td style="text-align:left;">
Sets the blockage for <b>all</b> culverts with the specified blockage category. This option is useful for running simulations under an “all clear” case.
</td>
</tr>
<tr>
<td style="text-align:left;">
<a href="#tcfBlockageDefault">Blockage Default</a>
</td>
<td style="text-align:left;">
Sets the blockage category for culverts that do not have a blockage type specified (including those that have a numeric pBlockage defined)
</td>
</tr>
<tr>
<td style="text-align:left;">
<a href="#tcfBlockagePMFARI">Blockage PMF ARI</a>
</td>
<td style="text-align:left;">
If PMF has been specified in the ARI column of the blockage matrix, this command sets an ARI to be used for the PMF. This allows for interpolation of blockages for ARI values up to the PMF.
</td>
</tr>
</tbody>
</table>
</div>
<div id="BlockageImplement-5" class="section level5 hasAnchor" number="1.7.1.1.4">
<h5><span class="header-section-number">1.7.1.1.4</span> Implementation<a href="Structures-2.html#BlockageImplement-5" class="anchor-section" aria-label="Anchor link to header"></a></h5>
<p>To make use of this feature the 1d_nwkb GIS layer may be used. This layer is identical to the 1d_nwk layer but the pBlockage attribute of the layer is a character field instead of a float (numeric) type. See Table <a href="Structures-2.html#tab:tab-BlockageAttributeDescriptions">1.9</a>. This has not been made the default field type in the 1d_nwk empty (template) files that TUFLOW produces, for two main reasons:</p>
<ul>
<li>A character field is bigger and less efficient to read, this could slow down simulation start-up for models not using the blockage categories; and</li>
<li>A numeric field (in almost all GIS packages) defaults to 0.0, i.e. no blockage. This is not the case for a character field.</li>
</ul>
<p>As an alternative to the 1d_nwkb GIS layer, the pBlockage attribute of the 1d_nwk GIS layer can be changed from a float (numeric) type to a character field, with maximum width of 50. Instructions on how to change the GIS layer attribute type in QGIS, ArcMap and MapInfo are provided in the TUFLOW Wiki as per the links below:</p>
<ul>
<li><a href="https://wiki.tuflow.com/QGIS_Change_Attribute_Type">QGIS</a><br />
</li>
<li><a href="https://wiki.tuflow.com/Arc_Change_Attribute_Type">ArcMap</a><br />
</li>
<li><a href="https://wiki.tuflow.com/MI_Change_Attribute_Type">MapInfo</a></li>
</ul>
<table>
<caption>
<span id="tab:tab-BlockageAttributeDescriptions">Table 1.9: </span><strong>Blockage: 1D Model Network (1d_nwkb) Attribute Descriptions</strong>
</caption>
<thead>
<tr>
<th style="text-align:right;font-weight: bold;color: WHITE !important;background-color: rgba(26, 189, 201, 255) !important;">
No. 
</th>
<th style="text-align:left;font-weight: bold;color: WHITE !important;background-color: rgba(26, 189, 201, 255) !important;">
Default GIS Attribute Name
</th>
<th style="text-align:left;font-weight: bold;color: WHITE !important;background-color: rgba(26, 189, 201, 255) !important;">
Description
</th>
<th style="text-align:left;font-weight: bold;color: WHITE !important;background-color: rgba(26, 189, 201, 255) !important;">
Type
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right;">
1
</td>
<td style="text-align:left;">
ID
</td>
<td style="text-align:left;">
Same as for Table <a href="Structures-2.html#tab:tab-CulvertsAttributeDescriptions">1.5</a>.
</td>
<td style="text-align:left;">
Char(12)
</td>
</tr>
<tr>
<td style="text-align:right;">
2
</td>
<td style="text-align:left;">
Type
</td>
<td style="text-align:left;">
Same as for Table <a href="Structures-2.html#tab:tab-CulvertsAttributeDescriptions">1.5</a>.
</td>
<td style="text-align:left;">
Char(4)
</td>
</tr>
<tr>
<td style="text-align:right;">
3
</td>
<td style="text-align:left;">
Ignore
</td>
<td style="text-align:left;">
Same as for Table <a href="Structures-2.html#tab:tab-CulvertsAttributeDescriptions">1.5</a>.
</td>
<td style="text-align:left;">
Char(1)
</td>
</tr>
<tr>
<td style="text-align:right;">
4
</td>
<td style="text-align:left;">
UCS<br />
(Use Channel Storage at nodes)
</td>
<td style="text-align:left;">
Same as for Table <a href="Structures-2.html#tab:tab-CulvertsAttributeDescriptions">1.5</a>.
</td>
<td style="text-align:left;">
Char(1)
</td>
</tr>
<tr>
<td style="text-align:right;">
5
</td>
<td style="text-align:left;">
Len_or_ANA
</td>
<td style="text-align:left;">
Same as for Table <a href="Structures-2.html#tab:tab-CulvertsAttributeDescriptions">1.5</a>.
</td>
<td style="text-align:left;">
Float
</td>
</tr>
<tr>
<td style="text-align:right;">
6
</td>
<td style="text-align:left;">
n_nF_Cd
</td>
<td style="text-align:left;">
Same as for Table <a href="Structures-2.html#tab:tab-CulvertsAttributeDescriptions">1.5</a>.
</td>
<td style="text-align:left;">
Float
</td>
</tr>
<tr>
<td style="text-align:right;">
7
</td>
<td style="text-align:left;">
US_Invert
</td>
<td style="text-align:left;">
Same as for Table <a href="Structures-2.html#tab:tab-CulvertsAttributeDescriptions">1.5</a>.
</td>
<td style="text-align:left;">
Float
</td>
</tr>
<tr>
<td style="text-align:right;">
8
</td>
<td style="text-align:left;">
DS_Invert
</td>
<td style="text-align:left;">
Same as for Table <a href="Structures-2.html#tab:tab-CulvertsAttributeDescriptions">1.5</a>.
</td>
<td style="text-align:left;">
Float
</td>
</tr>
<tr>
<td style="text-align:right;">
9
</td>
<td style="text-align:left;">
Form_Loss
</td>
<td style="text-align:left;">
Same as for Table <a href="Structures-2.html#tab:tab-CulvertsAttributeDescriptions">1.5</a>.
</td>
<td style="text-align:left;">
Float
</td>
</tr>
<tr>
<td style="text-align:right;">
10
</td>
<td style="text-align:left;">
pBlockage
</td>
<td style="text-align:left;">
<p><b>C, R Channel Type: </b><br />
Either a numberic value (See Table <a href="Structures-2.html#tab:tab-CulvertsAttributeDescriptions">1.5</a>) or the blockage category name as a character string (e.g. “A”). If left blank, the <a href="#tcfBlockageDefault">Blockage Default</a> would apply. In the example below, the pBlockage attribute has been set to a category named “B”.</p>
<center>
<img src="images/image55.png" style="width:2.30412in;height:4.23958in">
</center>
<p><b>I Channel Type: </b><br />
Not used.</p>
To apply a blockage to irregular shaped structures, see the skew angle attribute within Table <a href="XS-2.html#tab:tab-CrossAttributeDescriptions">1.4</a>.
</td>
<td style="text-align:left;">
Char(50)
</td>
</tr>
<tr>
<td style="text-align:right;">
11
</td>
<td style="text-align:left;">
Inlet_Type
</td>
<td style="text-align:left;">
Not used.
</td>
<td style="text-align:left;">
Char(256)
</td>
</tr>
<tr>
<td style="text-align:right;">
12
</td>
<td style="text-align:left;">
Conn_1D_2D
</td>
<td style="text-align:left;">
Not used.
</td>
<td style="text-align:left;">
Char(4)
</td>
</tr>
<tr>
<td style="text-align:right;">
13
</td>
<td style="text-align:left;">
Conn_No
</td>
<td style="text-align:left;">
Not used.
</td>
<td style="text-align:left;">
Integer
</td>
</tr>
<tr>
<td style="text-align:right;">
14
</td>
<td style="text-align:left;">
Width_or_Dia
</td>
<td style="text-align:left;">
Same as for Table <a href="Structures-2.html#tab:tab-CulvertsAttributeDescriptions">1.5</a>.
</td>
<td style="text-align:left;">
Float
</td>
</tr>
<tr>
<td style="text-align:right;">
15
</td>
<td style="text-align:left;">
Height_or_WF
</td>
<td style="text-align:left;">
Same as for Table <a href="Structures-2.html#tab:tab-CulvertsAttributeDescriptions">1.5</a>.
</td>
<td style="text-align:left;">
Float
</td>
</tr>
<tr>
<td style="text-align:right;">
16
</td>
<td style="text-align:left;">
Number_of
</td>
<td style="text-align:left;">
Same as for Table <a href="Structures-2.html#tab:tab-CulvertsAttributeDescriptions">1.5</a>.
</td>
<td style="text-align:left;">
Integer
</td>
</tr>
<tr>
<td style="text-align:right;">
17
</td>
<td style="text-align:left;">
HConF_or_WC
</td>
<td style="text-align:left;">
Same as for Table <a href="Structures-2.html#tab:tab-CulvertsAttributeDescriptions">1.5</a>.
</td>
<td style="text-align:left;">
Float
</td>
</tr>
<tr>
<td style="text-align:right;">
18
</td>
<td style="text-align:left;">
WConF_or_WEx
</td>
<td style="text-align:left;">
Same as for Table <a href="Structures-2.html#tab:tab-CulvertsAttributeDescriptions">1.5</a>.
</td>
<td style="text-align:left;">
Float
</td>
</tr>
<tr>
<td style="text-align:right;">
19
</td>
<td style="text-align:left;">
EntryC_or_WSa
</td>
<td style="text-align:left;">
Same as for Table <a href="Structures-2.html#tab:tab-CulvertsAttributeDescriptions">1.5</a>.
</td>
<td style="text-align:left;">
Float
</td>
</tr>
<tr>
<td style="text-align:right;">
20
</td>
<td style="text-align:left;">
ExitC_or_WSb
</td>
<td style="text-align:left;">
Same as for Table <a href="Structures-2.html#tab:tab-CulvertsAttributeDescriptions">1.5</a>.
</td>
<td style="text-align:left;">
Float
</td>
</tr>
</tbody>
</table>
<p>Each blockage category must be defined in the Blockage Matrix File. The first column should contain the Average Recurrence Interval (ARI) for a range of events, any additional columns contain percentage blockages for each of the ARIs. An example blockage matrix file is provided in Table <a href="Structures-2.html#tab:tab-Blockage">1.10</a> containing 5 different blockage categories (A, B, C, D, E). For blockage category A the culvert is unblocked for all ARIs, for category E the culvert is fully blocked for all ARIs. For the categories B, C, and D the blockage varies by ARI.</p>
<p>If the specified ARI sits between the defined ARI values in the blockage matrix file a linear interpolation is used. For example, in the table below for a 50-year ARI, blockage category “C” will have a blockage of 13.75%.</p>
<table>
<caption>
<span id="tab:tab-Blockage">Table 1.10: </span><strong>Example Blockage Matrix File</strong>
</caption>
<thead>
<tr>
<th style="text-align:right;font-weight: bold;color: WHITE !important;background-color: rgba(26, 189, 201, 255) !important;">
ARI
</th>
<th style="text-align:right;font-weight: bold;color: WHITE !important;background-color: rgba(26, 189, 201, 255) !important;">
A
</th>
<th style="text-align:right;font-weight: bold;color: WHITE !important;background-color: rgba(26, 189, 201, 255) !important;">
B
</th>
<th style="text-align:right;font-weight: bold;color: WHITE !important;background-color: rgba(26, 189, 201, 255) !important;">
C
</th>
<th style="text-align:right;font-weight: bold;color: WHITE !important;background-color: rgba(26, 189, 201, 255) !important;">
D
</th>
<th style="text-align:right;font-weight: bold;color: WHITE !important;background-color: rgba(26, 189, 201, 255) !important;">
E
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
10
</td>
<td style="text-align:right;">
10
</td>
<td style="text-align:right;">
10
</td>
<td style="text-align:right;">
100
</td>
</tr>
<tr>
<td style="text-align:right;">
20
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
10
</td>
<td style="text-align:right;">
10
</td>
<td style="text-align:right;">
20
</td>
<td style="text-align:right;">
100
</td>
</tr>
<tr>
<td style="text-align:right;">
100
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
10
</td>
<td style="text-align:right;">
20
</td>
<td style="text-align:right;">
50
</td>
<td style="text-align:right;">
100
</td>
</tr>
<tr>
<td style="text-align:right;">
2000
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
20
</td>
<td style="text-align:right;">
50
</td>
<td style="text-align:right;">
70
</td>
<td style="text-align:right;">
100
</td>
</tr>
<tr>
<td style="text-align:right;">
10000
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
50
</td>
<td style="text-align:right;">
70
</td>
<td style="text-align:right;">
100
</td>
<td style="text-align:right;">
100
</td>
</tr>
</tbody>
</table>
<p>The ARI values for the blockage matrix file should be in ascending order. “PMF” can be defined in the ARI column, if this is done, an ARI must be assigned to the PMF using the command <a href="#tcfBlockagePMFARI">Blockage PMF ARI</a>.</p>
<p><strong><u>Example TUFLOW commands</u></strong></p>
<p><strong><u>.tcf file commands</u></strong></p>
<p><tcmd>Blockage Matrix</tcmd><teq> ==</teq><tblk> On</tblk><br />
<tcmd>Blockage Matrix File</tcmd><teq> ==</teq><tblk> Matrix_Blockages.csv</tblk><br />
<tcmd>Blockage Method</tcmd><teq> ==</teq><tblk> RAM</tblk><br />
<tcmd>Blockage Default</tcmd><teq> ==</teq><tblk> C</tblk></p>
<p><strong><u>.tef file commands</u></strong></p>
<p><tcmd>Define Event</tcmd><teq> ==</teq><tblk> Q010</tblk><br />
 <tcmd>Blockage ARI</tcmd><teq> ==</teq><tblk> 10</tblk><br />
 <tcmd>BC Event Source</tcmd><teq> ==</teq><tblk> __ARI__ | Q010</tblk><br />
<tcmd>End Define</tblk><br />
<tcmd>Define Event</tcmd><teq> ==</teq><tblk> Q100</tblk><br />
 <tcmd>Blockage ARI</tcmd><teq> ==</teq><tblk> 100</tblk><br />
 <tcmd>BC Event Source</tcmd><teq> == </teq><tblk>__ARI__ | Q100</tblk><br />
<tcmd>End Define</tblk><br />
<tcmd>Define Event</tcmd><teq> == </teq><tblk>QPMF</tblk><br />
 <tcmd>Blockage ARI</tcmd><teq> == </teq><tblk>100000</tblk><br />
 <tcmd>BC Event Source</tcmd><teq> == </teq><tblk>__ARI__ | PMF</tblk><br />
<tcmd>End Define</tcmd></p>
<p>A working example of a blockage matrix model is provided in the <a href="https://wiki.tuflow.com/TUFLOW_Example_Models#1D_Structures">1D Structures Example Model Dataset</a> on the TUFLOW Wiki.</p>
</div>
</div>
<div id="blockage-limitations-4" class="section level4 hasAnchor" number="1.7.1.2">
<h4><span class="header-section-number">1.7.1.2</span> Limitations<a href="Structures-2.html#blockage-limitations-4" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>For the energy loss method, the loss value only applies to the culverts when flowing in outlet control flow regimes. When the flow conditions are inlet controlled TUFLOW reverts to using the reduced area method. This is required, as there is no guidance how to adjust the contraction coefficients or otherwise as used by the inlet controlled culvert equations.</p>
</div>
</div>
<div id="Bridges-3" class="section level3 hasAnchor" number="1.7.2">
<h3><span class="header-section-number">1.7.2</span> Bridges<a href="Structures-2.html#Bridges-3" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div id="BridgeIntro-4" class="section level4 hasAnchor" number="1.7.2.1">
<h4><span class="header-section-number">1.7.2.1</span> Bridges Overview<a href="Structures-2.html#BridgeIntro-4" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Bridge channels do not require data for length, Manning’s n, divergence or bed slope (they are effectively zero-length channels, although the length is used for automatically determining nodal storages – see Section <a href="Nodes-2.html#AutoStorageWidths-4">1.12.1.1</a>). The bridge opening cross-section is described in the same manner to a normal channel.</p>
<p>Two types of bridge channels can be specified:</p>
<ul>
<li>“B” bridges require the user to specify an energy loss versus elevation table, usually derived from loss coefficients in the literature such as “Hydraulics of Bridge Waterways” <span class="citation">(<a href="Nodes-2.html#ref-Bradley1978">Bradley, 1978</a>)</span> or “Guide to Bridge Technology Part 8, Hydraulic Design of Waterway Structures” <span class="citation">(<a href="Nodes-2.html#ref-Austroads2018">Austroads, 2018</a>)</span>. The energy loss table can be generated automatically via the 1d_nwk Form_Loss attribute if the energy loss coefficient is constant up to the underside of the bridge deck.<br />
</li>
<li>“BB” bridges automatically calculate the form (energy) losses associated with the approach and departure flows as the water constricts and expands. It also automatically applies bridge deck losses associated with pressure flow. The only user specified loss coefficients required for BB bridges are the pier losses and the deck losses once fully submerged. If the pier loss coefficient is constant through the vertical the coefficient can simply be specified via the 1d_nwk Form_Loss attribute as described further below.</li>
</ul>
<p>For B bridges, two bridge flow approaches are offered using <a href="#ecfBridgeFlow">Bridge Flow</a>. Method B is an enhancement on Method A by providing better stability at shallow depths or when wetting and drying. There are also some subtle differences between the methods in how the loss coefficients are applied at the bridge deck. This is discussed further below. Method B is the approach recommended with Method A provided for legacy models. For <tcmd><a href="#ecfBridgeFlow">Bridge Flow</a> </tcmd><teq>==</teq><tblk> Method A</tblk>, the underside of the bridge deck (the obvert or soffit) is taken as the elevation when the flow area stops increasing, or the highest elevation in the bridge’s cross-section data, whichever occurs first. For <tcmd><a href="#ecfBridgeFlow">Bridge Flow</a></tcmd><teq> == </teq><tblk>Method B</tblk>, the highest (last) elevation in the cross-section table is always assumed to be the underside of the bridge deck.</p>
</div>
<div id="XSLoss-4" class="section level4 hasAnchor" number="1.7.2.2">
<h4><span class="header-section-number">1.7.2.2</span> Bridge Cross-Section and Loss Tables<a href="Structures-2.html#XSLoss-4" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>The cross-sectional shape of the bridge is specified in the same manner as for open channels using a 1d_xs GIS layer (refer to Section <a href="XS-2.html#XS-2">1.6</a> and Table <a href="XS-2.html#tab:tab-CrossAttributeDescriptions">1.4</a>) and the command <a href="#ecfReadGISTableLinks">Read GIS Table Links</a>. The line is digitised midway across the 1d_nwk channel line (do not specify as an end cross-section, i.e. a cross-section line snapped to an end of the bridge channel). As per the open channel, the cross-section data can be in offset-elevation (XZ) or height-width (HW) format.</p>
<p>Bridge structures are modelled using a height varying form or energy loss coefficient. A table (referred to as a Bridge Geometry “BG” or Loss Coefficient “LC” Table) of backwater or form loss coefficient versus height is required. The interpretation of loss coefficients provided by the user differs depending on whether the bridge channel is of a B or BB type as discussed in the following sections.</p>
<p>BG Tables can be entered using .csv files via a 1d_bg GIS layer (see Table <a href="Structures-2.html#tab:tab-LinkAttributeDescriptions">1.12</a>) using the command <a href="#ecfReadGISTableLinks">Read GIS Table Links</a>. A line is digitised crossing the 1d_nwk channel in the same manner as for the 1d_xs GIS layer used to define the cross-sectional shape of the bridge. The line does not have to be identical to the cross-section line.</p>
<p>Where the loss coefficient is constant through to the bridge deck (e.g. no losses such as a clear spanning bridge, or pier losses only – see BB bridges), the BG table can automatically be created by specifying a positive non-zero value for the Form_Loss attribute in the 1d_nwk layer (see Table <a href="Structures-2.html#tab:tab-BridgesAttributeDescriptions">1.11</a>). How the Form_Loss attribute is interpreted differs between B and BB bridge channels as discussed in the following sections.</p>
<p>Any wetted perimeter or Manning’s n inputs in the hydraulic properties table are ignored. If the flow is expected to overtop the bridge, a parallel weir channel should be included to represent the flow over the bridge deck, or a BW or BBW channel can be specified (see Section <a href="Structures-2.html#Auto-Weir-4">1.7.4.5</a>).</p>
</div>
<div id="B-Bridge-4" class="section level4 hasAnchor" number="1.7.2.3">
<h4><span class="header-section-number">1.7.2.3</span> B Bridge Losses Approach<a href="Structures-2.html#B-Bridge-4" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>The coefficients for B bridges are usually obtained from publications such as “Hydraulics of Bridge Waterways” <span class="citation">(<a href="Nodes-2.html#ref-Bradley1978">Bradley, 1978</a>)</span> or “Guide to Bridge Technology Part 8, Hydraulic Design of Waterway Structures” <span class="citation">(<a href="Nodes-2.html#ref-Austroads2018">Austroads, 2018</a>)</span>, through the following procedure.</p>
<ul>
<li>The bridge opening ratio (stream constriction ratio), defined in Equations 1 and 2 of “Hydraulics of Bridge Waterways” <span class="citation">(<a href="Nodes-2.html#ref-Bradley1978">Bradley, 1978</a>)</span>, is estimated for various water levels from the local geometry. Alternatively, the bridge opening ratio is estimated with the help of a trial modelling run in which the stream crossed by the bridge is represented by a number of parallel channels, providing a more quantitative basis for estimating the proportion of flow obstructed by the bridge abutments.<br />
</li>
<li>For each level this enables the value of K<sub>b</sub> to be obtained from Figure 6 of “Hydraulics of Bridge Waterways” <span class="citation">(<a href="Nodes-2.html#ref-Bradley1978">Bradley, 1978</a>)</span>. Additional factors, for piers (K<sub>p</sub> from Figure 7), eccentricity (K<sub>e</sub> from Figure 8) and for skew (K<sub>s</sub> from Figure 10) make up the primary contributors to K<sub>b</sub>.<br />
</li>
<li>The backwater coefficient K<sub>b</sub> input into the LC table is the sum of the relevant coefficients at each elevation. The velocity through the bridge structure used for determining the head loss is based on the flow area calculated using the water level at the downstream node.</li>
</ul>
<p>Backwater coefficients derived in this manner have usually taken into account the effects of approach and departure velocities (via consideration of the upstream and downstream cross-section areas), in which case the losses for the B channel should be fixed. This is the default setting or can be manually specified using the “F” flag (i.e. a “BF” channel) in the 1d_nwk Type attribute, or use <tcmd><a href="#ecfStructureLosses">Structure Losses</a></tcmd><teq> == </teq><tblk>ADJUST EXCEPT BG TABLES</tblk> (the default).</p>
<p>For <tcmd><a href="#ecfBridgeFlow">Bridge Flow</a></tcmd><teq> ==</teq><tblk> Method A</tblk>, once the downstream water level is within 10% of the flow depth under the bridge, a bridge deck submergence factor is phased in by applying a correction for submerged decking using a minimum value of 1.5625 (if the specified loss coefficient is greater than 1.5625, this value is applied). <tcmd><a href="#ecfBridgeFlow">Bridge Flow</a></tcmd><teq> == </teq><tblk>Method B</tblk> does not use the 10% of the flow depth phasing in nor applies a minimum loss coefficient once the bridge deck is submerged (i.e. it applies the value as per the specified loss coefficients (BG) table). Method B relies on the user to provide appropriate values at all flow heights.</p>
<p>The value of 1.5625 is derived from the following equation <a href="Structures-2.html#eq:equ-AustRoads">(1.5)</a> presented in Waterway Design - A Guide to the Hydraulic Design of Bridges, Culverts and Floodways <span class="citation">(<a href="Nodes-2.html#ref-Austroads1994">Austroads, 1994</a>)</span>:</p>
<p><span class="math display" id="eq:equ-AustRoads">\[\begin{equation}
Q = {C_d}{b_N}Z\sqrt{2gdH}
\tag{1.5}
\end{equation}\]</span></p>
<p>Where:</p>
<ul>
<li><em>Q =</em> Total discharge (m<sup>3</sup>/s or ft<sup>3</sup>/s)<br />
</li>
<li><em>C<sub>d</sub> =</em> Coefficient of discharge (0.8 for a surcharged bridge deck)<br />
</li>
<li><em>b<sub>N</sub> =</em> Net width of waterway (m or ft)<br />
</li>
<li><em>Z =</em> Vertical distance under bridge to mean river bed (m or ft)<br />
</li>
<li><em>dH =</em> Upstream energy (or water surface) level minus downstream water surface level (m or ft)</li>
</ul>
<p><strong>Note:</strong> Metric (SI) units are TUFLOW’s default. To use imperial units, ensure <tcmd><a href="#tcfUnits">Units</a></tcmd><teq> == </teq><tblk> US Customary</tblk> has been specified in the .tcf.</p>
<p>Assuming <span class="math inline">\({V} = \frac{Q}{b_{N}Z}\)</span> and <span class="math inline">\(dh = K\frac{V^2}{2g}\)</span>, the equation rearranges to give <span class="math inline">\(K = \frac{1}{C_d^2}\)</span>, where a <em>C<sub>d</sub></em> value of 0.8 equates to a K energy loss value of 1.5625.</p>
</div>
<div id="BB-Bridge-4" class="section level4 hasAnchor" number="1.7.2.4">
<h4><span class="header-section-number">1.7.2.4</span> BB Bridge Losses Approach<a href="Structures-2.html#BB-Bridge-4" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>BB bridges break down the energy losses into the following categories:</p>
<ul>
<li>Bridge pier losses;</li>
<li>Losses due to flow contraction and expansion;</li>
<li>Bridge deck losses when the bridge is submerged but not under pressure flow condition; and</li>
<li>If under pressure flow, the pressure flow equation is applied as described further below.</li>
</ul>
<p>BB bridges differ from B bridges in that the losses due to flow contraction and expansion, and the occurrence of pressure flow are handled automatically. The only loss coefficient required to be specified is that due to piers (via the Form_Loss attribute value or a LC table). Other loss parameters can be either set based on the default parameters, or can be specified by users. The parameters used by the BB bridge routine are:</p>
<ul>
<li>Cd = the Bridge Deck surcharge coefficient (Default = 0.8).<br />
</li>
<li>DLC = the Deck loss coefficient (Default = 0.5) and only applies when no LC table exists and an automatically generated table using the 1d_nwk Form_Loss attribute is created.<br />
</li>
<li>ELC = the unadjusted entry loss coefficient (Default = 0.5).<br />
</li>
<li>XLC = the unadjusted exit loss coefficient (Default = 1.0).</li>
</ul>
<p>The .ecf command “<tcmd><a href="#ecfBridgeZeroCoefficients">Bridge Zero Coefficients</a> </tcmd><teq>==</teq><tblk> &lt;CD&gt;, &lt;DLC&gt;, &lt;ELC&gt;, &lt;XLC&gt;</tblk>” can be used to change the above default values to the user’s own default values.</p>
<p>The above values can also be changed for an individual bridge using the following 1d_nwk attributes. If the attribute value is zero then the default value or the value specified by <a href="#ecfBridgeZeroCoefficients">Bridge Zero Coefficients</a> is used.</p>
<ul>
<li>CD = HConF_or_WC<br />
</li>
<li>DLC = WConF_or_WEx<br />
</li>
<li>ELC = EntryC_or_WSa<br />
</li>
<li>XLC = ExitC_or_WSb</li>
</ul>
<p>The entrance and exit losses are adjusted every timestep according to the approach and departure velocities based on the equations below from Section <a href="Structures-2.html#LossAdjustment-3">1.7.7</a>. This approach yields similar results to the approach for determining contraction and expansion losses in publications such as “Hydraulics of Bridge Waterways” <span class="citation">(<a href="Nodes-2.html#ref-Bradley1978">Bradley, 1978</a>)</span> or “Guide to Bridge Technology Part 8, Hydraulic Design of Waterway Structures” <span class="citation">(<a href="Nodes-2.html#ref-Austroads2018">Austroads, 2018</a>)</span>.</p>
<p><span class="math display" id="eq:equ-ELC">\[\begin{equation}
C_{ELC\text{_}adjusted} = C_{ELC}\left\lbrack 1 - \frac{V_{approach}}{V_{structure}} \right\rbrack
\tag{1.6}
\end{equation}\]</span></p>
<p><span class="math display" id="eq:equ-XLC">\[\begin{equation}
C_{XLC\text{_}adjusted} = C_{XLC}\left\lbrack 1 - \frac{V_{departure}}{V_{structure}} \right\rbrack^{2}
\tag{1.7}
\end{equation}\]</span></p>
<p>Where:</p>
<ul>
<li><em>V =</em> Velocity (m/s or ft/s if using <tcmd><a href="#tcfUnits">Units</a></tcmd><teq> == </teq><tblk> US Customary</tblk>)<br />
</li>
<li><em>C =</em> Energy Loss Coefficient</li>
</ul>
<p>Pressure flow is handled by transitioning from the equation described in the previous section (to derive the K value of 1.5625 from a coefficient of discharge value of 0.8) to a fully submerged situation where a deck energy loss is applied. The flux is calculated based on both the fully submerged situation and the pressure flow situation, and the lesser of the two fluxes is applied. The 1d_nwk HConF_or_WC attribute can be used to vary Cd (default value is 0.8) and the WConF_or_WEx attribute to set the submerged deck loss coefficient. When pressure flow results the “P” flag will appear in the .eof file and _TSF layer.</p>
<p>Optionally, LC tables can be specified for BB bridges. If a LC table exists, the Deck loss coefficient (DLC) will be ignored, while the other 3 parameters (CD, ELC and XLC) are not affected. The LC tables for BB bridges should only be the losses due to piers and bridge decks. The LC table should not include any losses for contraction, expansion and pressure flow. Note the Form_Loss value is added to the LC table loss values.</p>
<p>If no LC table exists for the BB bridge, and the 1d_nwk Form_Loss attribute is greater than 0.0001, a LC table is automatically generated using Form_Loss for the pier losses and the WConF_or_WEx for the Deck Loss coefficient (DLC).</p>
<p>Other notes are:</p>
<ul>
<li>BB bridges are only available if <tcmd><a href="#ecfStructureRoutines">Structure Routines</a> </tcmd><teq>==</teq><tblk> 2013</tblk> (the default).<br />
</li>
<li>The unadjusted entry and exist losses (ELS and XLC) cannot be below 0 or greater than 1, and will be automatically limited to these values.<br />
</li>
<li>_TSF and _TSL layers contain the following flags/values for BB bridges:
<ul>
<li>For normal flow (“ ” or “D” if drowned out): fixed / adjusted components<br />
</li>
<li>For Pressure (“P”) flow: Deck surcharge Coefficient / 0.0<br />
</li>
<li>Other flags:
<ul>
<li>“U” for upstream controlled flow – only occurs when downstream water level is below the bridge bed level.<br />
</li>
<li>“Z” for zero or nearly zero flow.</li>
</ul></li>
</ul></li>
</ul>
<p>A working example of a model containing an BB bridge is provided in the <a href="https://wiki.tuflow.com/TUFLOW_Example_Models#1D_Structures">1D Structures Example Model Dataset</a> on the TUFLOW Wiki.</p>
<table>
<caption>
<span id="tab:tab-BridgesAttributeDescriptions">Table 1.11: </span><strong>Bridges: 1D Model Network (1d_nwk) Attribute Descriptions</strong>
</caption>
<thead>
<tr>
<th style="text-align:right;font-weight: bold;color: WHITE !important;background-color: rgba(26, 189, 201, 255) !important;">
No. 
</th>
<th style="text-align:left;font-weight: bold;color: WHITE !important;background-color: rgba(26, 189, 201, 255) !important;">
Default GIS Attribute Name
</th>
<th style="text-align:left;font-weight: bold;color: WHITE !important;background-color: rgba(26, 189, 201, 255) !important;">
Description
</th>
<th style="text-align:left;font-weight: bold;color: WHITE !important;background-color: rgba(26, 189, 201, 255) !important;">
Type
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right;">
1
</td>
<td style="text-align:left;">
ID
</td>
<td style="text-align:left;">
Unique identifier up to 12 characters in length. It may contain any character except for quotes and commas, and cannot be blank. As a general rule, spaces and special characters (e.g. “\”) should be avoided, although they are accepted. The same ID can be used for a channel and a node, but no two nodes and no two channels can have the same ID.
</td>
<td style="text-align:left;">
Char(12)
</td>
</tr>
<tr>
<td style="text-align:right;">
2
</td>
<td style="text-align:left;">
Type
</td>
<td style="text-align:left;">
“B” or “BB” as specified in Table <a href="Channel-Intro-2.html#tab:tab-LineTypes">1.1</a>.
</td>
<td style="text-align:left;">
Char(4)
</td>
</tr>
<tr>
<td style="text-align:right;">
3
</td>
<td style="text-align:left;">
Ignore
</td>
<td style="text-align:left;">
If a “T”, “t”, “Y” or “y” is specified, the object will be ignored (T for True and Y for Yes). Any other entry, including a blank field, will treat the object as active.
</td>
<td style="text-align:left;">
Char(1)
</td>
</tr>
<tr>
<td style="text-align:right;">
4
</td>
<td style="text-align:left;">
UCS<br />
(Use Channel Storage at nodes).
</td>
<td style="text-align:left;">
If left blank or set to Yes (“Y” or “y”) or True (“T” or “t”), the storage based on the width of the channel over half the channel length is assigned to both of the two nodes connected to the channel. If set to No (“N” or “n”) or False (“F” or “f”), the channel width does not contribute to the node’s storage. See Section <a href="Nodes-2.html#Nodes-2">1.12</a> for further discussion.
</td>
<td style="text-align:left;">
Char(1)
</td>
</tr>
<tr>
<td style="text-align:right;">
5
</td>
<td style="text-align:left;">
Len_or_ANA
</td>
<td style="text-align:left;">
Only used in determining nodal storages if the UCS attribute is set to “Y” or “T”. Not used in conveyance calculations.
</td>
<td style="text-align:left;">
Float
</td>
</tr>
<tr>
<td style="text-align:right;">
6
</td>
<td style="text-align:left;">
n_nF_Cd
</td>
<td style="text-align:left;">
Not used.
</td>
<td style="text-align:left;">
Float
</td>
</tr>
<tr>
<td style="text-align:right;">
7
</td>
<td style="text-align:left;">
US_Invert
</td>
<td style="text-align:left;">
Sets the upstream and downstream inverts. Note that the invert is taken as the maximum of the US_Invert and the DS_Invert attributes. Use -99999 to use the bed of the cross-section as the invert.
</td>
<td style="text-align:left;">
Float
</td>
</tr>
<tr>
<td style="text-align:right;">
8
</td>
<td style="text-align:left;">
DS_Invert
</td>
<td style="text-align:left;">
Sets the downstream invert of the channel using the same rules as for described for the US_Invert attribute above.
</td>
<td style="text-align:left;">
Float
</td>
</tr>
<tr>
<td style="text-align:right;">
9
</td>
<td style="text-align:left;">
Form_Loss
</td>
<td style="text-align:left;">
<p>If a LC table exists, for BB bridges adds the value specified to the loss coefficients in the LC table. Not added to LC tables for B bridges.</p>
<p>If no LC table exists, and the value is greater than zero, TUFLOW automatically generates a LC table of constant loss coefficient up until the bridge deck (i.e. the top of the cross-section). The interpretation of the LC table generated from the Form_Loss value differs depending on whether a B or a BB bridge as follows:</p>
<p>For B bridges (with no LC table):</p>
<ul>
<li>The Form_Loss (LC value) is not subject to adjustment when using <tcmd>Structure Losses</tcmd><teq> == </teq><tblk>ADJUST</tblk>.</li>
<li>Above the underside of the bridge deck (the top of the cross-section) a value of 1.5625 is used, with the 1.5625 less the Form_Loss value is subject to adjustment when using <tcmd>Structure Losses</tcmd><teq> == </teq><tblk>ADJUST</tblk>.</li>
</ul>
<p>For BB bridges (with no LC table):</p>
<ul>
<li>The Form_Loss (LC value) is only used to apply pier losses. Contraction/expansion losses and bridge deck pressure flow losses are automatically calculated.</li>
<li>Once the bridge deck is fully submerged (and no longer under pressure flow) the WConF_or_WEx attribute is used to set the additional losses due to the bridge deck.</li>
</ul>
Note: Due to the potential for a divide by zero, a zero loss value cannot be specified with no LC table. A loss value of 0 will return <a href="https://wiki.tuflow.com/TUFLOW_Message_1422">ERROR 1422</a>. A minimum loss value of 0.01 for B bridges or 0.001 for BB bridges is required by TUFLOW to ensure a divide by zero does not occur. Specifying a loss value equal to or less than these minimums (but not 0) will apply these minimum losses, i.e. to apply these minimum losses specify a value of 0.001 for either B or BB bridges.
</td>
<td style="text-align:left;">
Float
</td>
</tr>
<tr>
<td style="text-align:right;">
10
</td>
<td style="text-align:left;">
pBlockage
</td>
<td style="text-align:left;">
Not used. Reserved for future builds to fully or partially block B channels. The 1d_xs Skew attribute can be used to partially block cross-sections of these channels – see Table <a href="XS-2.html#tab:tab-CrossAttributeDescriptions">1.4</a>.
</td>
<td style="text-align:left;">
Float
</td>
</tr>
<tr>
<td style="text-align:right;">
11
</td>
<td style="text-align:left;">
Inlet_Type
</td>
<td style="text-align:left;">
Leave blank unless using the legacy MIKE 11 1D cross-section data feature.
</td>
<td style="text-align:left;">
Char(256)
</td>
</tr>
<tr>
<td style="text-align:right;">
12
</td>
<td style="text-align:left;">
Conn_1D_2D
</td>
<td style="text-align:left;">
Leave blank unless using the legacy MIKE 11 1D cross-section data feature, or if accessing a Flood Modeller cross-section database (.pro file), enter the label in the .pro file.
</td>
<td style="text-align:left;">
Char(4)
</td>
</tr>
<tr>
<td style="text-align:right;">
13
</td>
<td style="text-align:left;">
Conn_No
</td>
<td style="text-align:left;">
Leave blank unless using the legacy MIKE 11 1D cross-section data feature.
</td>
<td style="text-align:left;">
Integer
</td>
</tr>
<tr>
<td style="text-align:right;">
14
</td>
<td style="text-align:left;">
Width_or_Dia
</td>
<td style="text-align:left;">
Not used.
</td>
<td style="text-align:left;">
Float
</td>
</tr>
<tr>
<td style="text-align:right;">
15
</td>
<td style="text-align:left;">
Height_or_WF
</td>
<td style="text-align:left;">
Not used.
</td>
<td style="text-align:left;">
Float
</td>
</tr>
<tr>
<td style="text-align:right;">
16
</td>
<td style="text-align:left;">
Number_of
</td>
<td style="text-align:left;">
Not used.
</td>
<td style="text-align:left;">
Integer
</td>
</tr>
<tr>
<td style="text-align:right;">
17
</td>
<td style="text-align:left;">
HConF_or_WC
</td>
<td style="text-align:left;">
<p>B bridges: Not used.</p>
BB bridges: Bridge deck pressure flow contraction coefficient (C<sub>d</sub>). If set to zero the default of 0.8 or that specified by <a href="#ecfBridgeZeroCoefficients">Bridge Zero Coefficients</a> is used.
</td>
<td style="text-align:left;">
Float
</td>
</tr>
<tr>
<td style="text-align:right;">
18
</td>
<td style="text-align:left;">
WConF_or_WEx
</td>
<td style="text-align:left;">
<p>B bridges: Not used.</p>
BB bridges: Bridge deck energy loss coefficient (DLC) for fully submerged flow. If set to zero the default of 0.5 or that specified by <a href="#ecfBridgeZeroCoefficients">Bridge Zero Coefficients</a> is used.
</td>
<td style="text-align:left;">
Float
</td>
</tr>
<tr>
<td style="text-align:right;">
19
</td>
<td style="text-align:left;">
EntryC_or_WSa
</td>
<td style="text-align:left;">
<p>B bridges: Not used.</p>
BB bridges: Unadjusted entrance energy loss coefficient (ELC). If set to zero the default of 0.5 or that specified by <a href="#ecfBridgeZeroCoefficients">Bridge Zero Coefficients</a> is used.
</td>
<td style="text-align:left;">
Float
</td>
</tr>
<tr>
<td style="text-align:right;">
20
</td>
<td style="text-align:left;">
ExitC_or_WSb
</td>
<td style="text-align:left;">
<p>B bridges: Not used.</p>
BB bridges: Unadjusted exit energy loss coefficient (XLC). If set to zero the default of 1.0 or that specified by <a href="#ecfBridgeZeroCoefficients">Bridge Zero Coefficients</a> is used.
</td>
<td style="text-align:left;">
Float
</td>
</tr>
</tbody>
</table>
<table>
<caption>
<span id="tab:tab-LinkAttributeDescriptions">Table 1.12: </span><strong>1D Bridge Geometry Table Link (1d_bg) Attribute Descriptions</strong>
</caption>
<thead>
<tr>
<th style="text-align:right;font-weight: bold;color: WHITE !important;background-color: rgba(26, 189, 201, 255) !important;">
No. 
</th>
<th style="text-align:left;font-weight: bold;color: WHITE !important;background-color: rgba(26, 189, 201, 255) !important;">
Default GIS Attribute Name
</th>
<th style="text-align:left;font-weight: bold;color: WHITE !important;background-color: rgba(26, 189, 201, 255) !important;">
Description
</th>
<th style="text-align:left;font-weight: bold;color: WHITE !important;background-color: rgba(26, 189, 201, 255) !important;">
Type
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right;">
1
</td>
<td style="text-align:left;">
Source
</td>
<td style="text-align:left;">
Filename (and path or relative path if needed) of the file containing the tabular data. Must be a comma or space delimited text file such as a .csv file.
</td>
<td style="text-align:left;">
Char(50)
</td>
</tr>
<tr>
<td style="text-align:right;">
2
</td>
<td style="text-align:left;">
Type
</td>
<td style="text-align:left;">
<b>“BG” or “LC”: </b> Bridge energy loss coefficients (second column) versus elevation (first column) for bridge structures.
</td>
<td style="text-align:left;">
Char(2)
</td>
</tr>
<tr>
<td style="text-align:right;">
3
</td>
<td style="text-align:left;">
Flags
</td>
<td style="text-align:left;">
No optional flags.
</td>
<td style="text-align:left;">
Char(8)
</td>
</tr>
<tr>
<td style="text-align:right;">
4
</td>
<td style="text-align:left;">
Column_1
</td>
<td style="text-align:left;">
<p>Optional. Identifies a label in the Source file that is the header for the first column of data (ie. elevation). Values are read from the first number encountered below the label until a non-number value, blank line or end of the file is encountered.</p>
If this field is left blank, the first column of data in the Source file is used.
</td>
<td style="text-align:left;">
Char(20)
</td>
</tr>
<tr>
<td style="text-align:right;">
5
</td>
<td style="text-align:left;">
Column_2
</td>
<td style="text-align:left;">
<p>Optional. Identifies a label in the Source file that is in the header for the second column of data (ie. loss coefficient).</p>
If this field is left blank, the next column of data after Column_1 is used.
</td>
<td style="text-align:left;">
Char(20)
</td>
</tr>
<tr>
<td style="text-align:right;">
6
</td>
<td style="text-align:left;">
Column_3
</td>
<td style="text-align:left;">
Not used.
</td>
<td style="text-align:left;">
Char(20)
</td>
</tr>
<tr>
<td style="text-align:right;">
7
</td>
<td style="text-align:left;">
Column_4
</td>
<td style="text-align:left;">
Not used.
</td>
<td style="text-align:left;">
Char(20)
</td>
</tr>
<tr>
<td style="text-align:right;">
8
</td>
<td style="text-align:left;">
Column_5
</td>
<td style="text-align:left;">
Not used.
</td>
<td style="text-align:left;">
Char(20)
</td>
</tr>
<tr>
<td style="text-align:right;">
9
</td>
<td style="text-align:left;">
Column_6
</td>
<td style="text-align:left;">
Not used.
</td>
<td style="text-align:left;">
Char(20)
</td>
</tr>
<tr>
<td style="text-align:right;">
10
</td>
<td style="text-align:left;">
Z_Increment
</td>
<td style="text-align:left;">
Not used.
</td>
<td style="text-align:left;">
Float
</td>
</tr>
<tr>
<td style="text-align:right;">
11
</td>
<td style="text-align:left;">
Z_Maximum
</td>
<td style="text-align:left;">
Not used.
</td>
<td style="text-align:left;">
Float
</td>
</tr>
<tr>
<td style="text-align:right;">
12
</td>
<td style="text-align:left;">
Skew<br />
(in degrees)
</td>
<td style="text-align:left;">
Not used.
</td>
<td style="text-align:left;">
Float
</td>
</tr>
</tbody>
</table>
</div>
</div>
<div id="BArch-3" class="section level3 hasAnchor" number="1.7.3">
<h3><span class="header-section-number">1.7.3</span> Arch Bridge<a href="Structures-2.html#BArch-3" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>The 2023-03 release introduced support for arch bridges as 1D channels. The approach is based on the ‘Afflux at Arch Bridges’ <span class="citation">(<a href="Nodes-2.html#ref-HRWallingford1988">HR Wallingford, 1988</a>)</span>. Arch bridges are defined in the 1d_nwk layer as a “BArch” type. The 1d_nwk attributes specific to an arch bridge are outlined below in Table <a href="Structures-2.html#tab:tab-ArchBridgesAttributeDescriptions">1.13</a>.</p>
<p>When an arch bridge becomes fully submerged, the actual flux through a small arch bridge opening can diverge from the flux calculated from the approach above. By default, the arch bridge approach <span class="citation">(<a href="Nodes-2.html#ref-HRWallingford1988">HR Wallingford, 1988</a>)</span> is still applied when water level exceeds the bridge obvert (or soffit) level. However, a transition to orifice flow condition can be optionally turned on. <br>
The flow rate under the orifice flow condition is calculated using Equation <a href="OperationalChannels-2.html#eq:equ-orifice-flow">(1.22)</a> with the discharge coefficient (<span class="math inline">\(C_{d}\)</span>) set via the HConF_or_WC attribute (detailed in Table <a href="Structures-2.html#tab:tab-ArchBridgesAttributeDescriptions">1.13</a>). Two options are available to calculate the final discharge coefficient based on the input 1d_nwk HConF_or_WC attribute:</p>
<ol style="list-style-type: decimal">
<li>A positive HConF_or_WC value can be used to set the discharge coefficient. The recommended value is 0.799.</li>
<li>If a negative value is specified, the absolute of HConF_or_WC is used as a calibration factor, i.e. the discharge coefficient = abs(HConF_or_WC) * 0.799. For example, a HConF_or_WC value of -2 will adjust the discharge coefficient to 1.598.</li>
</ol>
<p>To enable this transition, three extra attributes must be specified: a discharge coefficient (or calibration factor), lower transition distance and upper transition distance (HConF_or_WC, EntryC_or_WSa and ExitC_or_WSb attributes outlined in Table <a href="Structures-2.html#tab:tab-ArchBridgesAttributeDescriptions">1.13</a>). The transition from bridge flow to orifice flow will begin at the lower transition elevation and continue linearly until the upper transition elevation is reached. From this point, the orifice flow condition is used.</p>
<p>A working example of a model containing an arch bridge is provided in the <a href="https://wiki.tuflow.com/TUFLOW_Example_Models#1D_Structures">1D Structures Example Model Dataset</a> on the TUFLOW Wiki.</p>
<table>
<caption>
<span id="tab:tab-ArchBridgesAttributeDescriptions">Table 1.13: </span><strong>Arch Bridges 1D Model Network (1d_nwk) Attribute Descriptions</strong>
</caption>
<thead>
<tr>
<th style="text-align:right;font-weight: bold;color: WHITE !important;background-color: rgba(26, 189, 201, 255) !important;">
No. 
</th>
<th style="text-align:left;font-weight: bold;color: WHITE !important;background-color: rgba(26, 189, 201, 255) !important;">
Default GIS Attribute Name
</th>
<th style="text-align:left;font-weight: bold;color: WHITE !important;background-color: rgba(26, 189, 201, 255) !important;">
Description
</th>
<th style="text-align:left;font-weight: bold;color: WHITE !important;background-color: rgba(26, 189, 201, 255) !important;">
Type
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right;">
1
</td>
<td style="text-align:left;">
ID
</td>
<td style="text-align:left;">
Unique identifier up to 12 characters in length. It may contain any character except for quotes and commas, and cannot be blank. As a general rule, spaces and special characters (e.g. “\”) should be avoided, although they are accepted. The same ID can be used for a channel and a node, but no two nodes and no two channels can have the same ID.
</td>
<td style="text-align:left;">
Char(12)
</td>
</tr>
<tr>
<td style="text-align:right;">
2
</td>
<td style="text-align:left;">
Type
</td>
<td style="text-align:left;">
“BArch” as specified in Table <a href="Channel-Intro-2.html#tab:tab-LineTypes">1.1</a>.
</td>
<td style="text-align:left;">
Char(4)
</td>
</tr>
<tr>
<td style="text-align:right;">
3
</td>
<td style="text-align:left;">
Ignore
</td>
<td style="text-align:left;">
If a “T”, “t”, “Y” or “y” is specified, the object will be ignored (T for True and Y for Yes). Any other entry, including a blank field, will treat the object as active.
</td>
<td style="text-align:left;">
Char(1)
</td>
</tr>
<tr>
<td style="text-align:right;">
4
</td>
<td style="text-align:left;">
UCS<br />
(Use Channel Storage at nodes).
</td>
<td style="text-align:left;">
If left blank or set to Yes (“Y” or “y”) or True (“T” or “t”), the storage based on the width of the channel over half the channel length is assigned to both of the two nodes connected to the channel. If set to No (“N” or “n”) or False (“F” or “f”), the channel width does not contribute to the node’s storage. See Section <a href="Nodes-2.html#Nodes-2">1.12</a> for further discussion.
</td>
<td style="text-align:left;">
Char(1)
</td>
</tr>
<tr>
<td style="text-align:right;">
5
</td>
<td style="text-align:left;">
Len_or_ANA
</td>
<td style="text-align:left;">
Only used in determining nodal storages if the UCS attribute is set to “Y” or “T”. Not used in conveyance calculations.
</td>
<td style="text-align:left;">
Float
</td>
</tr>
<tr>
<td style="text-align:right;">
6
</td>
<td style="text-align:left;">
n_nF_Cd
</td>
<td style="text-align:left;">
Not used.
</td>
<td style="text-align:left;">
Float
</td>
</tr>
<tr>
<td style="text-align:right;">
7
</td>
<td style="text-align:left;">
US_Invert
</td>
<td style="text-align:left;">
Sets the upstream and downstream inverts. Note that the invert is taken as the maximum of the US_Invert and the DS_Invert attributes. Use -99999 to use the bed of the cross-section as the invert.
</td>
<td style="text-align:left;">
Float
</td>
</tr>
<tr>
<td style="text-align:right;">
8
</td>
<td style="text-align:left;">
DS_Invert
</td>
<td style="text-align:left;">
Sets the downstream invert of the channel using the same rules as for described for the US_Invert attribute above.
</td>
<td style="text-align:left;">
Float
</td>
</tr>
<tr>
<td style="text-align:right;">
9
</td>
<td style="text-align:left;">
Form_Loss
</td>
<td style="text-align:left;">
Not used.
</td>
<td style="text-align:left;">
Float
</td>
</tr>
<tr>
<td style="text-align:right;">
10
</td>
<td style="text-align:left;">
pBlockage
</td>
<td style="text-align:left;">
Not used.
</td>
<td style="text-align:left;">
Float
</td>
</tr>
<tr>
<td style="text-align:right;">
11
</td>
<td style="text-align:left;">
Inlet_Type
</td>
<td style="text-align:left;">
The relative path to the arch properties file (must be a .csv file). See Section <a href="Special-Channels-2.html#M-Channel-3">1.8.1</a>.
</td>
<td style="text-align:left;">
Char(256)
</td>
</tr>
<tr>
<td style="text-align:right;">
12
</td>
<td style="text-align:left;">
Conn_1D_2D
</td>
<td style="text-align:left;">
Not used.
</td>
<td style="text-align:left;">
Char(4)
</td>
</tr>
<tr>
<td style="text-align:right;">
13
</td>
<td style="text-align:left;">
Conn_No
</td>
<td style="text-align:left;">
Not used.
</td>
<td style="text-align:left;">
Integer
</td>
</tr>
<tr>
<td style="text-align:right;">
14
</td>
<td style="text-align:left;">
Width_or_Dia
</td>
<td style="text-align:left;">
Optional skew parameter.
</td>
<td style="text-align:left;">
Float
</td>
</tr>
<tr>
<td style="text-align:right;">
15
</td>
<td style="text-align:left;">
Height_or_WF
</td>
<td style="text-align:left;">
Optional calibration coefficient.
</td>
<td style="text-align:left;">
Float
</td>
</tr>
<tr>
<td style="text-align:right;">
16
</td>
<td style="text-align:left;">
Number_of
</td>
<td style="text-align:left;">
Not used.
</td>
<td style="text-align:left;">
Integer
</td>
</tr>
<tr>
<td style="text-align:right;">
17
</td>
<td style="text-align:left;">
HConF_or_WC
</td>
<td style="text-align:left;">
<p>Discharge coefficient (<span class="math inline">\(C_{d}\)</span>) for orifice flow (see Equation <a href="OperationalChannels-2.html#eq:equ-orifice-flow">(1.22)</a>). To enable the transition to orifice flow, specify a non-zero value for this attribute.</p>
<ul>
<li>A positive value sets the discharge coefficient. The recommended value is 0.799.</li>
<li>If a negative value is specified, the absolute of this value is used as a calibration factor. I.e. discharge coefficient = abs(calibration factor) * 0.799.</li>
<li>If left blank, or set to 0, the orifice flow is not applied.</li>
</ul>
If this field is specified, attributes EntryC_or_WSa and ExitC_or_WSb must also be set.
</td>
<td style="text-align:left;">
Float
</td>
</tr>
<tr>
<td style="text-align:right;">
18
</td>
<td style="text-align:left;">
WConF_or_WEx
</td>
<td style="text-align:left;">
Not used.
</td>
<td style="text-align:left;">
Float
</td>
</tr>
<tr>
<td style="text-align:right;">
19
</td>
<td style="text-align:left;">
EntryC_or_WSa
</td>
<td style="text-align:left;">
<p>Lower transition distance for orifice flow, measured as the depth below obvert. I.e. the depth below obvert at which the transition from bridge flow to orifice flow commences.</p>
This field is ignored if HConF_or_WC is blank.
</td>
<td style="text-align:left;">
Float
</td>
</tr>
<tr>
<td style="text-align:right;">
20
</td>
<td style="text-align:left;">
ExitC_or_WSb
</td>
<td style="text-align:left;">
<p>Upper transition distance for orifice flow, measured as the depth above obvert. I.e. the depth above obvert at which the transition from bridge flow to orifice flow is complete.</p>
<p>The upper transition elevation must be greater than the lower transition elevation.</p>
This field is ignored if HConF_or_WC is blank.
</td>
<td style="text-align:left;">
Float
</td>
</tr>
</tbody>
</table>
<p>The .csv for the arch properties should contain the columns outlined in Table <a href="Structures-2.html#tab:tab-ArchBridgeProperties">1.14</a>.</p>
<table>
<caption>
<span id="tab:tab-ArchBridgeProperties">Table 1.14: </span><strong>Arch Bridge Properties .csv</strong>
</caption>
<thead>
<tr>
<th style="text-align:right;font-weight: bold;color: WHITE !important;background-color: rgba(26, 189, 201, 255) !important;">
Column
</th>
<th style="text-align:left;font-weight: bold;color: WHITE !important;background-color: rgba(26, 189, 201, 255) !important;">
Description
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right;">
1
</td>
<td style="text-align:left;">
Start chainage for arch opening.
</td>
</tr>
<tr>
<td style="text-align:right;">
2
</td>
<td style="text-align:left;">
End chainage for arch opening.
</td>
</tr>
<tr>
<td style="text-align:right;">
3
</td>
<td style="text-align:left;">
Springing level.
</td>
</tr>
<tr>
<td style="text-align:right;">
4
</td>
<td style="text-align:left;">
Start chainage for arch opening.
</td>
</tr>
</tbody>
</table>
<div id="BArch-Editor-4" class="section level4 hasAnchor" number="1.7.3.1">
<h4><span class="header-section-number">1.7.3.1</span> Arch Bridge Editor<a href="Structures-2.html#BArch-Editor-4" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>An arch bridge creator and editor tool has been developed for the <a href="https://wiki.tuflow.com/TUFLOW_QGIS_Plugin">QGIS TUFLOW Plugin</a>. This tool is available from the TUFLOW Plugin Version 3.7 or later. The documentation and examples for this tool can be found on the <a href="https://wiki.tuflow.com/QGIS_TUFLOW_Arch_Bridge_Editor">TUFLOW Wiki Arch Bridge Editor</a>.</p>
<center>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:fig-image21"></span>
<img src="images/image21.png" alt="**Arch Bridge Editor Tool**"  />
<p class="caption">
Figure 1.6: <strong>Arch Bridge Editor Tool</strong>
</p>
</div>
</center>
</div>
<div id="BArch-Min-Blc-4" class="section level4 hasAnchor" number="1.7.3.2">
<h4><span class="header-section-number">1.7.3.2</span> Arch Minimum Blockage<a href="Structures-2.html#BArch-Min-Blc-4" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>The flume experiments in the ‘Afflux at Arch Bridges’ <span class="citation">(<a href="Nodes-2.html#ref-HRWallingford1988">HR Wallingford, 1988</a>)</span> were done using medium to high bridge blockages (20%~70%), and this approach can generate extremely high velocity when the bridge blockage is close to zero percent. The 2023-03-AF release introduced a minimum blockage of 5% to stabilise the flow. This default value can be changed using the following command:</p>
<p><tcmd><a href="#ecfArchBridgeMinimumBlockage">Arch Bridge Minimum Blockage (%)</a></tcmd><teq> == </teq><tblk>&lt;min_pblockage&gt;</tblk></p>
</div>
</div>
<div id="Weir-3" class="section level3 hasAnchor" number="1.7.4">
<h3><span class="header-section-number">1.7.4</span> Weirs<a href="Structures-2.html#Weir-3" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div id="Weir-Intro-4" class="section level4 hasAnchor" number="1.7.4.1">
<h4><span class="header-section-number">1.7.4.1</span> Weirs Overview<a href="Structures-2.html#Weir-Intro-4" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>A range of weir types are available as listed in Table <a href="Structures-2.html#tab:tab-WeirTypes">1.15</a>. Weir channels do not require data for length, Manning’s n, divergence or bed slope (they are effectively zero-length channels, although the length is used for automatically determining nodal storages – see Section <a href="Nodes-2.html#AutoStorageWidths-4">1.12.1.1</a>).</p>
<p>All weirs have three flow regimes of zero flow (dry), upstream controlled flow (unsubmerged) and downstream controlled flow (submerged).</p>
<table>
<caption>
<span id="tab:tab-WeirTypes">Table 1.15: </span><strong>Weir Types</strong>
</caption>
<thead>
<tr>
<th style="text-align:left;font-weight: bold;color: WHITE !important;background-color: rgba(26, 189, 201, 255) !important;">
Weir Type
</th>
<th style="text-align:left;font-weight: bold;color: WHITE !important;background-color: rgba(26, 189, 201, 255) !important;">
Description
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
W
</td>
<td style="text-align:left;">
The original ESTRY weir based on the broad-crested weir formula with the Bradley submergence approach (see <tcmd><a href="#ecfWeirApproach">Weir Approach</a> </tcmd><teq>==</teq><tblk> METHOD A</tblk>). The weir shape is defined either as a rectangle using the 1d_nwk Width attribute or as a cross-section.
</td>
</tr>
<tr>
<td style="text-align:left;">
WB
</td>
<td style="text-align:left;">
Broad-crested weir. A rectangular section shape is assumed.
</td>
</tr>
<tr>
<td style="text-align:left;">
WC
</td>
<td style="text-align:left;">
Crump weir.
</td>
</tr>
<tr>
<td style="text-align:left;">
WD
</td>
<td style="text-align:left;">
User-defined weir.
</td>
</tr>
<tr>
<td style="text-align:left;">
WO
</td>
<td style="text-align:left;">
Ogee-crested weir.
</td>
</tr>
<tr>
<td style="text-align:left;">
WR
</td>
<td style="text-align:left;">
Rectangular weir (sharp crested).
</td>
</tr>
<tr>
<td style="text-align:left;">
WT
</td>
<td style="text-align:left;">
Trapezoidal weir or Cippoletti weir.
</td>
</tr>
<tr>
<td style="text-align:left;">
WV
</td>
<td style="text-align:left;">
V-notch weir.
</td>
</tr>
<tr>
<td style="text-align:left;">
WW
</td>
<td style="text-align:left;">
Similar to the original W weir channel, but has more options allowing the user to customise the weir sub-mergence curve and other parameters. Can be based on either a rectangular shape using the 1d_nwk Width attribute or on a cross-section.
</td>
</tr>
</tbody>
</table>
</div>
<div id="W-Weir-4" class="section level4 hasAnchor" number="1.7.4.2">
<h4><span class="header-section-number">1.7.4.2</span> Original Weirs (W)<a href="Structures-2.html#W-Weir-4" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>For a “W” type weir, a standard weir flow formula is used as per the equation below. The weir is assumed to be broad-crested. Weirs with different characteristics should be modelled using one of the other weir types listed in Table <a href="Structures-2.html#tab:tab-WeirTypes">1.15</a> and discussed in Section <a href="Structures-2.html#Adv-Weir-4">1.7.4.3</a>.</p>
<p><span class="math display" id="eq:equ-Qweir">\[\begin{equation}
Q_{weir} = \ \frac{2}{3}CW\sqrt{\frac{2g}{C_{f}}}H^{\frac{3}{2}}
\tag{1.8}
\end{equation}\]</span></p>
<p><span class="math display" id="eq:equ-Vapproach">\[\begin{equation}
V_{approach} = \ \frac{2}{3}C\sqrt{\frac{2gH}{C_{f}}}
\tag{1.9}
\end{equation}\]</span></p>
<p>Where:</p>
<ul>
<li><span class="math inline">\(Q_{weir}\)</span> = Unsubmerged flow over the weir (m<sup>3</sup>/s or ft<sup>3</sup>/s)<br />
</li>
<li><span class="math inline">\(V_{approach}\)</span> = Velocity approaching the weir (m/s or ft/s)<br />
</li>
<li><span class="math inline">\(C\)</span> = Broad-crested weir coefficient of 0.57<br />
</li>
<li><span class="math inline">\(W\)</span> = Flow width (m or ft)<br />
</li>
<li><span class="math inline">\(C_{f}\)</span> = Weir calibration factor (default of 1.0 – refer to 1d_nwk “Height_or_WF” attribute)<br />
</li>
<li><span class="math inline">\(H\)</span> = Depth of water approaching the weir relative to the weir invert (m or ft)</li>
</ul>
<p><strong>Note:</strong> Metric (SI) units are TUFLOW’s default. To use imperial units, ensure <tcmd><a href="#tcfUnits">Units</a></tcmd><teq> == </teq><tblk> US Customary</tblk> has been specified in the .tcf.</p>
<p>The calibration factor C<sub>f</sub>, is available for modifying the flow. For a given approach velocity the backwater (head increment) of the weir channel is proportional to the inverse of the factor. It is normally set to 1.0 by default and modified if required for calibration or other adjustment. Note, this factor is not the weir coefficient, rather a calibration factor to adjust the standard broad-crested weir equation. The factor can be used to model other types of weirs through adjustment of the broad-crested weir equation, although use of the other weir types listed in Table <a href="Structures-2.html#tab:tab-WeirTypes">1.15</a> is recommended.</p>
<p><span class="citation">Huxley (<a href="Nodes-2.html#ref-Huxley2004">2004</a>)</span> contains benchmarking of unsubmerged and submerged weir flow to the literature.</p>
<p>Note that the velocity output for a weir is the approach velocity, V<sub>approach</sub>, in the above equations, not the velocity at critical depth (when the flow is unsubmerged).</p>
<p>For submergence of W weir channels, it is recommended that <a href="#ecfWeirApproach">Weir Approach</a> is set to METHOD A or METHOD C. Both METHOD A and METHOD C utilises the Bradley submergence approach (METHOD C is a slight enhancement that only affects WW weir channels). The Bradley Submergence approach <span class="citation">(<a href="Nodes-2.html#ref-Bradley1978">Bradley, 1978</a>)</span>, Figure 24, is handled by fitting the equation below to Bradley’s submergence curve reproduced in Figure <a href="Structures-2.html#fig:fig-image22">1.7</a> and applying the submergence factor to the weir equation above.</p>
<p>Once the percentage of submergence exceeds 70%, the submergence factor applied is given by the equation below <a href="Structures-2.html#eq:equ-submergence-factor">(1.10)</a>. The Bradley curve (as digitised) and the resulting curve from the equation below are shown alongside the submergence curves used for other weir types. The submergence factor transitions the flow from weir flow to zero flow as the water level difference (<em>dH</em>) approaches zero.</p>
<p><span class="math display" id="eq:equ-submergence-factor">\[\begin{equation}
C_{sf} = \ 1 - \left( 1 - \frac{dH}{H} \right)^{20}
\tag{1.10}
\end{equation}\]</span></p>
<p><tcmd><a href="#ecfWeirApproach">Weir Approach</a> </tcmd><teq>==</teq><tblk> METHOD B</tblk> was introduced to provide additional stability for 1D flow over roadways connected to 2D domains, however, it can cause excessive head drops under drowned flow conditions and is not recommended or to be used with caution. METHOD B only applies to the W weir.</p>
<p>A working example of a model containing an original weir (W) is provided in the <a href="https://wiki.tuflow.com/TUFLOW_Example_Models#1D_Structures">1D Structures Example Model Dataset</a> on the TUFLOW Wiki.</p>
<center>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:fig-image22"></span>
<img src="images/image22.png" alt="**Bradley Weir Submergence Curve [@Bradley1978]**" width="80%" />
<p class="caption">
Figure 1.7: <strong>Bradley Weir Submergence Curve <span class="citation">(<a href="Nodes-2.html#ref-Bradley1978">Bradley, 1978</a>)</span></strong>
</p>
</div>
</center>
</div>
<div id="Adv-Weir-4" class="section level4 hasAnchor" number="1.7.4.3">
<h4><span class="header-section-number">1.7.4.3</span> Advanced Weirs (WB, WC, WD, WO, WR, WT, WV, WW)<a href="Structures-2.html#Adv-Weir-4" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>The advanced weirs, as listed in Table <a href="Structures-2.html#tab:tab-WeirTypes">1.15</a>, offer greater variety, flexibility and can be customised by the user. Most of these weirs can also be operated, see Section <a href="OperationalChannels-2.html#OperationalChannels-2">1.9</a>.</p>
<p>The weir flow is determined by the following equation.</p>
<p><span class="math display" id="eq:equ-weir-flow">\[\begin{equation}
Q = {\frac{2}{3}\ {\ C}_{f\ }C}_{sf}{\ C}_{d\ }W\ \sqrt{2g}{\ H}^{Ex}
\tag{1.11}
\end{equation}\]</span></p>
<p>Where:</p>
<ul>
<li><span class="math inline">\(Q\)</span> = Flow over the weir (m<sup>3</sup>/s or ft<sup>3</sup>/s)<br />
</li>
<li><span class="math inline">\(C_{d}\)</span> = Weir coefficient<br />
</li>
<li><span class="math inline">\(C_{sf}\)</span> = Weir submergence factor<br />
</li>
<li><span class="math inline">\(C_{f}\)</span> = Weir calibration factor (default of 1.0 – refer to 1d_nwk “Height_or_WF” attribute)<br />
</li>
<li><span class="math inline">\(W\)</span> = Flow width (m or ft)<br />
</li>
<li><span class="math inline">\(H\)</span> = Upstream water surface or energy depth relative to the weir invert (m or ft) – see note 5 below</li>
<li><span class="math inline">\(Ex\)</span> = Weir flow equation exponent</li>
</ul>
<p><strong>Note:</strong> Metric (SI) units are TUFLOW’s default. To use imperial units, ensure <tcmd><a href="#tcfUnits">Units</a></tcmd><teq> == </teq><tblk> US Customary</tblk> has been specified in the .tcf.</p>
<p>Notes</p>
<ol style="list-style-type: decimal">
<li>The default values for <em>C<sub>d</sub></em> are provided in Table <a href="Structures-2.html#tab:tab-WeirFlows">1.16</a>, and documented further below for weirs where <em>C<sub>d</sub></em> is recalculated each timestep.<br />
</li>
<li>The approach taken for calculating the weir submergence factor <span class="math inline">\(C_{sf}\)</span> each timestep is documented below.<br />
</li>
<li>The weir calibration factor, <em>C<sub>f</sub></em>, is by default 1.0 and should only be changed should there be a good justification.<br />
</li>
<li>For weirs where the flow width (<em>W)</em> varies (e.g. a V-notch WV weir) the formula for that weir takes into account the varying width.<br />
</li>
<li>Whether water surface depth or the energy level is used for <em>H</em> depends on the <a href="#ecfStructureFlowLevels">Structure Flow Levels</a> setting, which can be changed on a structure by structure case using the E or H flag (see Table <a href="Channel-Intro-2.html#tab:tab-LineTypesOptionalFlags">1.2</a>).<br />
</li>
<li>The default values for <em>Ex</em> are provided in Table <a href="Structures-2.html#tab:tab-WeirFlows">1.16</a> .</li>
</ol>
<p>Table <a href="Structures-2.html#tab:tab-WeirFlows">1.16</a> presents the weir coefficient <span class="math inline">\(C_{d}\)</span> and weir flow exponent <span class="math inline">\(Ex\)</span> used for each weir. Some of these values are derived from dimensional forms of the weir equations. Values other than the default values shown in Table <a href="Structures-2.html#tab:tab-WeirFlows">1.16</a> may be used by altering the attributes of the 1d_nwk layer. Refer to Table <a href="Structures-2.html#tab:tab-WeirsAttributeDescriptions">1.17</a> for further information.</p>
<p>Note that <span class="math inline">\(C_{d}\)</span> for WO and WV weirs is recalculated every timestep as described in the following sections. It is possible to override this by specifying a non-zero positive value for the “HConF_or_WC” attribute in the 1d_nwk layer. For WD weirs the user must specify a non-zero positive value.</p>
<p>The value for <span class="math inline">\(C_{f} \times C_{d}\)</span> and <span class="math inline">\(C_{sf}\)</span> is written to the TSL_P output (see Section <a href="#TS-GIS-3"><strong>??</strong></a>) at each timestep.</p>
<p>The default submergence curves can be found in Figure <a href="Structures-2.html#fig:fig-image26">1.10</a> and Figure <a href="Structures-2.html#fig:fig-image26">1.10</a>.</p>
<table>
<caption>
<span id="tab:tab-WeirFlows">Table 1.16: </span><strong>Default Attribute Values for the Weir Equation for Different Weir Flows</strong>
</caption>
<thead>
<tr>
<th style="text-align:center;font-weight: bold;color: WHITE !important;background-color: rgba(26, 189, 201, 255) !important;">
Channel Type
</th>
<th style="text-align:center;font-weight: bold;color: WHITE !important;background-color: rgba(26, 189, 201, 255) !important;">
Cd (HConF or WC)
</th>
<th style="text-align:center;font-weight: bold;color: WHITE !important;background-color: rgba(26, 189, 201, 255) !important;">
Ex (WConF or WEx)
</th>
<th style="text-align:center;font-weight: bold;color: WHITE !important;background-color: rgba(26, 189, 201, 255) !important;">
a (EntryC or WSa)
</th>
<th style="text-align:center;font-weight: bold;color: WHITE !important;background-color: rgba(26, 189, 201, 255) !important;">
b (ExitC or WSb)
</th>
<th style="text-align:left;font-weight: bold;color: WHITE !important;background-color: rgba(26, 189, 201, 255) !important;">
Default Submergence Curve
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center;">
SP
</td>
<td style="text-align:center;">
0.75
</td>
<td style="text-align:center;">
1.5
</td>
<td style="text-align:center;">
6.992
</td>
<td style="text-align:center;">
0.648
</td>
<td style="text-align:left;">
Ogee / Nappe <span class="citation">(<a href="Nodes-2.html#ref-IAHRManual1994">Miller, 1994</a>; <a href="Nodes-2.html#ref-USBR1987">USBR, 1987</a>)</span>
</td>
</tr>
<tr>
<td style="text-align:center;">
WB
</td>
<td style="text-align:center;">
0.577 
</td>
<td style="text-align:center;">
1.5
</td>
<td style="text-align:center;">
8.550
</td>
<td style="text-align:center;">
0.556
</td>
<td style="text-align:left;">
Broad-crested from Abou Seida &amp; Quarashi, 1976 <span class="citation">(<a href="Nodes-2.html#ref-IAHRManual1994">Miller, 1994</a>)</span>
</td>
</tr>
<tr>
<td style="text-align:center;">
WC
</td>
<td style="text-align:center;">
0.508 
</td>
<td style="text-align:center;">
1.5
</td>
<td style="text-align:center;">
17.870
</td>
<td style="text-align:center;">
0.590
</td>
<td style="text-align:left;">
Crump H1/Hb=1.5 <span class="citation">(<a href="Nodes-2.html#ref-Bos1989">Bos, 1989</a>)</span>
</td>
</tr>
<tr>
<td style="text-align:center;">
WD
</td>
<td style="text-align:center;">
User Defined
</td>
<td style="text-align:center;">
1.5
</td>
<td style="text-align:center;">
3.000
</td>
<td style="text-align:center;">
0.500
</td>
<td style="text-align:left;">
User Defined default settings
</td>
</tr>
<tr>
<td style="text-align:center;">
WO
</td>
<td style="text-align:center;">
Recalculated every timestep
</td>
<td style="text-align:center;">
1.5
</td>
<td style="text-align:center;">
6.992
</td>
<td style="text-align:center;">
0.648
</td>
<td style="text-align:left;">
Ogee / Nappe <span class="citation">(<a href="Nodes-2.html#ref-IAHRManual1994">Miller, 1994</a>; <a href="Nodes-2.html#ref-USBR1987">USBR, 1987</a>)</span>
</td>
</tr>
<tr>
<td style="text-align:center;">
WR
</td>
<td style="text-align:center;">
0.62
</td>
<td style="text-align:center;">
1.5
</td>
<td style="text-align:center;">
2.205
</td>
<td style="text-align:center;">
0.483
</td>
<td style="text-align:left;">
Sharp Crest Thin Plate from Hagar, 1987a <span class="citation">(<a href="Nodes-2.html#ref-IAHRManual1994">Miller, 1994</a>)</span>
</td>
</tr>
<tr>
<td style="text-align:center;">
WT
</td>
<td style="text-align:center;">
0.63
</td>
<td style="text-align:center;">
1.5
</td>
<td style="text-align:center;">
2.205
</td>
<td style="text-align:center;">
0.483
</td>
<td style="text-align:left;">
Sharp Crest Thin Plate from Hagar, 1987a <span class="citation">(<a href="Nodes-2.html#ref-IAHRManual1994">Miller, 1994</a>)</span>
</td>
</tr>
<tr>
<td style="text-align:center;">
WV
</td>
<td style="text-align:center;">
Recalculated every timestep
</td>
<td style="text-align:center;">
2.5
</td>
<td style="text-align:center;">
2.205
</td>
<td style="text-align:center;">
0.483
</td>
<td style="text-align:left;">
Sharp Crest Thin Plate from Hagar, 1987a <span class="citation">(<a href="Nodes-2.html#ref-IAHRManual1994">Miller, 1994</a>)</span>
</td>
</tr>
<tr>
<td style="text-align:center;">
WW
</td>
<td style="text-align:center;">
0.542 
</td>
<td style="text-align:center;">
1.5
</td>
<td style="text-align:center;">
21.150
</td>
<td style="text-align:center;">
0.627
</td>
<td style="text-align:left;">
Bradley 1978 Broad-crested <span class="citation">(<a href="Nodes-2.html#ref-Bradley1978">Bradley, 1978</a>)</span>
</td>
</tr>
</tbody>
</table>
<div id="WO-Weir-5" class="section level5 hasAnchor" number="1.7.4.3.1">
<h5><span class="header-section-number">1.7.4.3.1</span> Ogee Crest Weir (WO)<a href="Structures-2.html#WO-Weir-5" class="anchor-section" aria-label="Anchor link to header"></a></h5>
<p>For WO (Ogee crest) weirs, the charts developed in <span class="citation">USBR (<a href="Nodes-2.html#ref-USBR1987">1987</a>)</span> are used by fitting the relationship presented and plotted on the USBR curve below (Figure <a href="Structures-2.html#fig:fig-image24">1.8</a>). The relationship falls within ±0.5% of the curve. Note that the relationship below is for US Customary Units, which is converted to metric if running the simulation in metric units. The <span class="citation">USBR (<a href="Nodes-2.html#ref-USBR1987">1987</a>)</span> method consists of two steps:</p>
<ul>
<li>The ogee crest coefficient <span class="math inline">\(C_{0}\)</span> (i.e. the discharge coefficient when the actual upstream head <span class="math inline">\(H_{e}\)</span> = design head <span class="math inline">\(H_{0}\)</span>) is set based on <span class="math inline">\(H_{0}\)</span> and the height of the weir above its sill (<span class="math inline">\(P\)</span>) as per Figure 9-23 of <span class="citation">USBR (<a href="Nodes-2.html#ref-USBR1987">1987</a>)</span>. Note that for setting the value of <span class="math inline">\(P\)</span> the absolute difference in height between the US_Invert and DS_Invert attributes is used.</li>
</ul>
<center>
<img src="images/image23.png"
style="width:3.82292in;height:2.77774in" />
</center>
<center>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:fig-image24"></span>
<img src="images/image24.png" alt="**Ogee Spillway Discharge Coefficient, based on Figure 9-23 [@USBR1987]**" width="60%" />
<p class="caption">
Figure 1.8: <strong>Ogee Spillway Discharge Coefficient, based on Figure 9-23 <span class="citation">(<a href="Nodes-2.html#ref-USBR1987">USBR, 1987</a>)</span></strong>
</p>
</div>
</center>
<ul>
<li>When the actual head (<span class="math inline">\(H_{e}\)</span>) is different from the design head (<span class="math inline">\(H_{0}\)</span>) during the simulation, the discharge coefficient differs from that shown on Figure <a href="Structures-2.html#fig:fig-image24">1.8</a>. At each simulation timestep, the discharge coefficient is adjusted based on <span class="math inline">\(H_{e}\)</span>/<span class="math inline">\(H_{0}\)</span> as per the chart below. The final discharge coefficient applied is <span class="math inline">\(C_{0}\)</span> × <span class="math inline">\(C\)</span>/<span class="math inline">\(C_{0}\)</span> in this chart.</li>
</ul>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:fig-SmallDams2"></span>
<img src="images/SmallDams2.png" alt="**Adjustment of Discharge Coefficient based on $H_{e}$/$H_{0}$, Figure 9-24 [@USBR1987]**" width="60%" />
<p class="caption">
Figure 1.9: <strong>Adjustment of Discharge Coefficient based on <span class="math inline">\(H_{e}\)</span>/<span class="math inline">\(H_{0}\)</span>, Figure 9-24 <span class="citation">(<a href="Nodes-2.html#ref-USBR1987">USBR, 1987</a>)</span></strong>
</p>
</div>
<p>Three options to calculate the final discharge coefficient are offered based on the input value of the 1d_nwk HConF_or_WC attribute:</p>
<ul>
<li>If the discharge coefficient has already been obtained by hand calculation, a positive HConF_or_WC value can be used to apply a constant discharge coefficient, i.e. <span class="math inline">\(C\)</span> = <span class="math inline">\(C_{0}\)</span> = HConF_or_WC.</li>
<li>If the design head (<span class="math inline">\(H_0\)</span>) is known for an ogee crest weir, a negative HConF_or_WC value can be used to specify <span class="math inline">\(H_0\)</span>. The two-step <span class="citation">USBR (<a href="Nodes-2.html#ref-USBR1987">1987</a>)</span> method stated above will be applied to estimate the final discharge coefficient. Note this option is only available in the 2023-03-AB build or later.</li>
<li>If HConF_or_WC is zero (0) or left as blank (the default), the actual head <span class="math inline">\(H_e\)</span> at each simulation timestep will be used to estimate <span class="math inline">\(C\)</span> from Figure 9-23 of <span class="citation">USBR (<a href="Nodes-2.html#ref-USBR1987">1987</a>)</span>, with no further adjustment based on Figure 9-24 of <span class="citation">USBR (<a href="Nodes-2.html#ref-USBR1987">1987</a>)</span>. This approach should be used when the design head (<span class="math inline">\(H_0\)</span>) is unknown.</li>
</ul>
</div>
<div id="WV-Weir-5" class="section level5 hasAnchor" number="1.7.4.3.2">
<h5><span class="header-section-number">1.7.4.3.2</span> V-Notch Weir (WV)<a href="Structures-2.html#WV-Weir-5" class="anchor-section" aria-label="Anchor link to header"></a></h5>
<p>For WV (V-notch) weirs, the approach taken is to use the formulae derived by <a href="https://www.lmnoeng.com/Weirs/vweir.php">LMNO Engineering</a> as shown below. For metric models the flow is calculated in ft<sup>3</sup>/s and converted to m<sup>3</sup>/s. The top height of a V-notch weir cannot be specified, the angle continues with the increasing water level.</p>
<center>
<img src="images/image25.png"
style="width:6.29931in;height:3.73542in" />
</center>
</div>
</div>
<div id="Submerge-4" class="section level4 hasAnchor" number="1.7.4.4">
<h4><span class="header-section-number">1.7.4.4</span> Advanced Weir Submergence Curves<a href="Structures-2.html#Submerge-4" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Weir submergence factors <span class="math inline">\(C_{sf}\)</span> were sought from two sources: “Discharge Characteristics” <span class="citation">(<a href="Nodes-2.html#ref-IAHRManual1994">Miller, 1994</a>)</span> and “Discharge Measurement Structures” <span class="citation">(<a href="Nodes-2.html#ref-Bos1989">Bos, 1989</a>)</span>. The submergence charts for each weir type, relating the weir submergence factor to the ratio between downstream and upstream water level were reproduced from the literature in Excel and are shown in Figure <a href="Structures-2.html#fig:fig-image27">1.11</a>.</p>
<p>Two methods were utilised to fit equations to these curves. These are:</p>
<p>The Rational Function expressed as:</p>
<p><span class="math display" id="eq:equ-rational">\[\begin{equation}
C_{sf} = \frac{a + b\left( \frac{H_{d}}{H_{u}} \right)}{1 + c\left( \frac{H_{d}}{H_{u}} \right)\  + \ d\left( \frac{H_{d}}{H_{u}} \right)^{2}}
\tag{1.12}
\end{equation}\]</span></p>
<p>The Villemonte equation, expressed as:</p>
<p><span class="math display" id="eq:equ-villemonte">\[\begin{equation}
C_{sf} = \left( 1 - \ \left( \frac{H_{d}}{H_{u}} \right)^{a} \right)^{b}
\tag{1.13}
\end{equation}\]</span></p>
<p>Where:</p>
<ul>
<li><span class="math inline">\(H_{u}\)</span> = Upstream energy or water level above the weir crest (m or ft)<br />
</li>
<li><span class="math inline">\(H_{d}\)</span> = Downstream energy or water level above the weir crest (m or ft)<br />
</li>
<li><span class="math inline">\(a, b\)</span> = Model coefficients</li>
</ul>
<p><strong>Note:</strong> Metric (SI) units are TUFLOW’s default. To use imperial units, ensure <tcmd><a href="#tcfUnits">Units</a></tcmd><teq> == </teq><tblk> US Customary</tblk> has been specified in the .tcf.</p>
<p>“Discharge Measurement Structures” <span class="citation">(<a href="Nodes-2.html#ref-Bos1989">Bos, 1989</a>)</span> applies upstream energy and downstream water level to calculate <span class="math inline">\(C_{sf}\)</span>. This can be specified globally using the <tcmd><a href="#ecfStructureFlowLevels">Structure Flow Levels</a></tcmd><teq> == </teq><tblk>ENERGY UPSTREAM</tblk> command (the default option is “ENERGY”, which uses energy level both upstream and downstream). It can also be changed for individual weirs using the “EH” flag in the 1d_nwk “Type” attribute, e.g. “WB EH”.</p>
<p>For each submergence curve, the above equations were solved to obtain values for each of the variables that produced the best fit with the curves provided in the literature. After a comparison of the results, the equation from Villemonte was chosen for several reasons:</p>
<ul>
<li>The Rational Function was found to be sensitive to variables and required a greater number of decimal places. Villemonte was found to provide accurate results with variables requiring only 2 decimal places.<br />
</li>
<li>The Villemonte equation contains only two variables, compared to four used in the Rational Function, making it simpler and less susceptible to error.<br />
</li>
<li>The Villemonte equation may be solved exactly at the extremities of the curves (i.e. where <span class="math inline">\(\frac{H_{d}}{H_{u}} = \ 1\)</span> and <span class="math inline">\(C_{sf} = 0\)</span>, and when <span class="math inline">\(\frac{H_{d}}{H_{u}}\)</span> = 0 and <span class="math inline">\(C_{sf} = 1\)</span>). The Rational Function required further manipulation through inclusion of additional points to achieve this outcome.</li>
</ul>
<p>The default variables <em>a</em> and <em>b</em> used to determine the submergence factor <span class="math inline">\(C_{sf}\)</span> for each weir type are presented in Table <a href="Structures-2.html#tab:tab-WeirFlows">1.16</a>. Figure <a href="Structures-2.html#fig:fig-image27">1.11</a> shows the submergence curves produced using the default values in Table <a href="Structures-2.html#tab:tab-WeirFlows">1.16</a> to calculate <span class="math inline">\({\ C}_{sf}\)</span>.</p>
<center>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:fig-image26"></span>
<img src="images/image26.jpeg" alt="**Weir Submergence Curves from the Literature**" width="80%" />
<p class="caption">
Figure 1.10: <strong>Weir Submergence Curves from the Literature</strong>
</p>
</div>
</center>
<center>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:fig-image27"></span>
<img src="images/image27.jpeg" alt="**Weir Submergence Curves using Villemonte Equation**" width="80%" />
<p class="caption">
Figure 1.11: <strong>Weir Submergence Curves using Villemonte Equation</strong>
</p>
</div>
</center>
<table>
<caption>
<span id="tab:tab-WeirsAttributeDescriptions">Table 1.17: </span><strong>Weirs: 1D Model Network (1d_nwk) Attribute Descriptions</strong>
</caption>
<thead>
<tr>
<th style="text-align:right;font-weight: bold;color: WHITE !important;background-color: rgba(26, 189, 201, 255) !important;">
No. 
</th>
<th style="text-align:left;font-weight: bold;color: WHITE !important;background-color: rgba(26, 189, 201, 255) !important;">
Default GIS Attribute Name
</th>
<th style="text-align:left;font-weight: bold;color: WHITE !important;background-color: rgba(26, 189, 201, 255) !important;">
Description
</th>
<th style="text-align:left;font-weight: bold;color: WHITE !important;background-color: rgba(26, 189, 201, 255) !important;">
Type
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right;">
1
</td>
<td style="text-align:left;">
ID
</td>
<td style="text-align:left;">
Unique identifier up to 12 characters in length. It may contain any character except for quotes and commas, and cannot be blank. As a general rule, spaces and special characters (e.g. “\”) should be avoided, although they are accepted. The same ID can be used for a channel and a node, but no two nodes and no two channels can have the same ID.
</td>
<td style="text-align:left;">
Char(12)
</td>
</tr>
<tr>
<td style="text-align:right;">
2
</td>
<td style="text-align:left;">
Type
</td>
<td style="text-align:left;">
The weir channel type as specified using the flags in Table <a href="Channel-Intro-2.html#tab:tab-LineTypes">1.1</a> and <a href="Structures-2.html#tab:tab-WeirTypes">1.15</a>. For example, a V-notch weir would be entered as “WV”.
</td>
<td style="text-align:left;">
Char(4)
</td>
</tr>
<tr>
<td style="text-align:right;">
3
</td>
<td style="text-align:left;">
Ignore
</td>
<td style="text-align:left;">
If a “T”, “t”, “Y” or “y” is specified, the object will be ignored (T for True and Y for Yes). Any other entry, including a blank field, will treat the object as active.
</td>
<td style="text-align:left;">
Char(1)
</td>
</tr>
<tr>
<td style="text-align:right;">
4
</td>
<td style="text-align:left;">
UCS<br />
(Use Channel Storage at nodes)
</td>
<td style="text-align:left;">
If left blank or set to Yes (“Y” or “y”) or True (“T” or “t”), the storage based on the width of the channel over half the channel length is assigned to both of the two nodes connected to the channel. If set to No (“N” or “n”) or False (“F” or “f”), the channel width does not contribute to the node’s storage. See Section <a href="Nodes-2.html#AutoStorageWidths-4">1.12.1.1</a> for further discussion.
</td>
<td style="text-align:left;">
Char(1)
</td>
</tr>
<tr>
<td style="text-align:right;">
5
</td>
<td style="text-align:left;">
Len_or_ANA
</td>
<td style="text-align:left;">
The length of the weir channel, not the weir crest. Only used for automatically determining the storage at the nodes if the UCS attribute is set to “Y” or “T”. Not used in the conveyance calculations. If a no attribute is specified, the length of the digitised line is used.
</td>
<td style="text-align:left;">
Float
</td>
</tr>
<tr>
<td style="text-align:right;">
6
</td>
<td style="text-align:left;">
n_nF_Cd
</td>
<td style="text-align:left;">
Not used.
</td>
<td style="text-align:left;">
Float
</td>
</tr>
<tr>
<td style="text-align:right;">
7
</td>
<td style="text-align:left;">
US_Invert
</td>
<td style="text-align:left;">
<p><b>All Weir (excluding WO) Channel Types: </b><br />
Sets the weir invert. Note that the invert is taken as the maximum of the US_Invert and the DS_Invert attributes. For W and WW weirs use -99999 to use the bed of the cross-section (if one exists) as the invert or weir crest.</p>
<b>WO Channel Type: </b><br />
The absolute difference in height between the US_Invert and DS_Invert is used to set the height of the weir above its sill (usually denoted as P), which is used for recalculating the weir’s discharge coefficient each timestep. If the US_Invert and DS_Invert are the same value the primary upstream channel bed will be used to set the value of P.
</td>
<td style="text-align:left;">
Float
</td>
</tr>
<tr>
<td style="text-align:right;">
8
</td>
<td style="text-align:left;">
DS_Invert
</td>
<td style="text-align:left;">
See comments above for US_Invert.
</td>
<td style="text-align:left;">
Float
</td>
</tr>
<tr>
<td style="text-align:right;">
9
</td>
<td style="text-align:left;">
Form_Loss
</td>
<td style="text-align:left;">
Not used.
</td>
<td style="text-align:left;">
Float
</td>
</tr>
<tr>
<td style="text-align:right;">
10
</td>
<td style="text-align:left;">
pBlockage
</td>
<td style="text-align:left;">
<p><b>W Channel Type: </b><br />
Not used. Reserved for future builds to fully or partially block W channels. The 1d_xs Skew attribute can be used to partially block cross-sections of these channels - see Table <a href="XS-2.html#tab:tab-CrossAttributeDescriptions">1.4</a>.</p>
<p><b>WB, WC, WD, WO, WR, and WS Channel Type: </b><br />
The weir width is adjusted proportionally by the % blockage.</p>
<p><b>WT Channel Type: </b><br />
The base width of the weir is adjusted proportionally by the % blockage.</p>
<b>WV Channel Type: </b><br />
The V-notch angle is adjusted proportionally by the % blockage.
</td>
<td style="text-align:left;">
Float
</td>
</tr>
<tr>
<td style="text-align:right;">
11
</td>
<td style="text-align:left;">
Inlet_Type
</td>
<td style="text-align:left;">
Leave blank unless using the legacy MIKE 11 1D cross-section data feature.
</td>
<td style="text-align:left;">
Char(256)
</td>
</tr>
<tr>
<td style="text-align:right;">
12
</td>
<td style="text-align:left;">
Conn_1D_2D
</td>
<td style="text-align:left;">
Leave blank unless using the legacy MIKE 11 1D cross-section data feature, or if accessing a Flood Modeller cross-section database (.pro file), enter the label in the .pro file.
</td>
<td style="text-align:left;">
Char(4)
</td>
</tr>
<tr>
<td style="text-align:right;">
13
</td>
<td style="text-align:left;">
Conn_No
</td>
<td style="text-align:left;">
Leave blank unless using the legacy MIKE 11 1D cross-section data feature.
</td>
<td style="text-align:left;">
Integer
</td>
</tr>
<tr>
<td style="text-align:right;">
14
</td>
<td style="text-align:left;">
Width_or_Dia
</td>
<td style="text-align:left;">
<p><b>All Weir (excluding WT and WV) Channel Types: </b><br />
The weir width in metres. The maximum of US_Invert and DS_Invert is used in conjunction with the Width_or_Dia attribute to define a rectangular section 5m (16.4ft) high. The automatic height given to the weir of 5m (16.4ft) so that the generation of node storage areas from channel widths are within a realistic range of elevations. Use <a href="#ecfDepthLimitFactor">Depth Limit Factor</a> to allow water levels to exceed the 5m (16.4ft) range if required.</p>
<p>Note: For W and WW weirs if a cross-section for the channel exists, the cross-section profile will prevail over the automatic rectangular shape.
Note: For operational weirs, the width of the weir when fully open.</p>
<p><b>WT Channel Type:</b><br />
The width at the base of the trapezoidal weir. WT weirs are Cippoletti weirs that have side slopes of 1 horizontal to 4 vertical.</p>
<b>WV Channel Type:</b><br />
Angle of the V-notch in degrees. Must be between 20º and 100º.
</td>
<td style="text-align:left;">
Float
</td>
</tr>
<tr>
<td style="text-align:right;">
15
</td>
<td style="text-align:left;">
Height_or_WF
</td>
<td style="text-align:left;">
<p><b>For non-operated weirs</b>, this value can be used as a weir coefficient adjustment factor to be primarily used for model calibration or sensitivity testing. The weir coefficient is multiplied by this value. The resulting weir coefficient can be viewed in the .eof file and over time in the _TSL GIS layer. If zero or negative an adjustment factor of 1.0 (i.e. no adjustment) is applied.</p>
<b>For operational weirs</b>, the height of the weir above the crest when fully up.
</td>
<td style="text-align:left;">
Float
</td>
</tr>
<tr>
<td style="text-align:right;">
16
</td>
<td style="text-align:left;">
Number_of
</td>
<td style="text-align:left;">
Not used.
</td>
<td style="text-align:left;">
Integer
</td>
</tr>
<tr>
<td style="text-align:right;">
17
</td>
<td style="text-align:left;">
HConF_or_WC
</td>
<td style="text-align:left;">
<p><b>W Channel Type: </b><br />
Not used.</p>
<p><b>All Weir (excluding W) Channel Types:</b><br />
Weir coefficient, Cd, in its dimensionless form. If less than or equal to zero the default value for the weir type in Table <a href="Structures-2.html#tab:tab-WeirFlows">1.16</a> is used.</p>
<p>Note that for WV weirs the default is to recalculate Cd every timestep. Entering a value greater than zero (0) will override this and apply a fixed Cd.</p>
<p>For WO weirs, the default is to recalculate Cd every timestep based on the actual head, while entering a value less than zero (0) will specify a design head for Cd calulation. Entering a value greater than zero (0) will apply a fixed Cd. Please see Section <a href="Structures-2.html#WO-Weir-5">1.7.4.3.1</a> for the detailed ogee crest weir approach.</p>
<p>For WD weirs the user must specify a non-zero positive value.</p>
Note that published weir coefficients may be based on other non-dimensional or dimensional forms of the weir equation, and care should be taken in ensuring the coefficient is compatible with the form of the weir flow equation presented in Section <a href="Structures-2.html#Adv-Weir-4">1.7.4.3</a>.
</td>
<td style="text-align:left;">
Float
</td>
</tr>
<tr>
<td style="text-align:right;">
18
</td>
<td style="text-align:left;">
WConF_or_WEx
</td>
<td style="text-align:left;">
<p><b>W Channel Type: </b><br />
Not used.</p>
<b>All Weir (excluding W) Channel Types:</b><br />
Weir flow equation exponent Ex in the weir flow equation presented in Section <a href="Structures-2.html#Adv-Weir-4">1.7.4.3</a>. If less than or equal to zero the default value for the weir type in Table <a href="Structures-2.html#tab:tab-WeirFlows">1.16</a> is used. The default value is 1.5 for all weir types except for WV which is 2.5.
</td>
<td style="text-align:left;">
Float
</td>
</tr>
<tr>
<td style="text-align:right;">
19
</td>
<td style="text-align:left;">
EntryC_or_WSa
</td>
<td style="text-align:left;">
<p><b>W Channel Type: </b><br />
Not used.</p>
<b>All Weir (excluding W) Channel Types: </b><br />
Sets the submergence factor “a” exponent in the Villemonte Equation for calculating the weir submergence factor Csf (refer to equations in Section <a href="Structures-2.html#Adv-Weir-4">1.7.4.3</a> and <a href="Structures-2.html#Submerge-4">1.7.4.4</a>). If less than or equal to zero the default value for the weir type in Table <a href="Structures-2.html#tab:tab-WeirFlows">1.16</a> is used.
</td>
<td style="text-align:left;">
Float
</td>
</tr>
<tr>
<td style="text-align:right;">
20
</td>
<td style="text-align:left;">
ExitC_or_WSb
</td>
<td style="text-align:left;">
<p><b>W Channel Type: </b><br />
Not used.</p>
<b>All Weir (excluding W) Channel Types:</b><br />
Sets the submergence factor “b” exponent in the Villemonte Equation for calculating the weir submergence factor Csf (refer to equations in Section <a href="Structures-2.html#Adv-Weir-4">1.7.4.3</a> and <a href="Structures-2.html#Submerge-4">1.7.4.4</a>). If less than or equal to zero the default value for the weir type in Table <a href="Structures-2.html#tab:tab-WeirFlows">1.16</a> is used.
</td>
<td style="text-align:left;">
Float
</td>
</tr>
</tbody>
</table>
</div>
<div id="Auto-Weir-4" class="section level4 hasAnchor" number="1.7.4.5">
<h4><span class="header-section-number">1.7.4.5</span> Automatically Created Weirs<a href="Structures-2.html#Auto-Weir-4" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Weirs representing overtopping of structures such as culverts and bridges may be automatically created without the need to digitise a separate line within a 1d_nwk layer. The structure must be digitised within a 1d_nwke layer (as opposed to a 1d_nwk layer) and a “W” specified alongside the original structure type. For example, to model a bridge and a weir representing overtopping of the road deck, specify type “BW”. The weir crest level and dimensions are specified within the additional attributes contained within a 1d_nwke layer and are explained in Table <a href="Structures-2.html#tab:tab-OptionalAttributeDescriptions">1.18</a>. The original W weir approach is adopted for calculating the flow (see Section <a href="Structures-2.html#W-Weir-4">1.7.4.2</a>).</p>
<p>The weir’s shape is assumed to be two rectangles on top of each other. The lower rectangle is reduced in width according to the percent blockage applied to the rail (i.e. the EN4 attribute in Table <a href="Structures-2.html#tab:tab-OptionalAttributeDescriptions">1.18</a>), and its height is the EN3 attribute. The upper rectangle is the full flow width and extends indefinitely in the vertical.</p>
<p>Alternatively, the flow over a structure can be manually digitised as a separate 1d_nwk weir channel parallel to the original bridge or culvert structure (i.e. the weir is connected to the ends of the bridge/culvert). Any of the available weir types can be used in this instance.</p>
<table>
<caption>
<span id="tab:tab-OptionalAttributeDescriptions">Table 1.18: </span><strong>1D Model Network (1d_nwke) OPTIONAL Attribute Descriptions</strong>
</caption>
<thead>
<tr>
<th style="text-align:right;font-weight: bold;color: WHITE !important;background-color: rgba(26, 189, 201, 255) !important;">
No. 
</th>
<th style="text-align:left;font-weight: bold;color: WHITE !important;background-color: rgba(26, 189, 201, 255) !important;">
Default GIS Attribute Name
</th>
<th style="text-align:left;font-weight: bold;color: WHITE !important;background-color: rgba(26, 189, 201, 255) !important;">
Description
</th>
<th style="text-align:left;font-weight: bold;color: WHITE !important;background-color: rgba(26, 189, 201, 255) !important;">
Type
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right;">
21
</td>
<td style="text-align:left;">
ES1
</td>
<td style="text-align:left;">
Not yet used (leave blank).
</td>
<td style="text-align:left;">
Char(50)
</td>
</tr>
<tr>
<td style="text-align:right;">
22
</td>
<td style="text-align:left;">
ES2
</td>
<td style="text-align:left;">
Not yet used (leave blank).
</td>
<td style="text-align:left;">
Char(50)
</td>
</tr>
<tr>
<td style="text-align:right;">
23
</td>
<td style="text-align:left;">
EN1
</td>
<td style="text-align:left;">
For BW, CW and RW channels, the flow width of weir (m or ft (if using <tcmd><a href="#tcfUnits">Units</a></tcmd><teq> == </teq><tblk> US Customary</tblk>)) over the top of the B, C or R structure. If &lt; 0.001, uses width multiplied by the number of culverts attribute for C and R channels.
</td>
<td style="text-align:left;">
Float
</td>
</tr>
<tr>
<td style="text-align:right;">
24
</td>
<td style="text-align:left;">
EN2
</td>
<td style="text-align:left;">
For BW, CW and RW channels, the depth (m or ft (if using <tcmd><a href="#tcfUnits">Units</a></tcmd><teq> == </teq><tblk> US Customary</tblk>)) of the bridge deck or culvert overlay. The weir level is set using the average of the upstream and downstream obverts plus the EN2 value. The level can be confirmed using the <a href="https://wiki.tuflow.com/Check_Files_1d_inverts">inverts_check</a> file.
</td>
<td style="text-align:left;">
Float
</td>
</tr>
<tr>
<td style="text-align:right;">
25
</td>
<td style="text-align:left;">
EN3
</td>
<td style="text-align:left;">
For BW, CW and RW channels, the depth of the hand rail (m or ft (if using <tcmd><a href="#tcfUnits">Units</a></tcmd><teq> == </teq><tblk> US Customary</tblk>)). If &lt; 0.001 assumes solid or no rail, depending on the EN4 attribute entry.
</td>
<td style="text-align:left;">
Float
</td>
</tr>
<tr>
<td style="text-align:right;">
26
</td>
<td style="text-align:left;">
EN4
</td>
<td style="text-align:left;">
For BW, CW and RW channels, % blockage of the rail (e.g. 100 for solid rail, 50 for partially blocked, 0 for no rail).
</td>
<td style="text-align:left;">
Float
</td>
</tr>
<tr>
<td style="text-align:right;">
27
</td>
<td style="text-align:left;">
EN5
</td>
<td style="text-align:left;">
For BW, CW and RW channels, the weir calibration factor. Is set to 1.0 if &lt; 0.001 is specified.
</td>
<td style="text-align:left;">
Float
</td>
</tr>
<tr>
<td style="text-align:right;">
28
</td>
<td style="text-align:left;">
EN6
</td>
<td style="text-align:left;">
Not yet used (leave as zero).
</td>
<td style="text-align:left;">
Float
</td>
</tr>
<tr>
<td style="text-align:right;">
29
</td>
<td style="text-align:left;">
EN7
</td>
<td style="text-align:left;">
Not yet used (leave as zero).
</td>
<td style="text-align:left;">
Float
</td>
</tr>
<tr>
<td style="text-align:right;">
30
</td>
<td style="text-align:left;">
EN8
</td>
<td style="text-align:left;">
Not yet used (leave as zero).
</td>
<td style="text-align:left;">
Float
</td>
</tr>
</tbody>
</table>
</div>
<div id="VW-Channel-4" class="section level4 hasAnchor" number="1.7.4.6">
<h4><span class="header-section-number">1.7.4.6</span> VW Channels (Variable Geometry Weir)<a href="Structures-2.html#VW-Channel-4" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>The VW (variable weir) channel allows the modeller to vary the cross-section geometry of a W weir over time using a trapezoidal shape. To set up a VW channel follow the steps below.</p>
<p>In the 1d_nwk layer, the following attributes are required:</p>
<ul>
<li>ID = ID of the channel;<br />
</li>
<li>Type = “VW”;<br />
</li>
<li>Len_or_ANA = Nominal length in m (only used for calculating nodal storage if UCS is on);<br />
</li>
<li>US_Invert = -99999 (the invert level is specified in the .csv file discussed below);<br />
</li>
<li>DS_Invert = -99999 (the invert level is specified in the .csv file discussed below);<br />
</li>
<li>Inlet_Type = relative path to a .csv file containing information on how the weir geometry varies; and</li>
<li>Height_Cont = Trigger Value (the upstream water level to trigger the start of the failure; upstream water level is determined as the higher water level of the upstream and downstream nodes).</li>
</ul>
<p>The .csv file must be structured as follows (also see example below):</p>
<ol style="list-style-type: decimal">
<li>TUFLOW searches through the sheet until more than 4 numbers are found at the beginning of a row (Row 2 in the example below).<br />
</li>
<li>Each row of values is read until the end of the file or a row with no or less than four numbers is found. There is no limit on the number of rows of data.<br />
</li>
<li>The four columns must be as follows and in this order. The labels for the columns are optional.
<ol style="list-style-type: lower-roman">
<li>Time from start of breach in hours.<br />
</li>
<li>Weir bed level in metres.<br />
</li>
<li>Weir bed width in metres.<br />
</li>
<li>Side slope (enter as the vertical distance in metres for one metre horizontal). For example, a value of 0.5 means a slope of two horizontal to one vertical.</li>
</ol></li>
</ol>
<p>In the example below, the weir once triggered will erode from a bed level of 270m to 254m, widen from a bed width of 0 to 20m and the side slope will remain constant at 0.5. The period of time for the erosion is 0.5hours.</p>
<p>Although in most cases the weir is eroded, the weir can also be raised/accreted as well or a combination of the two. Simply enter the change over time using as many rows as needed.</p>
<p>The original W weir approach is adopted for calculating the flow (see Section <a href="Structures-2.html#W-Weir-4">1.7.4.2</a>).</p>
<center>
<img src="images/image28a.png" />
</center>
</div>
</div>
<div id="SP-3" class="section level3 hasAnchor" number="1.7.5">
<h3><span class="header-section-number">1.7.5</span> Spillways (SP)<a href="Structures-2.html#SP-3" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Spillways (‘SP’) were introduced for the TUFLOW 2013-12 release and may also be used in operational mode as a gated spillway (see Section <a href="OperationalChannels-2.html#OperationalChannels-2">1.9</a>). Spillways may also be simulated and operated as Q or QO channels where the user provides the stage discharge relationships (see Section <a href="Special-Channels-2.html#Q-Channels-3">1.8.2</a> and Section <a href="OperationalChannels-2.html#QO-3">1.9.3</a>). The 1d_nwk attributes are presented in Table <a href="Special-Channels-2.html#tab:tab-SpecialAttributeDescriptions">1.19</a>.</p>
<p>Spillways use the same equation as for advanced weirs (Section <a href="Structures-2.html#Adv-Weir-4">1.7.4.3</a>). For ungated spillways (i.e. SP, non-operated spillways) the same parameters as for Ogee Weirs are the default (see Table <a href="Structures-2.html#tab:tab-WeirFlows">1.16</a>), except for Cd, which is fixed with the default value of 0.75. For Ogee Weirs, C<sub>d</sub> is recalculated every timestep (see Section <a href="Structures-2.html#WO-Weir-5">1.7.4.3.1</a>). The 1d_nwk attributes in Table <a href="Structures-2.html#tab:tab-WeirFlows">1.16</a> can be used to modify the flow equation parameters for SP channels in a similar manner for advanced weirs.</p>
<p>SPO channels also use the same equation when the gate is not affecting the flow (for more information on SPO channels refer to Section <a href="OperationalChannels-2.html#SPO-3">1.9.6</a>).</p>
<p>SP and SPO channels can also drown out as per the submergence curves for advanced weirs.</p>
<p>A working example of a model containing a spillway is provided in the <a href="https://wiki.tuflow.com/TUFLOW_Example_Models#1D_Structures">1D Structures Example Model Dataset</a> on the TUFLOW Wiki.</p>
</div>
<div id="SG-3" class="section level3 hasAnchor" number="1.7.6">
<h3><span class="header-section-number">1.7.6</span> Sluice Gates (SG)<a href="Structures-2.html#SG-3" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>For sluice gates refer to Section <a href="OperationalChannels-2.html#SG-SGO-3">1.9.5</a>. The same approach applies as for SGO operated gates, except that the gate is assumed to be in a fixed position based on the 1d_nwk Height_or_WF attribute value. The 1d_nwk attributes are presented in Table <a href="Special-Channels-2.html#tab:tab-SpecialAttributeDescriptions">1.19</a>.</p>
</div>
<div id="LossAdjustment-3" class="section level3 hasAnchor" number="1.7.7">
<h3><span class="header-section-number">1.7.7</span> Adjustment of Contraction and Expansion Losses<a href="Structures-2.html#LossAdjustment-3" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>The energy losses associated with the contraction and expansion of flow lines into and out of a structure, can be automatically adjusted according to the approach and departure velocities in the upstream and downstream channels. This is particularly important where:</p>
<ul>
<li>There is no change in velocity magnitude and direction as water flows through a structure. In this situation, there is effectively no entrance (contraction) or exit (expansion) losses and the losses need to be reduced to zero. Examples are:
<ul>
<li>A clear spanning bridge over a stormwater channel where there are no losses due to any obstruction to flow until the bridge deck becomes surcharged.<br />
</li>
<li>Flow from one pipe to another where the pipe size remains unchanged and there is no significant bend or change in grade.<br />
</li>
</ul></li>
<li>There is a change in velocity, but the change does not warrant application of the full entrance and exit loss. This is the most common case where the application of the full entrance and exit loss coefficients (typically 0.5 and 1.0) will overestimate the energy loss through the structure. The full values are only representative of the situation where the approach and departure velocities are close to zero, for example, a culvert discharging from a lake into another lake where the velocity transitions from still water to fast flowing and to still water.</li>
</ul>
<p>The entrance and exit losses are adjusted according to the equations below to take into account the change in velocity caused by the structure. The first equation is empirical, while the second equation to adjust exit losses can be derived from first principles.</p>
<p><span class="math display" id="eq:equ-Entrance-1">\[\begin{equation}
\text{C}_{\text{entrance_adjusted}} = \text{C}_{\text{entrance}}\left\lbrack 1 - \frac{\text{V}_{\text{approach}}}{\text{V}_{\text{structure}}} \right\rbrack
\tag{1.14}
\end{equation}\]</span></p>
<p><span class="math display" id="eq:equ-Exit-1">\[\begin{equation}
\text{C}_{\text{exit_adjusted}} = \text{C}_{\text{exit}}\left\lbrack 1 - \frac{\text{V}_{\text{departure}}}{\text{V}_{\text{structure}}} \right\rbrack^{2}
\tag{1.15}
\end{equation}\]</span></p>
<p>Where:</p>
<ul>
<li><em>V =</em> Velocity (m/s or ft/s if using <tcmd><a href="#tcfUnits">Units</a></tcmd><teq> == </teq><tblk> US Customary</tblk>)<br />
</li>
<li><em>C =</em> Energy Loss Coefficient</li>
</ul>
<p>As the structure velocity approaches the incoming and/or outgoing velocities, the loss coefficient approaches zero. When the incoming and/or outgoing velocity approaches zero (i.e. water is leaving/entering a large body of water), the loss coefficients approach their full value.</p>
<p><span class="citation">Tullis &amp; Robinson (<a href="Nodes-2.html#ref-TullisRobinson2008">2008</a>)</span> provide an excellent proof for the need to adjust losses for different flow regimes using the exit loss equation above. The paper benchmarks different exit loss equations used within the industry methods against experimental flume test results.</p>
<p>The adjustment of losses feature is available to structures that require entrance and exit loss coefficients, namely culverts and bridges. For culverts, the adjusted entrance loss coefficient only applies where the flow is not inlet controlled (i.e. Regimes C, D, E, F, H and J in Table <a href="Structures-2.html#tab:tab-FlowRegimes">1.6</a>), and the adjusted exit loss is only influential where the flow is downstream controlled (i.e. Regimes D, F, H and J (subcritical at exit) in Table <a href="Structures-2.html#tab:tab-FlowRegimes">1.6</a>). For bridges, the application varies as discussed below.</p>
<p>If <tcmd><a href="#ecfStructureLosses">Structure Losses</a></tcmd><teq> == </teq><tblk>ADJUST EXCEPT BG TABLES</tblk> (default), the adjustment of the losses is only applied to culverts and B bridges with automatically generated loss tables using the 1d_nwk Form_Loss attribute (see Table <a href="Structures-2.html#tab:tab-BridgesAttributeDescriptions">1.11</a>). There is no adjustment for B bridges with a user specified BG or LC energy loss table, because bridge energy losses are most often based on coefficients from publications such as “Hydraulics of Bridge Waterways” <span class="citation">(<a href="Nodes-2.html#ref-Bradley1978">Bradley, 1978</a>)</span> or “Guide to Bridge Technology Part 8, Hydraulic Design of Waterway Structures” <span class="citation">(<a href="Nodes-2.html#ref-Austroads2018">Austroads, 2018</a>)</span> that have already taken into account the effects of contraction and expansion.</p>
<p>For BB bridges, the LC table should only represent the pier and submerged deck losses (see Section <a href="Structures-2.html#Submerge-4">1.7.4.4</a>), as the adjustment of entrance and exit losses every timestep as per the equations above is always applied irrespective of the <a href="#ecfStructureLosses">Structure Losses</a> setting. The equations above conform with the approach for determining contraction and expansion losses in publications such as Hydraulics of Bridge Waterways.</p>
<p>For B bridges and culverts, if <a href="#ecfStructureLosses">Structure Losses</a> is set to “ADJUST”, or “A” has been specified in the 1d_nwk Type attribute (e.g. BA, CA, IA or RA), the entrance and exit losses are adjusted according to the equations above. For B bridges, because the entrance and exit losses are combined as one loss coefficient, the entrance and exit loss components are proportioned one-third / two-thirds respectively when applying the above equations. For the new BB bridge, entrance and exit losses are always adjusted as per the equations above and the <a href="#ecfStructureLosses">Structure Losses</a> setting is not relevant (also see Section <a href="Structures-2.html#Submerge-4">1.7.4.4</a>).</p>
<p>The selection of the upstream and downstream channels on which to base the approach and departure velocities is as follows:</p>
<ul>
<li>The upstream channel is determined as the channel which has a positive flow direction into the structure whose invert is closest to that of the upstream invert of the structure. If no channel exists, no adjustment of losses is made (this includes structures connected to a 2D domain). Note that the upstream channel must be digitised so that it has the same positive flow direction to that of the structure.<br />
</li>
<li>The downstream channel is selected on a similar basis to that for the upstream channel.<br />
</li>
<li>The selected upstream and downstream channels are listed in the .eof file for cross-checking (search for “Primary Channel”).<br />
</li>
<li>X channels can be used to connect additional channels and ensure that these are not considered the primary channel.</li>
</ul>
<p>TUFLOW has no requirement of a minimum loss coefficient value for stability, and allows the adjusted coefficient to approach zero allowing this feature to correctly model the structure losses when the structure causes no disturbance to flow, or when one pipe discharges into another of identical size, grade and alignment.</p>
<p>The adjustment of loss coefficients does not apply to:</p>
<ul>
<li>Any bend or additional loss for a culvert entered using the Form_Loss attribute in the 1d_nwk layer. This coefficient can be used to apply additional losses (e.g. pit or bend losses) that are not affected by changes in the relativity of the approach/departure and structure velocities.<br />
</li>
<li>Any additional loss coefficient component for BB bridges entered using the Form_Loss attribute in the 1d_nwk layer. This coefficient can be used to apply additional losses (e.g. pier losses) that are not affected by changes in the relativity of the approach/departure and structure velocities.<br />
</li>
<li>The ends of culverts and bridges that are connected to 2D SX or HX cells as the approach or departure velocity needs to be derived in some manner from the 2D velocity field. It is important not to be duplicating energy losses by applying exit losses to a 1D structure and simulating the same energy losses due to the flow expansion in the 2D domain – for further information see the <a href="https://www.tuflow.com/library/webinars/#structures">Modelling Energy Losses at Structures AWS Webinar</a>.</li>
</ul>
<p>If <a href="#ecfStructureLosses">Structure Losses</a> is set to FIX, or “F” has been specified in the 1d_nwk Type attribute (e.g. BF, CF, IF or RF), the loss coefficients for B bridges and culverts are not adjusted. Fixing the entrance and exit losses for BB bridges is not available – use a B bridge instead.</p>
<p>The variation in time of the loss coefficients can be viewed using the _TSL output layer (see Section <a href="#TS-GIS-3"><strong>??</strong></a>) or charted in the QGIS TUFLOW Viewer plugin.</p>
<p>If there is a manhole at the culvert end, a manhole energy loss approach (see Section <a href="Pipes-2.html#Manholes-3">1.10.4</a>) is used instead of the culvert’s contraction/expansion loss, and the above description does not apply.</p>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="XS-2.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="Special-Channels-2.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
  "sharing": {
    "github": true,
    "facebook": true,
    "twitter": true,
    "linkedin": true,
    "weibo": false,
    "instapaper": false,
    "vk": false,
    "whatsapp": false,
    "all": false
  },
  "fontsettings": false,
  "edit": null,
  "history": {
    "link": null,
    "text": null
  },
  "view": {
    "link": null,
    "text": null
  },
  "download": null,
  "search": {
    "engine": "fuse",
    "options": null
  },
  "toc": {
    "collapse": "section"
  }
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
