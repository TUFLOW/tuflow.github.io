<!DOCTYPE html> <html lang="en-US"> <head> <meta charset="UTF-8"> <meta http-equiv="X-UA-Compatible" content="IE=Edge"> <link rel="stylesheet" href="/classic-hpc/changelog/assets/css/just-the-docs-default.css"> <link rel="stylesheet" href="/classic-hpc/changelog/assets/css/just-the-docs-head-nav.css" id="jtd-head-nav-stylesheet"> <style id="jtd-nav-activation"> .site-nav > ul.nav-list:first-child > li > a, .site-nav > ul.nav-list:first-child > li > ul > li:not(:nth-child(1)) > a, .site-nav > ul.nav-list:first-child > li > ul > li > ul > li a { background-image: none; } .site-nav > ul.nav-list:not(:first-child) a, .site-nav li.external a { background-image: none; } .site-nav > ul.nav-list:first-child > li:nth-child(1) > ul > li:nth-child(1) > a { font-weight: 600; text-decoration: none; }.site-nav > ul.nav-list:first-child > li:nth-child(1) > button svg, .site-nav > ul.nav-list:first-child > li:nth-child(1) > ul > li:nth-child(1) > button svg { transform: rotate(-90deg); }.site-nav > ul.nav-list:first-child > li.nav-list-item:nth-child(1) > ul.nav-list, .site-nav > ul.nav-list:first-child > li.nav-list-item:nth-child(1) > ul.nav-list > li.nav-list-item:nth-child(1) > ul.nav-list { display: block; } </style> <script src="/classic-hpc/changelog/assets/js/vendor/lunr.min.js"></script> <script src="/classic-hpc/changelog/assets/js/just-the-docs.js"></script> <meta name="viewport" content="width=device-width, initial-scale=1"> <link rel="icon" href="/classic-hpc/changelog/assets/favicon/TUFLOW.ico" type="image/x-icon"> <!-- Begin Jekyll SEO tag v2.8.0 --> <title>Changelog for 2025.1.0-rc | TUFLOW Classic/HPC Changelog</title> <meta name="generator" content="Jekyll v4.3.4" /> <meta property="og:title" content="Changelog for 2025.1.0-rc" /> <meta property="og:locale" content="en_US" /> <link rel="canonical" href="http://localhost:4000/classic-hpc/changelog/2025.1.0/" /> <meta property="og:url" content="http://localhost:4000/classic-hpc/changelog/2025.1.0/" /> <meta property="og:site_name" content="TUFLOW Classic/HPC Changelog" /> <meta property="og:type" content="website" /> <meta name="twitter:card" content="summary" /> <meta property="twitter:title" content="Changelog for 2025.1.0-rc" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"WebPage","headline":"Changelog for 2025.1.0-rc","publisher":{"@type":"Organization","logo":{"@type":"ImageObject","url":"http://localhost:4000/classic-hpc/changelog/assets/logo/tuflow_changelog_logo.png"}},"url":"http://localhost:4000/classic-hpc/changelog/2025.1.0/"}</script> <!-- End Jekyll SEO tag --> </head> <body> <a class="skip-to-main" href="#main-content">Skip to main content</a> <svg xmlns="http://www.w3.org/2000/svg" class="d-none"> <symbol id="svg-link" viewBox="0 0 24 24"> <title>Link</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-link"> <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path> </svg> </symbol> <symbol id="svg-menu" viewBox="0 0 24 24"> <title>Menu</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"> <line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line> </svg> </symbol> <symbol id="svg-arrow-right" viewBox="0 0 24 24"> <title>Expand</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-right"> <polyline points="9 18 15 12 9 6"></polyline> </svg> </symbol> <!-- Feather. MIT License: https://github.com/feathericons/feather/blob/master/LICENSE --> <symbol id="svg-external-link" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-external-link"> <title id="svg-external-link-title">(external link)</title> <path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path><polyline points="15 3 21 3 21 9"></polyline><line x1="10" y1="14" x2="21" y2="3"></line> </symbol> <symbol id="svg-doc" viewBox="0 0 24 24"> <title>Document</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file"> <path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"></path><polyline points="13 2 13 9 20 9"></polyline> </svg> </symbol> <symbol id="svg-search" viewBox="0 0 24 24"> <title>Search</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-search"> <circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line> </svg> </symbol> <!-- Bootstrap Icons. MIT License: https://github.com/twbs/icons/blob/main/LICENSE.md --> <symbol id="svg-copy" viewBox="0 0 16 16"> <title>Copy</title> <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-clipboard" viewBox="0 0 16 16"> <path d="M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1h1a1 1 0 0 1 1 1V14a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V3.5a1 1 0 0 1 1-1h1v-1z"/> <path d="M9.5 1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5h3zm-3-1A1.5 1.5 0 0 0 5 1.5v1A1.5 1.5 0 0 0 6.5 4h3A1.5 1.5 0 0 0 11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3z"/> </svg> </symbol> <symbol id="svg-copied" viewBox="0 0 16 16"> <title>Copied</title> <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-clipboard-check-fill" viewBox="0 0 16 16"> <path d="M6.5 0A1.5 1.5 0 0 0 5 1.5v1A1.5 1.5 0 0 0 6.5 4h3A1.5 1.5 0 0 0 11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3Zm3 1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5h3Z"/> <path d="M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1A2.5 2.5 0 0 1 9.5 5h-3A2.5 2.5 0 0 1 4 2.5v-1Zm6.854 7.354-3 3a.5.5 0 0 1-.708 0l-1.5-1.5a.5.5 0 0 1 .708-.708L7.5 10.793l2.646-2.647a.5.5 0 0 1 .708.708Z"/> </svg> </symbol> </svg> <div class="side-bar"> <div class="site-header" role="banner"> <a href="/classic-hpc/changelog/" class="site-title lh-tight"> <div class="site-logo" role="img" aria-label="TUFLOW Classic/HPC Changelog"></div> </a> <button id="menu-button" class="site-button btn-reset" aria-label="Toggle menu" aria-pressed="false"> <svg viewBox="0 0 24 24" class="icon" aria-hidden="true"><use xlink:href="#svg-menu"></use></svg> </button> </div> <nav aria-label="Main" id="site-nav" class="site-nav"> <ul class="nav-list"><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in TUFLOW Classic HPC Changelogs category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/classic-hpc/changelog/" class="nav-list-link">TUFLOW Classic HPC Changelogs</a><ul class="nav-list"><li class="nav-list-item"><a href="/classic-hpc/changelog/2025.1.0/" class="nav-list-link">Changelog for 2025.1.0-rc</a></li><li class="nav-list-item"><a href="/classic-hpc/changelog/2025.0.3/" class="nav-list-link">Changelog for 2025.0.3</a></li><li class="nav-list-item"><a href="/classic-hpc/changelog/2025.0.2/" class="nav-list-link">Changelog for 2025.0.2</a></li><li class="nav-list-item"><a href="/classic-hpc/changelog/2025.0.1/" class="nav-list-link">Changelog for 2025.0.1</a></li><li class="nav-list-item"><a href="/classic-hpc/changelog/2025.0.0/" class="nav-list-link">Changelog for 2025.0.0</a></li></ul></li></ul> </nav> <footer class="site-footer"> &copy; 2025 BMT. All rights reserved.<br> Last edited: 2025-04-17</footer> </div> <div class="main" id="top"> <div id="main-header" class="main-header"> <div class="search" role="search"> <div class="search-input-wrap"> <input type="text" id="search-input" class="search-input" tabindex="0" placeholder="Search TUFLOW Classic/HPC Changelog" aria-label="Search TUFLOW Classic/HPC Changelog" autocomplete="off"> <label for="search-input" class="search-label"><svg viewBox="0 0 24 24" class="search-icon"><use xlink:href="#svg-search"></use></svg></label> </div> <div id="search-results" class="search-results"></div> </div> </div> <div class="main-content-wrap"> <nav aria-label="Breadcrumb" class="breadcrumb-nav"> <ol class="breadcrumb-nav-list"> <li class="breadcrumb-nav-list-item"><a href="/classic-hpc/changelog/">TUFLOW Classic HPC Changelogs</a></li> <li class="breadcrumb-nav-list-item"><span>Changelog for 2025.1.0-rc</span></li> </ol> </nav> <div id="main-content" class="main-content"> <main> <blockquote class="release-candidate"> <p><strong>This is an interim changelog that accompanies the TUFLOW 2025.1.0-rc.1 release candidate. The information contained within this interim version may vary from the subsequent final version.</strong></p> </blockquote> <h1 id="changelog-for-tuflow-202510-rc"> <a href="#changelog-for-tuflow-202510-rc" class="anchor-heading" aria-labelledby="changelog-for-tuflow-202510-rc"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Changelog for TUFLOW 2025.1.0-rc </h1> <p>Release date: 17 Apr 2025</p> <p>Build version: 2025.1.0-rc.1</p> <ol id="markdown-toc"> <li><a href="#general-notes" id="markdown-toc-general-notes">General Notes</a></li> <li><a href="#backwards-compatibility" id="markdown-toc-backwards-compatibility">Backwards Compatibility</a></li> <li><a href="#new-features-and-enhancements" id="markdown-toc-new-features-and-enhancements">New Features and Enhancements</a> <ol> <li><a href="#porosity-removed-from-the-groundwater-horizontal-flux-calculation" id="markdown-toc-porosity-removed-from-the-groundwater-horizontal-flux-calculation">Porosity Removed from the Groundwater Horizontal Flux Calculation</a></li> <li><a href="#using-relative-saturation-for-groundwater-flux" id="markdown-toc-using-relative-saturation-for-groundwater-flux">Using Relative Saturation for Groundwater Flux</a></li> <li><a href="#soil-moisture-dependent-horizontal-conductivity" id="markdown-toc-soil-moisture-dependent-horizontal-conductivity">Soil Moisture Dependent Horizontal Conductivity</a></li> <li><a href="#new-hpc-infiltration-approach" id="markdown-toc-new-hpc-infiltration-approach">New HPC Infiltration Approach</a></li> <li><a href="#enhancement-to-sgs-sheet-flow-approach" id="markdown-toc-enhancement-to-sgs-sheet-flow-approach">Enhancement to SGS Sheet Flow Approach</a></li> </ol> </li> <li><a href="#bug-fixes" id="markdown-toc-bug-fixes">Bug Fixes</a> <ol> <li><a href="#domain-construction" id="markdown-toc-domain-construction">Domain Construction</a></li> <li><a href="#boundaries-and-links" id="markdown-toc-boundaries-and-links">Boundaries and Links</a></li> <li><a href="#1d-network-domains--external" id="markdown-toc-1d-network-domains--external">1D Network Domains – External</a></li> <li><a href="#1d-network-domains--epa-swmm" id="markdown-toc-1d-network-domains--epa-swmm">1D Network Domains – EPA SWMM</a></li> <li><a href="#1d-network-domains--estry" id="markdown-toc-1d-network-domains--estry">1D Network Domains – ESTRY</a></li> <li><a href="#outputs-and-check-files" id="markdown-toc-outputs-and-check-files">Outputs and Check Files</a></li> </ol> </li> </ol> <h2 id="general-notes"> <a href="#general-notes" class="anchor-heading" aria-labelledby="general-notes"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> General Notes </h2> <p>The <code class="language-plaintext highlighter-rouge">2025.1.0</code> release is a minor release that contains a number of enhancements and bug fixes. The enhancements include updates to groundwater flow, HPC infiltration drying approach, and sheet flow in models using SGS.</p> <p>Note, many enhancements override existing methods and can cause changes in results. Therefore, they are <strong>not turned on by default</strong> in the <code class="language-plaintext highlighter-rouge">2025.1.0</code> release. This is to preserve backward compatibility (i.e. no changes in results) with previous 2025 releases. <strong>It is recommended that users consider using the new methods</strong> for new model builds, or for existing models where the new methods are appropriate and changes in results are acceptable. The recommended commands and their settings are:</p> <ul> <li><a href="https://docs.tuflow.com/classic-hpc/manual/2025.1/TCFCommands-1.html#tcfGroundwaterHorizontalFluxIncludePorosity"><tcmd>Groundwater Horizontal Flux Include Porosity</tcmd><teq> == </teq><tblk>OFF</tblk></a></li> <li><a href="https://docs.tuflow.com/classic-hpc/manual/2025.1/TCFCommands-1.html#tcfGroundwaterVerticalFluxModel"><tcmd>Groundwater Vertical Flux Model</tcmd><teq> == </teq><tblk>Darcy's Law | 2</tblk></a></li> <li><a href="https://docs.tuflow.com/classic-hpc/manual/2025.1/TCFCommands-1.html#tcfGroundwaterHorizontalFluxModel"><tcmd>Groundwater Horizontal Flux Model</tcmd><teq> == </teq><tblk>Soil Moisture Dependent</tblk></a></li> <li><a href="https://docs.tuflow.com/classic-hpc/manual/2025.1/TCFCommands-1.html#tcfHPCInfiltrationDryingApproach"><tcmd>HPC Infiltration Drying Approach</tcmd><teq> == </teq><tblk>Method C</tblk></a></li> <li><a href="https://docs.tuflow.com/classic-hpc/manual/2025.1/TCFCommands-1.html#tcfSGSSheetFlowApproach"><tcmd>SGS Sheet Flow Approach</tcmd><teq> == </teq><tblk>Method B</tblk></a></li> <li><a href="https://docs.tuflow.com/classic-hpc/manual/2025.1/TCFCommands-1.html#tcfSGSGradientLimiter"><tcmd>SGS Gradient Limiter</tcmd><teq> == </teq><tblk>Method B</tblk></a></li> </ul> <h2 id="backwards-compatibility"> <a href="#backwards-compatibility" class="anchor-heading" aria-labelledby="backwards-compatibility"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Backwards Compatibility </h2> <p>It is not expected that the <code class="language-plaintext highlighter-rouge">2025.1.0</code> release would cause changes in results if upgrading from any of the prior 2025 releases except for the specifics of the <a href="#bug-fixes">bug fixes</a> listed below. However, as always, it is recommended that when switching to a new minor or major build with an established model, test runs are carried out and comparisons made between the old and new builds e.g. subtracting the two maximum water level (h) data sets and reviewing any differences.</p> <h2 id="new-features-and-enhancements"> <a href="#new-features-and-enhancements" class="anchor-heading" aria-labelledby="new-features-and-enhancements"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> New Features and Enhancements </h2> <h3 id="porosity-removed-from-the-groundwater-horizontal-flux-calculation"> <a href="#porosity-removed-from-the-groundwater-horizontal-flux-calculation" class="anchor-heading" aria-labelledby="porosity-removed-from-the-groundwater-horizontal-flux-calculation"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Porosity Removed from the Groundwater Horizontal Flux Calculation </h3> <p>The option to remove the porosity term from the horizontal groundwater flux calculation has been added to HPC. Note <code class="language-plaintext highlighter-rouge">ON</code> is the default option in the <code class="language-plaintext highlighter-rouge">2025.1.0</code> release for backwards compatibility.</p> <blockquote class="tcf-command"> <p><a href="https://docs.tuflow.com/classic-hpc/manual/2025.1/TCFCommands-1.html#tcfGroundwaterHorizontalFluxIncludePorosity"><tcmd>Groundwater Horizontal Flux Include Porosity</tcmd><teq> == </teq><tblk>OFF</tblk></a></p> </blockquote> <h3 id="using-relative-saturation-for-groundwater-flux"> <a href="#using-relative-saturation-for-groundwater-flux" class="anchor-heading" aria-labelledby="using-relative-saturation-for-groundwater-flux"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Using Relative Saturation for Groundwater Flux </h3> <p>An option to reduce the groundwater flux based on the power function of relative saturation has been added to HPC. This feature can be applied to both the vertical flux and the horizontal flux, but the primary reason to implement this feature is to improve the timing of vertical infiltration in multi-soil layered models. The power exponent can be supplied globally by using the commands below by providing a second argument along side “Darcy’s Law”. A default value of zero (no adjustment) is used if no exponent is provided. See the <a href="https://docs.tuflow.com/classic-hpc/manual/2025.1/TwoD-Domains-1.html#AdjustKvh-5">TUFLOW User Manual</a> for more information.</p> <p>For models that specify one or two groundwater layer(s) for the root zone (0~1m deep), an <code class="language-plaintext highlighter-rouge">Exv</code> value of two was found to produce the best results in benchmarking tests.</p> <blockquote class="tcf-command"> <p><a href="https://docs.tuflow.com/classic-hpc/manual/2025.1/TCFCommands-1.html#tcfGroundwaterHorizontalFluxModel"><tcmd>Groundwater Horizontal Flux Model</tcmd><teq> == </teq><tblk>Darcy's Law | &lt;Exh&gt;</tblk></a><br /> <a href="https://docs.tuflow.com/classic-hpc/manual/2025.1/TCFCommands-1.html#tcfGroundwaterVerticalFluxModel"><tcmd>Groundwater Vertical Flux Model</tcmd><teq> == </teq><tblk>Darcy's Law | &lt;Exv&gt;</tblk></a></p> </blockquote> <p><img src="/classic-hpc/changelog/assets/2025-1-0/GW_power_function.png" alt="" /></p> <h3 class="d-inline-block" id="soil-moisture-dependent-horizontal-conductivity"> <a href="#soil-moisture-dependent-horizontal-conductivity" class="anchor-heading" aria-labelledby="soil-moisture-dependent-horizontal-conductivity"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Soil Moisture Dependent Horizontal Conductivity </h3> <p>An option to apply van Genuchten (1980)’s soil moisture dependent function (in place of Darcy’s Law) to adjust the horizontal hydraulic conductivity has been added to HPC. This feature is designed to improve the performance of variably saturated flow (VSF) simulation through the vadose zone. See the <a href="https://docs.tuflow.com/classic-hpc/manual/2025.1/TwoD-Domains-1.html#AdjustKvh-5">TUFLOW User Manual</a> for more information. Additionally, the <a href="https://www.tuflow.com/library/webinars/#dec2024_groundwater_modelling">Groundwater Modelling webinar</a> presents some of the testing and benefits of using a soil moisture dependent horizontal conductivity.</p> <blockquote class="tcf-command"> <p><a href="https://docs.tuflow.com/classic-hpc/manual/2025.1/TCFCommands-1.html#tcfGroundwaterHorizontalFluxModel"><tcmd>Groundwater Horizontal Flux Model</tcmd><teq> == </teq><tblk>Soil Moisture Dependent</tblk></a></p> </blockquote> <h3 id="new-hpc-infiltration-approach"> <a href="#new-hpc-infiltration-approach" class="anchor-heading" aria-labelledby="new-hpc-infiltration-approach"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> New HPC Infiltration Approach </h3> <p>A new HPC infiltration drying approach has been added to HPC to improve the stability of direct rainfall models using soil infiltration.</p> <blockquote class="tcf-command"> <p><a href="https://docs.tuflow.com/classic-hpc/manual/2025.1/TCFCommands-1.html#tcfHPCInfiltrationDryingApproach"><tcmd>HPC Infiltration Drying Approach</tcmd><teq> == </teq><tblk>Method C</tblk></a></p> </blockquote> <p>This approach allows the infiltration to occur below the wetting depth (set by the <a href="https://docs.tuflow.com/classic-hpc/manual/2025.1/TCFCommands-1.html#tcfCellWetDryDepth"><tcmd>Cell Wet/Dry Depth</tcmd></a> command), until the depth reaches the drying depth (defined as 0.0001 m below the wetting depth in HPC). This new method prevents cells from repeatedly alternating between dry and wet states when the applied rainfall rate is less than the infiltration rate, and can improve the stability in both SGS and non-SGS models.</p> <p>Note, the default approach is still <code class="language-plaintext highlighter-rouge">Method A</code> for non-SGS model and <code class="language-plaintext highlighter-rouge">Method B</code> for SGS models in the <code class="language-plaintext highlighter-rouge">2025.1.0</code> release for backwards compatibility.</p> <p><img src="/classic-hpc/changelog/assets/2025-1-0/infiltration_wet_dry_depth.png" alt="" /></p> <h3 id="enhancement-to-sgs-sheet-flow-approach"> <a href="#enhancement-to-sgs-sheet-flow-approach" class="anchor-heading" aria-labelledby="enhancement-to-sgs-sheet-flow-approach"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Enhancement to SGS Sheet Flow Approach </h3> <p>Two new approaches (working in conjunction) have been implemented to improve how sheet flow is handled in models using SGS. The new methods can significantly improve the prediction of velocity magnitude and direction for cells experiencing sheet flow.</p> <p>Note, if these new methods are being used, they should be used in conjunction. Additionally, it has been noticed that they can affect the cell size convergence in direct rainfall models, therefore it is recommended to perform cell size sensitivity.</p> <p>The new methods are described below the commands.</p> <blockquote class="tcf-command"> <p><a href="https://docs.tuflow.com/classic-hpc/manual/2025.1/TCFCommands-1.html#tcfSGSSheetFlowApproach"><tcmd>SGS Sheet Flow Approach</tcmd><teq> == </teq><tblk>Method B</tblk></a><br /> <a href="https://docs.tuflow.com/classic-hpc/manual/2025.1/TCFCommands-1.html#tcfSGSGradientLimiter"><tcmd>SGS Gradient Limiter</tcmd><teq> == </teq><tblk>Method B</tblk></a></p> </blockquote> <h4 id="sgs-sheet-flow-approach-method-b"> <a href="#sgs-sheet-flow-approach-method-b" class="anchor-heading" aria-labelledby="sgs-sheet-flow-approach-method-b"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> SGS Sheet Flow Approach Method B </h4> <p><code class="language-plaintext highlighter-rouge">Method B</code> (the new method) checks whether cells in SGS models are being subjected to sheet flow conditions or not, and it will adjust the depth used in the bed friction calculation accordingly. Sheet flow conditions often occur in direct rainfall models on steep slopes where water can form a thin layer of flow. <code class="language-plaintext highlighter-rouge">Method A</code> (the default) assumes water fills up from the bottom of the cell, and will use the <strong><em>depth above minimum cell elevation</em></strong> in the bed friction calculation. <code class="language-plaintext highlighter-rouge">Method B</code> applies <strong><em>cell averaged depth</em></strong> for sheet flow cells instead to avoid the overestimation of the bed friction at these cells. Note, the new approach does not affect non-sheet flow cells and <code class="language-plaintext highlighter-rouge">Method A</code> is still the default approach in the <code class="language-plaintext highlighter-rouge">2025.1.0</code> release for backwards compatibility.</p> <p><img src="/classic-hpc/changelog/assets/2025-1-0/sheet_flow_depth.png" alt="" /></p> <h4 id="sgs-gradient-limiter-method-b"> <a href="#sgs-gradient-limiter-method-b" class="anchor-heading" aria-labelledby="sgs-gradient-limiter-method-b"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> SGS Gradient Limiter Method B </h4> <p><code class="language-plaintext highlighter-rouge">Method B</code> (the new method) has fixed an issue where the water level gradient limiter could be overestimated for SGS models in cells experiencing sheet flow. This could, in turn, affect the water surface gradient term in the momentum equation. Note, <code class="language-plaintext highlighter-rouge">Method A</code> is the default approach in <code class="language-plaintext highlighter-rouge">2025.1.0</code> release for backwards compatibility.</p> <h2 id="bug-fixes"> <a href="#bug-fixes" class="anchor-heading" aria-labelledby="bug-fixes"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Bug Fixes </h2> <h3 id="domain-construction"> <a href="#domain-construction" class="anchor-heading" aria-labelledby="domain-construction"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Domain Construction </h3> <ul> <li>Not a number (NaN) values in grid inputs are now always treated as “no data values”. Previously, NaNs anywhere in the grid input could lead to <a href="https://wiki.tuflow.com/TUFLOW_Message_2445">ERROR 2445</a>.</li> </ul> <h3 id="boundaries-and-links"> <a href="#boundaries-and-links" class="anchor-heading" aria-labelledby="boundaries-and-links"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Boundaries and Links </h3> <ul> <li>Fixed a bug when reading in a NetCDF rainfall grid that did not use the lower left corner as the origin. The rainfall data could be incorrectly flipped by TUFLOW depending on where the origin was set. The origin can now be defined as any of the grid corners.</li> <li>Fixed a bug where the <code class="language-plaintext highlighter-rouge">d</code> attribute representing the maximum depth for a generated HQ curve was being ignored for HPC. This value is now applied correctly allowing the user to extend HQ curves as needed. This did not affect Quadtree or Classic models.</li> <li>Fixed a bug when reading rainfall CSV files that contained rows that were over 100,000 characters wide. This could potentially lead to missing data later in the simulation and cause <a href="https://wiki.tuflow.com/TUFLOW_Message_0141">ERROR 0141</a>.</li> <li>Fixed a bug where the HPC solver would report a runtime memory error when a <code class="language-plaintext highlighter-rouge">GT</code> boundary was used without activating the horizontal advection component of the groundwater flow (which is a requirement for <code class="language-plaintext highlighter-rouge">GT</code> boundaries to propagate water). <a href="https://wiki.tuflow.com/TUFLOW_Message_2936">WARNING 2936</a> is now reported during model initialisation in these situations and the <code class="language-plaintext highlighter-rouge">GT</code> boundary is not applied.</li> </ul> <h3 id="1d-network-domains--external"> <a href="#1d-network-domains--external" class="anchor-heading" aria-labelledby="1d-network-domains--external"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 1D Network Domains – External </h3> <ul> <li>Fixed a bug when using a <code class="language-plaintext highlighter-rouge">1d_x1d</code> layer in GPKG format that could incorrectly cause <a href="https://wiki.tuflow.com/TUFLOW_Message_0310">ERROR 0310</a> and <a href="https://wiki.tuflow.com/TUFLOW_Message_0253">ERROR 0253</a></li> </ul> <h3 id="1d-network-domains--epa-swmm"> <a href="#1d-network-domains--epa-swmm" class="anchor-heading" aria-labelledby="1d-network-domains--epa-swmm"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 1D Network Domains – EPA SWMM </h3> <ul> <li>Fixed a bug that could occur when a relatively large initial timestep was specified compared to the SWMM output interval. It is anticipated that the setup would only occur rarely since output intervals are typically much larger than timesteps. This situation is now handled appropriately.</li> <li>Fixed a bug that caused TUFLOW-SWMM to report an error if pipe elevations were provided as “elevations” rather than “offsets” and the elevation values were below zero. This is not valid when using elevation offsets but valid when using absolute elevations.</li> </ul> <h3 id="1d-network-domains--estry"> <a href="#1d-network-domains--estry" class="anchor-heading" aria-labelledby="1d-network-domains--estry"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 1D Network Domains – ESTRY </h3> <ul> <li>Fixed an issue where inactivated portions of a cross-section were used in conveyance calculations leading to decreases in conveyance with height and likely instabilities.</li> </ul> <h3 id="outputs-and-check-files"> <a href="#outputs-and-check-files" class="anchor-heading" aria-labelledby="outputs-and-check-files"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Outputs and Check Files </h3> <ul> <li>Fixed a bug where WLL TIN’s were not being generated correctly when the number of <code class="language-plaintext highlighter-rouge">1d_nwk</code> + <code class="language-plaintext highlighter-rouge">1d_pit</code> input layers exceeded 100. This limit has been removed except when using the command <a href="https://docs.tuflow.com/classic-hpc/manual/2025.1/TCFCommands-1.html#tcfMeshparts"><tcmd>Meshparts</tcmd><teq> == </teq><tblk>ON</tblk></a> (meshparts is off by default). When meshparts is on, the 100 input file limit is enforced with <a href="https://wiki.tuflow.com/TUFLOW_Message_1464">ERROR 1464</a>.</li> <li>Fixed a bug where long profile (<code class="language-plaintext highlighter-rouge">2d_lp</code>) plot output results tended to be stretched horizontally relative to the original polylines. The methodology was updated so the distances in the plot and the polyline would track better. The issue was most noticeable for Quadtree models and LP polylines that spanned multiple grid levels.</li> <li>Fixed a bug where cells that remain dry throughout the simulation had a large negative value reported in the times output in the .TMO format, instead of a null value.</li> </ul> </main> <hr> <footer> <p><a href="#top" id="back-to-top">Back to top</a></p> <footer class="page-footer"> <small></small> </footer> </footer> </div> </div> <div class="search-overlay"></div> </div> </body> </html>
